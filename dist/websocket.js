/*! For license information please see websocket.js.LICENSE.txt */
(()=>{"use strict";var t={"./src/ArcSegment.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>c});var o,i=n("./src/Drawer.ts"),r=n("./node_modules/vector2d/src/Vec2D.js"),s=n("./src/Segment.ts"),a=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const c=function(t){function e(e,n,o,i,r,s){var a=t.call(this)||this;return a.center=e,a.radius=n,a.startAngle=o,a.endAngle=i,a.counterClockwise=r,a.isCollidable=s,a}return a(e,t),e.prototype.draw=function(t,e){t.lineCap="round",t.strokeStyle=e,1==this.isCollidable&&(t.beginPath(),t.arc(this.center.x,this.center.y,this.radius,this.startAngle,this.endAngle,this.counterClockwise),t.stroke(),t.closePath())},e.prototype.drawDebug=function(t,e){var n=this.counterClockwise?-Math.PI:Math.PI;n+=this.endAngle,t.lineCap="round",(0,i.drawDot)(this.center.x,this.center.y,5,"#000000"),(0,i.drawArrow)(t,new r.Vector(this.endPoint.x,this.endPoint.y),new r.Vector(this.endPoint.x+this.radius*Math.cos(n),this.endPoint.y+this.radius*Math.sin(n))),(0,i.drawArc)(this.center.x,this.center.y,this.radius,0,0,!1)},Object.defineProperty(e.prototype,"endPoint",{get:function(){return new r.Vector(this.center.x+this.radius*Math.cos(this.endAngle),this.center.y+this.radius*Math.sin(this.endAngle))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"penpendicularEndAngle",{get:function(){return this.isCounterClockwise?this.endAngle-Math.PI/2:this.endAngle+Math.PI/2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"penpendicularStartAngle",{get:function(){return this.isCounterClockwise?this.startAngle-Math.PI/2:this.startAngle+Math.PI/2},enumerable:!1,configurable:!0}),e.prototype.isCounterClockwise=function(){return this.counterClockwise},e.prototype.getContinuingSegment=function(t){return new e(this.center.clone().add(t),this.radius,this.endAngle,this.endAngle,this.counterClockwise,this.isCollidable)},e}(s.default)},"./src/Drawer.ts":(t,e,n)=>{n.r(e),n.d(e,{drawArc:()=>a,drawArrow:()=>c,drawDot:()=>s,drawGrid:()=>r});var o=n("./node_modules/vector2d/src/Vec2D.js"),i=n("./src/index.ts");function r(){i.backgroundCanvasCtx.clearRect(0,0,i.backgroundCanvas.width,i.backgroundCanvas.height),i.backgroundCanvasCtx.strokeStyle="rgba(0, 0, 0, 0.3)",i.backgroundCanvasCtx.lineWidth=2;for(var t=i.gridSize;t<i.backgroundCanvas.width;t+=i.gridSize)i.backgroundCanvasCtx.beginPath(),i.backgroundCanvasCtx.moveTo(t,0),i.backgroundCanvasCtx.lineTo(t,i.backgroundCanvas.height),i.backgroundCanvasCtx.stroke();for(var e=i.gridSize;e<i.backgroundCanvas.height;e+=i.gridSize)i.backgroundCanvasCtx.beginPath(),i.backgroundCanvasCtx.moveTo(0,e),i.backgroundCanvasCtx.lineTo(i.backgroundCanvas.width,e),i.backgroundCanvasCtx.stroke()}function s(t,e,n,o){i.backgroundCanvasCtx.beginPath(),i.backgroundCanvasCtx.arc(t,e,n,0,2*Math.PI,!1),i.backgroundCanvasCtx.fillStyle=o,i.backgroundCanvasCtx.fill(),i.backgroundCanvasCtx.closePath()}function a(t,e,n,o,r,s){i.backgroundCanvasCtx.lineCap="round",i.backgroundCanvasCtx.strokeStyle="#3466aa",i.backgroundCanvasCtx.beginPath(),i.backgroundCanvasCtx.arc(t,e,n,0,2*Math.PI,s),i.backgroundCanvasCtx.lineWidth=5,i.backgroundCanvasCtx.stroke(),i.backgroundCanvasCtx.closePath()}function c(t,e,n){if(e.x!=n.x&&e.y!=n.y){var i=Math.atan2(n.y-e.y,n.x-e.x),r=10,s=new o.Vector(n.x,n.y);s.x-=11.5*Math.cos(i),s.y-=11.5*Math.sin(i),t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(s.x,s.y),t.strokeStyle="#bbbbbb",t.lineWidth=10,t.stroke(),t.beginPath(),t.moveTo(s.x,s.y),t.lineTo(s.x-r*Math.cos(i-Math.PI/7),s.y-r*Math.sin(i-Math.PI/7)),t.lineTo(s.x-r*Math.cos(i+Math.PI/7),s.y-r*Math.sin(i+Math.PI/7)),t.lineTo(s.x,s.y),t.lineTo(s.x-r*Math.cos(i-Math.PI/7),s.y-r*Math.sin(i-Math.PI/7)),t.strokeStyle="#bbbbbb",t.lineWidth=10,t.stroke(),t.fillStyle="#bbbbbb",t.fill(),t.closePath()}}},"./src/InputManager.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>i});var o=n("./src/WebSocketClient/websocket.ts");const i=function(){function t(t,e,n){this.keyMap={},window.addEventListener("keydown",this.onKeyDown.bind(this)),window.addEventListener("keyup",this.onKeyUp.bind(this)),this.snake=t,this.leftKey=e,this.rightKey=n}return t.prototype.onKeyDown=function(t){if(this.snake.isAlive){var e=t.key.toUpperCase();if(e==this.leftKey||e==this.rightKey){if(this.keyMap[this.rightKey]&&e==this.leftKey)this.keyMap[this.rightKey]=!1;else if(this.keyMap[this.leftKey]&&e==this.rightKey)this.keyMap[this.leftKey]=!1;else if(this.keyMap[e])return;this.keyMap[e]=!0,this.snake.head.endPoint,(0,o.sendKeyEventToServer)(e==this.rightKey?"right":"left",!0)}}},t.prototype.onKeyUp=function(t){if(this.snake.isAlive){var e=t.key.toUpperCase();this.keyMap[e]&&(this.keyMap[e]=!1,(0,o.sendKeyEventToServer)(e==this.rightKey?"right":"left",!1))}},t.prototype.dispose=function(){window.removeEventListener("keydown",this.onKeyDown.bind(this)),window.removeEventListener("keyup",this.onKeyUp.bind(this))},t}()},"./src/LineSegment.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var o,i=n("./src/Segment.ts"),r=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const s=function(t){function e(e,n,o,i){var r=t.call(this)||this;return r.isCollidable=!0,r.startPoint=e,r.endPoint=n,r.isCollidable=o,r.endAngle=i,r}return r(e,t),e.prototype.draw=function(t,e){t.strokeStyle=e,t.lineCap="round",1==this.isCollidable&&(t.beginPath(),t.moveTo(this.startPoint.x,this.startPoint.y),t.lineTo(this.endPoint.x,this.endPoint.y),t.stroke(),t.closePath())},e.prototype.calcEndAngle=function(){return Math.atan((this.endPoint.y-this.startPoint.y)/(this.endPoint.x-this.startPoint.x))},Object.defineProperty(e.prototype,"length",{get:function(){return Math.sqrt(Math.pow(this.startPoint.x-this.endPoint.x,2)+Math.pow(this.startPoint.y-this.endPoint.y,2))},enumerable:!1,configurable:!0}),e.prototype.getContinuingSegment=function(t){var n=this.endPoint.clone().add(t);return new e(n,n,this.isCollidable,this.endAngle)},e}(i.default)},"./src/MenuManager/login.ts":(t,e,n)=>{n.r(e),n.d(e,{currentPlayer:()=>a,currentRoom:()=>s,handleReadyState:()=>P,handleRoomAction:()=>w,showErrorAnimation:()=>M,showRoomView:()=>S,switchGameView:()=>E,updateButton:()=>C,updateColorPicker:()=>_,updatePlayerColor:()=>O,updateRoomList:()=>k});var o=n("./src/ViewModels/Player.ts"),i=n("./src/ViewModels/Room.ts"),r=n("./src/WebSocketClient/websocket.ts"),s=null,a=null,c=document.getElementById("roomCodeInput"),l=document.getElementById("usernameInput"),d=document.getElementById("joinButton"),u=document.getElementById("readyButton"),h=document.getElementById("login-div"),y=document.getElementById("room-div"),p=document.getElementById("game-canvas-container"),f=document.getElementById("color-picker"),g=document.getElementById("room-users-list"),m=document.getElementById("room-code"),v=document.getElementById("player-count"),b=document.getElementById("color-picker-container"),x=document.getElementById("start-progress-bar");function C(){""==l.value.trim()?d.disabled=!0:d.disabled=!1,5==c.value.trim().length?d.textContent="JOIN ROOM":d.textContent="CREATE ROOM"}function w(){var t=l.value;t&&(a=new o.Player(t),"CREATE ROOM"===d.innerText?(0,r.createRoom)(l.value):(0,r.joinRoom)(c.value.toUpperCase(),l.value))}function P(){a.isReady=!a.isReady,(0,r.setPlayerData)(a,s.getCode()),a.isReady?(u.classList.remove("red-button"),u.classList.add("green-button")):(u.classList.add("red-button"),u.classList.remove("green-button"))}function S(t){var e=JSON.parse(t.toString());s=new i.Room(e.room.code,e.room.host,e.room.players,e.room.maxSize),a.username==s.getHost().username&&document.getElementById("startButton").classList.remove("display-none"),b.style.backgroundColor=a.color,f.value=a.color,document.getElementById("color-label").style.color=A(f.value,"#FFFFFF","#000000"),h.classList.add("display-none"),y.classList.add("display-flex"),c.value=s.getCode(),m.innerHTML=s.getCode(),(0,r.setPlayerData)(a,s.getCode()),k(t)}function k(t){var e,n,o=JSON.parse(t.toString());s.setPlayers(o.room.players),s.setHost(o.room.host),s.setMaxSize(o.room.maxSize),v.innerHTML="".concat(Object.keys(s.getPlayers()).length,"/").concat(s.getMaxSize()),g.innerHTML="",Object.values(s.getPlayers()).forEach((function(t){var e=document.createElement("li");e.textContent=t.username+"",t.username==s.getHost().username?e.insertAdjacentHTML("afterbegin",'<i class="fa-solid fa-crown" style="color: '.concat(t.color,';"></i>')):e.insertAdjacentHTML("afterbegin",'<i class="fa-solid fa-circle" style="color: '.concat(t.color,'; margin-left: 4px"></i>')),t.isReady?e.insertAdjacentHTML("beforeend",' <i class="fa-solid fa-circle" style="color: #37cb48;"></i>'):e.insertAdjacentHTML("beforeend",' <i class="fa-solid fa-circle" style="color: #cb3737;"></i>'),g.appendChild(e)})),a.username==s.getHost().username&&document.getElementById("startButton").classList.remove("display-none"),e=Object.values(s.getPlayers()).filter((function(t){return t.isReady})).length,0!=(n=s.getMaxSize())&&(x.style.width=Math.floor(e/n*100)+"%")}function M(){d.classList.add("red-button"),d.classList.add("wiggle"),setTimeout((function(){d.classList.remove("red-button"),d.classList.remove("wiggle")}),600)}function _(){b.style.backgroundColor=f.value}function O(){a.color=f.value,document.getElementById("color-label").style.color=A(f.value,"#FFFFFF","#000000"),(0,r.setPlayerData)(a,s.getCode())}function A(t,e,n){var o="#"===t.charAt(0)?t.substring(1,7):t,i=[parseInt(o.substring(0,2),16)/255,parseInt(o.substring(2,4),16)/255,parseInt(o.substring(4,6),16)/255].map((function(t){return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}));return.2126*i[0]+.7152*i[1]+.0722*i[2]>.4?n:e}function E(t){switch(t.state){case 0:s.setGameState(0),h.classList.add("display-none"),y.classList.add("display-none"),y.classList.remove("display-flex"),p.classList.remove("display-none"),p.classList.add("display-flex");break;case 1:s.setGameState(1),h.classList.add("display-none"),y.classList.add("display-flex"),p.classList.add("display-none")}}window.onload=function(){C()},window.updateButton=C,window.handleRoomAction=w,window.handleReadyState=P,window.updateColorPicker=_,window.updatePlayerColor=O,window.startGame=function(){a.username==s.getHost().username&&(0,r.sendStartCommand)(s.getCode())}},"./src/ParticleSystem/Emitter.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var o=n("./src/ParticleSystem/Particle.ts"),i=n("./src/ParticleSystem/ParticleSystemUtils.ts"),r=function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};const s=function(){function t(t,e,n,o,i,r,s,a,c,l,d){void 0===i&&(i="circle"),void 0===a&&(a=!0),void 0===c&&(c=!0),void 0===d&&(d=0),this.aliveParticles=[],this.ticks=0,this.position=t,this.emitTime=e,this.size=n,this.speed=o,this.shape=i,this.color=r,this.canvasCtx=s,this.fadeColor=a,this.fadeSize=c,this.particleMaxAge=l,this.emitTimeMillis=d}return t.prototype.tick=function(t){this.emitTimeMillis+this.particleMaxAge<0||(this.emitTimeMillis-=t,this.ticks%this.emitTime==0&&this.emitTimeMillis>0&&(this.aliveParticles.push(new o.default(this.position.clone(),(0,i.getRandomDirection)(),this.size,this.speed,this.shape,r({},this.color),this.canvasCtx,this.particleMaxAge,this.fadeColor,this.fadeSize)),this.aliveParticles.push(new o.default(this.position.clone(),(0,i.getRandomDirection)(),this.size,this.speed,this.shape,r({},this.color),this.canvasCtx,this.particleMaxAge,this.fadeColor,this.fadeSize)),this.aliveParticles.push(new o.default(this.position.clone(),(0,i.getRandomDirection)(),this.size,this.speed,this.shape,r({},this.color),this.canvasCtx,this.particleMaxAge,this.fadeColor,this.fadeSize))),this.aliveParticles.forEach((function(e){e.tick(t)})),this.aliveParticles=this.aliveParticles.filter((function(t){return t.age>0})),this.ticks++)},t.prototype.draw=function(){this.aliveParticles.forEach((function(t){t.draw()}))},t}()},"./src/ParticleSystem/Particle.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>o});const o=function(){function t(t,e,n,o,i,r,s,a,c,l){void 0===i&&(i="circle"),this.position=t,this.velocity=e,this.size=n,this.speed=o,this.shape=i,this.color=r,this.canvasCtx=s,this.fadeColor=c,this.fadeSize=l,this.age=a,this.colorFadeAmount=this.color.a/this.age,this.sizeFadeAmount=this.size/this.age}return t.prototype.tick=function(t){this.position.add(this.velocity.clone().multiplyByScalar(t*this.speed)),this.fadeColor&&(this.color.a-=this.colorFadeAmount),this.fadeSize&&(this.size-=this.sizeFadeAmount),this.age--},t.prototype.draw=function(){switch(this.canvasCtx.moveTo(this.position.x,this.position.y),this.canvasCtx.fillStyle="rgba(".concat(this.color.r,",").concat(this.color.g,", ").concat(this.color.b,", ").concat(this.color.a,")"),this.canvasCtx.beginPath(),this.shape){case"circle":this.canvasCtx.arc(this.position.x,this.position.y,this.size,0,2*Math.PI),this.canvasCtx.fill();break;case"square":this.canvasCtx.fillRect(this.position.x-this.size,this.position.y-this.size,2*this.size,2*this.size)}this.canvasCtx.closePath()},t}()},"./src/ParticleSystem/ParticleSystemUtils.ts":(t,e,n)=>{n.r(e),n.d(e,{getRandomDirection:()=>i,hexToRgb:()=>r});var o=n("./node_modules/vector2d/src/Vec2D.js");function i(){return new o.Vector(2*Math.random()-1,2*Math.random()-1)}function r(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}},"./src/Segment.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>o});const o=function(){}},"./src/Snake.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>l});var o=n("./node_modules/vector2d/src/Vec2D.js"),i=n("./src/ArcSegment.ts"),r=n("./src/LineSegment.ts"),s=n("./src/ParticleSystem/Emitter.ts"),a=n("./src/ParticleSystem/ParticleSystemUtils.ts"),c=function(){return c=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},c.apply(this,arguments)};const l=function(){function t(t,e,n){this.segments=[],this.isAlive=!0,this.turnRadius=60,this.emitter=null,this.distanceToChangeOfState=10,this.addSegment(t),this.color=e,this.canvasCtx=n}return t.prototype.addSegment=function(t){this.segments.push(t)},Object.defineProperty(t.prototype,"head",{get:function(){return this.segments.slice(-1).pop()},enumerable:!1,configurable:!0}),t.prototype.draw=function(){var t=this;this.canvasCtx.lineWidth=12,this.segments.forEach((function(e,n){e.draw(t.canvasCtx,t.color),t.head==e&&(e instanceof i.default?(t.canvasCtx.beginPath(),t.canvasCtx.arc(e.center.x,e.center.y,e.radius,e.endAngle,e.endAngle,e.isCounterClockwise()),t.canvasCtx.stroke(),t.canvasCtx.closePath()):e instanceof r.default&&(t.canvasCtx.beginPath(),t.canvasCtx.moveTo(e.endPoint.x,e.endPoint.y),t.canvasCtx.lineTo(e.endPoint.x,e.endPoint.y),t.canvasCtx.stroke(),t.canvasCtx.closePath()))}))},t.prototype.kill=function(){console.log("SNAKE DEAD"),this.isAlive=!1,this.emitter=new s.default(this.head.endPoint,1,7,4,"circle",c(c({},(0,a.hexToRgb)(this.color)),{a:1}),this.canvasCtx,!0,!0,70,4)},t.prototype.updateEmitter=function(t){this.emitter&&(this.emitter.tick(t),this.emitter.draw())},t.prototype.checkWalls=function(){var t=this.head;t.endPoint.x<0?this.addSegment(t.getContinuingSegment(new o.Vector(this.canvasCtx.canvas.width,0))):t.endPoint.x>this.canvasCtx.canvas.width&&this.addSegment(t.getContinuingSegment(new o.Vector(-this.canvasCtx.canvas.width,0))),t.endPoint.y<0?this.addSegment(t.getContinuingSegment(new o.Vector(0,this.canvasCtx.canvas.height))):t.endPoint.y>this.canvasCtx.canvas.height&&this.addSegment(t.getContinuingSegment(new o.Vector(0,-this.canvasCtx.canvas.height)))},t}()},"./src/ViewModels/Player.ts":(t,e,n)=>{n.r(e),n.d(e,{Player:()=>o});var o=function(){function t(t,e){void 0===e&&(e=!1),this.username=t,this.isReady=e,this.color="#000000".replace(/0/g,(function(){return(~~(16*Math.random())).toString(16)}))}return t.prototype.toJSON=function(){return{username:this.username,isReady:this.isReady,color:this.color}},t}()},"./src/ViewModels/Room.ts":(t,e,n)=>{n.r(e),n.d(e,{Room:()=>o});var o=function(){function t(t,e,n,o){void 0===o&&(o=5),this.players={},this.code=t,this.host=e,this.maxSize=o,null!=n?this.players=n:this.addPlayer(e)}return t.prototype.addPlayer=function(t){return!(Object.keys(this.players).length>=this.maxSize||(this.players[t.username]=t,0))},t.prototype.getCode=function(){return this.code},t.prototype.getPlayers=function(){return this.players},t.prototype.getHost=function(){return this.host},t.prototype.setHost=function(t){this.host=t},t.prototype.setPlayers=function(t){this.players=t},t.prototype.setMaxSize=function(t){this.maxSize=t},t.prototype.getMaxSize=function(){return this.maxSize},t.prototype.setGameState=function(t){this.gameState=t},t.prototype.getGameState=function(){return this.gameState},t}()},"./src/WebSocketClient/websocket.ts":(t,e,n)=>{n.r(e),n.d(e,{createRoom:()=>s,joinRoom:()=>a,sendKeyEventToServer:()=>l,sendStartCommand:()=>d,setPlayerData:()=>c});var o,i=n("./src/index.ts"),r=n("./src/MenuManager/login.ts");function s(t){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"CREATE_ROOM",username:t})):console.error("WebSocket connection is not open")}function a(t,e){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"JOIN_ROOM",roomCode:t,username:e})):console.error("WebSocket connection is not open")}function c(t,e){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"PLAYER_DATA",player:t,roomCode:e})):console.error("WebSocket connection is not open")}function l(t,e){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"KEY_EVENT",player:r.currentPlayer,key:t,pressed:e})):console.error("WebSocket connection is not open")}function d(t){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"BEGIN_GAME",roomCode:t})):console.error("WebSocket connection is not open")}(o=new WebSocket("ws://".concat(window.location.hostname,":8080"))).onopen=function(){console.log("WebSocket connection established")},o.onmessage=function(t){var e=JSON.parse(t.data);switch(console.log("Message from server:",e),e.type){case"JOINED_ROOM":(0,r.showRoomView)(t.data);break;case"ROOM_DOES_NOT_EXIST":(0,r.showErrorAnimation)();break;case"ROOM_DATA":(0,r.updateRoomList)(t.data);break;case"GAME_STATE":(0,r.switchGameView)(e);break;case"GAMEPLAY_DATA":(0,i.updateGameState)(e);break;case"ERROR":alert("Error: ".concat(e.message))}},o.onclose=function(){console.log("WebSocket connection closed")},o.onerror=function(t){console.error("WebSocket error:",t)}},"./src/index.ts":(t,e,n)=>{n.r(e),n.d(e,{backgroundCanvas:()=>y,backgroundCanvasCtx:()=>p,fps:()=>d,gameCanvas:()=>u,gameCanvasCtx:()=>h,gridSize:()=>f,updateGameState:()=>b});var o=n("./node_modules/vector2d/src/Vec2D.js"),i=n("./src/Drawer.ts"),r=n("./src/InputManager.ts"),s=n("./src/LineSegment.ts"),a=n("./src/Snake.ts"),c=n("./src/MenuManager/login.ts"),l=document.createElement("div");l.style.position="absolute",l.style.top="10px",l.style.left="10px",l.style.color="black",document.body.appendChild(l);var d=60,u=document.getElementById("game-canvas"),h=u.getContext("2d"),y=document.getElementById("background-canvas"),p=y.getContext("2d");y.width=y.getBoundingClientRect().width,y.height=y.getBoundingClientRect().height,u.width=u.getBoundingClientRect().width,u.height=u.getBoundingClientRect().height;var f=60;var g=0,m=performance.now()/10;window.addEventListener("resize",(function(){u.width=u.getBoundingClientRect().width,u.height=u.getBoundingClientRect().height,y.width=y.getBoundingClientRect().width,y.height=y.getBoundingClientRect().height,(0,i.drawGrid)()})),(0,i.drawGrid)();var v=!1;function b(t){v?t.snakeHeads.forEach((function(t){var e=t.lastSegment,n=t.username,i=e.endPoint,r=c.currentRoom.getPlayers()[n].snake;if(e.isNewThisTick)if("LineSegment"==t.segmentType){var a=e.startPoint;r.addSegment(new s.default(new o.Vector(a.x,a.y),new o.Vector(i.x,i.y),e.isCollidable,e.endAngle))}else t.segmentType;else a=e.startPoint,r.segments[r.segments.length-1]=new s.default(new o.Vector(a.x,a.y),new o.Vector(i.x,i.y),e.isCollidable,e.endAngle)})):(t.snakeHeads.forEach((function(t){var e=t.lastSegment,n=t.username,i=e.endPoint;c.currentRoom.getPlayers()[n].snake=new a.default(new s.default(new o.Vector(i.x,i.y),new o.Vector(i.x,i.y),e.isCollidable,e.endAngle),c.currentRoom.getPlayers()[n].color,h)})),new r.default(c.currentRoom.getPlayers()[c.currentPlayer.username].snake,"A","D"),v=!0),++g%10==0&&(d=function(){var t=performance.now()/10,e=t-m,n=Math.round(1e3/e);return m=t,n}(),l.innerText="FPS: ".concat(d)),h.clearRect(0,0,u.width,u.height),Object.values(c.currentRoom.getPlayers()).forEach((function(t){t.snake.draw()}))}},"./node_modules/vector2d/src/AbstractVector.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10],o=function(){function t(t){this.ctor=t}return t.prototype.setAxes=function(t,e){return this.x=t,this.y=e,this},t.prototype.getX=function(){return this.x},t.prototype.setX=function(t){return this.x=t,this},t.prototype.getY=function(){return this.y},t.prototype.setY=function(t){return this.y=t,this},t.prototype.toString=function(t){return void 0===t&&(t=!1),t?"("+Math.round(this.x)+", "+Math.round(this.y)+")":"("+this.x+", "+this.y+")"},t.prototype.toArray=function(){return[this.x,this.y]},t.prototype.toObject=function(){return{x:this.x,y:this.y}},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.multiplyByVector=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.mulV=function(t){return this.multiplyByVector(t)},t.prototype.divideByVector=function(t){return this.x/=t.x,this.y/=t.y,this},t.prototype.divV=function(t){return this.divideByVector(t)},t.prototype.multiplyByScalar=function(t){return this.x*=t,this.y*=t,this},t.prototype.mulS=function(t){return this.multiplyByScalar(t)},t.prototype.divideByScalar=function(t){return this.x/=t,this.y/=t,this},t.prototype.divS=function(t){return this.divideByScalar(t)},t.prototype.normalise=function(){return this.divideByScalar(this.magnitude())},t.prototype.normalize=function(){return this.normalise()},t.prototype.unit=function(){return this.normalise()},t.prototype.magnitude=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.length=function(){return this.magnitude()},t.prototype.lengthSq=function(){var t=this.x,e=this.y;return t*t+e*e},t.prototype.dot=function(t){return t.x*this.x+t.y*this.y},t.prototype.cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this},t.prototype.zero=function(){return this.x=this.y=0,this},t.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),o=this.x,i=this.y;return this.x=o*e-i*n,this.y=o*n+i*e,this},t.prototype.round=function(t){void 0===t&&(t=2);var e=n[t];return this.x=(.5+this.x*e<<0)/e,this.y=(.5+this.y*e<<0)/e,this},t.prototype.clone=function(){return new this.ctor(this.x,this.y)},t}();e.AbstractVector=o},"./node_modules/vector2d/src/ArrayVector.js":function(t,e,n){var o,i=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(n,o){var i=t.call(this,e)||this;return i.axes=[n,o],i.ctor=e,i}return i(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.axes[0]},set:function(t){this.axes[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.axes[1]},set:function(t){this.axes[1]=t},enumerable:!0,configurable:!0}),e}(n("./node_modules/vector2d/src/AbstractVector.js").AbstractVector);e.ArrayVector=r},"./node_modules/vector2d/src/Float32Vector.js":function(t,e,n){var o,i=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(n,o){var i=t.call(this,e)||this;return i.axes=new Float32Array(2),i.axes[0]=n,i.axes[1]=o,i}return i(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.axes[0]},set:function(t){this.axes[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.axes[1]},set:function(t){this.axes[1]=t},enumerable:!0,configurable:!0}),e}(n("./node_modules/vector2d/src/AbstractVector.js").AbstractVector);e.Float32Vector=r},"./node_modules/vector2d/src/Vec2D.js":(t,e,n)=>{function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),o(n("./node_modules/vector2d/src/AbstractVector.js")),o(n("./node_modules/vector2d/src/ArrayVector.js")),o(n("./node_modules/vector2d/src/Float32Vector.js")),o(n("./node_modules/vector2d/src/Vector.js"))},"./node_modules/vector2d/src/Vector.js":function(t,e,n){var o,i=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(n,o){var i=t.call(this,e)||this;return i._x=n,i._y=o,i}return i(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!0,configurable:!0}),e}(n("./node_modules/vector2d/src/AbstractVector.js").AbstractVector);e.Vector=r}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n("./src/WebSocketClient/websocket.ts")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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azovL3NuYWtlX2dhbWUvLi9zcmMvRHJhd2VyLnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvSW5wdXRNYW5hZ2VyLnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvTGluZVNlZ21lbnQudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9NZW51TWFuYWdlci9sb2dpbi50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL1BhcnRpY2xlU3lzdGVtL0VtaXR0ZXIudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9QYXJ0aWNsZVN5c3RlbS9QYXJ0aWNsZS50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL1BhcnRpY2xlU3lzdGVtL1BhcnRpY2xlU3lzdGVtVXRpbHMudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9TZWdtZW50LnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvU25ha2UudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9WaWV3TW9kZWxzL1BsYXllci50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL1ZpZXdNb2RlbHMvUm9vbS50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL1dlYlNvY2tldENsaWVudC93ZWJzb2NrZXQudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vbm9kZV9tb2R1bGVzL3ZlY3RvcjJkL3NyYy9BYnN0cmFjdFZlY3Rvci5qcyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vbm9kZV9tb2R1bGVzL3ZlY3RvcjJkL3NyYy9BcnJheVZlY3Rvci5qcyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vbm9kZV9tb2R1bGVzL3ZlY3RvcjJkL3NyYy9GbG9hdDMyVmVjdG9yLmpzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9ub2RlX21vZHVsZXMvdmVjdG9yMmQvc3JjL1ZlYzJELmpzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9ub2RlX21vZHVsZXMvdmVjdG9yMmQvc3JjL1ZlY3Rvci5qcyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NuYWtlX2dhbWUvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3NuYWtlX2dhbWUvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkcmF3QXJjLCBkcmF3QXJyb3csIGRyYXdEb3QgfSBmcm9tIFwiLi9EcmF3ZXJcIjtcclxuaW1wb3J0ICogYXMgVmVjMkQgZnJvbSAndmVjdG9yMmQnO1xyXG5pbXBvcnQgU2VnbWVudCBmcm9tIFwiLi9TZWdtZW50XCI7XHJcbmltcG9ydCB7IGdhbWVDYW52YXNDdHggfSBmcm9tIFwiLi9pbmRleFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXJjU2VnbWVudCBleHRlbmRzIFNlZ21lbnQge1xyXG5cclxuXHJcbiAgICBwdWJsaWMgY2VudGVyOiBWZWMyRC5WZWN0b3I7XHJcbiAgICBwdWJsaWMgcmFkaXVzOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgc3RhcnRBbmdsZTogbnVtYmVyO1xyXG4gICAgcHVibGljIGVuZEFuZ2xlOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGNvdW50ZXJDbG9ja3dpc2U6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgaXNDb2xsaWRhYmxlOiBib29sZWFuO1xyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihjZW50ZXI6IFZlYzJELlZlY3RvciwgcmFkaXVzOiBudW1iZXIsIHN0YXJ0QW5nbGU6IG51bWJlciwgZW5kQW5nbGU6IG51bWJlciwgY291bnRlckNsb2Nrd2lzZTogYm9vbGVhbiwgaXNDb2xsaWRhYmxlOiBib29sZWFuKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmNlbnRlciA9IGNlbnRlcjtcclxuICAgICAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cztcclxuICAgICAgICB0aGlzLnN0YXJ0QW5nbGUgPSBzdGFydEFuZ2xlO1xyXG4gICAgICAgIHRoaXMuZW5kQW5nbGUgPSBlbmRBbmdsZTtcclxuICAgICAgICB0aGlzLmNvdW50ZXJDbG9ja3dpc2UgPSBjb3VudGVyQ2xvY2t3aXNlO1xyXG4gICAgICAgIHRoaXMuaXNDb2xsaWRhYmxlID0gaXNDb2xsaWRhYmxlO1xyXG4gICAgICB9XHJcblxyXG5cclxuICAgIGRyYXcoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBjb2xvcjogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgY29udGV4dC5saW5lQ2FwID0gXCJyb3VuZFwiO1xyXG4gICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBjb2xvcjtcclxuICAgICAgICBpZiAodGhpcy5pc0NvbGxpZGFibGUgPT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuYXJjKHRoaXMuY2VudGVyLngsIHRoaXMuY2VudGVyLnksIHRoaXMucmFkaXVzLCB0aGlzLnN0YXJ0QW5nbGUsIHRoaXMuZW5kQW5nbGUsIHRoaXMuY291bnRlckNsb2Nrd2lzZSk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRyYXdEZWJ1Zyhjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGNvbG9yOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAvLyBjb250ZXh0LnN0cm9rZVN0eWxlID0gJyNmZjAwZmZmZidcclxuICAgICAgICBsZXQgdGFuZ2VudF9hbmdsZSA9IHRoaXMuY291bnRlckNsb2Nrd2lzZSA/LSBNYXRoLlBJICA6IE1hdGguUEk7XHJcblxyXG4gICAgICAgIHRhbmdlbnRfYW5nbGUgKz0gdGhpcy5lbmRBbmdsZTtcclxuICAgICAgICBjb250ZXh0LmxpbmVDYXAgPSBcInJvdW5kXCI7XHJcbiAgICAgICAgZHJhd0RvdCh0aGlzLmNlbnRlci54LCB0aGlzLmNlbnRlci55LCA1LCAnIzAwMDAwMCcpO1xyXG4gICAgICAgIGRyYXdBcnJvdyhjb250ZXh0LG5ldyBWZWMyRC5WZWN0b3IodGhpcy5lbmRQb2ludC54LHRoaXMuZW5kUG9pbnQueSksIG5ldyBWZWMyRC5WZWN0b3IodGhpcy5lbmRQb2ludC54ICsgdGhpcy5yYWRpdXMgKiBNYXRoLmNvcyh0YW5nZW50X2FuZ2xlKSx0aGlzLmVuZFBvaW50LnkgKyB0aGlzLnJhZGl1cyAqIE1hdGguc2luKHRhbmdlbnRfYW5nbGUpKSk7XHJcbiAgICAgICAgZHJhd0FyYyh0aGlzLmNlbnRlci54LCB0aGlzLmNlbnRlci55LCB0aGlzLnJhZGl1cywgMCwgMCwgZmFsc2UpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBnZXQgZW5kUG9pbnQoKTogVmVjMkQuVmVjdG9yIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzJELlZlY3RvcihcclxuICAgICAgICB0aGlzLmNlbnRlci54ICsgdGhpcy5yYWRpdXMgKiBNYXRoLmNvcyh0aGlzLmVuZEFuZ2xlKSxcclxuICAgICAgICB0aGlzLmNlbnRlci55ICsgdGhpcy5yYWRpdXMgKiBNYXRoLnNpbih0aGlzLmVuZEFuZ2xlKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHBlbnBlbmRpY3VsYXJFbmRBbmdsZSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzQ291bnRlckNsb2Nrd2lzZT8gdGhpcy5lbmRBbmdsZSAtIE1hdGguUEkgLzIgOiB0aGlzLmVuZEFuZ2xlICsgTWF0aC5QSSAvIDI7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHBlbnBlbmRpY3VsYXJTdGFydEFuZ2xlKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNDb3VudGVyQ2xvY2t3aXNlPyB0aGlzLnN0YXJ0QW5nbGUtIE1hdGguUEkgLzIgOiB0aGlzLnN0YXJ0QW5nbGUgKyBNYXRoLlBJIC8gMjtcclxuICAgIH1cclxuXHJcbiAgICBpc0NvdW50ZXJDbG9ja3dpc2UoKTogYm9vbGVhbntcclxuICAgICAgICByZXR1cm4gdGhpcy5jb3VudGVyQ2xvY2t3aXNlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENvbnRpbnVpbmdTZWdtZW50KHRyYW5zZm9ybTogVmVjMkQuVmVjdG9yKTogU2VnbWVudCB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBcmNTZWdtZW50KHRoaXMuY2VudGVyLmNsb25lKCkuYWRkKHRyYW5zZm9ybSkgYXMgVmVjMkQuVmVjdG9yLCB0aGlzLnJhZGl1cywgdGhpcy5lbmRBbmdsZSwgdGhpcy5lbmRBbmdsZSwgdGhpcy5jb3VudGVyQ2xvY2t3aXNlLCB0aGlzLmlzQ29sbGlkYWJsZSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwidmVjdG9yMmRcIjtcbmltcG9ydCB7IGJhY2tncm91bmRDYW52YXMsIGJhY2tncm91bmRDYW52YXNDdHgsIGdyaWRTaXplIH0gZnJvbSBcIi4vaW5kZXhcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdHcmlkKCkge1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguY2xlYXJSZWN0KDAsIDAsIGJhY2tncm91bmRDYW52YXMud2lkdGgsIGJhY2tncm91bmRDYW52YXMuaGVpZ2h0KTtcbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LnN0cm9rZVN0eWxlID0gJ3JnYmEoMCwgMCwgMCwgMC4zKSc7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5saW5lV2lkdGggPSAyO1xuICAgIGZvciAodmFyIHggPSBncmlkU2l6ZTsgeCA8IGJhY2tncm91bmRDYW52YXMud2lkdGg7IHggKz0gZ3JpZFNpemUpIHtcbiAgICAgICAgYmFja2dyb3VuZENhbnZhc0N0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgYmFja2dyb3VuZENhbnZhc0N0eC5tb3ZlVG8oeCwgMCk7XG4gICAgICAgIGJhY2tncm91bmRDYW52YXNDdHgubGluZVRvKHgsIGJhY2tncm91bmRDYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgYmFja2dyb3VuZENhbnZhc0N0eC5zdHJva2UoKTtcbiAgICB9XG4gICAgZm9yICh2YXIgeSA9IGdyaWRTaXplOyB5IDwgYmFja2dyb3VuZENhbnZhcy5oZWlnaHQ7IHkgKz0gZ3JpZFNpemUpIHtcbiAgICAgICAgYmFja2dyb3VuZENhbnZhc0N0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgYmFja2dyb3VuZENhbnZhc0N0eC5tb3ZlVG8oMCwgeSk7XG4gICAgICAgIGJhY2tncm91bmRDYW52YXNDdHgubGluZVRvKGJhY2tncm91bmRDYW52YXMud2lkdGgsIHkpO1xuICAgICAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LnN0cm9rZSgpO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdEb3QoZG90WDogbnVtYmVyLCBkb3RZOiBudW1iZXIsIGRvdFNpemU6IG51bWJlciwgY29sb3I6IHN0cmluZykge1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguYmVnaW5QYXRoKCk7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5hcmMoXG4gICAgICAgIGRvdFgsXG4gICAgICAgIGRvdFksXG4gICAgICAgIGRvdFNpemUsXG4gICAgICAgIDAsXG4gICAgICAgIDIgKiBNYXRoLlBJLFxuICAgICAgICBmYWxzZVxuICAgICk7XG5cbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguZmlsbCgpO1xuXG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5jbG9zZVBhdGgoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdBcmMoZG90WDogbnVtYmVyLCBkb3RZOiBudW1iZXIsIHJhZGl1czogbnVtYmVyLCBzdGFydEFuZ2xlOiBudW1iZXIsIGVuZEFuZ2xlOiBudW1iZXIsIGNvdW50ZXJDbG9ja3dpc2U6IGJvb2xlYW4pIHtcbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmxpbmVDYXAgPSBcInJvdW5kXCI7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5zdHJva2VTdHlsZSA9IFwiIzM0NjZhYVwiO1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguYmVnaW5QYXRoKCk7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5hcmMoZG90WCwgZG90WSwgcmFkaXVzLCAwLCAyICogTWF0aC5QSSwgY291bnRlckNsb2Nrd2lzZSk7XG5cbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmxpbmVXaWR0aCA9IDU7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5zdHJva2UoKTtcblxuICAgIGJhY2tncm91bmRDYW52YXNDdHguY2xvc2VQYXRoKCk7XG59XG5cblxuXG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3QXJyb3coY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGZyb206IFZlY3RvciwgdG86IFZlY3Rvcikge1xuICAgIGlmIChmcm9tLnggIT0gdG8ueCAmJiBmcm9tLnkgIT0gdG8ueSkge1xuICAgICAgICB2YXIgYW5nbGUgPSBNYXRoLmF0YW4yKHRvLnkgLSBmcm9tLnksIHRvLnggLSBmcm9tLngpO1xuICAgICAgICBjb25zdCB3aWR0aCA9IDEwO1xuICAgICAgICB2YXIgaGVhZExlbmd0aCA9IDEwO1xuICAgICAgICB2YXIgbmV3X3RvID0gbmV3IFZlY3Rvcih0by54LCB0by55KTtcbiAgICAgICAgLy8gVGhpcyBtYWtlcyBpdCBzbyB0aGUgZW5kIG9mIHRoZSBhcnJvdyBoZWFkIGlzIGxvY2F0ZWQgYXQgdG94LCB0b3ksIGRvbid0IGFzayB3aGVyZSAxLjE1IGNvbWVzIGZyb21cbiAgICAgICAgbmV3X3RvLnggLT0gTWF0aC5jb3MoYW5nbGUpICogKCh3aWR0aCAqIDEuMTUpKTtcbiAgICAgICAgbmV3X3RvLnkgLT0gTWF0aC5zaW4oYW5nbGUpICogKCh3aWR0aCAqIDEuMTUpKTtcblxuXG5cbiAgICAgICAgLy9zdGFydGluZyBwYXRoIG9mIHRoZSBhcnJvdyBmcm9tIHRoZSBzdGFydCBzcXVhcmUgdG8gdGhlIGVuZCBzcXVhcmUgYW5kIGRyYXdpbmcgdGhlIHN0cm9rZVxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5tb3ZlVG8oZnJvbS54LCBmcm9tLnkpO1xuICAgICAgICBjdHgubGluZVRvKG5ld190by54LCBuZXdfdG8ueSk7XG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IFwiI2JiYmJiYlwiO1xuICAgICAgICBjdHgubGluZVdpZHRoID0gd2lkdGg7XG4gICAgICAgIGN0eC5zdHJva2UoKTtcblxuICAgICAgICAvL3N0YXJ0aW5nIGEgbmV3IHBhdGggZnJvbSB0aGUgaGVhZCBvZiB0aGUgYXJyb3cgdG8gb25lIG9mIHRoZSBzaWRlcyBvZiB0aGUgcG9pbnRcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBjdHgubW92ZVRvKG5ld190by54LCBuZXdfdG8ueSk7XG4gICAgICAgIGN0eC5saW5lVG8obmV3X3RvLnggLSBoZWFkTGVuZ3RoICogTWF0aC5jb3MoYW5nbGUgLSBNYXRoLlBJIC8gNyksIG5ld190by55IC0gaGVhZExlbmd0aCAqIE1hdGguc2luKGFuZ2xlIC0gTWF0aC5QSSAvIDcpKTtcblxuICAgICAgICAvL3BhdGggZnJvbSB0aGUgc2lkZSBwb2ludCBvZiB0aGUgYXJyb3csIHRvIHRoZSBvdGhlciBzaWRlIHBvaW50XG4gICAgICAgIGN0eC5saW5lVG8obmV3X3RvLnggLSBoZWFkTGVuZ3RoICogTWF0aC5jb3MoYW5nbGUgKyBNYXRoLlBJIC8gNyksIG5ld190by55IC0gaGVhZExlbmd0aCAqIE1hdGguc2luKGFuZ2xlICsgTWF0aC5QSSAvIDcpKTtcblxuICAgICAgICAvL3BhdGggZnJvbSB0aGUgc2lkZSBwb2ludCBiYWNrIHRvIHRoZSB0aXAgb2YgdGhlIGFycm93LCBhbmQgdGhlbiBhZ2FpbiB0byB0aGUgb3Bwb3NpdGUgc2lkZSBwb2ludFxuICAgICAgICBjdHgubGluZVRvKG5ld190by54LCBuZXdfdG8ueSk7XG4gICAgICAgIGN0eC5saW5lVG8obmV3X3RvLnggLSBoZWFkTGVuZ3RoICogTWF0aC5jb3MoYW5nbGUgLSBNYXRoLlBJIC8gNyksIG5ld190by55IC0gaGVhZExlbmd0aCAqIE1hdGguc2luKGFuZ2xlIC0gTWF0aC5QSSAvIDcpKTtcblxuICAgICAgICAvL2RyYXdzIHRoZSBwYXRocyBjcmVhdGVkIGFib3ZlXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IFwiI2JiYmJiYlwiO1xuICAgICAgICBjdHgubGluZVdpZHRoID0gd2lkdGg7XG4gICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwiI2JiYmJiYlwiO1xuICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgfVxufSIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCJ2ZWN0b3IyZFwiO1xyXG5pbXBvcnQgQXJjU2VnbWVudCBmcm9tIFwiLi9BcmNTZWdtZW50XCI7XHJcbmltcG9ydCBMaW5lU2VnbWVudCBmcm9tIFwiLi9MaW5lU2VnbWVudFwiO1xyXG5pbXBvcnQgU25ha2UgZnJvbSBcIi4vU25ha2VcIjtcclxuaW1wb3J0IHsgc2VuZEtleUV2ZW50VG9TZXJ2ZXIgfSBmcm9tIFwiLi9XZWJTb2NrZXRDbGllbnQvd2Vic29ja2V0XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnB1dE1hbmFnZXIge1xyXG4gIHByaXZhdGUga2V5TWFwOiB7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfSA9IHt9O1xyXG4gIHByaXZhdGUgc25ha2U6IFNuYWtlO1xyXG4gIHByaXZhdGUgbGVmdEtleTogc3RyaW5nO1xyXG4gIHByaXZhdGUgcmlnaHRLZXk6IHN0cmluZztcclxuXHJcbiAgY29uc3RydWN0b3Ioc25ha2U6IFNuYWtlLCBsZWZ0S2V5OiBzdHJpbmcsIHJpZ2h0S2V5OiBzdHJpbmcpIHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5vbktleURvd24uYmluZCh0aGlzKSk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLm9uS2V5VXAuYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLnNuYWtlID0gc25ha2U7XHJcbiAgICB0aGlzLmxlZnRLZXkgPSBsZWZ0S2V5O1xyXG4gICAgdGhpcy5yaWdodEtleSA9IHJpZ2h0S2V5O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvbktleURvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuICAgIC8vaWYgc25ha2UgaXMgZGVhZCwgaWdub3JlIHRoZSBrZXkgcHJlc3Nlc1xyXG4gICAgaWYoIXRoaXMuc25ha2UuaXNBbGl2ZSkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGtleSA9IGV2ZW50LmtleS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgXHJcblxyXG4gICAgLy9pZ25vcmUga2V5cyBub3QgYXNzaWduZWQgdG8gc2VsZiwgdGhpcyB3b3VsZCByZXN1bHQgaW4gdGhlIGtleW1hcCBoYXZpbmcgdW5uZWNlc3Nhcnkga2V5cyBhbmQgdHJpZ2dlcmluZyB0aGUgb25rZXlVcCBldmVudHNcclxuICAgIGlmKGtleSAhPSB0aGlzLmxlZnRLZXkgJiYga2V5ICE9IHRoaXMucmlnaHRLZXkpe1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy9zd2l0Y2ggb2ZmIHRoZSBjdXJyZW50IGRvd24ga2V5IGlmIHRoZSBvdGhlciBkaXJlY3Rpb24gaXMgcHJlc3NlZFxyXG4gICAgaWYgKHRoaXMua2V5TWFwW3RoaXMucmlnaHRLZXldICYmIGtleSA9PSB0aGlzLmxlZnRLZXkpIHtcclxuICAgICAgdGhpcy5rZXlNYXBbdGhpcy5yaWdodEtleV0gPSBmYWxzZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRoaXMua2V5TWFwW3RoaXMubGVmdEtleV0gJiYga2V5ID09IHRoaXMucmlnaHRLZXkpIHtcclxuICAgICAgdGhpcy5rZXlNYXBbdGhpcy5sZWZ0S2V5XSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLy9yZXR1cm4gaWYgdGhlIGtleSBpcyBhbHJhZWR5IGluIHRoZSBtYXAsIHByZXZlbnRzIGF1dG9jbGlja2luZ1xyXG4gICAgZWxzZSBpZiAodGhpcy5rZXlNYXBba2V5XSkge1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIHRoaXMua2V5TWFwW2tleV0gPSB0cnVlO1xyXG5cclxuXHJcbiAgICBsZXQgaGVhZCA9IHRoaXMuc25ha2UuaGVhZDtcclxuICAgIGxldCBlbmRQb2ludCA9IGhlYWQuZW5kUG9pbnQ7XHJcbiAgICBsZXQgdGFuZ2VudEFuZ2xlID0gMDtcclxuXHJcblxyXG4gICAgc2VuZEtleUV2ZW50VG9TZXJ2ZXIoa2V5ID09IHRoaXMucmlnaHRLZXkgPyAncmlnaHQnIDogJ2xlZnQnLCB0cnVlKTtcclxuXHJcblxyXG4gICAgLy8gaWYgKGhlYWQgaW5zdGFuY2VvZiBMaW5lU2VnbWVudCkge1xyXG4gICAgLy8gICB0YW5nZW50QW5nbGUgKz0gTWF0aC5QSSAvIDI7XHJcblxyXG4gICAgLy8gICBpZiAoa2V5ID09IHRoaXMucmlnaHRLZXkpIHtcclxuXHJcbiAgICAvLyAgICAgdGhpcy5zbmFrZS5hZGRTZWdtZW50KG5ldyBBcmNTZWdtZW50KG5ldyBWZWN0b3IoXHJcbiAgICAvLyAgICAgICBlbmRQb2ludC54ICsgdGhpcy5zbmFrZS50dXJuUmFkaXVzICogTWF0aC5jb3ModGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlICsgdGFuZ2VudEFuZ2xlKSxcclxuICAgIC8vICAgICAgIGVuZFBvaW50LnkgKyB0aGlzLnNuYWtlLnR1cm5SYWRpdXMgKiBNYXRoLnNpbih0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgKyB0YW5nZW50QW5nbGUpKSxcclxuICAgIC8vICAgICAgIHRoaXMuc25ha2UudHVyblJhZGl1cywgdGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlIC0gdGFuZ2VudEFuZ2xlLCB0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgLSB0YW5nZW50QW5nbGUsIGZhbHNlLCBoZWFkLmlzQ29sbGlkYWJsZSkpXHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgaWYgKGtleSA9PSB0aGlzLmxlZnRLZXkpIHtcclxuICAgIC8vICAgICB0aGlzLnNuYWtlLmFkZFNlZ21lbnQobmV3IEFyY1NlZ21lbnQobmV3IFZlY3RvcihcclxuICAgIC8vICAgICAgIGVuZFBvaW50LnggKyB0aGlzLnNuYWtlLnR1cm5SYWRpdXMgKiBNYXRoLmNvcyh0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgLSB0YW5nZW50QW5nbGUpLFxyXG4gICAgLy8gICAgICAgZW5kUG9pbnQueSArIHRoaXMuc25ha2UudHVyblJhZGl1cyAqIE1hdGguc2luKHRoaXMuc25ha2UuaGVhZC5lbmRBbmdsZSAtIHRhbmdlbnRBbmdsZSkpLFxyXG4gICAgLy8gICAgICAgdGhpcy5zbmFrZS50dXJuUmFkaXVzLCB0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgKyB0YW5nZW50QW5nbGUsIHRoaXMuc25ha2UuaGVhZC5lbmRBbmdsZSArIHRhbmdlbnRBbmdsZSwgdHJ1ZSwgaGVhZC5pc0NvbGxpZGFibGUpKVxyXG4gICAgLy8gICB9XHJcblxyXG4gICAgLy8gfSBcclxuXHJcbiAgICAvLyBlbHNlIGlmIChoZWFkIGluc3RhbmNlb2YgQXJjU2VnbWVudCkge1xyXG5cclxuICAgIC8vICAgdGFuZ2VudEFuZ2xlID0gaGVhZC5pc0NvdW50ZXJDbG9ja3dpc2UgPyAtTWF0aC5QSSA6IE1hdGguUEk7XHJcbiAgICAvLyAgIGlmIChrZXkgPT0gdGhpcy5yaWdodEtleSkge1xyXG4gICAgLy8gICAgIHRoaXMuc25ha2UuYWRkU2VnbWVudChuZXcgQXJjU2VnbWVudChuZXcgVmVjdG9yKFxyXG4gICAgLy8gICAgICAgZW5kUG9pbnQueCAtIHRoaXMuc25ha2UudHVyblJhZGl1cyAqIE1hdGguY29zKHRoaXMuc25ha2UuaGVhZC5lbmRBbmdsZSArIHRhbmdlbnRBbmdsZSksXHJcbiAgICAvLyAgICAgICBlbmRQb2ludC55IC0gdGhpcy5zbmFrZS50dXJuUmFkaXVzICogTWF0aC5zaW4odGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlICsgdGFuZ2VudEFuZ2xlKSksXHJcbiAgICAvLyAgICAgICB0aGlzLnNuYWtlLnR1cm5SYWRpdXMsIHRoaXMuc25ha2UuaGVhZC5lbmRBbmdsZSAtIHRhbmdlbnRBbmdsZSwgdGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlIC0gdGFuZ2VudEFuZ2xlLCBmYWxzZSwgaGVhZC5pc0NvbGxpZGFibGUpKVxyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIGlmIChrZXkgPT0gdGhpcy5sZWZ0S2V5KSB7XHJcbiAgICAvLyAgICAgdGhpcy5zbmFrZS5hZGRTZWdtZW50KG5ldyBBcmNTZWdtZW50KG5ldyBWZWN0b3IoXHJcbiAgICAvLyAgICAgICBlbmRQb2ludC54IC0gdGhpcy5zbmFrZS50dXJuUmFkaXVzICogTWF0aC5jb3ModGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlIC0gdGFuZ2VudEFuZ2xlKSxcclxuICAgIC8vICAgICAgIGVuZFBvaW50LnkgLSB0aGlzLnNuYWtlLnR1cm5SYWRpdXMgKiBNYXRoLnNpbih0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgLSB0YW5nZW50QW5nbGUpKSxcclxuICAgIC8vICAgICAgIHRoaXMuc25ha2UudHVyblJhZGl1cywgdGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlICsgdGFuZ2VudEFuZ2xlLCB0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgKyB0YW5nZW50QW5nbGUsIHRydWUsIGhlYWQuaXNDb2xsaWRhYmxlKSlcclxuICAgIC8vICAgfVxyXG5cclxuICAgIC8vIH1cclxuXHJcbiAgfVxyXG4gIHByaXZhdGUgb25LZXlVcChldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG4gICAgLy9pZiBzbmFrZSBpcyBkZWFkLCBpZ25vcmUgdGhlIGtleSBwcmVzc2VzXHJcbiAgICBpZighdGhpcy5zbmFrZS5pc0FsaXZlKSByZXR1cm47XHJcbiAgICBcclxuICAgIGNvbnN0IGtleSA9IGV2ZW50LmtleS50b1VwcGVyQ2FzZSgpO1xyXG5cclxuICAgIC8vY2hlY2sgaWYgdGhlIGtleSBpcyBpbiB0aGUga2V5bWFwLCBpZiBub3QganVzdCBpZ25vcmUgaXRcclxuICAgIGlmICghdGhpcy5rZXlNYXBba2V5XSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLmtleU1hcFtrZXldID0gZmFsc2U7XHJcblxyXG4gICAgc2VuZEtleUV2ZW50VG9TZXJ2ZXIoa2V5ID09IHRoaXMucmlnaHRLZXkgPyAncmlnaHQnIDogJ2xlZnQnLCBmYWxzZSk7XHJcblxyXG5cclxuXHJcbiAgICAvLyBsZXQgaGVhZCA9IHRoaXMuc25ha2UuaGVhZDtcclxuICAgIC8vIGxldCBlbmRQb2ludCA9IGhlYWQuZW5kUG9pbnQ7XHJcbiAgICAvLyBsZXQgYW5nbGUgPSBoZWFkLmVuZEFuZ2xlO1xyXG5cclxuICAgIC8vIGlmIChrZXkgPT0gdGhpcy5sZWZ0S2V5ICYmIGhlYWQgaW5zdGFuY2VvZiBBcmNTZWdtZW50ICYmIGhlYWQuaXNDb3VudGVyQ2xvY2t3aXNlKCkpIHtcclxuXHJcbiAgICAvLyAgIGFuZ2xlIC09IE1hdGguUEkgLyAyO1xyXG4gICAgLy8gfSBlbHNlIGlmIChrZXkgPT0gdGhpcy5yaWdodEtleSAmJiBoZWFkIGluc3RhbmNlb2YgQXJjU2VnbWVudCAmJiAhaGVhZC5pc0NvdW50ZXJDbG9ja3dpc2UoKSkge1xyXG5cclxuICAgIC8vICAgYW5nbGUgKz0gTWF0aC5QSSAvIDI7XHJcbiAgICAvLyB9XHJcblxyXG5cclxuXHJcbiAgICAvLyB0aGlzLnNuYWtlLmFkZFNlZ21lbnQobmV3IExpbmVTZWdtZW50KGVuZFBvaW50LFxyXG4gICAgLy8gICBuZXcgVmVjdG9yKGVuZFBvaW50LnggKyA1ICogTWF0aC5jb3MoYW5nbGUpLCBlbmRQb2ludC55ICsgNSAqIE1hdGguc2luKGFuZ2xlKSksIGhlYWQuaXNDb2xsaWRhYmxlICxhbmdsZSkpO1xyXG5cclxuXHJcblxyXG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLnNuYWtlLmhlYWQpO1xyXG4gIH1cclxuXHJcblxyXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLm9uS2V5RG93bi5iaW5kKHRoaXMpKTtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMub25LZXlVcC5iaW5kKHRoaXMpKTtcclxuICB9XHJcblxyXG5cclxuXHJcbn1cclxuXHJcbiIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCJ2ZWN0b3IyZFwiO1xyXG5pbXBvcnQgU2VnbWVudCBmcm9tIFwiLi9TZWdtZW50XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaW5lU2VnbWVudCBleHRlbmRzIFNlZ21lbnQge1xyXG5cclxuXHJcbiAgICBwdWJsaWMgc3RhcnRQb2ludDogVmVjdG9yO1xyXG4gICAgcHVibGljIGVuZFBvaW50OiBWZWN0b3I7XHJcbiAgICBwdWJsaWMgZW5kQW5nbGU6IG51bWJlcjtcclxuICAgIHB1YmxpYyBpc0NvbGxpZGFibGU6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHN0YXJ0OiBWZWN0b3IsIGVuZDogVmVjdG9yLCBpc0NvbGxpZGFibGU6IGJvb2xlYW4sIGFuZ2xlPzogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnN0YXJ0UG9pbnQgPSBzdGFydDtcclxuICAgICAgICB0aGlzLmVuZFBvaW50ID0gZW5kO1xyXG4gICAgICAgIHRoaXMuaXNDb2xsaWRhYmxlID0gaXNDb2xsaWRhYmxlO1xyXG4gICAgICAgIHRoaXMuZW5kQW5nbGUgPSBhbmdsZTtcclxuICAgICAgICBcclxuICAgICAgfVxyXG5cclxuICAgICAgZHJhdyhjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGNvbG9yOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAvLyBjb250ZXh0LnN0cm9rZVN0eWxlID0gJyNmZjAwZmZmZidcclxuICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gY29sb3I7XHJcbiAgICAgICAgY29udGV4dC5saW5lQ2FwID0gXCJyb3VuZFwiO1xyXG4gICAgICAgIGlmICh0aGlzLmlzQ29sbGlkYWJsZSA9PSB0cnVlKXtcclxuICAgICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgY29udGV4dC5tb3ZlVG8odGhpcy5zdGFydFBvaW50LngsIHRoaXMuc3RhcnRQb2ludC55KTtcclxuICAgICAgICAgICAgY29udGV4dC5saW5lVG8odGhpcy5lbmRQb2ludC54LCB0aGlzLmVuZFBvaW50LnkpO1xyXG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgY2FsY0VuZEFuZ2xlKCk6IG51bWJlcntcclxuICAgICAgICByZXR1cm4gTWF0aC5hdGFuKCh0aGlzLmVuZFBvaW50LnkgLSB0aGlzLnN0YXJ0UG9pbnQueSkgLyAodGhpcy5lbmRQb2ludC54IC0gdGhpcy5zdGFydFBvaW50LngpKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbGVuZ3RoKCk6IG51bWJlcntcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KCh0aGlzLnN0YXJ0UG9pbnQueCAtIHRoaXMuZW5kUG9pbnQueCkqKjIgKyAodGhpcy5zdGFydFBvaW50LnkgLSB0aGlzLmVuZFBvaW50LnkpKioyKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb250aW51aW5nU2VnbWVudCh0cmFuc2Zvcm06IFZlY3Rvcik6IFNlZ21lbnQge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybWVkRW5kcG9pbnQgPSB0aGlzLmVuZFBvaW50LmNsb25lKCkuYWRkKHRyYW5zZm9ybSkgYXMgVmVjdG9yO1xyXG4gICAgICAgIHJldHVybiBuZXcgTGluZVNlZ21lbnQoXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkRW5kcG9pbnQsIFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1lZEVuZHBvaW50LCBcclxuICAgICAgICAgICAgdGhpcy5pc0NvbGxpZGFibGUsIFxyXG4gICAgICAgICAgICB0aGlzLmVuZEFuZ2xlXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi4vVmlld01vZGVscy9QbGF5ZXJcIjtcclxuaW1wb3J0IHsgR2FtZVN0YXRlLCBSb29tIH0gZnJvbSBcIi4uL1ZpZXdNb2RlbHMvUm9vbVwiO1xyXG5pbXBvcnQgeyBHYW1lU3RhdGVEYXRhIH0gZnJvbSBcIi4uL1dlYlNvY2tldENsaWVudC9tZXNzYWdlVHlwZXNcIjtcclxuaW1wb3J0IHsgY3JlYXRlUm9vbSwgam9pblJvb20sIHNlbmRTdGFydENvbW1hbmQsIHNldFBsYXllckRhdGEgfSBmcm9tIFwiLi4vV2ViU29ja2V0Q2xpZW50L3dlYnNvY2tldFwiO1xyXG5cclxuXHJcbmV4cG9ydCBsZXQgY3VycmVudFJvb206IFJvb20gfCBudWxsID0gbnVsbDtcclxuZXhwb3J0IGxldCBjdXJyZW50UGxheWVyOiBQbGF5ZXIgfCBudWxsID0gbnVsbDtcclxuXHJcbmNvbnN0IHJvb21Db2RlSW5wdXQgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb21Db2RlSW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50KTtcclxuY29uc3QgdXNlcm5hbWVJbnB1dCA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcm5hbWVJbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQpO1xyXG5jb25zdCByb29tQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pvaW5CdXR0b24nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuY29uc3QgcmVhZHlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVhZHlCdXR0b24nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuY29uc3QgbG9naW5EaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW4tZGl2JykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbmNvbnN0IHJvb21EaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vbS1kaXYnKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuY29uc3QgZ2FtZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lLWNhbnZhcy1jb250YWluZXInKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuY29uc3QgY29sb3JQaWNrZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3ItcGlja2VyJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuY29uc3Qgcm9vbVVzZXJzTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb29tLXVzZXJzLWxpc3QnKSBhcyBIVE1MVUxpc3RFbGVtZW50O1xyXG5jb25zdCByb29tQ29kZVNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vbS1jb2RlJykgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcbmNvbnN0IHBsYXllckNvdW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXllci1jb3VudCcpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG5jb25zdCBjb2xvclBpY2tlckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvci1waWNrZXItY29udGFpbmVyJyk7XHJcbmNvbnN0IHN0YXJ0UHJvZ3Jlc3NCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnQtcHJvZ3Jlc3MtYmFyJyk7XHJcbi8vIHNyYy9sb2dpbi50c1xyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQnV0dG9uKCkge1xyXG5cclxuXHJcbiAgICBpZiAodXNlcm5hbWVJbnB1dC52YWx1ZS50cmltKCkgPT0gJycpIHtcclxuICAgICAgICByb29tQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcm9vbUJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyb29tQ29kZUlucHV0LnZhbHVlLnRyaW0oKS5sZW5ndGggPT0gNSkge1xyXG4gICAgICAgIHJvb21CdXR0b24udGV4dENvbnRlbnQgPSAnSk9JTiBST09NJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcm9vbUJ1dHRvbi50ZXh0Q29udGVudCA9ICdDUkVBVEUgUk9PTSc7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVSb29tQWN0aW9uKCkge1xyXG4gICAgY29uc3QgdXNlcm5hbWUgPSB1c2VybmFtZUlucHV0LnZhbHVlO1xyXG4gICAgaWYgKCF1c2VybmFtZSkgcmV0dXJuO1xyXG5cclxuICAgIGN1cnJlbnRQbGF5ZXIgPSBuZXcgUGxheWVyKHVzZXJuYW1lKTtcclxuXHJcbiAgICBpZiAocm9vbUJ1dHRvbi5pbm5lclRleHQgPT09ICdDUkVBVEUgUk9PTScpIHtcclxuICAgICAgICBjcmVhdGVSb29tKHVzZXJuYW1lSW5wdXQudmFsdWUpO1xyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgam9pblJvb20ocm9vbUNvZGVJbnB1dC52YWx1ZS50b1VwcGVyQ2FzZSgpLCB1c2VybmFtZUlucHV0LnZhbHVlKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVJlYWR5U3RhdGUoKSB7XHJcblxyXG4gICAgY3VycmVudFBsYXllci5pc1JlYWR5ID0gIWN1cnJlbnRQbGF5ZXIuaXNSZWFkeTtcclxuICAgIHNldFBsYXllckRhdGEoY3VycmVudFBsYXllciwgY3VycmVudFJvb20uZ2V0Q29kZSgpKTtcclxuICAgIHVwZGF0ZVJlYWR5QnV0dG9uKGN1cnJlbnRQbGF5ZXIuaXNSZWFkeSk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVSZWFkeUJ1dHRvbihpc1JlYWR5OiBib29sZWFuKSB7XHJcbiAgICBpZiAoaXNSZWFkeSkge1xyXG4gICAgICAgIHJlYWR5QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3JlZC1idXR0b24nKTtcclxuICAgICAgICByZWFkeUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdncmVlbi1idXR0b24nKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJlYWR5QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3JlZC1idXR0b24nKTtcclxuICAgICAgICByZWFkeUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdncmVlbi1idXR0b24nKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3dSb29tVmlldyhkYXRhOiBKU09OKSB7XHJcbiAgICAvL3NldCB0aGUgY2xpZW50IFZpZXdNb2RlbCBvZiB0aGUgcm9vbSB0byB0aGUgc2VydmVycyByZXNwb25zZVxyXG4gICAgbGV0IHJvb21JbmZvID0gSlNPTi5wYXJzZShkYXRhLnRvU3RyaW5nKCkpO1xyXG4gICAgY3VycmVudFJvb20gPSBuZXcgUm9vbShyb29tSW5mb1sncm9vbSddWydjb2RlJ10sIHJvb21JbmZvWydyb29tJ11bJ2hvc3QnXSwgcm9vbUluZm9bJ3Jvb20nXVsncGxheWVycyddLCByb29tSW5mb1sncm9vbSddWydtYXhTaXplJ10pXHJcblxyXG4gICAgLy9zaG93IHN0YXJ0R2FtZUJ1dHRvbiBcclxuICAgIGlmIChjdXJyZW50UGxheWVyLnVzZXJuYW1lID09IGN1cnJlbnRSb29tLmdldEhvc3QoKS51c2VybmFtZSkge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydEJ1dHRvbicpLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vc2V0IGEgcmFuZG9tIGNvbG9yIGZvciBhIHBsYXllclxyXG4gICAgY29sb3JQaWNrZXJEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY3VycmVudFBsYXllci5jb2xvcjtcclxuICAgIGNvbG9yUGlja2VyLnZhbHVlID0gY3VycmVudFBsYXllci5jb2xvcjtcclxuICAgIGxldCBjb2xvclBpY2tlckxhYmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbG9yLWxhYmVsJyk7XHJcbiAgICBjb2xvclBpY2tlckxhYmVsLnN0eWxlLmNvbG9yID0gcGlja1RleHRDb2xvckJhc2VkT25CZ0NvbG9yQWR2YW5jZWQoY29sb3JQaWNrZXIudmFsdWUsICcjRkZGRkZGJywgJyMwMDAwMDAnKTtcclxuXHJcbiAgICAvL3Nob3cgdGhlIG5ldyBlbGVtZW50XHJcbiAgICBsb2dpbkRpdi5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LW5vbmUnKTtcclxuICAgIHJvb21EaXYuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1mbGV4Jyk7XHJcblxyXG5cclxuXHJcbiAgICByb29tQ29kZUlucHV0LnZhbHVlID0gY3VycmVudFJvb20uZ2V0Q29kZSgpO1xyXG4gICAgcm9vbUNvZGVTcGFuLmlubmVySFRNTCA9IGN1cnJlbnRSb29tLmdldENvZGUoKTtcclxuICAgIHNldFBsYXllckRhdGEoY3VycmVudFBsYXllciwgY3VycmVudFJvb20uZ2V0Q29kZSgpKTtcclxuICAgIHVwZGF0ZVJvb21MaXN0KGRhdGEpO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVJvb21MaXN0KGRhdGE6IEpTT04pIHtcclxuICAgIGxldCByb29tSW5mbyA9IEpTT04ucGFyc2UoZGF0YS50b1N0cmluZygpKTtcclxuXHJcbiAgICAvLyB1cGRhdGluZyB0aGUgY3VycmVudCByb29tIHBsYXllcnMgYW5kIGhvc3RcclxuICAgIGN1cnJlbnRSb29tLnNldFBsYXllcnMocm9vbUluZm9bJ3Jvb20nXVsncGxheWVycyddKTtcclxuICAgIGN1cnJlbnRSb29tLnNldEhvc3Qocm9vbUluZm9bJ3Jvb20nXVsnaG9zdCddKTtcclxuICAgIGN1cnJlbnRSb29tLnNldE1heFNpemUocm9vbUluZm9bJ3Jvb20nXVsnbWF4U2l6ZSddKVxyXG5cclxuXHJcbiAgICBwbGF5ZXJDb3VudC5pbm5lckhUTUwgPSBgJHtPYmplY3Qua2V5cyhjdXJyZW50Um9vbS5nZXRQbGF5ZXJzKCkpLmxlbmd0aH0vJHtjdXJyZW50Um9vbS5nZXRNYXhTaXplKCl9YDtcclxuICAgIHJvb21Vc2Vyc0xpc3QuaW5uZXJIVE1MID0gJyc7XHJcblxyXG4gICAgT2JqZWN0LnZhbHVlcyhjdXJyZW50Um9vbS5nZXRQbGF5ZXJzKCkpLmZvckVhY2goKHBsYXllcjogeyB1c2VybmFtZTogc3RyaW5nIHwgbnVtYmVyOyBpc1JlYWR5OiBib29sZWFuOyBjb2xvcjogc3RyaW5nOyB9KSA9PiB7XHJcbiAgICAgICAgY29uc3QgcGxheWVySXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcblxyXG4gICAgICAgIHBsYXllckl0ZW0udGV4dENvbnRlbnQgPSBwbGF5ZXIudXNlcm5hbWUgKyAnJztcclxuXHJcbiAgICAgICAgaWYgKHBsYXllci51c2VybmFtZSA9PSBjdXJyZW50Um9vbS5nZXRIb3N0KCkudXNlcm5hbWUpIHtcclxuICAgICAgICAgICAgcGxheWVySXRlbS5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCBgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1jcm93blwiIHN0eWxlPVwiY29sb3I6ICR7cGxheWVyLmNvbG9yfTtcIj48L2k+YClcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGxheWVySXRlbS5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCBgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1jaXJjbGVcIiBzdHlsZT1cImNvbG9yOiAke3BsYXllci5jb2xvcn07IG1hcmdpbi1sZWZ0OiA0cHhcIj48L2k+YClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwbGF5ZXIuaXNSZWFkeSkge1xyXG4gICAgICAgICAgICBwbGF5ZXJJdGVtLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgJyA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLWNpcmNsZVwiIHN0eWxlPVwiY29sb3I6ICMzN2NiNDg7XCI+PC9pPicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBsYXllckl0ZW0uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCAnIDxpIGNsYXNzPVwiZmEtc29saWQgZmEtY2lyY2xlXCIgc3R5bGU9XCJjb2xvcjogI2NiMzczNztcIj48L2k+Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByb29tVXNlcnNMaXN0LmFwcGVuZENoaWxkKHBsYXllckl0ZW0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy9zaG93IHN0YXJ0R2FtZUJ1dHRvbiBcclxuICAgIGlmIChjdXJyZW50UGxheWVyLnVzZXJuYW1lID09IGN1cnJlbnRSb29tLmdldEhvc3QoKS51c2VybmFtZSkge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydEJ1dHRvbicpLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVN0YXJ0QnV0dG9uUHJvZ3Jlc3MoT2JqZWN0LnZhbHVlcyhjdXJyZW50Um9vbS5nZXRQbGF5ZXJzKCkpLmZpbHRlcihwID0+IHAuaXNSZWFkeSkubGVuZ3RoLCBjdXJyZW50Um9vbS5nZXRNYXhTaXplKCkpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gdXBkYXRlU3RhcnRCdXR0b25Qcm9ncmVzcyhyZWFkeVBsYXllckNvdW50OiBudW1iZXIsIG1heFBsYXllckNvdW50OiBudW1iZXIpIHtcclxuICAgIGlmIChtYXhQbGF5ZXJDb3VudCA9PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgc3RhcnRQcm9ncmVzc0Jhci5zdHlsZS53aWR0aCA9IE1hdGguZmxvb3IocmVhZHlQbGF5ZXJDb3VudCAvIG1heFBsYXllckNvdW50ICogMTAwKSArICclJztcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gc2hvd0Vycm9yQW5pbWF0aW9uKCkge1xyXG4gICAgcm9vbUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdyZWQtYnV0dG9uJyk7XHJcbiAgICByb29tQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3dpZ2dsZScpO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgcm9vbUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdyZWQtYnV0dG9uJyk7XHJcbiAgICAgICAgcm9vbUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCd3aWdnbGUnKTtcclxuICAgIH0sIDYwMClcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVDb2xvclBpY2tlcigpIHtcclxuICAgIGNvbG9yUGlja2VyRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yUGlja2VyLnZhbHVlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUGxheWVyQ29sb3IoKSB7XHJcbiAgICBjdXJyZW50UGxheWVyLmNvbG9yID0gY29sb3JQaWNrZXIudmFsdWU7XHJcbiAgICBsZXQgY29sb3JQaWNrZXJMYWJlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvci1sYWJlbCcpO1xyXG4gICAgY29sb3JQaWNrZXJMYWJlbC5zdHlsZS5jb2xvciA9IHBpY2tUZXh0Q29sb3JCYXNlZE9uQmdDb2xvckFkdmFuY2VkKGNvbG9yUGlja2VyLnZhbHVlLCAnI0ZGRkZGRicsICcjMDAwMDAwJyk7XHJcbiAgICBzZXRQbGF5ZXJEYXRhKGN1cnJlbnRQbGF5ZXIsIGN1cnJlbnRSb29tLmdldENvZGUoKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBpY2tUZXh0Q29sb3JCYXNlZE9uQmdDb2xvckFkdmFuY2VkKGJnQ29sb3I6IHN0cmluZywgbGlnaHRDb2xvcjogc3RyaW5nLCBkYXJrQ29sb3I6IHN0cmluZykge1xyXG4gICAgdmFyIGNvbG9yID0gKGJnQ29sb3IuY2hhckF0KDApID09PSAnIycpID8gYmdDb2xvci5zdWJzdHJpbmcoMSwgNykgOiBiZ0NvbG9yO1xyXG4gICAgdmFyIHIgPSBwYXJzZUludChjb2xvci5zdWJzdHJpbmcoMCwgMiksIDE2KTsgLy8gaGV4VG9SXHJcbiAgICB2YXIgZyA9IHBhcnNlSW50KGNvbG9yLnN1YnN0cmluZygyLCA0KSwgMTYpOyAvLyBoZXhUb0dcclxuICAgIHZhciBiID0gcGFyc2VJbnQoY29sb3Iuc3Vic3RyaW5nKDQsIDYpLCAxNik7IC8vIGhleFRvQlxyXG4gICAgdmFyIHVpY29sb3JzID0gW3IgLyAyNTUsIGcgLyAyNTUsIGIgLyAyNTVdO1xyXG4gICAgdmFyIGMgPSB1aWNvbG9ycy5tYXAoKGNvbCkgPT4ge1xyXG4gICAgICAgIGlmIChjb2wgPD0gMC4wMzkyOCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY29sIC8gMTIuOTI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBNYXRoLnBvdygoY29sICsgMC4wNTUpIC8gMS4wNTUsIDIuNCk7XHJcbiAgICB9KTtcclxuICAgIHZhciBMID0gKDAuMjEyNiAqIGNbMF0pICsgKDAuNzE1MiAqIGNbMV0pICsgKDAuMDcyMiAqIGNbMl0pO1xyXG4gICAgcmV0dXJuIChMID4gMC40KSA/IGRhcmtDb2xvciA6IGxpZ2h0Q29sb3I7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0YXJ0R2FtZSgpIHtcclxuXHJcbiAgICAvL3ZlcmlmeSB0aGF0IHRoZSBwbGF5ZXIgc2VuZGluZyB0aGUgc3RhcnQgcmVxdWVzdCBpcyB0aGUgaG9zdFxyXG4gICAgaWYgKGN1cnJlbnRQbGF5ZXIudXNlcm5hbWUgIT0gY3VycmVudFJvb20uZ2V0SG9zdCgpLnVzZXJuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbmRTdGFydENvbW1hbmQoY3VycmVudFJvb20uZ2V0Q29kZSgpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHN3aXRjaEdhbWVWaWV3KGRhdGE6IEdhbWVTdGF0ZURhdGEpIHtcclxuICAgIHN3aXRjaCAoZGF0YS5zdGF0ZSkge1xyXG4gICAgICAgIGNhc2UgMDpcclxuICAgICAgICBjdXJyZW50Um9vbS5zZXRHYW1lU3RhdGUoR2FtZVN0YXRlLlJVTk5JTkcpO1xyXG4gICAgICAgIGxvZ2luRGl2LmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgICAgIHJvb21EaXYuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ub25lJyk7XHJcbiAgICAgICAgcm9vbURpdi5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LWZsZXgnKTtcclxuICAgICAgICBnYW1lRGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgICAgIGdhbWVEaXYuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1mbGV4Jyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMTpcclxuICAgICAgICBjdXJyZW50Um9vbS5zZXRHYW1lU3RhdGUoR2FtZVN0YXRlLklOX0xPQkJZKTtcclxuICAgICAgICBsb2dpbkRpdi5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LW5vbmUnKTtcclxuICAgICAgICByb29tRGl2LmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktZmxleCcpO1xyXG4gICAgICAgIGdhbWVEaXYuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ub25lJyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG53aW5kb3cub25sb2FkID0gKCkgPT4ge1xyXG4gICAgdXBkYXRlQnV0dG9uKCk7XHJcbn07XHJcblxyXG4od2luZG93IGFzIGFueSkudXBkYXRlQnV0dG9uID0gdXBkYXRlQnV0dG9uO1xyXG4od2luZG93IGFzIGFueSkuaGFuZGxlUm9vbUFjdGlvbiA9IGhhbmRsZVJvb21BY3Rpb247XHJcbih3aW5kb3cgYXMgYW55KS5oYW5kbGVSZWFkeVN0YXRlID0gaGFuZGxlUmVhZHlTdGF0ZTtcclxuKHdpbmRvdyBhcyBhbnkpLnVwZGF0ZUNvbG9yUGlja2VyID0gdXBkYXRlQ29sb3JQaWNrZXI7XHJcbih3aW5kb3cgYXMgYW55KS51cGRhdGVQbGF5ZXJDb2xvciA9IHVwZGF0ZVBsYXllckNvbG9yO1xyXG4od2luZG93IGFzIGFueSkuc3RhcnRHYW1lID0gc3RhcnRHYW1lOyIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCJ2ZWN0b3IyZFwiO1xyXG5pbXBvcnQgUGFydGljbGUsIHsgc2hhcGUgfSBmcm9tIFwiLi9QYXJ0aWNsZVwiO1xyXG5pbXBvcnQgeyBnZXRSYW5kb21EaXJlY3Rpb24gfSBmcm9tIFwiLi9QYXJ0aWNsZVN5c3RlbVV0aWxzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbWl0dGVye1xyXG4gICAgcHJpdmF0ZSBhbGl2ZVBhcnRpY2xlczogUGFydGljbGVbXSA9IFtdO1xyXG4gICAgcHVibGljIHBvc2l0aW9uOiBWZWN0b3I7XHJcbiAgICBwdWJsaWMgZW1pdFRpbWU6IG51bWJlcjtcclxuICAgIHB1YmxpYyBzaGFwZTogc2hhcGU7XHJcbiAgICBwdWJsaWMgc2l6ZTogbnVtYmVyO1xyXG4gICAgcHVibGljIHNwZWVkOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgY29sb3I6IHtyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBhOiBudW1iZXJ9O1xyXG4gICAgcHVibGljIGZhZGVDb2xvcjogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBmYWRlU2l6ZTogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBwYXJ0aWNsZU1heEFnZTogbnVtYmVyO1xyXG4gICAgcHVibGljIGNhbnZhc0N0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG4gICAgcHVibGljIGVtaXRUaW1lTWlsbGlzOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHRpY2tzOiBudW1iZXIgPSAwO1xyXG4gICAgXHJcblxyXG4gICAgXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocG9zaXRpb246IFZlY3RvciwgZW1pdEludGVydmFsOiBudW1iZXIsIHNpemU6IG51bWJlciwgc3BlZWQ6IG51bWJlciwgc2hhcGU6IHNoYXBlID0gJ2NpcmNsZScsIGNvbG9yOiB7cjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciwgYTogbnVtYmVyfSwgY2FudmFzQ3R4OkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgIGZhZGVDb2xvcjogYm9vbGVhbiA9IHRydWUsIGZhZGVTaXplOiBib29sZWFuID0gdHJ1ZSwgYWdlOiBudW1iZXIsIGVtaXRUaW1lTWlsbGlzOiBudW1iZXIgPSAwKXtcclxuICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgIHRoaXMuZW1pdFRpbWUgPSBlbWl0SW50ZXJ2YWw7XHJcbiAgICB0aGlzLnNpemUgPSBzaXplO1xyXG4gICAgdGhpcy5zcGVlZCA9IHNwZWVkO1xyXG4gICAgdGhpcy5zaGFwZSA9IHNoYXBlO1xyXG4gICAgdGhpcy5jb2xvciA9IGNvbG9yO1xyXG4gICAgdGhpcy5jYW52YXNDdHggPSBjYW52YXNDdHg7XHJcbiAgICB0aGlzLmZhZGVDb2xvciA9IGZhZGVDb2xvcjtcclxuICAgIHRoaXMuZmFkZVNpemUgPSBmYWRlU2l6ZTsgXHJcbiAgICB0aGlzLnBhcnRpY2xlTWF4QWdlID0gYWdlO1xyXG4gICAgdGhpcy5lbWl0VGltZU1pbGxpcyA9IGVtaXRUaW1lTWlsbGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB0aWNrKGR0OiBudW1iZXIpe1xyXG4gICAgICAgIGlmICgodGhpcy5lbWl0VGltZU1pbGxpcyArIHRoaXMucGFydGljbGVNYXhBZ2UpIDwgMCkgcmV0dXJuO1xyXG5cclxuICAgICAgICB0aGlzLmVtaXRUaW1lTWlsbGlzIC09IGR0O1xyXG5cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudGlja3MgJSB0aGlzLmVtaXRUaW1lID09IDAgJiYgdGhpcy5lbWl0VGltZU1pbGxpcyA+IDApe1xyXG4gICAgICAgICAgICB0aGlzLmFsaXZlUGFydGljbGVzLnB1c2gobmV3IFBhcnRpY2xlKHRoaXMucG9zaXRpb24uY2xvbmUoKSBhcyBWZWN0b3IsIGdldFJhbmRvbURpcmVjdGlvbigpLCB0aGlzLnNpemUsIHRoaXMuc3BlZWQsIHRoaXMuc2hhcGUsey4uLnRoaXMuY29sb3J9LHRoaXMuY2FudmFzQ3R4LCB0aGlzLnBhcnRpY2xlTWF4QWdlLCB0aGlzLmZhZGVDb2xvciwgdGhpcy5mYWRlU2l6ZSkpO1xyXG4gICAgICAgICAgICB0aGlzLmFsaXZlUGFydGljbGVzLnB1c2gobmV3IFBhcnRpY2xlKHRoaXMucG9zaXRpb24uY2xvbmUoKSBhcyBWZWN0b3IsIGdldFJhbmRvbURpcmVjdGlvbigpLCB0aGlzLnNpemUsIHRoaXMuc3BlZWQsIHRoaXMuc2hhcGUsey4uLnRoaXMuY29sb3J9LHRoaXMuY2FudmFzQ3R4LCB0aGlzLnBhcnRpY2xlTWF4QWdlLCB0aGlzLmZhZGVDb2xvciwgdGhpcy5mYWRlU2l6ZSkpO1xyXG4gICAgICAgICAgICB0aGlzLmFsaXZlUGFydGljbGVzLnB1c2gobmV3IFBhcnRpY2xlKHRoaXMucG9zaXRpb24uY2xvbmUoKSBhcyBWZWN0b3IsIGdldFJhbmRvbURpcmVjdGlvbigpLCB0aGlzLnNpemUsIHRoaXMuc3BlZWQsIHRoaXMuc2hhcGUsey4uLnRoaXMuY29sb3J9LHRoaXMuY2FudmFzQ3R4LCB0aGlzLnBhcnRpY2xlTWF4QWdlLCB0aGlzLmZhZGVDb2xvciwgdGhpcy5mYWRlU2l6ZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFsaXZlUGFydGljbGVzLmZvckVhY2gocGFydGljbGUgPT4ge1xyXG4gICAgICAgICAgICBwYXJ0aWNsZS50aWNrKGR0KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFsaXZlUGFydGljbGVzID0gdGhpcy5hbGl2ZVBhcnRpY2xlcy5maWx0ZXIocGFydGljbGUgPT4gcGFydGljbGUuYWdlID4gMCk7XHJcblxyXG5cclxuICAgICAgICB0aGlzLnRpY2tzKys7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoKXtcclxuICAgICAgICB0aGlzLmFsaXZlUGFydGljbGVzLmZvckVhY2gocGFydGljbGUgPT4ge1xyXG4gICAgICAgICAgICBwYXJ0aWNsZS5kcmF3KClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwidmVjdG9yMmRcIjtcclxuZXhwb3J0IHR5cGUgc2hhcGUgPSAnY2lyY2xlJyB8ICdzcXVhcmUnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXJ0aWNsZSB7XHJcbiAgICBwb3NpdGlvbjogVmVjdG9yO1xyXG4gICAgdmVsb2NpdHk6IFZlY3RvcjtcclxuICAgIHNoYXBlOiBzaGFwZTtcclxuICAgIHNpemU6IG51bWJlcjtcclxuICAgIHNwZWVkOiBudW1iZXI7XHJcbiAgICBjb2xvcjoge3I6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIsIGE6IG51bWJlcn07XHJcbiAgICBmYWRlQ29sb3I6IGJvb2xlYW47XHJcbiAgICBmYWRlU2l6ZTogYm9vbGVhbjtcclxuICAgIGFnZTogbnVtYmVyO1xyXG4gICAgY2FudmFzQ3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICBwcml2YXRlIHNpemVGYWRlQW1vdW50OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGNvbG9yRmFkZUFtb3VudDogbnVtYmVyO1xyXG5cclxuIFxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwb3NpdGlvbjogVmVjdG9yLCB2ZWxvY2l0eTogVmVjdG9yLCBzaXplOiBudW1iZXIsIHNwZWVkOiBudW1iZXIsICBzaGFwZTogc2hhcGUgPSAnY2lyY2xlJywgY29sb3I6IHtyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBhOiBudW1iZXJ9LCBjYW52YXNDdHg6Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBhZ2U6IG51bWJlciwgIGZhZGVDb2xvcj86IGJvb2xlYW4sIGZhZGVTaXplPzogYm9vbGVhbil7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgICAgIHRoaXMudmVsb2NpdHkgPSB2ZWxvY2l0eTtcclxuICAgICAgICB0aGlzLnNpemUgPSBzaXplO1xyXG4gICAgICAgIHRoaXMuc3BlZWQgPSBzcGVlZDtcclxuICAgICAgICB0aGlzLnNoYXBlID0gc2hhcGU7XHJcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xyXG4gICAgICAgIHRoaXMuY2FudmFzQ3R4ID0gY2FudmFzQ3R4O1xyXG4gICAgICAgIHRoaXMuZmFkZUNvbG9yID0gZmFkZUNvbG9yO1xyXG4gICAgICAgIHRoaXMuZmFkZVNpemUgPSBmYWRlU2l6ZTsgXHJcbiAgICAgICAgdGhpcy5hZ2UgPSBhZ2U7XHJcbiAgICAgICAgdGhpcy5jb2xvckZhZGVBbW91bnQgPSB0aGlzLmNvbG9yLmEvdGhpcy5hZ2U7XHJcbiAgICAgICAgdGhpcy5zaXplRmFkZUFtb3VudCA9IHRoaXMuc2l6ZS90aGlzLmFnZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdGljayhkdDogbnVtYmVyKXtcclxuXHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi5hZGQodGhpcy52ZWxvY2l0eS5jbG9uZSgpLm11bHRpcGx5QnlTY2FsYXIoZHQgKiB0aGlzLnNwZWVkKSk7XHJcbiAgICAgICAgaWYodGhpcy5mYWRlQ29sb3Ipe1xyXG4gICAgICAgICAgICB0aGlzLmNvbG9yLmEgLT0gdGhpcy5jb2xvckZhZGVBbW91bnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRoaXMuZmFkZVNpemUpe1xyXG4gICAgICAgICAgICB0aGlzLnNpemUgLT0gIHRoaXMuc2l6ZUZhZGVBbW91bnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYWdlLS07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoKXtcclxuICAgICAgICB0aGlzLmNhbnZhc0N0eC5tb3ZlVG8odGhpcy5wb3NpdGlvbi54LCB0aGlzLnBvc2l0aW9uLnkpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzQ3R4LmZpbGxTdHlsZSA9IGByZ2JhKCR7dGhpcy5jb2xvci5yfSwke3RoaXMuY29sb3IuZ30sICR7dGhpcy5jb2xvci5ifSwgJHt0aGlzLmNvbG9yLmF9KWA7XHJcbiAgICAgICAgdGhpcy5jYW52YXNDdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnNoYXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2NpcmNsZSc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5hcmModGhpcy5wb3NpdGlvbi54LCB0aGlzLnBvc2l0aW9uLnksIHRoaXMuc2l6ZSwgMCwgMipNYXRoLlBJKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmZpbGwoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdzcXVhcmUnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguZmlsbFJlY3QodGhpcy5wb3NpdGlvbi54LXRoaXMuc2l6ZSwgdGhpcy5wb3NpdGlvbi55LXRoaXMuc2l6ZSwgdGhpcy5zaXplKjIsIHRoaXMuc2l6ZSoyKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNhbnZhc0N0eC5jbG9zZVBhdGgoKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwidmVjdG9yMmRcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSYW5kb21EaXJlY3Rpb24oKTogVmVjdG9ye1xyXG5cclxuICAgIHJldHVybihuZXcgVmVjdG9yKE1hdGgucmFuZG9tKCkqMi0xLCBNYXRoLnJhbmRvbSgpKjItMSkpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoZXhUb1JnYihoZXg6IHN0cmluZykge1xyXG4gICAgdmFyIHJlc3VsdCA9IC9eIz8oW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkkL2kuZXhlYyhoZXgpO1xyXG4gICAgcmV0dXJuIHJlc3VsdCA/IHtcclxuICAgICAgcjogcGFyc2VJbnQocmVzdWx0WzFdLCAxNiksXHJcbiAgICAgIGc6IHBhcnNlSW50KHJlc3VsdFsyXSwgMTYpLFxyXG4gICAgICBiOiBwYXJzZUludChyZXN1bHRbM10sIDE2KVxyXG4gICAgfSA6IG51bGw7XHJcbiAgfSIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCJ2ZWN0b3IyZFwiO1xuXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBTZWdtZW50IHtcbiAgICBhYnN0cmFjdCBpc0NvbGxpZGFibGU6IGJvb2xlYW47XG4gICAgYWJzdHJhY3QgZHJhdyhjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGNvbG9yOiBzdHJpbmcpOiB2b2lkO1xuICAgIGFic3RyYWN0IGdldCBlbmRBbmdsZSgpOiBudW1iZXI7XG4gICAgYWJzdHJhY3QgZ2V0IGVuZFBvaW50KCk6IFZlY3RvcjtcbiAgICBhYnN0cmFjdCBnZXRDb250aW51aW5nU2VnbWVudCh0cmFuc2Zvcm06IFZlY3Rvcik6IFNlZ21lbnQ7XG59IiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcInZlY3RvcjJkXCI7XG5pbXBvcnQgQXJjU2VnbWVudCBmcm9tIFwiLi9BcmNTZWdtZW50XCI7XG5pbXBvcnQgTGluZVNlZ21lbnQgZnJvbSBcIi4vTGluZVNlZ21lbnRcIjtcbmltcG9ydCBTZWdtZW50IGZyb20gXCIuL1NlZ21lbnRcIjtcbmltcG9ydCBFbWl0dGVyIGZyb20gXCIuL1BhcnRpY2xlU3lzdGVtL0VtaXR0ZXJcIjtcbmltcG9ydCB7IGhleFRvUmdiIH0gZnJvbSBcIi4vUGFydGljbGVTeXN0ZW0vUGFydGljbGVTeXN0ZW1VdGlsc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTbmFrZSB7XG4gICAgcHVibGljIHNlZ21lbnRzOiBTZWdtZW50W10gPSBbXTtcbiAgICBwcml2YXRlIGNvbG9yOiBzdHJpbmc7XG4gICAgcHVibGljIGlzQWxpdmU6IGJvb2xlYW4gPSB0cnVlO1xuICAgIHB1YmxpYyB0dXJuUmFkaXVzOiBudW1iZXIgPSA2MDtcbiAgICBwcml2YXRlIGVtaXR0ZXI6IEVtaXR0ZXIgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIGNhbnZhc0N0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuICAgIHByaXZhdGUgZGlzdGFuY2VUb0NoYW5nZU9mU3RhdGU6IG51bWJlciA9IDEwO1xuXG5cbiAgICBjb25zdHJ1Y3RvcihzdGFydFBvczogTGluZVNlZ21lbnQsIGNvbG9yOiBzdHJpbmcsIGNhbnZhc0N0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSB7XG4gICAgICAgIHRoaXMuYWRkU2VnbWVudChzdGFydFBvcyk7XG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgICAgICAgdGhpcy5jYW52YXNDdHggPSBjYW52YXNDdHhcbiAgICB9XG4gICAgYWRkU2VnbWVudChzZWdtZW50OiBTZWdtZW50KSB7XG4gICAgICAgIHRoaXMuc2VnbWVudHMucHVzaChzZWdtZW50KTtcbiAgICB9XG5cbiAgICBnZXQgaGVhZCgpOiBTZWdtZW50IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHMuc2xpY2UoLTEpLnBvcCgpO1xuICAgIH1cblxuICAgIGRyYXcoKSB7XG4gICAgICAgIHRoaXMuY2FudmFzQ3R4LmxpbmVXaWR0aCA9IDEyO1xuICAgICAgICAvL1RPRE8gZml4IHRoaXMgdG8gYmUgYSBzaW5nbGUgcGF0aFxuICAgICAgICAvLyBjb250ZXh0LmJlZ2luUGF0aCgpO1xuXG4gICAgICAgIHRoaXMuc2VnbWVudHMuZm9yRWFjaCgoc2VnbWVudCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIHNlZ21lbnQuZHJhdyh0aGlzLmNhbnZhc0N0eCwgdGhpcy5jb2xvcik7XG4gICAgICAgICAgICBpZiAodGhpcy5oZWFkICE9IHNlZ21lbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VnbWVudCBpbnN0YW5jZW9mIEFyY1NlZ21lbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBzZWdtZW50LmRyYXdEZWJ1Zyh0aGlzLmNhbnZhc0N0eCwgJyM2NjY2NjYnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5hcmMoc2VnbWVudC5jZW50ZXIueCwgc2VnbWVudC5jZW50ZXIueSwgc2VnbWVudC5yYWRpdXMsIHNlZ21lbnQuZW5kQW5nbGUsIHNlZ21lbnQuZW5kQW5nbGUsIHNlZ21lbnQuaXNDb3VudGVyQ2xvY2t3aXNlKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LnN0cm9rZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2VnbWVudCBpbnN0YW5jZW9mIExpbmVTZWdtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHgubW92ZVRvKHNlZ21lbnQuZW5kUG9pbnQueCwgc2VnbWVudC5lbmRQb2ludC55KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5saW5lVG8oc2VnbWVudC5lbmRQb2ludC54LCBzZWdtZW50LmVuZFBvaW50LnkpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LnN0cm9rZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gY29udGV4dC5zdHJva2UoKTtcbiAgICB9XG5cbiAgICAvLyBtb3ZlKGRpc3RhbmNlOiBudW1iZXIpIHtcbiAgICAvLyAgICAgLy9kbyBub3QgbW92ZSBpcyBkZWFkLCBzaW1wbGVcbiAgICAvLyAgICAgaWYgKCF0aGlzLmlzQWxpdmUpIHJldHVybjtcblxuICAgIC8vICAgICB0aGlzLmNoZWNrV2FsbHMoKTtcblxuICAgIC8vICAgICAvLyBkbyBub3QgbW92ZSBpZiBzbmFrZSBoYXMgbm8gc2VnbWVudHNcbiAgICAvLyAgICAgY29uc3QgbGFzdFNlZ21lbnQgPSB0aGlzLmhlYWQ7XG4gICAgLy8gICAgIGlmICghbGFzdFNlZ21lbnQpIHJldHVybjtcblxuXG4gICAgICAgIFxuXG5cbiAgICAvLyAgICAgLy9tb3ZlIHRoZSBzbmFrZSB0aGUgY29ycmVjdCBhbW91bnQsIGRlcGVuZGluZyBvbiB0aGUgaGVhZCBzZWdtZW50XG4gICAgLy8gICAgIGlmIChsYXN0U2VnbWVudCBpbnN0YW5jZW9mIExpbmVTZWdtZW50KSB7XG4gICAgLy8gICAgICAgICBjb25zdCBkeCA9IGRpc3RhbmNlICogTWF0aC5jb3MobGFzdFNlZ21lbnQuZW5kQW5nbGUpO1xuICAgIC8vICAgICAgICAgY29uc3QgZHkgPSBkaXN0YW5jZSAqIE1hdGguc2luKGxhc3RTZWdtZW50LmVuZEFuZ2xlKTtcblxuICAgIC8vICAgICAgICAgY29uc3QgbmV3RW5kID0gbmV3IFZlY3RvcihsYXN0U2VnbWVudC5lbmRQb2ludC54ICsgZHgsIGxhc3RTZWdtZW50LmVuZFBvaW50LnkgKyBkeSk7XG4gICAgLy8gICAgICAgICBsYXN0U2VnbWVudC5lbmRQb2ludCA9IG5ld0VuZDtcblxuICAgIC8vICAgICB9XG4gICAgLy8gICAgIGVsc2UgaWYgKGxhc3RTZWdtZW50IGluc3RhbmNlb2YgQXJjU2VnbWVudCkge1xuICAgIC8vICAgICAgICAgY29uc3QgYW5nbGVFeHRlbnNpb24gPSBkaXN0YW5jZSAvIGxhc3RTZWdtZW50LnJhZGl1cztcblxuICAgIC8vICAgICAgICAgbGFzdFNlZ21lbnQuZW5kQW5nbGUgPSBsYXN0U2VnbWVudC5pc0NvdW50ZXJDbG9ja3dpc2UoKSA/IGxhc3RTZWdtZW50LmVuZEFuZ2xlIC0gYW5nbGVFeHRlbnNpb24gOiBsYXN0U2VnbWVudC5lbmRBbmdsZSArIGFuZ2xlRXh0ZW5zaW9uO1xuXG4gICAgLy8gICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIC8vIGFkZCBuZXcgc2VnbWVudCBsYXN0c2VnbWVudC5jcmVhdGVmbGlwcGVkc3RhdGVcbiAgICAvLyAgICAgaWYgKGxhc3RTZWdtZW50LmlzQ29sbGlkYWJsZSAmJiB0aGlzLmRpc3RhbmNlVG9DaGFuZ2VPZlN0YXRlIDwgMCkge1xuXG4gICAgLy8gICAgICAgICB0aGlzLmRpc3RhbmNlVG9DaGFuZ2VPZlN0YXRlID0gTWF0aC5yYW5kb20oKSAqIDgwICsgMzAgLy8gNDAtOTBcblxuICAgIC8vICAgICAgICAgaWYgKGxhc3RTZWdtZW50IGluc3RhbmNlb2YgTGluZVNlZ21lbnQpIHtcbiAgICAvLyAgICAgICAgICAgICB0aGlzLmFkZFNlZ21lbnQobmV3IExpbmVTZWdtZW50KGxhc3RTZWdtZW50LmVuZFBvaW50LCBuZXcgVmVjdG9yKGxhc3RTZWdtZW50LmVuZFBvaW50LngsIGxhc3RTZWdtZW50LmVuZFBvaW50LnkpLCBmYWxzZSwgbGFzdFNlZ21lbnQuZW5kQW5nbGUpKTtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgICAgIGVsc2UgaWYgKGxhc3RTZWdtZW50IGluc3RhbmNlb2YgQXJjU2VnbWVudCkge1xuICAgIC8vICAgICAgICAgICAgIHRoaXMuYWRkU2VnbWVudChuZXcgQXJjU2VnbWVudChsYXN0U2VnbWVudC5jZW50ZXIsIGxhc3RTZWdtZW50LnJhZGl1cywgbGFzdFNlZ21lbnQuZW5kQW5nbGUsIGxhc3RTZWdtZW50LmVuZEFuZ2xlLCBsYXN0U2VnbWVudC5pc0NvdW50ZXJDbG9ja3dpc2UoKSwgZmFsc2UpKVxuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9XG5cbiAgICAvLyAgICAgaWYgKCFsYXN0U2VnbWVudC5pc0NvbGxpZGFibGUgJiYgdGhpcy5kaXN0YW5jZVRvQ2hhbmdlT2ZTdGF0ZSA8IDApIHtcblxuICAgIC8vICAgICAgICAgdGhpcy5kaXN0YW5jZVRvQ2hhbmdlT2ZTdGF0ZSA9IE1hdGgucmFuZG9tKCkgKiA1MDAgKyA4MCAvLyA4MC0zMjBcblxuICAgIC8vICAgICAgICAgaWYgKGxhc3RTZWdtZW50IGluc3RhbmNlb2YgTGluZVNlZ21lbnQpIHtcbiAgICAvLyAgICAgICAgICAgICB0aGlzLmFkZFNlZ21lbnQobmV3IExpbmVTZWdtZW50KGxhc3RTZWdtZW50LmVuZFBvaW50LCBuZXcgVmVjdG9yKGxhc3RTZWdtZW50LmVuZFBvaW50LngsIGxhc3RTZWdtZW50LmVuZFBvaW50LnkpLCB0cnVlLCBsYXN0U2VnbWVudC5lbmRBbmdsZSkpXG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgICAgICBlbHNlIGlmIChsYXN0U2VnbWVudCBpbnN0YW5jZW9mIEFyY1NlZ21lbnQpIHtcbiAgICAvLyAgICAgICAgICAgICB0aGlzLmFkZFNlZ21lbnQobmV3IEFyY1NlZ21lbnQobGFzdFNlZ21lbnQuY2VudGVyLCBsYXN0U2VnbWVudC5yYWRpdXMsIGxhc3RTZWdtZW50LmVuZEFuZ2xlLCBsYXN0U2VnbWVudC5lbmRBbmdsZSwgbGFzdFNlZ21lbnQuaXNDb3VudGVyQ2xvY2t3aXNlKCksIHRydWUpKVxuICAgIC8vICAgICAgICAgfVxuXG4gICAgLy8gICAgIH1cblxuICAgIC8vICAgICAvL3VwZGF0ZSB0aGUgZGlzdGFuY2UgdHJhdmVsbGVkXG4gICAgLy8gICAgIHRoaXMuZGlzdGFuY2VUb0NoYW5nZU9mU3RhdGUgLT0gZGlzdGFuY2U7XG4gICAgLy8gfVxuXG5raWxsKCkge1xuICAgIGNvbnNvbGUubG9nKFwiU05BS0UgREVBRFwiKVxuICAgIHRoaXMuaXNBbGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuZW1pdHRlciA9IG5ldyBFbWl0dGVyKHRoaXMuaGVhZC5lbmRQb2ludCwgMSwgNywgNCwgJ2NpcmNsZScsIHsgLi4uaGV4VG9SZ2IodGhpcy5jb2xvciksIGE6IDEgfSwgdGhpcy5jYW52YXNDdHgsIHRydWUsIHRydWUsIDcwLCA0KTtcbn1cblxudXBkYXRlRW1pdHRlcihkdDogbnVtYmVyKSB7XG4gICAgaWYgKHRoaXMuZW1pdHRlcikge1xuICAgICAgICB0aGlzLmVtaXR0ZXIudGljayhkdCk7XG4gICAgICAgIHRoaXMuZW1pdHRlci5kcmF3KCk7XG4gICAgfVxufVxuXG5jaGVja1dhbGxzKCkge1xuICAgIGNvbnN0IGxhc3RTZWdtZW50ID0gdGhpcy5oZWFkO1xuICAgIGlmIChsYXN0U2VnbWVudC5lbmRQb2ludC54IDwgMCkge1xuICAgICAgICB0aGlzLmFkZFNlZ21lbnQobGFzdFNlZ21lbnQuZ2V0Q29udGludWluZ1NlZ21lbnQobmV3IFZlY3Rvcih0aGlzLmNhbnZhc0N0eC5jYW52YXMud2lkdGgsIDApKSk7XG4gICAgfSBcbiAgICBlbHNlIGlmIChsYXN0U2VnbWVudC5lbmRQb2ludC54ID4gdGhpcy5jYW52YXNDdHguY2FudmFzLndpZHRoKSB7XG4gICAgICAgIHRoaXMuYWRkU2VnbWVudChsYXN0U2VnbWVudC5nZXRDb250aW51aW5nU2VnbWVudChuZXcgVmVjdG9yKC10aGlzLmNhbnZhc0N0eC5jYW52YXMud2lkdGgsIDApKSk7XG4gICAgfVxuICAgIFxuICAgIGlmIChsYXN0U2VnbWVudC5lbmRQb2ludC55IDwgMCkge1xuICAgICAgICB0aGlzLmFkZFNlZ21lbnQobGFzdFNlZ21lbnQuZ2V0Q29udGludWluZ1NlZ21lbnQobmV3IFZlY3RvcigwLCB0aGlzLmNhbnZhc0N0eC5jYW52YXMuaGVpZ2h0KSkpO1xuICAgIH0gXG4gICAgZWxzZSBpZiAobGFzdFNlZ21lbnQuZW5kUG9pbnQueSA+IHRoaXMuY2FudmFzQ3R4LmNhbnZhcy5oZWlnaHQpIHtcbiAgICAgICAgdGhpcy5hZGRTZWdtZW50KGxhc3RTZWdtZW50LmdldENvbnRpbnVpbmdTZWdtZW50KG5ldyBWZWN0b3IoMCwgLXRoaXMuY2FudmFzQ3R4LmNhbnZhcy5oZWlnaHQpKSk7XG4gICAgfVxuICAgIFxufVxuXG4gICAgXG59IiwiaW1wb3J0IFNuYWtlIGZyb20gXCIuLi9TbmFrZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBsYXllciB7XHJcbiAgICBwdWJsaWMgdXNlcm5hbWU6IHN0cmluZztcclxuICAgIHB1YmxpYyBpc1JlYWR5OiBib29sZWFuO1xyXG4gICAgcHVibGljIGNvbG9yOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgc25ha2U6IFNuYWtlO1xyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3Rvcih1c2VybmFtZTogc3RyaW5nLCBpc1JlYWR5OiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLnVzZXJuYW1lID0gdXNlcm5hbWU7XHJcbiAgICAgICAgdGhpcy5pc1JlYWR5ID0gaXNSZWFkeTtcclxuICAgICAgICB0aGlzLmNvbG9yID0gXCIjMDAwMDAwXCIucmVwbGFjZSgvMC9nLGZ1bmN0aW9uKCl7cmV0dXJuICh+fihNYXRoLnJhbmRvbSgpKjE2KSkudG9TdHJpbmcoMTYpO30pO1xyXG4gICAgfVxyXG5cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgdXNlcm5hbWU6IHRoaXMudXNlcm5hbWUsXHJcbiAgICAgICAgICBpc1JlYWR5OiB0aGlzLmlzUmVhZHksXHJcbiAgICAgICAgICBjb2xvcjogdGhpcy5jb2xvclxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi9QbGF5ZXJcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBlbnVtIEdhbWVTdGF0ZSB7XHJcbiAgICBSVU5OSU5HLFxyXG4gICAgSU5fTE9CQlksXHJcbiAgICBGSU5JU0hFRFxyXG59XHJcbmV4cG9ydCBjbGFzcyBSb29tIHtcclxuICAgIHByaXZhdGUgcGxheWVyczogeyBba2V5OiBzdHJpbmddOiBQbGF5ZXI7IH0gPSB7fTtcclxuICAgIHByaXZhdGUgbWF4U2l6ZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBnYW1lU3RhdGU6IEdhbWVTdGF0ZTtcclxuICAgIHByaXZhdGUgaG9zdDogUGxheWVyO1xyXG4gICAgcHJpdmF0ZSBjb2RlOiBzdHJpbmc7XHJcblxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvZGU6IHN0cmluZywgaG9zdDogUGxheWVyLCBwbGF5ZXJzPzogeyBba2V5OiBzdHJpbmddOiBQbGF5ZXI7IH0sIG1heFNpemU6IG51bWJlciA9IDUpIHtcclxuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIHRoaXMuaG9zdCA9IGhvc3Q7XHJcbiAgICAgICAgdGhpcy5tYXhTaXplID0gbWF4U2l6ZTtcclxuXHJcbiAgICAgICAgaWYgKHBsYXllcnMgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVycyA9IHBsYXllcnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkUGxheWVyKGhvc3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZFBsYXllcihwbGF5ZXI6IFBsYXllcik6IGJvb2xlYW4ge1xyXG5cclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5wbGF5ZXJzKS5sZW5ndGggPj0gdGhpcy5tYXhTaXplKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucGxheWVyc1twbGF5ZXIudXNlcm5hbWVdID0gcGxheWVyO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRDb2RlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvZGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFBsYXllcnMoKTogeyBba2V5OiBzdHJpbmddOiBQbGF5ZXI7IH0ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBsYXllcnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEhvc3QoKTogUGxheWVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ob3N0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRIb3N0KHBsYXllcjogUGxheWVyKSB7XHJcbiAgICAgICAgdGhpcy5ob3N0ID0gcGxheWVyO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRQbGF5ZXJzKHBsYXllcnM6IHsgW2tleTogc3RyaW5nXTogUGxheWVyOyB9KXtcclxuICAgICAgICB0aGlzLnBsYXllcnMgPSBwbGF5ZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRNYXhTaXplKG5ld1NpemU6IG51bWJlcil7XHJcbiAgICAgICAgdGhpcy5tYXhTaXplID0gbmV3U2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TWF4U2l6ZSgpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1heFNpemU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldEdhbWVTdGF0ZShuZXdHYW1lU3RhdGU6IEdhbWVTdGF0ZSl7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUgPSBuZXdHYW1lU3RhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEdhbWVTdGF0ZSgpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdhbWVTdGF0ZTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IHVwZGF0ZUdhbWVTdGF0ZSB9IGZyb20gXCIuLlwiO1xyXG5pbXBvcnQgeyBjdXJyZW50UGxheWVyLCBzaG93RXJyb3JBbmltYXRpb24sIHNob3dSb29tVmlldywgc3dpdGNoR2FtZVZpZXcsIHVwZGF0ZVJvb21MaXN0IH0gZnJvbSBcIi4uL01lbnVNYW5hZ2VyL2xvZ2luXCI7XHJcbmltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuLi9WaWV3TW9kZWxzL1BsYXllclwiO1xyXG5cclxubGV0IHNvY2tldDogV2ViU29ja2V0O1xyXG5cclxuZnVuY3Rpb24gaW5pdFdlYlNvY2tldCgpIHtcclxuICAgIHNvY2tldCA9IG5ldyBXZWJTb2NrZXQoYHdzOi8vJHt3aW5kb3cubG9jYXRpb24uaG9zdG5hbWV9OjgwODBgKTtcclxuICAgIFxyXG4gICAgc29ja2V0Lm9ub3BlbiA9ICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnV2ViU29ja2V0IGNvbm5lY3Rpb24gZXN0YWJsaXNoZWQnKTtcclxuICAgIH07XHJcblxyXG4gICAgc29ja2V0Lm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdNZXNzYWdlIGZyb20gc2VydmVyOicsIGRhdGEpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ0pPSU5FRF9ST09NJzpcclxuICAgICAgICAgICAgICAgIHNob3dSb29tVmlldyhldmVudC5kYXRhKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdST09NX0RPRVNfTk9UX0VYSVNUJzpcclxuICAgICAgICAgICAgICAgIHNob3dFcnJvckFuaW1hdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ1JPT01fREFUQSc6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVSb29tTGlzdChldmVudC5kYXRhKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdHQU1FX1NUQVRFJzpcclxuICAgICAgICAgICAgICAgIHN3aXRjaEdhbWVWaWV3KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ0dBTUVQTEFZX0RBVEEnOlxyXG4gICAgICAgICAgICAgICAgdXBkYXRlR2FtZVN0YXRlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ0VSUk9SJzpcclxuICAgICAgICAgICAgICAgIGFsZXJ0KGBFcnJvcjogJHtkYXRhLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBzb2NrZXQub25jbG9zZSA9ICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnV2ViU29ja2V0IGNvbm5lY3Rpb24gY2xvc2VkJyk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBzb2NrZXQub25lcnJvciA9IChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1dlYlNvY2tldCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUm9vbSh1c2VybmFtZTogc3RyaW5nKSB7XHJcbiAgICBpZiAoc29ja2V0ICYmIHNvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xyXG4gICAgICAgIHNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogJ0NSRUFURV9ST09NJywgdXNlcm5hbWU6IHVzZXJuYW1lIH0pKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignV2ViU29ja2V0IGNvbm5lY3Rpb24gaXMgbm90IG9wZW4nKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGpvaW5Sb29tKHJvb21Db2RlOiBzdHJpbmcsIHVzZXJuYW1lOiBzdHJpbmcpIHtcclxuICAgIGlmIChzb2NrZXQgJiYgc29ja2V0LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XHJcbiAgICAgICAgc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiAnSk9JTl9ST09NJywgcm9vbUNvZGU6IHJvb21Db2RlLCB1c2VybmFtZTogdXNlcm5hbWUgfSkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdXZWJTb2NrZXQgY29ubmVjdGlvbiBpcyBub3Qgb3BlbicpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0UGxheWVyRGF0YShwbGF5ZXI6IFBsYXllciwgcm9vbUNvZGU6IHN0cmluZykge1xyXG4gICAgaWYgKHNvY2tldCAmJiBzb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcclxuICAgICAgICBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGU6ICdQTEFZRVJfREFUQScsIHBsYXllcjogcGxheWVyLCByb29tQ29kZTogcm9vbUNvZGV9KSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1dlYlNvY2tldCBjb25uZWN0aW9uIGlzIG5vdCBvcGVuJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZW5kS2V5RXZlbnRUb1NlcnZlcihrZXk6IHN0cmluZywgcHJlc3NlZDogYm9vbGVhbil7XHJcbiAgICBpZiAoc29ja2V0ICYmIHNvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xyXG4gICAgICAgIHNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogJ0tFWV9FVkVOVCcsIHBsYXllcjogY3VycmVudFBsYXllciwga2V5OiBrZXksIHByZXNzZWQ6IHByZXNzZWQgfSkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdXZWJTb2NrZXQgY29ubmVjdGlvbiBpcyBub3Qgb3BlbicpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2VuZFN0YXJ0Q29tbWFuZChyb29tQ29kZTogc3RyaW5nKSB7XHJcbiAgICBpZiAoc29ja2V0ICYmIHNvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xyXG4gICAgICAgIHNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogJ0JFR0lOX0dBTUUnLCByb29tQ29kZTogcm9vbUNvZGV9KSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1dlYlNvY2tldCBjb25uZWN0aW9uIGlzIG5vdCBvcGVuJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuaW5pdFdlYlNvY2tldCgpO1xyXG4iLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwidmVjdG9yMmRcIjtcbmltcG9ydCBBcmNTZWdtZW50IGZyb20gXCIuL0FyY1NlZ21lbnRcIjtcbmltcG9ydCB7IGRyYXdHcmlkIH0gZnJvbSBcIi4vRHJhd2VyXCI7XG5pbXBvcnQgSW5wdXRNYW5hZ2VyIGZyb20gXCIuL0lucHV0TWFuYWdlclwiO1xuaW1wb3J0IExpbmVTZWdtZW50IGZyb20gXCIuL0xpbmVTZWdtZW50XCI7XG5pbXBvcnQgU25ha2UgZnJvbSBcIi4vU25ha2VcIjtcbmltcG9ydCBFbWl0dGVyIGZyb20gXCIuL1BhcnRpY2xlU3lzdGVtL0VtaXR0ZXJcIjtcbmltcG9ydCBDb2xsaXNpb25IYW5kbGVyIGZyb20gXCIuL0NvbGxpc2lvbkhhbmRsZXJcIjtcbmltcG9ydCB7IE1lc3NhZ2VHYW1lcGxheSwgbWVzc2FnZUxpbmVTZWdtZW50IH0gZnJvbSBcIi4vV2ViU29ja2V0Q2xpZW50L21lc3NhZ2VUeXBlc1wiO1xuaW1wb3J0IFNlZ21lbnQgZnJvbSBcIi4vU2VnbWVudFwiO1xuaW1wb3J0IHsgY3VycmVudFBsYXllciwgY3VycmVudFJvb20gfSBmcm9tIFwiLi9NZW51TWFuYWdlci9sb2dpblwiO1xuXG52YXIgZnBzQ291bnRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuZnBzQ291bnRlci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG5mcHNDb3VudGVyLnN0eWxlLnRvcCA9ICcxMHB4JztcbmZwc0NvdW50ZXIuc3R5bGUubGVmdCA9ICcxMHB4JztcbmZwc0NvdW50ZXIuc3R5bGUuY29sb3IgPSAnYmxhY2snO1xuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmcHNDb3VudGVyKTtcbmV4cG9ydCB2YXIgZnBzID0gNjA7XG5cbmV4cG9ydCB2YXIgZ2FtZUNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lLWNhbnZhcycpICBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbmV4cG9ydCB2YXIgZ2FtZUNhbnZhc0N0eCA9IGdhbWVDYW52YXMuZ2V0Q29udGV4dCgnMmQnKSE7XG5cbmV4cG9ydCB2YXIgYmFja2dyb3VuZENhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYWNrZ3JvdW5kLWNhbnZhcycpICBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbmV4cG9ydCB2YXIgYmFja2dyb3VuZENhbnZhc0N0eCA9IGJhY2tncm91bmRDYW52YXMuZ2V0Q29udGV4dCgnMmQnKSE7XG5cbmJhY2tncm91bmRDYW52YXMhLndpZHRoID0gYmFja2dyb3VuZENhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbmJhY2tncm91bmRDYW52YXMhLmhlaWdodCA9IGJhY2tncm91bmRDYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuZ2FtZUNhbnZhcyEud2lkdGggPSBnYW1lQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuZ2FtZUNhbnZhcyEuaGVpZ2h0ID0gZ2FtZUNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG5leHBvcnQgdmFyIGdyaWRTaXplID0gNjA7XG5sZXQgaW5wdXRNYW5hZ2VyO1xuZnVuY3Rpb24gdXBkYXRlQ2FudmFzU2l6ZSgpIHtcbiAgICBnYW1lQ2FudmFzLndpZHRoID0gZ2FtZUNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICBnYW1lQ2FudmFzLmhlaWdodCA9IGdhbWVDYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuICAgIGJhY2tncm91bmRDYW52YXMud2lkdGggPSBiYWNrZ3JvdW5kQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgIGJhY2tncm91bmRDYW52YXMuaGVpZ2h0ID0gYmFja2dyb3VuZENhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgZHJhd0dyaWQoKTtcbiAgfVxuXG5mdW5jdGlvbiBhbmltYXRlKCkge1xuICAgIHZhciBtdWx0ID0gZnBzIC8gNjA7XG4gICAgZnJhbWVDb3VudCsrO1xuICAgIGlmIChmcmFtZUNvdW50ICUgMTAgPT09IDApIHtcbiAgICAgICAgZnBzID0gY2FsY3VsYXRlRlBTKCk7XG4gICAgICAgIGZwc0NvdW50ZXIuaW5uZXJUZXh0ID0gYEZQUzogJHtmcHN9YDtcbiAgICB9XG4gICAgZ2FtZUNhbnZhc0N0eC5jbGVhclJlY3QoMCwgMCwgZ2FtZUNhbnZhcy53aWR0aCwgZ2FtZUNhbnZhcy5oZWlnaHQpO1xuXG4gICAgT2JqZWN0LnZhbHVlcyhjdXJyZW50Um9vbS5nZXRQbGF5ZXJzKCkpLmZvckVhY2gocGxheWVyID0+IHtcbiAgICAgICAgcGxheWVyLnNuYWtlLmRyYXcoKTtcbiAgICAgICAgLy8gc25ha2UudXBkYXRlRW1pdHRlcigocGVyZm9ybWFuY2Uubm93KCkvMTAgLSBsYXN0VGltZSkvMTApO1xuICAgIH0pXG4gICAgXG4gICAgLy8gY29sbGlzaW9uSGFuZGxlci5jaGVja0NvbGxpc2lvbnMoKTtcbiAgICAvLyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XG4gICAgXG4gICAgLy8gZW1pdHRlci50aWNrKDAuMyk7XG4gICAgLy8gZW1pdHRlci5kcmF3KCk7XG59XG52YXIgZnJhbWVDb3VudCA9IDA7XG52YXIgbGFzdFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAvIDEwO1xuZnVuY3Rpb24gY2FsY3VsYXRlRlBTKCkge1xuICAgIHZhciBjdXJyZW50VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC8gMTA7XG4gICAgdmFyIHRpbWVEaWZmID0gY3VycmVudFRpbWUgLSBsYXN0VGltZTtcbiAgICB2YXIgZnBzID0gTWF0aC5yb3VuZCgxMDAwIC8gdGltZURpZmYpO1xuICAgIGxhc3RUaW1lID0gY3VycmVudFRpbWU7XG4gICAgcmV0dXJuIGZwcztcbn1cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdXBkYXRlQ2FudmFzU2l6ZSk7XG5kcmF3R3JpZCgpO1xubGV0IGluaXRpYWxpemVkID0gZmFsc2U7XG5cbi8vIGNvbnN0IGlucHV0TWFuYWdlcnM6IElucHV0TWFuYWdlcltdID0gW11cbi8vIGNvbnN0IGNvbG9yczogc3RyaW5nW10gPSBbXCIjZWY4ODg4XCIsIFwiI2ZmMDAwMFwiLCBcIiMwMGFhYmJcIiwgXCIjMDAwMGVlXCJdXG4vLyBjb25zdCBrZXltYXBzOiBzdHJpbmdbXVtdID1bWydBJywnRCddLFsnRicsJ0gnXSxbJ0onLCdMJ10sIFsnOCcsJzAnXV0gXG4vLyBmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKyl7XG4vLyAgICAgbGV0IHN0YXJ0UG9zID0gbmV3IFZlY3RvcihNYXRoLnJhbmRvbSgpKiAxODAwLCBNYXRoLnJhbmRvbSgpKjkwMCk7XG4vLyAgICAgc25ha2VzLnB1c2gobmV3IFNuYWtlKG5ldyBMaW5lU2VnbWVudChzdGFydFBvcywgc3RhcnRQb3MuYWRkKG5ldyBWZWN0b3IoMTAsMTApKSwgdHJ1ZSAsTWF0aC5yYW5kb20oKSogMiogTWF0aC5QSSksIGNvbG9yc1tpXSwgZ2FtZUNhbnZhc0N0eCkpO1xuLy8gICAgIGlucHV0TWFuYWdlcnMucHVzaChuZXcgSW5wdXRNYW5hZ2VyKHNuYWtlc1tpXSwga2V5bWFwc1tpXVswXSwga2V5bWFwc1tpXVsxXSkpXG4vLyB9XG5cbi8vIGNvbnN0IGNvbGxpc2lvbkhhbmRsZXIgPSBuZXcgQ29sbGlzaW9uSGFuZGxlcihzbmFrZXMpXG4vLyBjb25zdCBlbWl0dGVyID0gbmV3IEVtaXR0ZXIobmV3IFZlY3RvcihnYW1lQ2FudmFzLndpZHRoLzIsIGdhbWVDYW52YXMuaGVpZ2h0LzIpLCAyLCAxMCwgNSwgJ2NpcmNsZScsIHtyOjI1NSwgZzowLCBiOjI1NSwgYTowLjV9LCBnYW1lQ2FudmFzQ3R4LCB0cnVlLCB0cnVlLCAyMDApXG5cbi8vIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcblxuXG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVHYW1lU3RhdGUoZ2FtZVN0YXRlOiBNZXNzYWdlR2FtZXBsYXkpIHtcblxuICAgIGlmICghaW5pdGlhbGl6ZWQpIHtcblxuICAgICAgICAvLyBJbml0aWFsaXplIHNuYWtlcyB0aGUgZmlyc3QgdGltZSB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZFxuICAgICAgICBnYW1lU3RhdGUuc25ha2VIZWFkcy5mb3JFYWNoKGhlYWREYXRhID0+IHtcbiAgICAgICAgICAgIGxldCBoZWFkID0gaGVhZERhdGEubGFzdFNlZ21lbnQ7XG4gICAgICAgICAgICBsZXQgdXNlcm5hbWUgPSBoZWFkRGF0YS51c2VybmFtZTtcbiAgICAgICAgICAgIGxldCBwb3MgPSBoZWFkLmVuZFBvaW50XG4gICAgICAgICAgICBjdXJyZW50Um9vbS5nZXRQbGF5ZXJzKClbdXNlcm5hbWVdLnNuYWtlID0gbmV3IFNuYWtlKG5ldyBMaW5lU2VnbWVudChuZXcgVmVjdG9yKHBvcy54LCBwb3MueSkgLCBuZXcgVmVjdG9yKHBvcy54LCBwb3MueSkgLCBoZWFkLmlzQ29sbGlkYWJsZSwgaGVhZC5lbmRBbmdsZSksY3VycmVudFJvb20uZ2V0UGxheWVycygpW3VzZXJuYW1lXS5jb2xvciwgZ2FtZUNhbnZhc0N0eClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaW5wdXRNYW5hZ2VyID0gbmV3IElucHV0TWFuYWdlcihjdXJyZW50Um9vbS5nZXRQbGF5ZXJzKClbY3VycmVudFBsYXllci51c2VybmFtZV0uc25ha2UsJ0EnLCdEJyk7XG5cbiAgICAgICAgaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICB9IFxuICAgICBlbHNlIHtcbiAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIHNuYWtlcyBiYXNlZCBvbiB0aGUgbmV3IGdhbWUgc3RhdGVcbiAgICAgICAgZ2FtZVN0YXRlLnNuYWtlSGVhZHMuZm9yRWFjaChuZXdIZWFkRGF0YSA9PiB7XG4gICAgICAgICAgICBsZXQgaGVhZCA9IG5ld0hlYWREYXRhLmxhc3RTZWdtZW50O1xuICAgICAgICAgICAgbGV0IHVzZXJuYW1lID0gbmV3SGVhZERhdGEudXNlcm5hbWU7XG4gICAgICAgICAgICBsZXQgZW5kUG9zID0gaGVhZC5lbmRQb2ludFxuICAgICAgICAgICAgbGV0IHNuYWtlVG9VcGRhdGUgPSBjdXJyZW50Um9vbS5nZXRQbGF5ZXJzKClbdXNlcm5hbWVdLnNuYWtlO1xuXG4gICAgICAgICAgaWYoaGVhZC5pc05ld1RoaXNUaWNrKXtcbiAgICAgICAgICAgIGlmKG5ld0hlYWREYXRhLnNlZ21lbnRUeXBlID09ICdMaW5lU2VnbWVudCcpe1xuICAgICAgICAgICAgICAgIGhlYWQgPSBoZWFkIGFzIG1lc3NhZ2VMaW5lU2VnbWVudFxuICAgICAgICAgICAgICAgIGxldCBzdGFydFBvcyA9IGhlYWQuc3RhcnRQb2ludDtcbiAgICAgICAgICAgICAgICBzbmFrZVRvVXBkYXRlLmFkZFNlZ21lbnQobmV3IExpbmVTZWdtZW50KG5ldyBWZWN0b3Ioc3RhcnRQb3MueCwgc3RhcnRQb3MueSksIG5ldyBWZWN0b3IoZW5kUG9zLngsIGVuZFBvcy55KSwgaGVhZC5pc0NvbGxpZGFibGUsIGhlYWQuZW5kQW5nbGUpKTtcbiAgICAgICAgICAgIH0gXG4gICAgICAgICAgICBlbHNlIGlmIChuZXdIZWFkRGF0YS5zZWdtZW50VHlwZSA9PSAnQXJjU2VnbWVudCcpe1xuICAgICAgICAgICAgICAgIC8vIHNuYWtlc1tpbmRleF0uYWRkU2VnbWVudChuZXcgQXJjU2VnbWVudChoZWFkLikpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBoZWFkID0gaGVhZCBhcyBtZXNzYWdlTGluZVNlZ21lbnRcbiAgICAgICAgICAgIGxldCBzdGFydFBvcyA9IGhlYWQuc3RhcnRQb2ludDtcbiAgICAgICAgICAgIHNuYWtlVG9VcGRhdGUuc2VnbWVudHNbc25ha2VUb1VwZGF0ZS5zZWdtZW50cy5sZW5ndGgtMV0gPSAobmV3IExpbmVTZWdtZW50KG5ldyBWZWN0b3Ioc3RhcnRQb3MueCwgc3RhcnRQb3MueSksIG5ldyBWZWN0b3IoZW5kUG9zLngsIGVuZFBvcy55KSwgaGVhZC5pc0NvbGxpZGFibGUsIGhlYWQuZW5kQW5nbGUpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBhbmltYXRlKCk7XG5cblxuICB9IiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vKipcbiAqIFRoZXNlIHZhbHVlcyBhcmUgdXNlZCBieSB0aGUgYEFic3RyYWN0VmVjdG9yLnJvdW5kYCBtZXRob2QgdG8gaW5jcmVhc2VcbiAqIHBlcmZvcm1hbmNlIHZzLiB1c2luZyAgTnVtYmVyLnRvRml4ZWQuXG4gKi9cbnZhciBwcmVjaXNpb24gPSBbXG4gICAgMSxcbiAgICAxMCxcbiAgICAxMDAsXG4gICAgMTAwMCxcbiAgICAxMDAwMCxcbiAgICAxMDAwMDAsXG4gICAgMTAwMDAwMCxcbiAgICAxMDAwMDAwMCxcbiAgICAxMDAwMDAwMDAsXG4gICAgMTAwMDAwMDAwMCxcbiAgICAxMDAwMDAwMDAwMFxuXTtcbi8qKlxuICogVGhlIGNsYXNzIHRoYXQgYWxsIG90aGVyIHZlY3RvciByZXByZXNlbnRhdGlvbnMgYXJlIGRlcml2ZWQgZnJvbS5cbiAqXG4gKiBDb250YWlucyB0aGUgY29yZSBpbXBsZW1lbnRhdGlvbiBmb3IgYWxsIG1ldGhvZHMgdGhhdCB3aWxsIGJlIGV4cG9zZWQgYnlcbiAqIHZlY3RvciBpbnN0YW5jZXMuXG4gKlxuICogRXhhbXBsZSBvZiBjcmVhdGluZyBhIGN1c3RvbSBpbXBsZW1lbnRhdGlvbjpcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgQWJzdHJhY3RWZWN0b3IgfSBmcm9tIFwiLi9BYnN0cmFjdFZlY3RvclwiXG4gKlxuICogZXhwb3J0IGNsYXNzIE15Q3VzdG9tVmVjdG9yIGV4dGVuZHMgQWJzdHJhY3RWZWN0b3Ige1xuICogIGNvbnN0cnVjdG9yICh4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICogICAgc3VwZXIoQ3VzdG9tVmVjdG9yVHlwZSlcbiAqICB9XG4gKiB9XG4gKiBgYGBcbiAqL1xudmFyIEFic3RyYWN0VmVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFic3RyYWN0VmVjdG9yKGN0b3IpIHtcbiAgICAgICAgdGhpcy5jdG9yID0gY3RvcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGJvdGggeCBhbmQgeSBheGlzIHZhbHVlXG4gICAgICogQHBhcmFtIHggICBOZXcgeCB2YWxcbiAgICAgKiBAcGFyYW0geSAgIE5ldyB5IHZhbFxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5zZXRBeGVzID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgZm9yIHggdGhlIGF4aXMgdmFsdWVcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHRlciBmb3IgeCBheGlzIHZhbHVlXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnNldFggPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHRlciBmb3IgeSBheGlzIHZhbHVlXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmdldFkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgZm9yIHkgYXhpcy5cbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuc2V0WSA9IGZ1bmN0aW9uICh5KSB7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSB2ZWN0b3IgYXMgYSBmb3JtYXR0ZWQgc3RyaW5nLCBlLmcgXCIoMCwgNClcIlxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChyb3VuZCkge1xuICAgICAgICBpZiAocm91bmQgPT09IHZvaWQgMCkgeyByb3VuZCA9IGZhbHNlOyB9XG4gICAgICAgIGlmIChyb3VuZCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiKFwiICsgTWF0aC5yb3VuZCh0aGlzLngpICsgXCIsIFwiICsgTWF0aC5yb3VuZCh0aGlzLnkpICsgXCIpXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiKFwiICsgdGhpcy54ICsgXCIsIFwiICsgdGhpcy55ICsgXCIpXCI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYW4gQXJyYXkgY29udGFpbmluZyB0aGUgdmVjdG9yIGF4ZXMsIGUuZyBbMCwgNF1cbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueV07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYW4gT2JqZWN0IGNvbnRhaW5pbmcgdGhlIHZlY3RvciBheGVzLCBlLmcgeyB4OiAwLCB5OiA0IH1cbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUudG9PYmplY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiB0aGlzLngsXG4gICAgICAgICAgICB5OiB0aGlzLnlcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZCB0aGUgcHJvdmlkZWQgdmVjdG9yIHRvIHRoaXMgb25lXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh2ZWMpIHtcbiAgICAgICAgdGhpcy54ICs9IHZlYy54O1xuICAgICAgICB0aGlzLnkgKz0gdmVjLnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU3VidHJhY3QgdGhlIHByb3ZpZGVkIHZlY3RvciBmcm9tIHRoaXMgb25lXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnN1YnRyYWN0ID0gZnVuY3Rpb24gKHZlYykge1xuICAgICAgICB0aGlzLnggLT0gdmVjLng7XG4gICAgICAgIHRoaXMueSAtPSB2ZWMueTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiB0aGUgcHJvdmlkZWQgdmVjdG9yIGVxdWFsIHRvIHRoaXMgb25lXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uICh2ZWMpIHtcbiAgICAgICAgcmV0dXJuIHZlYy54ID09PSB0aGlzLnggJiYgdmVjLnkgPT09IHRoaXMueTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE11bHRpcGx5IHRoaXMgdmVjdG9yIGJ5IHRoZSBwcm92aWRlZCB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubXVsdGlwbHlCeVZlY3RvciA9IGZ1bmN0aW9uICh2ZWMpIHtcbiAgICAgICAgdGhpcy54ICo9IHZlYy54O1xuICAgICAgICB0aGlzLnkgKj0gdmVjLnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIHZlY3RvclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5tdWxWID0gZnVuY3Rpb24gKHZlYykge1xuICAgICAgICByZXR1cm4gdGhpcy5tdWx0aXBseUJ5VmVjdG9yKHZlYyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXZpZGUgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIHZlY3RvclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5kaXZpZGVCeVZlY3RvciA9IGZ1bmN0aW9uICh2ZWMpIHtcbiAgICAgICAgdGhpcy54IC89IHZlYy54O1xuICAgICAgICB0aGlzLnkgLz0gdmVjLnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGl2aWRlIHRoaXMgdmVjdG9yIGJ5IHRoZSBwcm92aWRlZCB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuZGl2ViA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpdmlkZUJ5VmVjdG9yKHYpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIG51bWJlclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5tdWx0aXBseUJ5U2NhbGFyID0gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdGhpcy54ICo9IG47XG4gICAgICAgIHRoaXMueSAqPSBuO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE11bHRpcGx5IHRoaXMgdmVjdG9yIGJ5IHRoZSBwcm92aWRlZCBudW1iZXJcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubXVsUyA9IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11bHRpcGx5QnlTY2FsYXIobik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXZpdmUgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIG51bWJlclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5kaXZpZGVCeVNjYWxhciA9IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIHRoaXMueCAvPSBuO1xuICAgICAgICB0aGlzLnkgLz0gbjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXZpdmUgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIG51bWJlclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5kaXZTID0gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGl2aWRlQnlTY2FsYXIobik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBOb3JtYWxpc2UgdGhpcyB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubm9ybWFsaXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXZpZGVCeVNjYWxhcih0aGlzLm1hZ25pdHVkZSgpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZvciBBbWVyaWNhbiBzcGVsbGluZy4gU2FtZSBhcyB1bml0L25vcm1hbGlzZSBmdW5jdGlvblxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGlzZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhlIHNhbWUgYXMgbm9ybWFsaXNlIGFuZCBub3JtYWxpemVcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUudW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXNlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtYWduaXR1ZGUgKGxlbmd0aCkgb2YgdGhpcyB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubWFnbml0dWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgeCA9IHRoaXMueDtcbiAgICAgICAgdmFyIHkgPSB0aGlzLnk7XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtYWduaXR1ZGUgKGxlbmd0aCkgb2YgdGhpcyB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYWduaXR1ZGUoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHNxdXJlZCBsZW5ndGggb2YgdGhpcyB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubGVuZ3RoU3EgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB4ID0gdGhpcy54O1xuICAgICAgICB2YXIgeSA9IHRoaXMueTtcbiAgICAgICAgcmV0dXJuIHggKiB4ICsgeSAqIHk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBkb3QgcHJvZHVjdCBvZiB0aGlzIHZlY3RvciBieSBhbm90aGVyXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmRvdCA9IGZ1bmN0aW9uICh2ZWMpIHtcbiAgICAgICAgcmV0dXJuIHZlYy54ICogdGhpcy54ICsgdmVjLnkgKiB0aGlzLnk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHRoaXMgdmVjdG9yIGJ5IGFub3RoZXIuXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmNyb3NzID0gZnVuY3Rpb24gKHZlYykge1xuICAgICAgICByZXR1cm4gdGhpcy54ICogdmVjLnkgLSB0aGlzLnkgKiB2ZWMueDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldmVyc2VzIHRoaXMgdmVjdG9yIGkuZSBtdWx0aXBsaWVzIGl0IGJ5IC0xXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnJldmVyc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMueCA9IC10aGlzLng7XG4gICAgICAgIHRoaXMueSA9IC10aGlzLnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2ZWN0b3IgYXhlcyB2YWx1ZXMgdG8gYWJzb2x1dGUgdmFsdWVzXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmFicyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy54ID0gTWF0aC5hYnModGhpcy54KTtcbiAgICAgICAgdGhpcy55ID0gTWF0aC5hYnModGhpcy55KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBaZXJvZXMgdGhlIHZlY3RvciBpLmUgc2V0cyBhbGwgYXhlcyB0byAwXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnplcm8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMueCA9IHRoaXMueSA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5kaXN0YW5jZSA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHZhciB4ID0gdGhpcy54IC0gdi54O1xuICAgICAgICB2YXIgeSA9IHRoaXMueSAtIHYueTtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCh4ICogeCArIHkgKiB5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJvdGF0ZXMgdGhlIHZldG9yIGJ5IHByb3ZpZGVkIHJhZGlhbnNcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUucm90YXRlID0gZnVuY3Rpb24gKHJhZHMpIHtcbiAgICAgICAgdmFyIGNvcyA9IE1hdGguY29zKHJhZHMpO1xuICAgICAgICB2YXIgc2luID0gTWF0aC5zaW4ocmFkcyk7XG4gICAgICAgIHZhciBveCA9IHRoaXMueDtcbiAgICAgICAgdmFyIG95ID0gdGhpcy55O1xuICAgICAgICB0aGlzLnggPSBveCAqIGNvcyAtIG95ICogc2luO1xuICAgICAgICB0aGlzLnkgPSBveCAqIHNpbiArIG95ICogY29zO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJvdW5kcyB0aGlzIHZlY3RvciB0byBuIGRlY2ltYWwgcGxhY2VzXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnJvdW5kID0gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgaWYgKG4gPT09IHZvaWQgMCkgeyBuID0gMjsgfVxuICAgICAgICB2YXIgcCA9IHByZWNpc2lvbltuXTtcbiAgICAgICAgLy8gVGhpcyBwZXJmb3JtcyB3YWFheSBiZXR0ZXIgdGhhbiB0b0ZpeGVkIGFuZCBnaXZlIEZsb2F0MzIgdGhlIGVkZ2UgYWdhaW4uXG4gICAgICAgIC8vIGh0dHA6Ly93d3cuZHluYW1pY2d1cnUuY29tL2phdmFzY3JpcHQvcm91bmQtbnVtYmVycy13aXRoLXByZWNpc2lvbi9cbiAgICAgICAgdGhpcy54ID0gKCgwLjUgKyB0aGlzLnggKiBwKSA8PCAwKSAvIHA7XG4gICAgICAgIHRoaXMueSA9ICgoMC41ICsgdGhpcy55ICogcCkgPDwgMCkgLyBwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBjb3B5IG9mIHRoaXMgdmVjdG9yXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMuY3Rvcih0aGlzLngsIHRoaXMueSk7XG4gICAgfTtcbiAgICByZXR1cm4gQWJzdHJhY3RWZWN0b3I7XG59KCkpO1xuZXhwb3J0cy5BYnN0cmFjdFZlY3RvciA9IEFic3RyYWN0VmVjdG9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QWJzdHJhY3RWZWN0b3IuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBBYnN0cmFjdFZlY3Rvcl8xID0gcmVxdWlyZShcIi4vQWJzdHJhY3RWZWN0b3JcIik7XG4vKipcbiAqIEEgdmVjdG9yIHJlcHJlc2VudGF0aW9uIHRoYXQgc3RvcmVzIHRoZSBheGVzIGluIGFuIEFycmF5XG4gKlxuICogYGBgXG4gKiBjb25zdCB2ID0gbmV3IFZlYzJELkFycmF5VmVjdG9yKDIsIDUpXG4gKiBgYGBcbiAqL1xudmFyIEFycmF5VmVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBcnJheVZlY3RvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBcnJheVZlY3Rvcih4LCB5KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIEFycmF5VmVjdG9yKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5heGVzID0gW3gsIHldO1xuICAgICAgICBfdGhpcy5jdG9yID0gQXJyYXlWZWN0b3I7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5VmVjdG9yLnByb3RvdHlwZSwgXCJ4XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5heGVzWzBdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICB0aGlzLmF4ZXNbMF0gPSB4O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlWZWN0b3IucHJvdG90eXBlLCBcInlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmF4ZXNbMV07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHkpIHtcbiAgICAgICAgICAgIHRoaXMuYXhlc1sxXSA9IHk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBBcnJheVZlY3Rvcjtcbn0oQWJzdHJhY3RWZWN0b3JfMS5BYnN0cmFjdFZlY3RvcikpO1xuZXhwb3J0cy5BcnJheVZlY3RvciA9IEFycmF5VmVjdG9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXJyYXlWZWN0b3IuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBBYnN0cmFjdFZlY3Rvcl8xID0gcmVxdWlyZShcIi4vQWJzdHJhY3RWZWN0b3JcIik7XG4vKipcbiAqIEEgdmVjdG9yIHJlcHJlc2VudGF0aW9uIHRoYXQgc3RvcmVzIHRoZSBheGVzIGluIGEgRmxvYXQzMkFycmF5XG4gKlxuICogYGBgXG4gKiBjb25zdCB2ID0gbmV3IFZlYzJELkZsb2F0MzJWZWN0b3IoMiwgNSlcbiAqIGBgYFxuICovXG52YXIgRmxvYXQzMlZlY3RvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRmxvYXQzMlZlY3RvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBGbG9hdDMyVmVjdG9yKHgsIHkpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgRmxvYXQzMlZlY3RvcikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuYXhlcyA9IG5ldyBGbG9hdDMyQXJyYXkoMik7XG4gICAgICAgIF90aGlzLmF4ZXNbMF0gPSB4O1xuICAgICAgICBfdGhpcy5heGVzWzFdID0geTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmxvYXQzMlZlY3Rvci5wcm90b3R5cGUsIFwieFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXhlc1swXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgdGhpcy5heGVzWzBdID0geDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZsb2F0MzJWZWN0b3IucHJvdG90eXBlLCBcInlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmF4ZXNbMV07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHkpIHtcbiAgICAgICAgICAgIHRoaXMuYXhlc1sxXSA9IHk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBGbG9hdDMyVmVjdG9yO1xufShBYnN0cmFjdFZlY3Rvcl8xLkFic3RyYWN0VmVjdG9yKSk7XG5leHBvcnRzLkZsb2F0MzJWZWN0b3IgPSBGbG9hdDMyVmVjdG9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RmxvYXQzMlZlY3Rvci5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG59XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9BYnN0cmFjdFZlY3RvclwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9BcnJheVZlY3RvclwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9GbG9hdDMyVmVjdG9yXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL1ZlY3RvclwiKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1WZWMyRC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEFic3RyYWN0VmVjdG9yXzEgPSByZXF1aXJlKFwiLi9BYnN0cmFjdFZlY3RvclwiKTtcbi8qKlxuICogQSB2ZWN0b3IgcmVwcmVzZW50YXRpb24gdGhhdCBzdG9yZXMgdGhlIGF4ZXMgYXMgcGFydCBvZiB0aGUgaW5zdGFuY2UgaXRzZWxmXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IHYgPSBuZXcgVmVjMkQuVmVjdG9yKDIsIDUpXG4gKiBgYGBcbiAqL1xudmFyIFZlY3RvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVmVjdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFZlY3Rvcih4LCB5KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFZlY3RvcikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuX3ggPSB4O1xuICAgICAgICBfdGhpcy5feSA9IHk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlY3Rvci5wcm90b3R5cGUsIFwieFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3g7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHRoaXMuX3ggPSB4O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVmVjdG9yLnByb3RvdHlwZSwgXCJ5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5feTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoeSkge1xuICAgICAgICAgICAgdGhpcy5feSA9IHk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBWZWN0b3I7XG59KEFic3RyYWN0VmVjdG9yXzEuQWJzdHJhY3RWZWN0b3IpKTtcbmV4cG9ydHMuVmVjdG9yID0gVmVjdG9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VmVjdG9yLmpzLm1hcCIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9XZWJTb2NrZXRDbGllbnQvd2Vic29ja2V0LnRzXCIpO1xuIl0sIm5hbWVzIjpbImNlbnRlciIsInJhZGl1cyIsInN0YXJ0QW5nbGUiLCJlbmRBbmdsZSIsImNvdW50ZXJDbG9ja3dpc2UiLCJpc0NvbGxpZGFibGUiLCJkcmF3IiwiY29udGV4dCIsImNvbG9yIiwibGluZUNhcCIsInN0cm9rZVN0eWxlIiwidGhpcyIsImJlZ2luUGF0aCIsImFyYyIsIngiLCJ5Iiwic3Ryb2tlIiwiY2xvc2VQYXRoIiwiZHJhd0RlYnVnIiwidGFuZ2VudF9hbmdsZSIsIk1hdGgiLCJQSSIsImRyYXdEb3QiLCJkcmF3QXJyb3ciLCJlbmRQb2ludCIsImNvcyIsInNpbiIsImRyYXdBcmMiLCJpc0NvdW50ZXJDbG9ja3dpc2UiLCJnZXRDb250aW51aW5nU2VnbWVudCIsInRyYW5zZm9ybSIsIkFyY1NlZ21lbnQiLCJjbG9uZSIsImFkZCIsImRyYXdHcmlkIiwiYmFja2dyb3VuZENhbnZhc0N0eCIsImNsZWFyUmVjdCIsImJhY2tncm91bmRDYW52YXMiLCJ3aWR0aCIsImhlaWdodCIsImxpbmVXaWR0aCIsImdyaWRTaXplIiwibW92ZVRvIiwibGluZVRvIiwiZG90WCIsImRvdFkiLCJkb3RTaXplIiwiZmlsbFN0eWxlIiwiZmlsbCIsImN0eCIsImZyb20iLCJ0byIsImFuZ2xlIiwiYXRhbjIiLCJoZWFkTGVuZ3RoIiwibmV3X3RvIiwiVmVjdG9yIiwic25ha2UiLCJsZWZ0S2V5IiwicmlnaHRLZXkiLCJrZXlNYXAiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwib25LZXlEb3duIiwiYmluZCIsIm9uS2V5VXAiLCJldmVudCIsImlzQWxpdmUiLCJrZXkiLCJ0b1VwcGVyQ2FzZSIsImhlYWQiLCJzZW5kS2V5RXZlbnRUb1NlcnZlciIsImRpc3Bvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic3RhcnQiLCJlbmQiLCJzdGFydFBvaW50IiwiY2FsY0VuZEFuZ2xlIiwiYXRhbiIsInNxcnQiLCJ0cmFuc2Zvcm1lZEVuZHBvaW50IiwiTGluZVNlZ21lbnQiLCJjdXJyZW50Um9vbSIsImN1cnJlbnRQbGF5ZXIiLCJyb29tQ29kZUlucHV0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInVzZXJuYW1lSW5wdXQiLCJyb29tQnV0dG9uIiwicmVhZHlCdXR0b24iLCJsb2dpbkRpdiIsInJvb21EaXYiLCJnYW1lRGl2IiwiY29sb3JQaWNrZXIiLCJyb29tVXNlcnNMaXN0Iiwicm9vbUNvZGVTcGFuIiwicGxheWVyQ291bnQiLCJjb2xvclBpY2tlckRpdiIsInN0YXJ0UHJvZ3Jlc3NCYXIiLCJ1cGRhdGVCdXR0b24iLCJ2YWx1ZSIsInRyaW0iLCJkaXNhYmxlZCIsImxlbmd0aCIsInRleHRDb250ZW50IiwiaGFuZGxlUm9vbUFjdGlvbiIsInVzZXJuYW1lIiwiUGxheWVyIiwiaW5uZXJUZXh0IiwiY3JlYXRlUm9vbSIsImpvaW5Sb29tIiwiaGFuZGxlUmVhZHlTdGF0ZSIsImlzUmVhZHkiLCJzZXRQbGF5ZXJEYXRhIiwiZ2V0Q29kZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsInNob3dSb29tVmlldyIsImRhdGEiLCJyb29tSW5mbyIsIkpTT04iLCJwYXJzZSIsInRvU3RyaW5nIiwiUm9vbSIsImdldEhvc3QiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsInBpY2tUZXh0Q29sb3JCYXNlZE9uQmdDb2xvckFkdmFuY2VkIiwiaW5uZXJIVE1MIiwidXBkYXRlUm9vbUxpc3QiLCJyZWFkeVBsYXllckNvdW50IiwibWF4UGxheWVyQ291bnQiLCJzZXRQbGF5ZXJzIiwic2V0SG9zdCIsInNldE1heFNpemUiLCJPYmplY3QiLCJrZXlzIiwiZ2V0UGxheWVycyIsImdldE1heFNpemUiLCJ2YWx1ZXMiLCJmb3JFYWNoIiwicGxheWVyIiwicGxheWVySXRlbSIsImNyZWF0ZUVsZW1lbnQiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJhcHBlbmRDaGlsZCIsImZpbHRlciIsInAiLCJmbG9vciIsInNob3dFcnJvckFuaW1hdGlvbiIsInNldFRpbWVvdXQiLCJ1cGRhdGVDb2xvclBpY2tlciIsInVwZGF0ZVBsYXllckNvbG9yIiwiYmdDb2xvciIsImxpZ2h0Q29sb3IiLCJkYXJrQ29sb3IiLCJjaGFyQXQiLCJzdWJzdHJpbmciLCJjIiwicGFyc2VJbnQiLCJtYXAiLCJjb2wiLCJwb3ciLCJzd2l0Y2hHYW1lVmlldyIsInN0YXRlIiwic2V0R2FtZVN0YXRlIiwib25sb2FkIiwic3RhcnRHYW1lIiwic2VuZFN0YXJ0Q29tbWFuZCIsInBvc2l0aW9uIiwiZW1pdEludGVydmFsIiwic2l6ZSIsInNwZWVkIiwic2hhcGUiLCJjYW52YXNDdHgiLCJmYWRlQ29sb3IiLCJmYWRlU2l6ZSIsImFnZSIsImVtaXRUaW1lTWlsbGlzIiwiYWxpdmVQYXJ0aWNsZXMiLCJ0aWNrcyIsImVtaXRUaW1lIiwicGFydGljbGVNYXhBZ2UiLCJ0aWNrIiwiZHQiLCJwdXNoIiwiZ2V0UmFuZG9tRGlyZWN0aW9uIiwicGFydGljbGUiLCJ2ZWxvY2l0eSIsImNvbG9yRmFkZUFtb3VudCIsImEiLCJzaXplRmFkZUFtb3VudCIsIm11bHRpcGx5QnlTY2FsYXIiLCJyIiwiZyIsImIiLCJmaWxsUmVjdCIsInJhbmRvbSIsImhleFRvUmdiIiwiaGV4IiwicmVzdWx0IiwiZXhlYyIsInN0YXJ0UG9zIiwic2VnbWVudHMiLCJ0dXJuUmFkaXVzIiwiZW1pdHRlciIsImRpc3RhbmNlVG9DaGFuZ2VPZlN0YXRlIiwiYWRkU2VnbWVudCIsInNlZ21lbnQiLCJzbGljZSIsInBvcCIsImluZGV4Iiwia2lsbCIsImNvbnNvbGUiLCJsb2ciLCJ1cGRhdGVFbWl0dGVyIiwiY2hlY2tXYWxscyIsImxhc3RTZWdtZW50IiwiY2FudmFzIiwicmVwbGFjZSIsInRvSlNPTiIsImNvZGUiLCJob3N0IiwicGxheWVycyIsIm1heFNpemUiLCJ1bmRlZmluZWQiLCJhZGRQbGF5ZXIiLCJuZXdTaXplIiwibmV3R2FtZVN0YXRlIiwiZ2FtZVN0YXRlIiwiZ2V0R2FtZVN0YXRlIiwic29ja2V0IiwicmVhZHlTdGF0ZSIsIldlYlNvY2tldCIsIk9QRU4iLCJzZW5kIiwic3RyaW5naWZ5IiwidHlwZSIsImVycm9yIiwicm9vbUNvZGUiLCJwcmVzc2VkIiwibG9jYXRpb24iLCJob3N0bmFtZSIsIm9ub3BlbiIsIm9ubWVzc2FnZSIsInVwZGF0ZUdhbWVTdGF0ZSIsImFsZXJ0IiwibWVzc2FnZSIsIm9uY2xvc2UiLCJvbmVycm9yIiwiZnBzQ291bnRlciIsInRvcCIsImxlZnQiLCJib2R5IiwiZnBzIiwiZ2FtZUNhbnZhcyIsImdhbWVDYW52YXNDdHgiLCJnZXRDb250ZXh0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZnJhbWVDb3VudCIsImxhc3RUaW1lIiwicGVyZm9ybWFuY2UiLCJub3ciLCJpbml0aWFsaXplZCIsInNuYWtlSGVhZHMiLCJuZXdIZWFkRGF0YSIsImVuZFBvcyIsInNuYWtlVG9VcGRhdGUiLCJpc05ld1RoaXNUaWNrIiwic2VnbWVudFR5cGUiLCJoZWFkRGF0YSIsInBvcyIsImN1cnJlbnRUaW1lIiwidGltZURpZmYiLCJyb3VuZCIsImNhbGN1bGF0ZUZQUyIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInByZWNpc2lvbiIsIkFic3RyYWN0VmVjdG9yIiwiY3RvciIsInByb3RvdHlwZSIsInNldEF4ZXMiLCJnZXRYIiwic2V0WCIsImdldFkiLCJzZXRZIiwidG9BcnJheSIsInRvT2JqZWN0IiwidmVjIiwic3VidHJhY3QiLCJlcXVhbHMiLCJtdWx0aXBseUJ5VmVjdG9yIiwibXVsViIsImRpdmlkZUJ5VmVjdG9yIiwiZGl2ViIsInYiLCJuIiwibXVsUyIsImRpdmlkZUJ5U2NhbGFyIiwiZGl2UyIsIm5vcm1hbGlzZSIsIm1hZ25pdHVkZSIsIm5vcm1hbGl6ZSIsInVuaXQiLCJsZW5ndGhTcSIsImRvdCIsImNyb3NzIiwicmV2ZXJzZSIsImFicyIsInplcm8iLCJkaXN0YW5jZSIsInJvdGF0ZSIsInJhZHMiLCJveCIsIm95IiwiZXh0ZW5kU3RhdGljcyIsIl9fZXh0ZW5kcyIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJkIiwiaGFzT3duUHJvcGVydHkiLCJfXyIsImNvbnN0cnVjdG9yIiwiY3JlYXRlIiwiQXJyYXlWZWN0b3IiLCJfc3VwZXIiLCJfdGhpcyIsImNhbGwiLCJheGVzIiwiZ2V0Iiwic2V0IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIkZsb2F0MzJWZWN0b3IiLCJGbG9hdDMyQXJyYXkiLCJfX2V4cG9ydCIsIm0iLCJfeCIsIl95IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkZWZpbml0aW9uIiwibyIsIm9iaiIsInByb3AiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyJdLCJzb3VyY2VSb290IjoiIn0=
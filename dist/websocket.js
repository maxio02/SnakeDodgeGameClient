/*! For license information please see websocket.js.LICENSE.txt */
(()=>{"use strict";var t={"./src/ArcSegment.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>c});var o,r=n("./src/Drawer.ts"),i=n("./node_modules/vector2d/src/Vec2D.js"),s=n("./src/Segment.ts"),a=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const c=function(t){function e(e,n,o,r,i,s){var a=t.call(this)||this;return a.center=e,a.radius=n,a.startAngle=o,a.endAngle=r,a.counterClockwise=i,a.isCollidable=s,a}return a(e,t),e.prototype.draw=function(t,e){var n=t.canvas.width/2e3,o=t.canvas.height/2e3;t.lineCap="round",t.strokeStyle=e,1==this.isCollidable&&(t.beginPath(),t.arc(this.center.x*n,this.center.y*o,this.radius*Math.min(n,o),this.startAngle,this.endAngle,this.counterClockwise),t.stroke(),t.closePath())},e.prototype.drawDebug=function(t,e){var n=this.counterClockwise?-Math.PI:Math.PI;n+=this.endAngle,t.lineCap="round",(0,r.drawDot)(this.center.x,this.center.y,5,"#000000"),(0,r.drawArrow)(t,new i.Vector(this.endPoint.x,this.endPoint.y),new i.Vector(this.endPoint.x+this.radius*Math.cos(n),this.endPoint.y+this.radius*Math.sin(n))),(0,r.drawArc)(this.center.x,this.center.y,this.radius,0,0,!1)},Object.defineProperty(e.prototype,"endPoint",{get:function(){return new i.Vector(this.center.x+this.radius*Math.cos(this.endAngle),this.center.y+this.radius*Math.sin(this.endAngle))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"penpendicularEndAngle",{get:function(){return this.isCounterClockwise?this.endAngle-Math.PI/2:this.endAngle+Math.PI/2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"penpendicularStartAngle",{get:function(){return this.isCounterClockwise?this.startAngle-Math.PI/2:this.startAngle+Math.PI/2},enumerable:!1,configurable:!0}),e.prototype.isCounterClockwise=function(){return this.counterClockwise},e.prototype.getContinuingSegment=function(t){return new e(this.center.clone().add(t),this.radius,this.endAngle,this.endAngle,this.counterClockwise,this.isCollidable)},e}(s.default)},"./src/Drawer.ts":(t,e,n)=>{n.r(e),n.d(e,{drawArc:()=>a,drawArrow:()=>c,drawDot:()=>s,drawGrid:()=>i});var o=n("./node_modules/vector2d/src/Vec2D.js"),r=n("./src/index.ts");function i(){var t=r.backgroundCanvasCtx.canvas.width/2e3,e=r.backgroundCanvasCtx.canvas.height/2e3;r.backgroundCanvasCtx.clearRect(0,0,r.backgroundCanvas.width,r.backgroundCanvas.height),r.backgroundCanvasCtx.strokeStyle="rgba(0, 0, 0, 0.3)",r.backgroundCanvasCtx.lineWidth=2;for(var n=r.gridSize;n<r.backgroundCanvas.width;n+=r.gridSize*t)r.backgroundCanvasCtx.beginPath(),r.backgroundCanvasCtx.moveTo(n,0),r.backgroundCanvasCtx.lineTo(n,r.backgroundCanvas.height),r.backgroundCanvasCtx.stroke();for(var o=r.gridSize;o<r.backgroundCanvas.height;o+=r.gridSize*e)r.backgroundCanvasCtx.beginPath(),r.backgroundCanvasCtx.moveTo(0,o),r.backgroundCanvasCtx.lineTo(r.backgroundCanvas.width,o),r.backgroundCanvasCtx.stroke()}function s(t,e,n,o){r.backgroundCanvasCtx.beginPath(),r.backgroundCanvasCtx.arc(t,e,n,0,2*Math.PI,!1),r.backgroundCanvasCtx.fillStyle=o,r.backgroundCanvasCtx.fill(),r.backgroundCanvasCtx.closePath()}function a(t,e,n,o,i,s){r.backgroundCanvasCtx.lineCap="round",r.backgroundCanvasCtx.strokeStyle="#3466aa",r.backgroundCanvasCtx.beginPath(),r.backgroundCanvasCtx.arc(t,e,n,0,2*Math.PI,s),r.backgroundCanvasCtx.lineWidth=5,r.backgroundCanvasCtx.stroke(),r.backgroundCanvasCtx.closePath()}function c(t,e,n){if(e.x!=n.x&&e.y!=n.y){var r=Math.atan2(n.y-e.y,n.x-e.x),i=10,s=new o.Vector(n.x,n.y);s.x-=11.5*Math.cos(r),s.y-=11.5*Math.sin(r),t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(s.x,s.y),t.strokeStyle="#bbbbbb",t.lineWidth=10,t.stroke(),t.beginPath(),t.moveTo(s.x,s.y),t.lineTo(s.x-i*Math.cos(r-Math.PI/7),s.y-i*Math.sin(r-Math.PI/7)),t.lineTo(s.x-i*Math.cos(r+Math.PI/7),s.y-i*Math.sin(r+Math.PI/7)),t.lineTo(s.x,s.y),t.lineTo(s.x-i*Math.cos(r-Math.PI/7),s.y-i*Math.sin(r-Math.PI/7)),t.strokeStyle="#bbbbbb",t.lineWidth=10,t.stroke(),t.fillStyle="#bbbbbb",t.fill(),t.closePath()}}},"./src/InputManager.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});var o=n("./src/WebSocketClient/websocket.ts");const r=function(){function t(t,e,n){this.keyMap={},window.addEventListener("keydown",this.onKeyDown.bind(this)),window.addEventListener("keyup",this.onKeyUp.bind(this)),this.snake=t,this.leftKey=e,this.rightKey=n}return t.prototype.onKeyDown=function(t){if(this.snake.isAlive){var e=t.key.toUpperCase();if(e==this.leftKey||e==this.rightKey){if(this.keyMap[this.rightKey]&&e==this.leftKey)this.keyMap[this.rightKey]=!1;else if(this.keyMap[this.leftKey]&&e==this.rightKey)this.keyMap[this.leftKey]=!1;else if(this.keyMap[e])return;this.keyMap[e]=!0,(0,o.sendKeyEventToServer)(e==this.rightKey?1:0,!0)}}},t.prototype.onKeyUp=function(t){if(this.snake.isAlive){var e=t.key.toUpperCase();this.keyMap[e]&&(this.keyMap[e]=!1,(0,o.sendKeyEventToServer)(e==this.rightKey?1:0,!1))}},t.prototype.dispose=function(){window.removeEventListener("keydown",this.onKeyDown.bind(this)),window.removeEventListener("keyup",this.onKeyUp.bind(this))},t}()},"./src/LineSegment.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var o,r=n("./src/Segment.ts"),i=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const s=function(t){function e(e,n,o,r){var i=t.call(this)||this;return i.isCollidable=!0,i.startPoint=e,i.endPoint=n,i.isCollidable=o,i.endAngle=r,i}return i(e,t),e.prototype.draw=function(t,e){var n=t.canvas.width/2e3,o=t.canvas.height/2e3;t.strokeStyle=e,t.lineCap="round",1==this.isCollidable&&(t.beginPath(),t.moveTo(this.startPoint.x*n,this.startPoint.y*o),t.lineTo(this.endPoint.x*n,this.endPoint.y*o),t.stroke(),t.closePath())},e.prototype.calcEndAngle=function(){return Math.atan((this.endPoint.y-this.startPoint.y)/(this.endPoint.x-this.startPoint.x))},Object.defineProperty(e.prototype,"length",{get:function(){return Math.sqrt(Math.pow(this.startPoint.x-this.endPoint.x,2)+Math.pow(this.startPoint.y-this.endPoint.y,2))},enumerable:!1,configurable:!0}),e.prototype.getContinuingSegment=function(t){var n=this.endPoint.clone().add(t);return new e(n,n,this.isCollidable,this.endAngle)},e}(r.default)},"./src/MenuManager/login.ts":(t,e,n)=>{n.r(e),n.d(e,{currentPlayer:()=>c,currentRoom:()=>a,handleReadyState:()=>S,handleRoomAction:()=>P,showErrorAnimation:()=>_,showRoomView:()=>k,switchGameView:()=>j,updateButton:()=>w,updateColorPicker:()=>A,updatePlayerColor:()=>O,updateRoomList:()=>M});var o=n("./src/index.ts"),r=n("./src/ViewModels/Player.ts"),i=n("./src/ViewModels/Room.ts"),s=n("./src/WebSocketClient/websocket.ts"),a=null,c=null,l=document.getElementById("roomCodeInput"),u=document.getElementById("usernameInput"),d=document.getElementById("joinButton"),h=document.getElementById("readyButton"),y=document.getElementById("login-div"),p=document.getElementById("room-div"),f=document.getElementById("game-canvas-container"),g=document.getElementById("color-picker"),m=document.getElementById("room-users-list"),v=document.getElementById("room-code"),b=document.getElementById("player-count"),x=document.getElementById("color-picker-container"),C=document.getElementById("start-progress-bar");function w(){""==u.value.trim()?d.disabled=!0:d.disabled=!1,5==l.value.trim().length?d.textContent="JOIN ROOM":d.textContent="CREATE ROOM"}function P(){var t=u.value;t&&(c=new r.Player(t),"CREATE ROOM"===d.innerText?(0,s.createRoom)(u.value):(0,s.joinRoom)(l.value.toUpperCase(),u.value))}function S(){c.isReady=!c.isReady,(0,s.setPlayerData)(c,a.getCode()),c.isReady?(h.classList.remove("red-button"),h.classList.add("green-button")):(h.classList.add("red-button"),h.classList.remove("green-button"))}function k(t){var e=JSON.parse(t.toString());a=new i.Room(e.room.code,e.room.host,e.room.players,e.room.maxSize),c.username==a.getHost().username&&document.getElementById("startButton").classList.remove("display-none"),x.style.backgroundColor=c.color,g.value=c.color,document.getElementById("color-label").style.color=E(g.value,"#FFFFFF","#000000"),y.classList.add("display-none"),p.classList.add("display-flex"),l.value=a.getCode(),v.innerHTML=a.getCode(),(0,s.setPlayerData)(c,a.getCode()),M(t)}function M(t){var e,n,o=JSON.parse(t.toString());a.setPlayers(o.room.players),a.setHost(o.room.host),a.setMaxSize(o.room.maxSize),b.innerHTML="".concat(Object.keys(a.getPlayers()).length,"/").concat(a.getMaxSize()),m.innerHTML="",Object.values(a.getPlayers()).forEach((function(t){var e=document.createElement("li");e.textContent=t.username+"",t.username==a.getHost().username?e.insertAdjacentHTML("afterbegin",'<i class="fa-solid fa-crown" style="color: '.concat(t.color,';"></i>')):e.insertAdjacentHTML("afterbegin",'<i class="fa-solid fa-circle" style="color: '.concat(t.color,'; margin-left: 4px"></i>')),t.isReady?e.insertAdjacentHTML("beforeend",' <i class="fa-solid fa-circle" style="color: #37cb48;"></i>'):e.insertAdjacentHTML("beforeend",' <i class="fa-solid fa-circle" style="color: #cb3737;"></i>'),m.appendChild(e)})),c.username==a.getHost().username&&document.getElementById("startButton").classList.remove("display-none"),e=Object.values(a.getPlayers()).filter((function(t){return t.isReady})).length,0!=(n=a.getMaxSize())&&(C.style.width=Math.floor(e/n*100)+"%")}function _(){d.classList.add("red-button"),d.classList.add("wiggle"),setTimeout((function(){d.classList.remove("red-button"),d.classList.remove("wiggle")}),600)}function A(){x.style.backgroundColor=g.value}function O(){c.color=g.value,document.getElementById("color-label").style.color=E(g.value,"#FFFFFF","#000000"),(0,s.setPlayerData)(c,a.getCode())}function E(t,e,n){var o="#"===t.charAt(0)?t.substring(1,7):t,r=[parseInt(o.substring(0,2),16)/255,parseInt(o.substring(2,4),16)/255,parseInt(o.substring(4,6),16)/255].map((function(t){return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}));return.2126*r[0]+.7152*r[1]+.0722*r[2]>.4?n:e}function j(t){switch(t.state){case 0:a.setGameState(0),y.classList.add("display-none"),p.classList.add("display-none"),p.classList.remove("display-flex"),f.classList.remove("display-none"),f.classList.add("display-flex"),(0,o.updateCanvasSize)();break;case 1:a.setGameState(1),y.classList.add("display-none"),p.classList.add("display-flex"),f.classList.add("display-none")}}window.onload=function(){w()},window.updateButton=w,window.handleRoomAction=P,window.handleReadyState=S,window.updateColorPicker=A,window.updatePlayerColor=O,window.startGame=function(){c.username==a.getHost().username&&(0,s.sendStartCommand)(a.getCode())}},"./src/ParticleSystem/Emitter.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var o=n("./src/ParticleSystem/Particle.ts"),r=n("./src/ParticleSystem/ParticleSystemUtils.ts"),i=function(){return i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},i.apply(this,arguments)};const s=function(){function t(t,e,n,o,r,i,s,a,c,l,u){void 0===r&&(r="circle"),void 0===a&&(a=!0),void 0===c&&(c=!0),void 0===u&&(u=0),this.aliveParticles=[],this.ticks=0,this.position=t,this.emitTime=e,this.size=n,this.speed=o,this.shape=r,this.color=i,this.canvasCtx=s,this.fadeColor=a,this.fadeSize=c,this.particleMaxAge=l,this.emitTimeMillis=u}return t.prototype.tick=function(t){this.emitTimeMillis+this.particleMaxAge<0||(this.emitTimeMillis-=t,this.ticks%this.emitTime==0&&this.emitTimeMillis>0&&(this.aliveParticles.push(new o.default(this.position.clone(),(0,r.getRandomDirection)(),this.size,this.speed,this.shape,i({},this.color),this.canvasCtx,this.particleMaxAge,this.fadeColor,this.fadeSize)),this.aliveParticles.push(new o.default(this.position.clone(),(0,r.getRandomDirection)(),this.size,this.speed,this.shape,i({},this.color),this.canvasCtx,this.particleMaxAge,this.fadeColor,this.fadeSize)),this.aliveParticles.push(new o.default(this.position.clone(),(0,r.getRandomDirection)(),this.size,this.speed,this.shape,i({},this.color),this.canvasCtx,this.particleMaxAge,this.fadeColor,this.fadeSize))),this.aliveParticles.forEach((function(e){e.tick(t)})),this.aliveParticles=this.aliveParticles.filter((function(t){return t.age>0})),this.ticks++)},t.prototype.draw=function(){this.aliveParticles.forEach((function(t){t.draw()}))},t}()},"./src/ParticleSystem/Particle.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>o});const o=function(){function t(t,e,n,o,r,i,s,a,c,l){void 0===r&&(r="circle"),this.position=t,this.velocity=e,this.size=n,this.speed=o,this.shape=r,this.color=i,this.canvasCtx=s,this.fadeColor=c,this.fadeSize=l,this.age=a,this.colorFadeAmount=this.color.a/this.age,this.sizeFadeAmount=this.size/this.age}return t.prototype.tick=function(t){this.position.add(this.velocity.clone().multiplyByScalar(t*this.speed)),this.fadeColor&&(this.color.a-=this.colorFadeAmount),this.fadeSize&&(this.size-=this.sizeFadeAmount),this.age--},t.prototype.draw=function(){switch(this.canvasCtx.moveTo(this.position.x,this.position.y),this.canvasCtx.fillStyle="rgba(".concat(this.color.r,",").concat(this.color.g,", ").concat(this.color.b,", ").concat(this.color.a,")"),this.canvasCtx.beginPath(),this.shape){case"circle":this.canvasCtx.arc(this.position.x,this.position.y,this.size,0,2*Math.PI),this.canvasCtx.fill();break;case"square":this.canvasCtx.fillRect(this.position.x-this.size,this.position.y-this.size,2*this.size,2*this.size)}this.canvasCtx.closePath()},t}()},"./src/ParticleSystem/ParticleSystemUtils.ts":(t,e,n)=>{n.r(e),n.d(e,{getRandomDirection:()=>r,hexToRgb:()=>i});var o=n("./node_modules/vector2d/src/Vec2D.js");function r(){return new o.Vector(2*Math.random()-1,2*Math.random()-1)}function i(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}},"./src/Segment.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>o});const o=function(){}},"./src/Snake.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var o=n("./src/ParticleSystem/Emitter.ts"),r=n("./src/ParticleSystem/ParticleSystemUtils.ts"),i=function(){return i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},i.apply(this,arguments)};const s=function(){function t(t,e,n){this.segments=[],this.isAlive=!0,this.turnRadius=60,this.emitter=null,this.addSegment(t),this.color=e,this.canvasCtx=n}return t.prototype.addSegment=function(t){this.segments.push(t)},Object.defineProperty(t.prototype,"head",{get:function(){return this.segments.slice(-1).pop()},enumerable:!1,configurable:!0}),t.prototype.draw=function(){var t=this,e=this.canvasCtx.canvas.width/2e3,n=this.canvasCtx.canvas.height/2e3;this.canvasCtx.lineWidth=12*Math.min(e,n),this.segments.forEach((function(o,r){o.draw(t.canvasCtx,t.color),t.head==o&&(t.canvasCtx.beginPath(),t.canvasCtx.arc(o.endPoint.x*e,o.endPoint.y*n,.5*Math.min(e,n),0,2*Math.PI),t.canvasCtx.stroke(),t.canvasCtx.closePath())}))},t.prototype.kill=function(){console.log("SNAKE DEAD"),this.isAlive=!1,this.emitter=new o.default(this.head.endPoint,1,7,4,"circle",i(i({},(0,r.hexToRgb)(this.color)),{a:1}),this.canvasCtx,!0,!0,70,4)},t.prototype.updateEmitter=function(t){this.emitter&&(this.emitter.tick(t),this.emitter.draw())},t}()},"./src/ViewModels/Player.ts":(t,e,n)=>{n.r(e),n.d(e,{Player:()=>o});var o=function(){function t(t,e){void 0===e&&(e=!1),this.username=t,this.isReady=e,this.color="#000000".replace(/0/g,(function(){return(~~(16*Math.random())).toString(16)}))}return t.prototype.toJSON=function(){return{username:this.username,isReady:this.isReady,color:this.color}},t}()},"./src/ViewModels/Room.ts":(t,e,n)=>{n.r(e),n.d(e,{Room:()=>o});var o=function(){function t(t,e,n,o){void 0===o&&(o=5),this.players={},this.code=t,this.host=e,this.maxSize=o,null!=n?this.players=n:this.addPlayer(e)}return t.prototype.addPlayer=function(t){return!(Object.keys(this.players).length>=this.maxSize||(this.players[t.username]=t,0))},t.prototype.getCode=function(){return this.code},t.prototype.getPlayers=function(){return this.players},t.prototype.getHost=function(){return this.host},t.prototype.setHost=function(t){this.host=t},t.prototype.setPlayers=function(t){this.players=t},t.prototype.setMaxSize=function(t){this.maxSize=t},t.prototype.getMaxSize=function(){return this.maxSize},t.prototype.setGameState=function(t){this.gameState=t},t.prototype.getGameState=function(){return this.gameState},t}()},"./src/WebSocketClient/websocket.ts":(t,e,n)=>{n.r(e),n.d(e,{createRoom:()=>s,joinRoom:()=>a,sendKeyEventToServer:()=>l,sendStartCommand:()=>u,setPlayerData:()=>c});var o,r=n("./src/index.ts"),i=n("./src/MenuManager/login.ts");function s(t){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"CREATE_ROOM",username:t})):console.error("WebSocket connection is not open")}function a(t,e){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"JOIN_ROOM",roomCode:t,username:e})):console.error("WebSocket connection is not open")}function c(t,e){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"PLAYER_DATA",player:t,roomCode:e})):console.error("WebSocket connection is not open")}function l(t,e){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"KEY_EVENT",roomCode:i.currentRoom.getCode(),username:i.currentPlayer.username,key:t,pressed:e})):console.error("WebSocket connection is not open")}function u(t){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"BEGIN_GAME",roomCode:t})):console.error("WebSocket connection is not open")}(o=new WebSocket("ws://".concat(window.location.hostname,":8080"))).onopen=function(){console.log("WebSocket connection established")},o.onmessage=function(t){var e=JSON.parse(t.data);switch(e.type){case"JOINED_ROOM":(0,i.showRoomView)(t.data);break;case"ROOM_DOES_NOT_EXIST":(0,i.showErrorAnimation)();break;case"ROOM_DATA":(0,i.updateRoomList)(t.data);break;case"GAME_STATE":(0,i.switchGameView)(e);break;case"GAMEPLAY_DATA":(0,r.updateGameState)(e);break;case"ERROR":alert("Error: ".concat(e.message))}},o.onclose=function(){console.log("WebSocket connection closed")},o.onerror=function(t){console.error("WebSocket error:",t)}},"./src/index.ts":(t,e,n)=>{n.r(e),n.d(e,{backgroundCanvas:()=>p,backgroundCanvasCtx:()=>f,fps:()=>d,gameCanvas:()=>h,gameCanvasCtx:()=>y,gridSize:()=>g,updateCanvasSize:()=>m,updateGameState:()=>C});var o=n("./node_modules/vector2d/src/Vec2D.js"),r=n("./src/ArcSegment.ts"),i=n("./src/Drawer.ts"),s=n("./src/InputManager.ts"),a=n("./src/LineSegment.ts"),c=n("./src/Snake.ts"),l=n("./src/MenuManager/login.ts"),u=document.createElement("div");u.style.position="absolute",u.style.top="10px",u.style.left="10px",u.style.color="black",document.body.appendChild(u);var d=60,h=document.getElementById("game-canvas"),y=h.getContext("2d"),p=document.getElementById("background-canvas"),f=p.getContext("2d");p.width=p.getBoundingClientRect().width,p.height=p.getBoundingClientRect().height,h.width=h.getBoundingClientRect().width,h.height=h.getBoundingClientRect().height;var g=60;function m(){h.width=h.getBoundingClientRect().width,h.height=h.getBoundingClientRect().height,p.width=p.getBoundingClientRect().width,p.height=p.getBoundingClientRect().height,(0,i.drawGrid)()}var v=0,b=performance.now()/10;window.addEventListener("resize",m),(0,i.drawGrid)();var x=!1;function C(t){x?t.snakeHeads.forEach((function(t){var e=t.lastSegment,n=t.username,i=e.endPoint,s=l.currentRoom.getPlayers()[n].snake;if(e.isNewThisTick){if("LineSegment"==t.segmentType){var c=e.startPoint;s.addSegment(new a.default(new o.Vector(c.x,c.y),new o.Vector(i.x,i.y),e.isCollidable,e.endAngle))}else if("ArcSegment"==t.segmentType){var u=e.center;s.addSegment(new r.default(new o.Vector(u.x,u.y),e.radius,e.startAngle,e.endAngle,e.counterClockwise,e.isCollidable))}}else"LineSegment"==t.segmentType?(c=e.startPoint,s.segments[s.segments.length-1]=new a.default(new o.Vector(c.x,c.y),new o.Vector(i.x,i.y),e.isCollidable,e.endAngle)):"ArcSegment"==t.segmentType&&(u=e.center,s.segments[s.segments.length-1]=new r.default(new o.Vector(u.x,u.y),e.radius,e.startAngle,e.endAngle,e.counterClockwise,e.isCollidable))})):(t.snakeHeads.forEach((function(t){var e=t.lastSegment,n=t.username,r=e.endPoint;l.currentRoom.getPlayers()[n].snake=new c.default(new a.default(new o.Vector(r.x,r.y),new o.Vector(r.x,r.y),e.isCollidable,e.endAngle),l.currentRoom.getPlayers()[n].color,y)})),new s.default(l.currentRoom.getPlayers()[l.currentPlayer.username].snake,"A","D"),x=!0),++v%10==0&&(d=function(){var t=performance.now()/10,e=t-b,n=Math.round(1e3/e);return b=t,n}(),u.innerText="FPS: ".concat(d)),y.clearRect(0,0,h.width,h.height),Object.values(l.currentRoom.getPlayers()).forEach((function(t){t.snake.draw(),t.snake.updateEmitter((performance.now()/10-b)/10)}))}},"./node_modules/vector2d/src/AbstractVector.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10],o=function(){function t(t){this.ctor=t}return t.prototype.setAxes=function(t,e){return this.x=t,this.y=e,this},t.prototype.getX=function(){return this.x},t.prototype.setX=function(t){return this.x=t,this},t.prototype.getY=function(){return this.y},t.prototype.setY=function(t){return this.y=t,this},t.prototype.toString=function(t){return void 0===t&&(t=!1),t?"("+Math.round(this.x)+", "+Math.round(this.y)+")":"("+this.x+", "+this.y+")"},t.prototype.toArray=function(){return[this.x,this.y]},t.prototype.toObject=function(){return{x:this.x,y:this.y}},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.multiplyByVector=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.mulV=function(t){return this.multiplyByVector(t)},t.prototype.divideByVector=function(t){return this.x/=t.x,this.y/=t.y,this},t.prototype.divV=function(t){return this.divideByVector(t)},t.prototype.multiplyByScalar=function(t){return this.x*=t,this.y*=t,this},t.prototype.mulS=function(t){return this.multiplyByScalar(t)},t.prototype.divideByScalar=function(t){return this.x/=t,this.y/=t,this},t.prototype.divS=function(t){return this.divideByScalar(t)},t.prototype.normalise=function(){return this.divideByScalar(this.magnitude())},t.prototype.normalize=function(){return this.normalise()},t.prototype.unit=function(){return this.normalise()},t.prototype.magnitude=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.length=function(){return this.magnitude()},t.prototype.lengthSq=function(){var t=this.x,e=this.y;return t*t+e*e},t.prototype.dot=function(t){return t.x*this.x+t.y*this.y},t.prototype.cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this},t.prototype.zero=function(){return this.x=this.y=0,this},t.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),o=this.x,r=this.y;return this.x=o*e-r*n,this.y=o*n+r*e,this},t.prototype.round=function(t){void 0===t&&(t=2);var e=n[t];return this.x=(.5+this.x*e<<0)/e,this.y=(.5+this.y*e<<0)/e,this},t.prototype.clone=function(){return new this.ctor(this.x,this.y)},t}();e.AbstractVector=o},"./node_modules/vector2d/src/ArrayVector.js":function(t,e,n){var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(n,o){var r=t.call(this,e)||this;return r.axes=[n,o],r.ctor=e,r}return r(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.axes[0]},set:function(t){this.axes[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.axes[1]},set:function(t){this.axes[1]=t},enumerable:!0,configurable:!0}),e}(n("./node_modules/vector2d/src/AbstractVector.js").AbstractVector);e.ArrayVector=i},"./node_modules/vector2d/src/Float32Vector.js":function(t,e,n){var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(n,o){var r=t.call(this,e)||this;return r.axes=new Float32Array(2),r.axes[0]=n,r.axes[1]=o,r}return r(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.axes[0]},set:function(t){this.axes[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.axes[1]},set:function(t){this.axes[1]=t},enumerable:!0,configurable:!0}),e}(n("./node_modules/vector2d/src/AbstractVector.js").AbstractVector);e.Float32Vector=i},"./node_modules/vector2d/src/Vec2D.js":(t,e,n)=>{function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),o(n("./node_modules/vector2d/src/AbstractVector.js")),o(n("./node_modules/vector2d/src/ArrayVector.js")),o(n("./node_modules/vector2d/src/Float32Vector.js")),o(n("./node_modules/vector2d/src/Vector.js"))},"./node_modules/vector2d/src/Vector.js":function(t,e,n){var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(n,o){var r=t.call(this,e)||this;return r._x=n,r._y=o,r}return r(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!0,configurable:!0}),e}(n("./node_modules/vector2d/src/AbstractVector.js").AbstractVector);e.Vector=i}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n("./src/WebSocketClient/websocket.ts")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBTzRJLGVBQWVDLEVBQVM0RSxPQUFPQyxZQUFhLENBQUU3UCxNQUFPLFdBRTdEbUMsT0FBTzRJLGVBQWVDLEVBQVMsYUFBYyxDQUFFaEwsT0FBTyxHQUFPLEVDRnBDaVAsRUFBb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL0FyY1NlZ21lbnQudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9EcmF3ZXIudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9JbnB1dE1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9MaW5lU2VnbWVudC50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL01lbnVNYW5hZ2VyL2xvZ2luLnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvUGFydGljbGVTeXN0ZW0vRW1pdHRlci50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL1BhcnRpY2xlU3lzdGVtL1BhcnRpY2xlLnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvUGFydGljbGVTeXN0ZW0vUGFydGljbGVTeXN0ZW1VdGlscy50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL1NlZ21lbnQudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9TbmFrZS50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL1ZpZXdNb2RlbHMvUGxheWVyLnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvVmlld01vZGVscy9Sb29tLnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvV2ViU29ja2V0Q2xpZW50L3dlYnNvY2tldC50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9ub2RlX21vZHVsZXMvdmVjdG9yMmQvc3JjL0Fic3RyYWN0VmVjdG9yLmpzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9ub2RlX21vZHVsZXMvdmVjdG9yMmQvc3JjL0FycmF5VmVjdG9yLmpzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9ub2RlX21vZHVsZXMvdmVjdG9yMmQvc3JjL0Zsb2F0MzJWZWN0b3IuanMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL25vZGVfbW9kdWxlcy92ZWN0b3IyZC9zcmMvVmVjMkQuanMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL25vZGVfbW9kdWxlcy92ZWN0b3IyZC9zcmMvVmVjdG9yLmpzIiwid2VicGFjazovL3NuYWtlX2dhbWUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3NuYWtlX2dhbWUvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRyYXdBcmMsIGRyYXdBcnJvdywgZHJhd0RvdCB9IGZyb20gXCIuL0RyYXdlclwiO1xyXG5pbXBvcnQgKiBhcyBWZWMyRCBmcm9tICd2ZWN0b3IyZCc7XHJcbmltcG9ydCBTZWdtZW50IGZyb20gXCIuL1NlZ21lbnRcIjtcclxuaW1wb3J0IHsgZ2FtZUNhbnZhc0N0eCB9IGZyb20gXCIuL2luZGV4XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcmNTZWdtZW50IGV4dGVuZHMgU2VnbWVudCB7XHJcblxyXG5cclxuICAgIHB1YmxpYyBjZW50ZXI6IFZlYzJELlZlY3RvcjtcclxuICAgIHB1YmxpYyByYWRpdXM6IG51bWJlcjtcclxuICAgIHB1YmxpYyBzdGFydEFuZ2xlOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgZW5kQW5nbGU6IG51bWJlcjtcclxuICAgIHByaXZhdGUgY291bnRlckNsb2Nrd2lzZTogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBpc0NvbGxpZGFibGU6IGJvb2xlYW47XHJcblxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNlbnRlcjogVmVjMkQuVmVjdG9yLCByYWRpdXM6IG51bWJlciwgc3RhcnRBbmdsZTogbnVtYmVyLCBlbmRBbmdsZTogbnVtYmVyLCBjb3VudGVyQ2xvY2t3aXNlOiBib29sZWFuLCBpc0NvbGxpZGFibGU6IGJvb2xlYW4pIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuY2VudGVyID0gY2VudGVyO1xyXG4gICAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzO1xyXG4gICAgICAgIHRoaXMuc3RhcnRBbmdsZSA9IHN0YXJ0QW5nbGU7XHJcbiAgICAgICAgdGhpcy5lbmRBbmdsZSA9IGVuZEFuZ2xlO1xyXG4gICAgICAgIHRoaXMuY291bnRlckNsb2Nrd2lzZSA9IGNvdW50ZXJDbG9ja3dpc2U7XHJcbiAgICAgICAgdGhpcy5pc0NvbGxpZGFibGUgPSBpc0NvbGxpZGFibGU7XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgZHJhdyhjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGNvbG9yOiBzdHJpbmcpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgY29uc3Qgc2NhbGVYID0gY29udGV4dC5jYW52YXMud2lkdGggLyAyMDAwO1xyXG4gICAgICAgIGNvbnN0IHNjYWxlWSA9IGNvbnRleHQuY2FudmFzLmhlaWdodCAvIDIwMDA7XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnRleHQubGluZUNhcCA9IFwicm91bmRcIjtcclxuICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gY29sb3I7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNDb2xsaWRhYmxlID09IHRydWUpe1xyXG4gICAgICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBjb250ZXh0LmFyYyh0aGlzLmNlbnRlci54ICogc2NhbGVYLCB0aGlzLmNlbnRlci55ICogc2NhbGVZLCB0aGlzLnJhZGl1cyAqIE1hdGgubWluKHNjYWxlWCwgc2NhbGVZKSwgdGhpcy5zdGFydEFuZ2xlLCB0aGlzLmVuZEFuZ2xlLCB0aGlzLmNvdW50ZXJDbG9ja3dpc2UpO1xyXG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkcmF3RGVidWcoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBjb2xvcjogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgLy8gY29udGV4dC5zdHJva2VTdHlsZSA9ICcjZmYwMGZmZmYnXHJcbiAgICAgICAgbGV0IHRhbmdlbnRfYW5nbGUgPSB0aGlzLmNvdW50ZXJDbG9ja3dpc2UgPy0gTWF0aC5QSSAgOiBNYXRoLlBJO1xyXG5cclxuICAgICAgICB0YW5nZW50X2FuZ2xlICs9IHRoaXMuZW5kQW5nbGU7XHJcbiAgICAgICAgY29udGV4dC5saW5lQ2FwID0gXCJyb3VuZFwiO1xyXG4gICAgICAgIGRyYXdEb3QodGhpcy5jZW50ZXIueCwgdGhpcy5jZW50ZXIueSwgNSwgJyMwMDAwMDAnKTtcclxuICAgICAgICBkcmF3QXJyb3coY29udGV4dCxuZXcgVmVjMkQuVmVjdG9yKHRoaXMuZW5kUG9pbnQueCx0aGlzLmVuZFBvaW50LnkpLCBuZXcgVmVjMkQuVmVjdG9yKHRoaXMuZW5kUG9pbnQueCArIHRoaXMucmFkaXVzICogTWF0aC5jb3ModGFuZ2VudF9hbmdsZSksdGhpcy5lbmRQb2ludC55ICsgdGhpcy5yYWRpdXMgKiBNYXRoLnNpbih0YW5nZW50X2FuZ2xlKSkpO1xyXG4gICAgICAgIGRyYXdBcmModGhpcy5jZW50ZXIueCwgdGhpcy5jZW50ZXIueSwgdGhpcy5yYWRpdXMsIDAsIDAsIGZhbHNlKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGVuZFBvaW50KCk6IFZlYzJELlZlY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyRC5WZWN0b3IoXHJcbiAgICAgICAgdGhpcy5jZW50ZXIueCArIHRoaXMucmFkaXVzICogTWF0aC5jb3ModGhpcy5lbmRBbmdsZSksXHJcbiAgICAgICAgdGhpcy5jZW50ZXIueSArIHRoaXMucmFkaXVzICogTWF0aC5zaW4odGhpcy5lbmRBbmdsZSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBwZW5wZW5kaWN1bGFyRW5kQW5nbGUoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0NvdW50ZXJDbG9ja3dpc2U/IHRoaXMuZW5kQW5nbGUgLSBNYXRoLlBJIC8yIDogdGhpcy5lbmRBbmdsZSArIE1hdGguUEkgLyAyO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBwZW5wZW5kaWN1bGFyU3RhcnRBbmdsZSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzQ291bnRlckNsb2Nrd2lzZT8gdGhpcy5zdGFydEFuZ2xlLSBNYXRoLlBJIC8yIDogdGhpcy5zdGFydEFuZ2xlICsgTWF0aC5QSSAvIDI7XHJcbiAgICB9XHJcblxyXG4gICAgaXNDb3VudGVyQ2xvY2t3aXNlKCk6IGJvb2xlYW57XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY291bnRlckNsb2Nrd2lzZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb250aW51aW5nU2VnbWVudCh0cmFuc2Zvcm06IFZlYzJELlZlY3Rvcik6IFNlZ21lbnQge1xyXG4gICAgICAgIHJldHVybiBuZXcgQXJjU2VnbWVudCh0aGlzLmNlbnRlci5jbG9uZSgpLmFkZCh0cmFuc2Zvcm0pIGFzIFZlYzJELlZlY3RvciwgdGhpcy5yYWRpdXMsIHRoaXMuZW5kQW5nbGUsIHRoaXMuZW5kQW5nbGUsIHRoaXMuY291bnRlckNsb2Nrd2lzZSwgdGhpcy5pc0NvbGxpZGFibGUpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcInZlY3RvcjJkXCI7XG5pbXBvcnQgeyBiYWNrZ3JvdW5kQ2FudmFzLCBiYWNrZ3JvdW5kQ2FudmFzQ3R4LCBncmlkU2l6ZSB9IGZyb20gXCIuL2luZGV4XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3R3JpZCgpIHtcblxuICAgIGNvbnN0IHNjYWxlWCA9IGJhY2tncm91bmRDYW52YXNDdHguY2FudmFzLndpZHRoIC8gMjAwMDtcbiAgICBjb25zdCBzY2FsZVkgPSBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmNhbnZhcy5oZWlnaHQgLyAyMDAwO1xuXG5cbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmNsZWFyUmVjdCgwLCAwLCBiYWNrZ3JvdW5kQ2FudmFzLndpZHRoLCBiYWNrZ3JvdW5kQ2FudmFzLmhlaWdodCk7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5zdHJva2VTdHlsZSA9ICdyZ2JhKDAsIDAsIDAsIDAuMyknO1xuICAgIGJhY2tncm91bmRDYW52YXNDdHgubGluZVdpZHRoID0gMjtcbiAgICBmb3IgKHZhciB4ID0gZ3JpZFNpemU7IHggPCBiYWNrZ3JvdW5kQ2FudmFzLndpZHRoOyB4ICs9IGdyaWRTaXplICogc2NhbGVYKSB7XG4gICAgICAgIGJhY2tncm91bmRDYW52YXNDdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGJhY2tncm91bmRDYW52YXNDdHgubW92ZVRvKHggLCAwKTtcbiAgICAgICAgYmFja2dyb3VuZENhbnZhc0N0eC5saW5lVG8oeCAsIGJhY2tncm91bmRDYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgYmFja2dyb3VuZENhbnZhc0N0eC5zdHJva2UoKTtcbiAgICB9XG4gICAgZm9yICh2YXIgeSA9IGdyaWRTaXplOyB5IDwgYmFja2dyb3VuZENhbnZhcy5oZWlnaHQ7IHkgKz0gZ3JpZFNpemUgKiBzY2FsZVkpIHtcbiAgICAgICAgYmFja2dyb3VuZENhbnZhc0N0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgYmFja2dyb3VuZENhbnZhc0N0eC5tb3ZlVG8oMCwgeSk7XG4gICAgICAgIGJhY2tncm91bmRDYW52YXNDdHgubGluZVRvKGJhY2tncm91bmRDYW52YXMud2lkdGgsIHkpO1xuICAgICAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LnN0cm9rZSgpO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdEb3QoZG90WDogbnVtYmVyLCBkb3RZOiBudW1iZXIsIGRvdFNpemU6IG51bWJlciwgY29sb3I6IHN0cmluZykge1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguYmVnaW5QYXRoKCk7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5hcmMoXG4gICAgICAgIGRvdFgsXG4gICAgICAgIGRvdFksXG4gICAgICAgIGRvdFNpemUsXG4gICAgICAgIDAsXG4gICAgICAgIDIgKiBNYXRoLlBJLFxuICAgICAgICBmYWxzZVxuICAgICk7XG5cbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguZmlsbCgpO1xuXG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5jbG9zZVBhdGgoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdBcmMoZG90WDogbnVtYmVyLCBkb3RZOiBudW1iZXIsIHJhZGl1czogbnVtYmVyLCBzdGFydEFuZ2xlOiBudW1iZXIsIGVuZEFuZ2xlOiBudW1iZXIsIGNvdW50ZXJDbG9ja3dpc2U6IGJvb2xlYW4pIHtcbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmxpbmVDYXAgPSBcInJvdW5kXCI7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5zdHJva2VTdHlsZSA9IFwiIzM0NjZhYVwiO1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguYmVnaW5QYXRoKCk7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5hcmMoZG90WCwgZG90WSwgcmFkaXVzLCAwLCAyICogTWF0aC5QSSwgY291bnRlckNsb2Nrd2lzZSk7XG5cbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmxpbmVXaWR0aCA9IDU7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5zdHJva2UoKTtcblxuICAgIGJhY2tncm91bmRDYW52YXNDdHguY2xvc2VQYXRoKCk7XG59XG5cblxuXG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3QXJyb3coY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGZyb206IFZlY3RvciwgdG86IFZlY3Rvcikge1xuICAgIGlmIChmcm9tLnggIT0gdG8ueCAmJiBmcm9tLnkgIT0gdG8ueSkge1xuICAgICAgICB2YXIgYW5nbGUgPSBNYXRoLmF0YW4yKHRvLnkgLSBmcm9tLnksIHRvLnggLSBmcm9tLngpO1xuICAgICAgICBjb25zdCB3aWR0aCA9IDEwO1xuICAgICAgICB2YXIgaGVhZExlbmd0aCA9IDEwO1xuICAgICAgICB2YXIgbmV3X3RvID0gbmV3IFZlY3Rvcih0by54LCB0by55KTtcbiAgICAgICAgLy8gVGhpcyBtYWtlcyBpdCBzbyB0aGUgZW5kIG9mIHRoZSBhcnJvdyBoZWFkIGlzIGxvY2F0ZWQgYXQgdG94LCB0b3ksIGRvbid0IGFzayB3aGVyZSAxLjE1IGNvbWVzIGZyb21cbiAgICAgICAgbmV3X3RvLnggLT0gTWF0aC5jb3MoYW5nbGUpICogKCh3aWR0aCAqIDEuMTUpKTtcbiAgICAgICAgbmV3X3RvLnkgLT0gTWF0aC5zaW4oYW5nbGUpICogKCh3aWR0aCAqIDEuMTUpKTtcblxuXG5cbiAgICAgICAgLy9zdGFydGluZyBwYXRoIG9mIHRoZSBhcnJvdyBmcm9tIHRoZSBzdGFydCBzcXVhcmUgdG8gdGhlIGVuZCBzcXVhcmUgYW5kIGRyYXdpbmcgdGhlIHN0cm9rZVxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5tb3ZlVG8oZnJvbS54LCBmcm9tLnkpO1xuICAgICAgICBjdHgubGluZVRvKG5ld190by54LCBuZXdfdG8ueSk7XG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IFwiI2JiYmJiYlwiO1xuICAgICAgICBjdHgubGluZVdpZHRoID0gd2lkdGg7XG4gICAgICAgIGN0eC5zdHJva2UoKTtcblxuICAgICAgICAvL3N0YXJ0aW5nIGEgbmV3IHBhdGggZnJvbSB0aGUgaGVhZCBvZiB0aGUgYXJyb3cgdG8gb25lIG9mIHRoZSBzaWRlcyBvZiB0aGUgcG9pbnRcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBjdHgubW92ZVRvKG5ld190by54LCBuZXdfdG8ueSk7XG4gICAgICAgIGN0eC5saW5lVG8obmV3X3RvLnggLSBoZWFkTGVuZ3RoICogTWF0aC5jb3MoYW5nbGUgLSBNYXRoLlBJIC8gNyksIG5ld190by55IC0gaGVhZExlbmd0aCAqIE1hdGguc2luKGFuZ2xlIC0gTWF0aC5QSSAvIDcpKTtcblxuICAgICAgICAvL3BhdGggZnJvbSB0aGUgc2lkZSBwb2ludCBvZiB0aGUgYXJyb3csIHRvIHRoZSBvdGhlciBzaWRlIHBvaW50XG4gICAgICAgIGN0eC5saW5lVG8obmV3X3RvLnggLSBoZWFkTGVuZ3RoICogTWF0aC5jb3MoYW5nbGUgKyBNYXRoLlBJIC8gNyksIG5ld190by55IC0gaGVhZExlbmd0aCAqIE1hdGguc2luKGFuZ2xlICsgTWF0aC5QSSAvIDcpKTtcblxuICAgICAgICAvL3BhdGggZnJvbSB0aGUgc2lkZSBwb2ludCBiYWNrIHRvIHRoZSB0aXAgb2YgdGhlIGFycm93LCBhbmQgdGhlbiBhZ2FpbiB0byB0aGUgb3Bwb3NpdGUgc2lkZSBwb2ludFxuICAgICAgICBjdHgubGluZVRvKG5ld190by54LCBuZXdfdG8ueSk7XG4gICAgICAgIGN0eC5saW5lVG8obmV3X3RvLnggLSBoZWFkTGVuZ3RoICogTWF0aC5jb3MoYW5nbGUgLSBNYXRoLlBJIC8gNyksIG5ld190by55IC0gaGVhZExlbmd0aCAqIE1hdGguc2luKGFuZ2xlIC0gTWF0aC5QSSAvIDcpKTtcblxuICAgICAgICAvL2RyYXdzIHRoZSBwYXRocyBjcmVhdGVkIGFib3ZlXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IFwiI2JiYmJiYlwiO1xuICAgICAgICBjdHgubGluZVdpZHRoID0gd2lkdGg7XG4gICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwiI2JiYmJiYlwiO1xuICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgfVxufSIsImltcG9ydCBTbmFrZSBmcm9tIFwiLi9TbmFrZVwiO1xyXG5pbXBvcnQgeyBzZW5kS2V5RXZlbnRUb1NlcnZlciB9IGZyb20gXCIuL1dlYlNvY2tldENsaWVudC93ZWJzb2NrZXRcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBlbnVtIERpcntcclxuICBMRUZULFxyXG4gIFJJR0hUXHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW5wdXRNYW5hZ2VyIHtcclxuICBwcml2YXRlIGtleU1hcDogeyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0gPSB7fTtcclxuICBwcml2YXRlIHNuYWtlOiBTbmFrZTtcclxuICBwcml2YXRlIGxlZnRLZXk6IHN0cmluZztcclxuICBwcml2YXRlIHJpZ2h0S2V5OiBzdHJpbmc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHNuYWtlOiBTbmFrZSwgbGVmdEtleTogc3RyaW5nLCByaWdodEtleTogc3RyaW5nKSB7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25LZXlEb3duLmJpbmQodGhpcykpO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5vbktleVVwLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5zbmFrZSA9IHNuYWtlO1xyXG4gICAgdGhpcy5sZWZ0S2V5ID0gbGVmdEtleTtcclxuICAgIHRoaXMucmlnaHRLZXkgPSByaWdodEtleTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25LZXlEb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XHJcbiAgICAvL2lmIHNuYWtlIGlzIGRlYWQsIGlnbm9yZSB0aGUga2V5IHByZXNzZXNcclxuICAgIGlmKCF0aGlzLnNuYWtlLmlzQWxpdmUpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBrZXkgPSBldmVudC5rZXkudG9VcHBlckNhc2UoKTtcclxuICAgIFxyXG5cclxuICAgIC8vaWdub3JlIGtleXMgbm90IGFzc2lnbmVkIHRvIHNlbGYsIHRoaXMgd291bGQgcmVzdWx0IGluIHRoZSBrZXltYXAgaGF2aW5nIHVubmVjZXNzYXJ5IGtleXMgYW5kIHRyaWdnZXJpbmcgdGhlIG9ua2V5VXAgZXZlbnRzXHJcbiAgICBpZihrZXkgIT0gdGhpcy5sZWZ0S2V5ICYmIGtleSAhPSB0aGlzLnJpZ2h0S2V5KXtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vc3dpdGNoIG9mZiB0aGUgY3VycmVudCBkb3duIGtleSBpZiB0aGUgb3RoZXIgZGlyZWN0aW9uIGlzIHByZXNzZWRcclxuICAgIGlmICh0aGlzLmtleU1hcFt0aGlzLnJpZ2h0S2V5XSAmJiBrZXkgPT0gdGhpcy5sZWZ0S2V5KSB7XHJcbiAgICAgIHRoaXMua2V5TWFwW3RoaXMucmlnaHRLZXldID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0aGlzLmtleU1hcFt0aGlzLmxlZnRLZXldICYmIGtleSA9PSB0aGlzLnJpZ2h0S2V5KSB7XHJcbiAgICAgIHRoaXMua2V5TWFwW3RoaXMubGVmdEtleV0gPSBmYWxzZTtcclxuICAgIH1cclxuICAgIC8vcmV0dXJuIGlmIHRoZSBrZXkgaXMgYWxyYWVkeSBpbiB0aGUgbWFwLCBwcmV2ZW50cyBhdXRvY2xpY2tpbmdcclxuICAgIGVsc2UgaWYgKHRoaXMua2V5TWFwW2tleV0pIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICB0aGlzLmtleU1hcFtrZXldID0gdHJ1ZTtcclxuXHJcbiAgICBzZW5kS2V5RXZlbnRUb1NlcnZlcihrZXkgPT0gdGhpcy5yaWdodEtleSA/IERpci5SSUdIVCA6IERpci5MRUZULCB0cnVlKTtcclxuICB9XHJcbiAgcHJpdmF0ZSBvbktleVVwKGV2ZW50OiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XHJcbiAgICAvL2lmIHNuYWtlIGlzIGRlYWQsIGlnbm9yZSB0aGUga2V5IHByZXNzZXNcclxuICAgIGlmKCF0aGlzLnNuYWtlLmlzQWxpdmUpIHJldHVybjtcclxuICAgIFxyXG4gICAgY29uc3Qga2V5ID0gZXZlbnQua2V5LnRvVXBwZXJDYXNlKCk7XHJcblxyXG4gICAgLy9jaGVjayBpZiB0aGUga2V5IGlzIGluIHRoZSBrZXltYXAsIGlmIG5vdCBqdXN0IGlnbm9yZSBpdFxyXG4gICAgaWYgKCF0aGlzLmtleU1hcFtrZXldKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMua2V5TWFwW2tleV0gPSBmYWxzZTtcclxuXHJcbiAgICBzZW5kS2V5RXZlbnRUb1NlcnZlcihrZXkgPT0gdGhpcy5yaWdodEtleSA/IERpci5SSUdIVCA6IERpci5MRUZULCBmYWxzZSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25LZXlEb3duLmJpbmQodGhpcykpO1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5vbktleVVwLmJpbmQodGhpcykpO1xyXG4gIH1cclxuXHJcblxyXG5cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcInZlY3RvcjJkXCI7XHJcbmltcG9ydCBTZWdtZW50IGZyb20gXCIuL1NlZ21lbnRcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpbmVTZWdtZW50IGV4dGVuZHMgU2VnbWVudCB7XHJcblxyXG5cclxuICAgIHB1YmxpYyBzdGFydFBvaW50OiBWZWN0b3I7XHJcbiAgICBwdWJsaWMgZW5kUG9pbnQ6IFZlY3RvcjtcclxuICAgIHB1YmxpYyBlbmRBbmdsZTogbnVtYmVyO1xyXG4gICAgcHVibGljIGlzQ29sbGlkYWJsZTogYm9vbGVhbiA9IHRydWU7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3RhcnQ6IFZlY3RvciwgZW5kOiBWZWN0b3IsIGlzQ29sbGlkYWJsZTogYm9vbGVhbiwgYW5nbGU/OiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuc3RhcnRQb2ludCA9IHN0YXJ0O1xyXG4gICAgICAgIHRoaXMuZW5kUG9pbnQgPSBlbmQ7XHJcbiAgICAgICAgdGhpcy5pc0NvbGxpZGFibGUgPSBpc0NvbGxpZGFibGU7XHJcbiAgICAgICAgdGhpcy5lbmRBbmdsZSA9IGFuZ2xlO1xyXG4gICAgICAgIFxyXG4gICAgICB9XHJcblxyXG4gICAgICBkcmF3KGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgY29sb3I6IHN0cmluZyk6IHZvaWQge1xyXG5cclxuICAgICAgICBjb25zdCBzY2FsZVggPSBjb250ZXh0LmNhbnZhcy53aWR0aCAvIDIwMDA7XHJcbiAgICAgICAgY29uc3Qgc2NhbGVZID0gY29udGV4dC5jYW52YXMuaGVpZ2h0IC8gMjAwMDtcclxuICAgICAgICAvLyBjb250ZXh0LnN0cm9rZVN0eWxlID0gJyNmZjAwZmZmZidcclxuICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gY29sb3I7XHJcbiAgICAgICAgY29udGV4dC5saW5lQ2FwID0gXCJyb3VuZFwiO1xyXG4gICAgICAgIGlmICh0aGlzLmlzQ29sbGlkYWJsZSA9PSB0cnVlKXtcclxuICAgICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgY29udGV4dC5tb3ZlVG8odGhpcy5zdGFydFBvaW50LnggKiBzY2FsZVgsIHRoaXMuc3RhcnRQb2ludC55ICogc2NhbGVZKTtcclxuICAgICAgICAgICAgY29udGV4dC5saW5lVG8odGhpcy5lbmRQb2ludC54ICogc2NhbGVYLCB0aGlzLmVuZFBvaW50LnkgKiBzY2FsZVkpO1xyXG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgY2FsY0VuZEFuZ2xlKCk6IG51bWJlcntcclxuICAgICAgICByZXR1cm4gTWF0aC5hdGFuKCh0aGlzLmVuZFBvaW50LnkgLSB0aGlzLnN0YXJ0UG9pbnQueSkgLyAodGhpcy5lbmRQb2ludC54IC0gdGhpcy5zdGFydFBvaW50LngpKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbGVuZ3RoKCk6IG51bWJlcntcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KCh0aGlzLnN0YXJ0UG9pbnQueCAtIHRoaXMuZW5kUG9pbnQueCkqKjIgKyAodGhpcy5zdGFydFBvaW50LnkgLSB0aGlzLmVuZFBvaW50LnkpKioyKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb250aW51aW5nU2VnbWVudCh0cmFuc2Zvcm06IFZlY3Rvcik6IFNlZ21lbnQge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybWVkRW5kcG9pbnQgPSB0aGlzLmVuZFBvaW50LmNsb25lKCkuYWRkKHRyYW5zZm9ybSkgYXMgVmVjdG9yO1xyXG4gICAgICAgIHJldHVybiBuZXcgTGluZVNlZ21lbnQoXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkRW5kcG9pbnQsIFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1lZEVuZHBvaW50LCBcclxuICAgICAgICAgICAgdGhpcy5pc0NvbGxpZGFibGUsIFxyXG4gICAgICAgICAgICB0aGlzLmVuZEFuZ2xlXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyB1cGRhdGVDYW52YXNTaXplIH0gZnJvbSBcIi4uXCI7XHJcbmltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuLi9WaWV3TW9kZWxzL1BsYXllclwiO1xyXG5pbXBvcnQgeyBHYW1lU3RhdGUsIFJvb20gfSBmcm9tIFwiLi4vVmlld01vZGVscy9Sb29tXCI7XHJcbmltcG9ydCB7IEdhbWVTdGF0ZURhdGEgfSBmcm9tIFwiLi4vV2ViU29ja2V0Q2xpZW50L21lc3NhZ2VUeXBlc1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVSb29tLCBqb2luUm9vbSwgc2VuZFN0YXJ0Q29tbWFuZCwgc2V0UGxheWVyRGF0YSB9IGZyb20gXCIuLi9XZWJTb2NrZXRDbGllbnQvd2Vic29ja2V0XCI7XHJcblxyXG5cclxuZXhwb3J0IGxldCBjdXJyZW50Um9vbTogUm9vbSB8IG51bGwgPSBudWxsO1xyXG5leHBvcnQgbGV0IGN1cnJlbnRQbGF5ZXI6IFBsYXllciB8IG51bGwgPSBudWxsO1xyXG5cclxuY29uc3Qgcm9vbUNvZGVJbnB1dCA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vbUNvZGVJbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQpO1xyXG5jb25zdCB1c2VybmFtZUlucHV0ID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VybmFtZUlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudCk7XHJcbmNvbnN0IHJvb21CdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnam9pbkJ1dHRvbicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5jb25zdCByZWFkeUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWFkeUJ1dHRvbicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5jb25zdCBsb2dpbkRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbi1kaXYnKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuY29uc3Qgcm9vbURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb29tLWRpdicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5jb25zdCBnYW1lRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtY2FudmFzLWNvbnRhaW5lcicpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG5jb25zdCBjb2xvclBpY2tlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvci1waWNrZXInKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5jb25zdCByb29tVXNlcnNMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb20tdXNlcnMtbGlzdCcpIGFzIEhUTUxVTGlzdEVsZW1lbnQ7XHJcbmNvbnN0IHJvb21Db2RlU3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb29tLWNvZGUnKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcclxuY29uc3QgcGxheWVyQ291bnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyLWNvdW50JykgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcbmNvbnN0IGNvbG9yUGlja2VyRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbG9yLXBpY2tlci1jb250YWluZXInKTtcclxuY29uc3Qgc3RhcnRQcm9ncmVzc0JhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydC1wcm9ncmVzcy1iYXInKTtcclxuLy8gc3JjL2xvZ2luLnRzXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVCdXR0b24oKSB7XHJcblxyXG5cclxuICAgIGlmICh1c2VybmFtZUlucHV0LnZhbHVlLnRyaW0oKSA9PSAnJykge1xyXG4gICAgICAgIHJvb21CdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByb29tQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJvb21Db2RlSW5wdXQudmFsdWUudHJpbSgpLmxlbmd0aCA9PSA1KSB7XHJcbiAgICAgICAgcm9vbUJ1dHRvbi50ZXh0Q29udGVudCA9ICdKT0lOIFJPT00nO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByb29tQnV0dG9uLnRleHRDb250ZW50ID0gJ0NSRUFURSBST09NJztcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVJvb21BY3Rpb24oKSB7XHJcbiAgICBjb25zdCB1c2VybmFtZSA9IHVzZXJuYW1lSW5wdXQudmFsdWU7XHJcbiAgICBpZiAoIXVzZXJuYW1lKSByZXR1cm47XHJcblxyXG4gICAgY3VycmVudFBsYXllciA9IG5ldyBQbGF5ZXIodXNlcm5hbWUpO1xyXG5cclxuICAgIGlmIChyb29tQnV0dG9uLmlubmVyVGV4dCA9PT0gJ0NSRUFURSBST09NJykge1xyXG4gICAgICAgIGNyZWF0ZVJvb20odXNlcm5hbWVJbnB1dC52YWx1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICBqb2luUm9vbShyb29tQ29kZUlucHV0LnZhbHVlLnRvVXBwZXJDYXNlKCksIHVzZXJuYW1lSW5wdXQudmFsdWUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlUmVhZHlTdGF0ZSgpIHtcclxuXHJcbiAgICBjdXJyZW50UGxheWVyLmlzUmVhZHkgPSAhY3VycmVudFBsYXllci5pc1JlYWR5O1xyXG4gICAgc2V0UGxheWVyRGF0YShjdXJyZW50UGxheWVyLCBjdXJyZW50Um9vbS5nZXRDb2RlKCkpO1xyXG4gICAgdXBkYXRlUmVhZHlCdXR0b24oY3VycmVudFBsYXllci5pc1JlYWR5KTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVJlYWR5QnV0dG9uKGlzUmVhZHk6IGJvb2xlYW4pIHtcclxuICAgIGlmIChpc1JlYWR5KSB7XHJcbiAgICAgICAgcmVhZHlCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgncmVkLWJ1dHRvbicpO1xyXG4gICAgICAgIHJlYWR5QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2dyZWVuLWJ1dHRvbicpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmVhZHlCdXR0b24uY2xhc3NMaXN0LmFkZCgncmVkLWJ1dHRvbicpO1xyXG4gICAgICAgIHJlYWR5QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2dyZWVuLWJ1dHRvbicpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2hvd1Jvb21WaWV3KGRhdGE6IEpTT04pIHtcclxuICAgIC8vc2V0IHRoZSBjbGllbnQgVmlld01vZGVsIG9mIHRoZSByb29tIHRvIHRoZSBzZXJ2ZXJzIHJlc3BvbnNlXHJcbiAgICBsZXQgcm9vbUluZm8gPSBKU09OLnBhcnNlKGRhdGEudG9TdHJpbmcoKSk7XHJcbiAgICBjdXJyZW50Um9vbSA9IG5ldyBSb29tKHJvb21JbmZvWydyb29tJ11bJ2NvZGUnXSwgcm9vbUluZm9bJ3Jvb20nXVsnaG9zdCddLCByb29tSW5mb1sncm9vbSddWydwbGF5ZXJzJ10sIHJvb21JbmZvWydyb29tJ11bJ21heFNpemUnXSlcclxuXHJcbiAgICAvL3Nob3cgc3RhcnRHYW1lQnV0dG9uIFxyXG4gICAgaWYgKGN1cnJlbnRQbGF5ZXIudXNlcm5hbWUgPT0gY3VycmVudFJvb20uZ2V0SG9zdCgpLnVzZXJuYW1lKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0QnV0dG9uJykuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ub25lJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9zZXQgYSByYW5kb20gY29sb3IgZm9yIGEgcGxheWVyXHJcbiAgICBjb2xvclBpY2tlckRpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjdXJyZW50UGxheWVyLmNvbG9yO1xyXG4gICAgY29sb3JQaWNrZXIudmFsdWUgPSBjdXJyZW50UGxheWVyLmNvbG9yO1xyXG4gICAgbGV0IGNvbG9yUGlja2VyTGFiZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3ItbGFiZWwnKTtcclxuICAgIGNvbG9yUGlja2VyTGFiZWwuc3R5bGUuY29sb3IgPSBwaWNrVGV4dENvbG9yQmFzZWRPbkJnQ29sb3JBZHZhbmNlZChjb2xvclBpY2tlci52YWx1ZSwgJyNGRkZGRkYnLCAnIzAwMDAwMCcpO1xyXG5cclxuICAgIC8vc2hvdyB0aGUgbmV3IGVsZW1lbnRcclxuICAgIGxvZ2luRGl2LmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgcm9vbURpdi5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LWZsZXgnKTtcclxuXHJcblxyXG5cclxuICAgIHJvb21Db2RlSW5wdXQudmFsdWUgPSBjdXJyZW50Um9vbS5nZXRDb2RlKCk7XHJcbiAgICByb29tQ29kZVNwYW4uaW5uZXJIVE1MID0gY3VycmVudFJvb20uZ2V0Q29kZSgpO1xyXG4gICAgc2V0UGxheWVyRGF0YShjdXJyZW50UGxheWVyLCBjdXJyZW50Um9vbS5nZXRDb2RlKCkpO1xyXG4gICAgdXBkYXRlUm9vbUxpc3QoZGF0YSk7XHJcblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUm9vbUxpc3QoZGF0YTogSlNPTikge1xyXG4gICAgbGV0IHJvb21JbmZvID0gSlNPTi5wYXJzZShkYXRhLnRvU3RyaW5nKCkpO1xyXG5cclxuICAgIC8vIHVwZGF0aW5nIHRoZSBjdXJyZW50IHJvb20gcGxheWVycyBhbmQgaG9zdFxyXG4gICAgY3VycmVudFJvb20uc2V0UGxheWVycyhyb29tSW5mb1sncm9vbSddWydwbGF5ZXJzJ10pO1xyXG4gICAgY3VycmVudFJvb20uc2V0SG9zdChyb29tSW5mb1sncm9vbSddWydob3N0J10pO1xyXG4gICAgY3VycmVudFJvb20uc2V0TWF4U2l6ZShyb29tSW5mb1sncm9vbSddWydtYXhTaXplJ10pXHJcblxyXG5cclxuICAgIHBsYXllckNvdW50LmlubmVySFRNTCA9IGAke09iamVjdC5rZXlzKGN1cnJlbnRSb29tLmdldFBsYXllcnMoKSkubGVuZ3RofS8ke2N1cnJlbnRSb29tLmdldE1heFNpemUoKX1gO1xyXG4gICAgcm9vbVVzZXJzTGlzdC5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICBPYmplY3QudmFsdWVzKGN1cnJlbnRSb29tLmdldFBsYXllcnMoKSkuZm9yRWFjaCgocGxheWVyOiB7IHVzZXJuYW1lOiBzdHJpbmcgfCBudW1iZXI7IGlzUmVhZHk6IGJvb2xlYW47IGNvbG9yOiBzdHJpbmc7IH0pID0+IHtcclxuICAgICAgICBjb25zdCBwbGF5ZXJJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuXHJcbiAgICAgICAgcGxheWVySXRlbS50ZXh0Q29udGVudCA9IHBsYXllci51c2VybmFtZSArICcnO1xyXG5cclxuICAgICAgICBpZiAocGxheWVyLnVzZXJuYW1lID09IGN1cnJlbnRSb29tLmdldEhvc3QoKS51c2VybmFtZSkge1xyXG4gICAgICAgICAgICBwbGF5ZXJJdGVtLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIGA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLWNyb3duXCIgc3R5bGU9XCJjb2xvcjogJHtwbGF5ZXIuY29sb3J9O1wiPjwvaT5gKVxyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwbGF5ZXJJdGVtLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIGA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLWNpcmNsZVwiIHN0eWxlPVwiY29sb3I6ICR7cGxheWVyLmNvbG9yfTsgbWFyZ2luLWxlZnQ6IDRweFwiPjwvaT5gKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHBsYXllci5pc1JlYWR5KSB7XHJcbiAgICAgICAgICAgIHBsYXllckl0ZW0uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCAnIDxpIGNsYXNzPVwiZmEtc29saWQgZmEtY2lyY2xlXCIgc3R5bGU9XCJjb2xvcjogIzM3Y2I0ODtcIj48L2k+Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGxheWVySXRlbS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsICcgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1jaXJjbGVcIiBzdHlsZT1cImNvbG9yOiAjY2IzNzM3O1wiPjwvaT4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJvb21Vc2Vyc0xpc3QuYXBwZW5kQ2hpbGQocGxheWVySXRlbSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL3Nob3cgc3RhcnRHYW1lQnV0dG9uIFxyXG4gICAgaWYgKGN1cnJlbnRQbGF5ZXIudXNlcm5hbWUgPT0gY3VycmVudFJvb20uZ2V0SG9zdCgpLnVzZXJuYW1lKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0QnV0dG9uJykuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ub25lJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlU3RhcnRCdXR0b25Qcm9ncmVzcyhPYmplY3QudmFsdWVzKGN1cnJlbnRSb29tLmdldFBsYXllcnMoKSkuZmlsdGVyKHAgPT4gcC5pc1JlYWR5KS5sZW5ndGgsIGN1cnJlbnRSb29tLmdldE1heFNpemUoKSk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiB1cGRhdGVTdGFydEJ1dHRvblByb2dyZXNzKHJlYWR5UGxheWVyQ291bnQ6IG51bWJlciwgbWF4UGxheWVyQ291bnQ6IG51bWJlcikge1xyXG4gICAgaWYgKG1heFBsYXllckNvdW50ID09IDApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBzdGFydFByb2dyZXNzQmFyLnN0eWxlLndpZHRoID0gTWF0aC5mbG9vcihyZWFkeVBsYXllckNvdW50IC8gbWF4UGxheWVyQ291bnQgKiAxMDApICsgJyUnO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBzaG93RXJyb3JBbmltYXRpb24oKSB7XHJcbiAgICByb29tQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3JlZC1idXR0b24nKTtcclxuICAgIHJvb21CdXR0b24uY2xhc3NMaXN0LmFkZCgnd2lnZ2xlJyk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICByb29tQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3JlZC1idXR0b24nKTtcclxuICAgICAgICByb29tQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3dpZ2dsZScpO1xyXG4gICAgfSwgNjAwKVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUNvbG9yUGlja2VyKCkge1xyXG4gICAgY29sb3JQaWNrZXJEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3JQaWNrZXIudmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVQbGF5ZXJDb2xvcigpIHtcclxuICAgIGN1cnJlbnRQbGF5ZXIuY29sb3IgPSBjb2xvclBpY2tlci52YWx1ZTtcclxuICAgIGxldCBjb2xvclBpY2tlckxhYmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbG9yLWxhYmVsJyk7XHJcbiAgICBjb2xvclBpY2tlckxhYmVsLnN0eWxlLmNvbG9yID0gcGlja1RleHRDb2xvckJhc2VkT25CZ0NvbG9yQWR2YW5jZWQoY29sb3JQaWNrZXIudmFsdWUsICcjRkZGRkZGJywgJyMwMDAwMDAnKTtcclxuICAgIHNldFBsYXllckRhdGEoY3VycmVudFBsYXllciwgY3VycmVudFJvb20uZ2V0Q29kZSgpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGlja1RleHRDb2xvckJhc2VkT25CZ0NvbG9yQWR2YW5jZWQoYmdDb2xvcjogc3RyaW5nLCBsaWdodENvbG9yOiBzdHJpbmcsIGRhcmtDb2xvcjogc3RyaW5nKSB7XHJcbiAgICB2YXIgY29sb3IgPSAoYmdDb2xvci5jaGFyQXQoMCkgPT09ICcjJykgPyBiZ0NvbG9yLnN1YnN0cmluZygxLCA3KSA6IGJnQ29sb3I7XHJcbiAgICB2YXIgciA9IHBhcnNlSW50KGNvbG9yLnN1YnN0cmluZygwLCAyKSwgMTYpOyAvLyBoZXhUb1JcclxuICAgIHZhciBnID0gcGFyc2VJbnQoY29sb3Iuc3Vic3RyaW5nKDIsIDQpLCAxNik7IC8vIGhleFRvR1xyXG4gICAgdmFyIGIgPSBwYXJzZUludChjb2xvci5zdWJzdHJpbmcoNCwgNiksIDE2KTsgLy8gaGV4VG9CXHJcbiAgICB2YXIgdWljb2xvcnMgPSBbciAvIDI1NSwgZyAvIDI1NSwgYiAvIDI1NV07XHJcbiAgICB2YXIgYyA9IHVpY29sb3JzLm1hcCgoY29sKSA9PiB7XHJcbiAgICAgICAgaWYgKGNvbCA8PSAwLjAzOTI4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb2wgLyAxMi45MjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KChjb2wgKyAwLjA1NSkgLyAxLjA1NSwgMi40KTtcclxuICAgIH0pO1xyXG4gICAgdmFyIEwgPSAoMC4yMTI2ICogY1swXSkgKyAoMC43MTUyICogY1sxXSkgKyAoMC4wNzIyICogY1syXSk7XHJcbiAgICByZXR1cm4gKEwgPiAwLjQpID8gZGFya0NvbG9yIDogbGlnaHRDb2xvcjtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RhcnRHYW1lKCkge1xyXG5cclxuICAgIC8vdmVyaWZ5IHRoYXQgdGhlIHBsYXllciBzZW5kaW5nIHRoZSBzdGFydCByZXF1ZXN0IGlzIHRoZSBob3N0XHJcbiAgICBpZiAoY3VycmVudFBsYXllci51c2VybmFtZSAhPSBjdXJyZW50Um9vbS5nZXRIb3N0KCkudXNlcm5hbWUpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgc2VuZFN0YXJ0Q29tbWFuZChjdXJyZW50Um9vbS5nZXRDb2RlKCkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc3dpdGNoR2FtZVZpZXcoZGF0YTogR2FtZVN0YXRlRGF0YSkge1xyXG4gICAgc3dpdGNoIChkYXRhLnN0YXRlKSB7XHJcbiAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgIGN1cnJlbnRSb29tLnNldEdhbWVTdGF0ZShHYW1lU3RhdGUuUlVOTklORyk7XHJcbiAgICAgICAgbG9naW5EaXYuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ub25lJyk7XHJcbiAgICAgICAgcm9vbURpdi5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LW5vbmUnKTtcclxuICAgICAgICByb29tRGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXktZmxleCcpO1xyXG4gICAgICAgIGdhbWVEaXYuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ub25lJyk7XHJcbiAgICAgICAgZ2FtZURpdi5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LWZsZXgnKTtcclxuICAgICAgICAvL3VwZGF0ZSB0aGUgZ2FtZSBjYW52YXMgdG8gZml0IHRoZSBzY3JlZW5cclxuICAgICAgICB1cGRhdGVDYW52YXNTaXplKCk7XHJcblxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgY3VycmVudFJvb20uc2V0R2FtZVN0YXRlKEdhbWVTdGF0ZS5JTl9MT0JCWSk7XHJcbiAgICAgICAgbG9naW5EaXYuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ub25lJyk7XHJcbiAgICAgICAgcm9vbURpdi5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LWZsZXgnKTtcclxuICAgICAgICBnYW1lRGl2LmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxud2luZG93Lm9ubG9hZCA9ICgpID0+IHtcclxuICAgIHVwZGF0ZUJ1dHRvbigpO1xyXG59O1xyXG5cclxuKHdpbmRvdyBhcyBhbnkpLnVwZGF0ZUJ1dHRvbiA9IHVwZGF0ZUJ1dHRvbjtcclxuKHdpbmRvdyBhcyBhbnkpLmhhbmRsZVJvb21BY3Rpb24gPSBoYW5kbGVSb29tQWN0aW9uO1xyXG4od2luZG93IGFzIGFueSkuaGFuZGxlUmVhZHlTdGF0ZSA9IGhhbmRsZVJlYWR5U3RhdGU7XHJcbih3aW5kb3cgYXMgYW55KS51cGRhdGVDb2xvclBpY2tlciA9IHVwZGF0ZUNvbG9yUGlja2VyO1xyXG4od2luZG93IGFzIGFueSkudXBkYXRlUGxheWVyQ29sb3IgPSB1cGRhdGVQbGF5ZXJDb2xvcjtcclxuKHdpbmRvdyBhcyBhbnkpLnN0YXJ0R2FtZSA9IHN0YXJ0R2FtZTsiLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwidmVjdG9yMmRcIjtcclxuaW1wb3J0IFBhcnRpY2xlLCB7IHNoYXBlIH0gZnJvbSBcIi4vUGFydGljbGVcIjtcclxuaW1wb3J0IHsgZ2V0UmFuZG9tRGlyZWN0aW9uIH0gZnJvbSBcIi4vUGFydGljbGVTeXN0ZW1VdGlsc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW1pdHRlcntcclxuICAgIHByaXZhdGUgYWxpdmVQYXJ0aWNsZXM6IFBhcnRpY2xlW10gPSBbXTtcclxuICAgIHB1YmxpYyBwb3NpdGlvbjogVmVjdG9yO1xyXG4gICAgcHVibGljIGVtaXRUaW1lOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgc2hhcGU6IHNoYXBlO1xyXG4gICAgcHVibGljIHNpemU6IG51bWJlcjtcclxuICAgIHB1YmxpYyBzcGVlZDogbnVtYmVyO1xyXG4gICAgcHVibGljIGNvbG9yOiB7cjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciwgYTogbnVtYmVyfTtcclxuICAgIHB1YmxpYyBmYWRlQ29sb3I6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgZmFkZVNpemU6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgcGFydGljbGVNYXhBZ2U6IG51bWJlcjtcclxuICAgIHB1YmxpYyBjYW52YXNDdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIHB1YmxpYyBlbWl0VGltZU1pbGxpczogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB0aWNrczogbnVtYmVyID0gMDtcclxuICAgIFxyXG5cclxuICAgIFxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHBvc2l0aW9uOiBWZWN0b3IsIGVtaXRJbnRlcnZhbDogbnVtYmVyLCBzaXplOiBudW1iZXIsIHNwZWVkOiBudW1iZXIsIHNoYXBlOiBzaGFwZSA9ICdjaXJjbGUnLCBjb2xvcjoge3I6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIsIGE6IG51bWJlcn0sIGNhbnZhc0N0eDpDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsICBmYWRlQ29sb3I6IGJvb2xlYW4gPSB0cnVlLCBmYWRlU2l6ZTogYm9vbGVhbiA9IHRydWUsIGFnZTogbnVtYmVyLCBlbWl0VGltZU1pbGxpczogbnVtYmVyID0gMCl7XHJcbiAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICB0aGlzLmVtaXRUaW1lID0gZW1pdEludGVydmFsO1xyXG4gICAgdGhpcy5zaXplID0gc2l6ZTtcclxuICAgIHRoaXMuc3BlZWQgPSBzcGVlZDtcclxuICAgIHRoaXMuc2hhcGUgPSBzaGFwZTtcclxuICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcclxuICAgIHRoaXMuY2FudmFzQ3R4ID0gY2FudmFzQ3R4O1xyXG4gICAgdGhpcy5mYWRlQ29sb3IgPSBmYWRlQ29sb3I7XHJcbiAgICB0aGlzLmZhZGVTaXplID0gZmFkZVNpemU7IFxyXG4gICAgdGhpcy5wYXJ0aWNsZU1heEFnZSA9IGFnZTtcclxuICAgIHRoaXMuZW1pdFRpbWVNaWxsaXMgPSBlbWl0VGltZU1pbGxpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdGljayhkdDogbnVtYmVyKXtcclxuICAgICAgICBpZiAoKHRoaXMuZW1pdFRpbWVNaWxsaXMgKyB0aGlzLnBhcnRpY2xlTWF4QWdlKSA8IDApIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5lbWl0VGltZU1pbGxpcyAtPSBkdDtcclxuXHJcblxyXG4gICAgICAgIGlmICh0aGlzLnRpY2tzICUgdGhpcy5lbWl0VGltZSA9PSAwICYmIHRoaXMuZW1pdFRpbWVNaWxsaXMgPiAwKXtcclxuICAgICAgICAgICAgdGhpcy5hbGl2ZVBhcnRpY2xlcy5wdXNoKG5ldyBQYXJ0aWNsZSh0aGlzLnBvc2l0aW9uLmNsb25lKCkgYXMgVmVjdG9yLCBnZXRSYW5kb21EaXJlY3Rpb24oKSwgdGhpcy5zaXplLCB0aGlzLnNwZWVkLCB0aGlzLnNoYXBlLHsuLi50aGlzLmNvbG9yfSx0aGlzLmNhbnZhc0N0eCwgdGhpcy5wYXJ0aWNsZU1heEFnZSwgdGhpcy5mYWRlQ29sb3IsIHRoaXMuZmFkZVNpemUpKTtcclxuICAgICAgICAgICAgdGhpcy5hbGl2ZVBhcnRpY2xlcy5wdXNoKG5ldyBQYXJ0aWNsZSh0aGlzLnBvc2l0aW9uLmNsb25lKCkgYXMgVmVjdG9yLCBnZXRSYW5kb21EaXJlY3Rpb24oKSwgdGhpcy5zaXplLCB0aGlzLnNwZWVkLCB0aGlzLnNoYXBlLHsuLi50aGlzLmNvbG9yfSx0aGlzLmNhbnZhc0N0eCwgdGhpcy5wYXJ0aWNsZU1heEFnZSwgdGhpcy5mYWRlQ29sb3IsIHRoaXMuZmFkZVNpemUpKTtcclxuICAgICAgICAgICAgdGhpcy5hbGl2ZVBhcnRpY2xlcy5wdXNoKG5ldyBQYXJ0aWNsZSh0aGlzLnBvc2l0aW9uLmNsb25lKCkgYXMgVmVjdG9yLCBnZXRSYW5kb21EaXJlY3Rpb24oKSwgdGhpcy5zaXplLCB0aGlzLnNwZWVkLCB0aGlzLnNoYXBlLHsuLi50aGlzLmNvbG9yfSx0aGlzLmNhbnZhc0N0eCwgdGhpcy5wYXJ0aWNsZU1heEFnZSwgdGhpcy5mYWRlQ29sb3IsIHRoaXMuZmFkZVNpemUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hbGl2ZVBhcnRpY2xlcy5mb3JFYWNoKHBhcnRpY2xlID0+IHtcclxuICAgICAgICAgICAgcGFydGljbGUudGljayhkdClcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hbGl2ZVBhcnRpY2xlcyA9IHRoaXMuYWxpdmVQYXJ0aWNsZXMuZmlsdGVyKHBhcnRpY2xlID0+IHBhcnRpY2xlLmFnZSA+IDApO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy50aWNrcysrO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KCl7XHJcbiAgICAgICAgdGhpcy5hbGl2ZVBhcnRpY2xlcy5mb3JFYWNoKHBhcnRpY2xlID0+IHtcclxuICAgICAgICAgICAgcGFydGljbGUuZHJhdygpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcInZlY3RvcjJkXCI7XHJcbmV4cG9ydCB0eXBlIHNoYXBlID0gJ2NpcmNsZScgfCAnc3F1YXJlJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFydGljbGUge1xyXG4gICAgcG9zaXRpb246IFZlY3RvcjtcclxuICAgIHZlbG9jaXR5OiBWZWN0b3I7XHJcbiAgICBzaGFwZTogc2hhcGU7XHJcbiAgICBzaXplOiBudW1iZXI7XHJcbiAgICBzcGVlZDogbnVtYmVyO1xyXG4gICAgY29sb3I6IHtyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBhOiBudW1iZXJ9O1xyXG4gICAgZmFkZUNvbG9yOiBib29sZWFuO1xyXG4gICAgZmFkZVNpemU6IGJvb2xlYW47XHJcbiAgICBhZ2U6IG51bWJlcjtcclxuICAgIGNhbnZhc0N0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG4gICAgcHJpdmF0ZSBzaXplRmFkZUFtb3VudDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBjb2xvckZhZGVBbW91bnQ6IG51bWJlcjtcclxuXHJcbiBcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocG9zaXRpb246IFZlY3RvciwgdmVsb2NpdHk6IFZlY3Rvciwgc2l6ZTogbnVtYmVyLCBzcGVlZDogbnVtYmVyLCAgc2hhcGU6IHNoYXBlID0gJ2NpcmNsZScsIGNvbG9yOiB7cjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciwgYTogbnVtYmVyfSwgY2FudmFzQ3R4OkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgYWdlOiBudW1iZXIsICBmYWRlQ29sb3I/OiBib29sZWFuLCBmYWRlU2l6ZT86IGJvb2xlYW4pe1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgICAgICB0aGlzLnZlbG9jaXR5ID0gdmVsb2NpdHk7XHJcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcclxuICAgICAgICB0aGlzLnNwZWVkID0gc3BlZWQ7XHJcbiAgICAgICAgdGhpcy5zaGFwZSA9IHNoYXBlO1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcclxuICAgICAgICB0aGlzLmNhbnZhc0N0eCA9IGNhbnZhc0N0eDtcclxuICAgICAgICB0aGlzLmZhZGVDb2xvciA9IGZhZGVDb2xvcjtcclxuICAgICAgICB0aGlzLmZhZGVTaXplID0gZmFkZVNpemU7IFxyXG4gICAgICAgIHRoaXMuYWdlID0gYWdlO1xyXG4gICAgICAgIHRoaXMuY29sb3JGYWRlQW1vdW50ID0gdGhpcy5jb2xvci5hL3RoaXMuYWdlO1xyXG4gICAgICAgIHRoaXMuc2l6ZUZhZGVBbW91bnQgPSB0aGlzLnNpemUvdGhpcy5hZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRpY2soZHQ6IG51bWJlcil7XHJcblxyXG4gICAgICAgIHRoaXMucG9zaXRpb24uYWRkKHRoaXMudmVsb2NpdHkuY2xvbmUoKS5tdWx0aXBseUJ5U2NhbGFyKGR0ICogdGhpcy5zcGVlZCkpO1xyXG4gICAgICAgIGlmKHRoaXMuZmFkZUNvbG9yKXtcclxuICAgICAgICAgICAgdGhpcy5jb2xvci5hIC09IHRoaXMuY29sb3JGYWRlQW1vdW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLmZhZGVTaXplKXtcclxuICAgICAgICAgICAgdGhpcy5zaXplIC09ICB0aGlzLnNpemVGYWRlQW1vdW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFnZS0tO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KCl7XHJcbiAgICAgICAgdGhpcy5jYW52YXNDdHgubW92ZVRvKHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55KTtcclxuICAgICAgICB0aGlzLmNhbnZhc0N0eC5maWxsU3R5bGUgPSBgcmdiYSgke3RoaXMuY29sb3Iucn0sJHt0aGlzLmNvbG9yLmd9LCAke3RoaXMuY29sb3IuYn0sICR7dGhpcy5jb2xvci5hfSlgO1xyXG4gICAgICAgIHRoaXMuY2FudmFzQ3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5zaGFwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdjaXJjbGUnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguYXJjKHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55LCB0aGlzLnNpemUsIDAsIDIqTWF0aC5QSSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5maWxsKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnc3F1YXJlJzpcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmZpbGxSZWN0KHRoaXMucG9zaXRpb24ueC10aGlzLnNpemUsIHRoaXMucG9zaXRpb24ueS10aGlzLnNpemUsIHRoaXMuc2l6ZSoyLCB0aGlzLnNpemUqMik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jYW52YXNDdHguY2xvc2VQYXRoKCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcInZlY3RvcjJkXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tRGlyZWN0aW9uKCk6IFZlY3RvcntcclxuXHJcbiAgICByZXR1cm4obmV3IFZlY3RvcihNYXRoLnJhbmRvbSgpKjItMSwgTWF0aC5yYW5kb20oKSoyLTEpKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGV4VG9SZ2IoaGV4OiBzdHJpbmcpIHtcclxuICAgIHZhciByZXN1bHQgPSAvXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pLmV4ZWMoaGV4KTtcclxuICAgIHJldHVybiByZXN1bHQgPyB7XHJcbiAgICAgIHI6IHBhcnNlSW50KHJlc3VsdFsxXSwgMTYpLFxyXG4gICAgICBnOiBwYXJzZUludChyZXN1bHRbMl0sIDE2KSxcclxuICAgICAgYjogcGFyc2VJbnQocmVzdWx0WzNdLCAxNilcclxuICAgIH0gOiBudWxsO1xyXG4gIH0iLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwidmVjdG9yMmRcIjtcblxuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgU2VnbWVudCB7XG4gICAgYWJzdHJhY3QgaXNDb2xsaWRhYmxlOiBib29sZWFuO1xuICAgIGFic3RyYWN0IGRyYXcoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBjb2xvcjogc3RyaW5nKTogdm9pZDtcbiAgICBhYnN0cmFjdCBnZXQgZW5kQW5nbGUoKTogbnVtYmVyO1xuICAgIGFic3RyYWN0IGdldCBlbmRQb2ludCgpOiBWZWN0b3I7XG4gICAgYWJzdHJhY3QgZ2V0Q29udGludWluZ1NlZ21lbnQodHJhbnNmb3JtOiBWZWN0b3IpOiBTZWdtZW50O1xufSIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCJ2ZWN0b3IyZFwiO1xuaW1wb3J0IEFyY1NlZ21lbnQgZnJvbSBcIi4vQXJjU2VnbWVudFwiO1xuaW1wb3J0IExpbmVTZWdtZW50IGZyb20gXCIuL0xpbmVTZWdtZW50XCI7XG5pbXBvcnQgU2VnbWVudCBmcm9tIFwiLi9TZWdtZW50XCI7XG5pbXBvcnQgRW1pdHRlciBmcm9tIFwiLi9QYXJ0aWNsZVN5c3RlbS9FbWl0dGVyXCI7XG5pbXBvcnQgeyBoZXhUb1JnYiB9IGZyb20gXCIuL1BhcnRpY2xlU3lzdGVtL1BhcnRpY2xlU3lzdGVtVXRpbHNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU25ha2Uge1xuICAgIHB1YmxpYyBzZWdtZW50czogU2VnbWVudFtdID0gW107XG4gICAgcHJpdmF0ZSBjb2xvcjogc3RyaW5nO1xuICAgIHB1YmxpYyBpc0FsaXZlOiBib29sZWFuID0gdHJ1ZTtcbiAgICBwdWJsaWMgdHVyblJhZGl1czogbnVtYmVyID0gNjA7XG4gICAgcHJpdmF0ZSBlbWl0dGVyOiBFbWl0dGVyIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBjYW52YXNDdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcblxuXG4gICAgY29uc3RydWN0b3Ioc3RhcnRQb3M6IExpbmVTZWdtZW50LCBjb2xvcjogc3RyaW5nLCBjYW52YXNDdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xuICAgICAgICB0aGlzLmFkZFNlZ21lbnQoc3RhcnRQb3MpO1xuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgICAgIHRoaXMuY2FudmFzQ3R4ID0gY2FudmFzQ3R4XG4gICAgfVxuICAgIGFkZFNlZ21lbnQoc2VnbWVudDogU2VnbWVudCkge1xuICAgICAgICB0aGlzLnNlZ21lbnRzLnB1c2goc2VnbWVudCk7XG4gICAgfVxuXG4gICAgZ2V0IGhlYWQoKTogU2VnbWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzLnNsaWNlKC0xKS5wb3AoKTtcbiAgICB9XG5cbiAgICBkcmF3KCkge1xuICAgICAgICBjb25zdCBzY2FsZVggPSB0aGlzLmNhbnZhc0N0eC5jYW52YXMud2lkdGggLyAyMDAwO1xuICAgICAgICBjb25zdCBzY2FsZVkgPSB0aGlzLmNhbnZhc0N0eC5jYW52YXMuaGVpZ2h0IC8gMjAwMDtcblxuXG4gICAgICAgIHRoaXMuY2FudmFzQ3R4LmxpbmVXaWR0aCA9IDEyICogTWF0aC5taW4oc2NhbGVYLCBzY2FsZVkpO1xuICAgICAgICAvL1RPRE8gZml4IHRoaXMgdG8gYmUgYSBzaW5nbGUgcGF0aFxuICAgICAgICAvLyBjb250ZXh0LmJlZ2luUGF0aCgpO1xuXG4gICAgICAgIHRoaXMuc2VnbWVudHMuZm9yRWFjaCgoc2VnbWVudCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIHNlZ21lbnQuZHJhdyh0aGlzLmNhbnZhc0N0eCwgdGhpcy5jb2xvcik7XG5cbiAgICAgICAgICAgIC8vZHJhdyBhIGRvdCBhdCB0aGUgaGVhZCwgdGhpcyBpcyB1c2VmdWxsIGlmIHRoZSBzZWdtZW50IGlzIGludmlzaWJsZVxuICAgICAgICAgICAgaWYgKHRoaXMuaGVhZCA9PSBzZWdtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguYXJjKHNlZ21lbnQuZW5kUG9pbnQueCAqIHNjYWxlWCwgc2VnbWVudC5lbmRQb2ludC55ICogc2NhbGVZLCAwLjUgKiBNYXRoLm1pbihzY2FsZVgsIHNjYWxlWSksIDAsIDIgKiBNYXRoLlBJKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5zdHJva2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgfVxuXG5raWxsKCkge1xuICAgIGNvbnNvbGUubG9nKFwiU05BS0UgREVBRFwiKVxuICAgIHRoaXMuaXNBbGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuZW1pdHRlciA9IG5ldyBFbWl0dGVyKHRoaXMuaGVhZC5lbmRQb2ludCwgMSwgNywgNCwgJ2NpcmNsZScsIHsgLi4uaGV4VG9SZ2IodGhpcy5jb2xvciksIGE6IDEgfSwgdGhpcy5jYW52YXNDdHgsIHRydWUsIHRydWUsIDcwLCA0KTtcbn1cblxudXBkYXRlRW1pdHRlcihkdDogbnVtYmVyKSB7XG4gICAgaWYgKHRoaXMuZW1pdHRlcikge1xuICAgICAgICB0aGlzLmVtaXR0ZXIudGljayhkdCk7XG4gICAgICAgIHRoaXMuZW1pdHRlci5kcmF3KCk7XG4gICAgfVxufVxuICAgIFxufSIsImltcG9ydCBTbmFrZSBmcm9tIFwiLi4vU25ha2VcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQbGF5ZXIge1xyXG4gICAgcHVibGljIHVzZXJuYW1lOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgaXNSZWFkeTogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBjb2xvcjogc3RyaW5nO1xyXG4gICAgcHVibGljIHNuYWtlOiBTbmFrZTtcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IodXNlcm5hbWU6IHN0cmluZywgaXNSZWFkeTogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xyXG4gICAgICAgIHRoaXMuaXNSZWFkeSA9IGlzUmVhZHk7XHJcbiAgICAgICAgdGhpcy5jb2xvciA9IFwiIzAwMDAwMFwiLnJlcGxhY2UoLzAvZyxmdW5jdGlvbigpe3JldHVybiAofn4oTWF0aC5yYW5kb20oKSoxNikpLnRvU3RyaW5nKDE2KTt9KTtcclxuICAgIH1cclxuXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLFxyXG4gICAgICAgICAgaXNSZWFkeTogdGhpcy5pc1JlYWR5LFxyXG4gICAgICAgICAgY29sb3I6IHRoaXMuY29sb3JcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vUGxheWVyXCI7XHJcblxyXG5leHBvcnQgY29uc3QgZW51bSBHYW1lU3RhdGUge1xyXG4gICAgUlVOTklORyxcclxuICAgIElOX0xPQkJZLFxyXG4gICAgRklOSVNIRURcclxufVxyXG5leHBvcnQgY2xhc3MgUm9vbSB7XHJcbiAgICBwcml2YXRlIHBsYXllcnM6IHsgW2tleTogc3RyaW5nXTogUGxheWVyOyB9ID0ge307XHJcbiAgICBwcml2YXRlIG1heFNpemU6IG51bWJlcjtcclxuICAgIHByaXZhdGUgZ2FtZVN0YXRlOiBHYW1lU3RhdGU7XHJcbiAgICBwcml2YXRlIGhvc3Q6IFBsYXllcjtcclxuICAgIHByaXZhdGUgY29kZTogc3RyaW5nO1xyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb2RlOiBzdHJpbmcsIGhvc3Q6IFBsYXllciwgcGxheWVycz86IHsgW2tleTogc3RyaW5nXTogUGxheWVyOyB9LCBtYXhTaXplOiBudW1iZXIgPSA1KSB7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICB0aGlzLmhvc3QgPSBob3N0O1xyXG4gICAgICAgIHRoaXMubWF4U2l6ZSA9IG1heFNpemU7XHJcblxyXG4gICAgICAgIGlmIChwbGF5ZXJzICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllcnMgPSBwbGF5ZXJzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICB0aGlzLmFkZFBsYXllcihob3N0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRQbGF5ZXIocGxheWVyOiBQbGF5ZXIpOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMucGxheWVycykubGVuZ3RoID49IHRoaXMubWF4U2l6ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnBsYXllcnNbcGxheWVyLnVzZXJuYW1lXSA9IHBsYXllcjtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0Q29kZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb2RlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRQbGF5ZXJzKCk6IHsgW2tleTogc3RyaW5nXTogUGxheWVyOyB9IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wbGF5ZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRIb3N0KCk6IFBsYXllciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaG9zdDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0SG9zdChwbGF5ZXI6IFBsYXllcikge1xyXG4gICAgICAgIHRoaXMuaG9zdCA9IHBsYXllcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0UGxheWVycyhwbGF5ZXJzOiB7IFtrZXk6IHN0cmluZ106IFBsYXllcjsgfSl7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJzID0gcGxheWVycztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0TWF4U2l6ZShuZXdTaXplOiBudW1iZXIpe1xyXG4gICAgICAgIHRoaXMubWF4U2l6ZSA9IG5ld1NpemU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE1heFNpemUoKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYXhTaXplO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRHYW1lU3RhdGUobmV3R2FtZVN0YXRlOiBHYW1lU3RhdGUpe1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlID0gbmV3R2FtZVN0YXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRHYW1lU3RhdGUoKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5nYW1lU3RhdGU7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyB1cGRhdGVHYW1lU3RhdGUgfSBmcm9tIFwiLi5cIjtcclxuaW1wb3J0IHsgRGlyIH0gZnJvbSBcIi4uL0lucHV0TWFuYWdlclwiO1xyXG5pbXBvcnQgeyBjdXJyZW50UGxheWVyLCBjdXJyZW50Um9vbSwgc2hvd0Vycm9yQW5pbWF0aW9uLCBzaG93Um9vbVZpZXcsIHN3aXRjaEdhbWVWaWV3LCB1cGRhdGVSb29tTGlzdCB9IGZyb20gXCIuLi9NZW51TWFuYWdlci9sb2dpblwiO1xyXG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi4vVmlld01vZGVscy9QbGF5ZXJcIjtcclxuXHJcbmxldCBzb2NrZXQ6IFdlYlNvY2tldDtcclxuXHJcbmZ1bmN0aW9uIGluaXRXZWJTb2NrZXQoKSB7XHJcbiAgICBzb2NrZXQgPSBuZXcgV2ViU29ja2V0KGB3czovLyR7d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lfTo4MDgwYCk7XHJcbiAgICBcclxuICAgIHNvY2tldC5vbm9wZW4gPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBjb25uZWN0aW9uIGVzdGFibGlzaGVkJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHNvY2tldC5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnTWVzc2FnZSBmcm9tIHNlcnZlcjonLCBkYXRhKTtcclxuICAgICAgICBcclxuICAgICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdKT0lORURfUk9PTSc6XHJcbiAgICAgICAgICAgICAgICBzaG93Um9vbVZpZXcoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnUk9PTV9ET0VTX05PVF9FWElTVCc6XHJcbiAgICAgICAgICAgICAgICBzaG93RXJyb3JBbmltYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdST09NX0RBVEEnOlxyXG4gICAgICAgICAgICAgICAgdXBkYXRlUm9vbUxpc3QoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnR0FNRV9TVEFURSc6XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2hHYW1lVmlldyhkYXRhKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdHQU1FUExBWV9EQVRBJzpcclxuICAgICAgICAgICAgICAgIHVwZGF0ZUdhbWVTdGF0ZShkYXRhKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdFUlJPUic6XHJcbiAgICAgICAgICAgICAgICBhbGVydChgRXJyb3I6ICR7ZGF0YS5tZXNzYWdlfWApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgc29ja2V0Lm9uY2xvc2UgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBjb25uZWN0aW9uIGNsb3NlZCcpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgc29ja2V0Lm9uZXJyb3IgPSAoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdXZWJTb2NrZXQgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJvb20odXNlcm5hbWU6IHN0cmluZykge1xyXG4gICAgaWYgKHNvY2tldCAmJiBzb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcclxuICAgICAgICBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGU6ICdDUkVBVEVfUk9PTScsIHVzZXJuYW1lOiB1c2VybmFtZSB9KSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1dlYlNvY2tldCBjb25uZWN0aW9uIGlzIG5vdCBvcGVuJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBqb2luUm9vbShyb29tQ29kZTogc3RyaW5nLCB1c2VybmFtZTogc3RyaW5nKSB7XHJcbiAgICBpZiAoc29ja2V0ICYmIHNvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xyXG4gICAgICAgIHNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogJ0pPSU5fUk9PTScsIHJvb21Db2RlOiByb29tQ29kZSwgdXNlcm5hbWU6IHVzZXJuYW1lIH0pKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignV2ViU29ja2V0IGNvbm5lY3Rpb24gaXMgbm90IG9wZW4nKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldFBsYXllckRhdGEocGxheWVyOiBQbGF5ZXIsIHJvb21Db2RlOiBzdHJpbmcpIHtcclxuICAgIGlmIChzb2NrZXQgJiYgc29ja2V0LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XHJcbiAgICAgICAgc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiAnUExBWUVSX0RBVEEnLCBwbGF5ZXI6IHBsYXllciwgcm9vbUNvZGU6IHJvb21Db2RlfSkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdXZWJTb2NrZXQgY29ubmVjdGlvbiBpcyBub3Qgb3BlbicpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2VuZEtleUV2ZW50VG9TZXJ2ZXIoa2V5OiBEaXIsIHByZXNzZWQ6IGJvb2xlYW4pe1xyXG4gICAgaWYgKHNvY2tldCAmJiBzb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcclxuICAgICAgICBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGU6ICdLRVlfRVZFTlQnLCByb29tQ29kZTogY3VycmVudFJvb20uZ2V0Q29kZSgpLCB1c2VybmFtZTogY3VycmVudFBsYXllci51c2VybmFtZSwga2V5OiBrZXksIHByZXNzZWQ6IHByZXNzZWQgfSkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdXZWJTb2NrZXQgY29ubmVjdGlvbiBpcyBub3Qgb3BlbicpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2VuZFN0YXJ0Q29tbWFuZChyb29tQ29kZTogc3RyaW5nKSB7XHJcbiAgICBpZiAoc29ja2V0ICYmIHNvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xyXG4gICAgICAgIHNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogJ0JFR0lOX0dBTUUnLCByb29tQ29kZTogcm9vbUNvZGV9KSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1dlYlNvY2tldCBjb25uZWN0aW9uIGlzIG5vdCBvcGVuJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuaW5pdFdlYlNvY2tldCgpO1xyXG4iLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwidmVjdG9yMmRcIjtcbmltcG9ydCBBcmNTZWdtZW50IGZyb20gXCIuL0FyY1NlZ21lbnRcIjtcbmltcG9ydCB7IGRyYXdHcmlkIH0gZnJvbSBcIi4vRHJhd2VyXCI7XG5pbXBvcnQgSW5wdXRNYW5hZ2VyIGZyb20gXCIuL0lucHV0TWFuYWdlclwiO1xuaW1wb3J0IExpbmVTZWdtZW50IGZyb20gXCIuL0xpbmVTZWdtZW50XCI7XG5pbXBvcnQgU25ha2UgZnJvbSBcIi4vU25ha2VcIjtcbmltcG9ydCBFbWl0dGVyIGZyb20gXCIuL1BhcnRpY2xlU3lzdGVtL0VtaXR0ZXJcIjtcbmltcG9ydCB7IE1lc3NhZ2VHYW1lcGxheSwgbWVzc2FnZUFyY1NlZ21lbnQsIG1lc3NhZ2VMaW5lU2VnbWVudCB9IGZyb20gXCIuL1dlYlNvY2tldENsaWVudC9tZXNzYWdlVHlwZXNcIjtcbmltcG9ydCB7IGN1cnJlbnRQbGF5ZXIsIGN1cnJlbnRSb29tIH0gZnJvbSBcIi4vTWVudU1hbmFnZXIvbG9naW5cIjtcblxudmFyIGZwc0NvdW50ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbmZwc0NvdW50ZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuZnBzQ291bnRlci5zdHlsZS50b3AgPSAnMTBweCc7XG5mcHNDb3VudGVyLnN0eWxlLmxlZnQgPSAnMTBweCc7XG5mcHNDb3VudGVyLnN0eWxlLmNvbG9yID0gJ2JsYWNrJztcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZnBzQ291bnRlcik7XG5leHBvcnQgdmFyIGZwcyA9IDYwO1xuXG5leHBvcnQgdmFyIGdhbWVDYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZS1jYW52YXMnKSAgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XG5leHBvcnQgdmFyIGdhbWVDYW52YXNDdHggPSBnYW1lQ2FudmFzLmdldENvbnRleHQoJzJkJykhO1xuXG5leHBvcnQgdmFyIGJhY2tncm91bmRDYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFja2dyb3VuZC1jYW52YXMnKSAgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XG5leHBvcnQgdmFyIGJhY2tncm91bmRDYW52YXNDdHggPSBiYWNrZ3JvdW5kQ2FudmFzLmdldENvbnRleHQoJzJkJykhO1xuXG5iYWNrZ3JvdW5kQ2FudmFzIS53aWR0aCA9IGJhY2tncm91bmRDYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG5iYWNrZ3JvdW5kQ2FudmFzIS5oZWlnaHQgPSBiYWNrZ3JvdW5kQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbmdhbWVDYW52YXMhLndpZHRoID0gZ2FtZUNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbmdhbWVDYW52YXMhLmhlaWdodCA9IGdhbWVDYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuZXhwb3J0IHZhciBncmlkU2l6ZSA9IDYwO1xubGV0IGlucHV0TWFuYWdlcjtcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVDYW52YXNTaXplKCkge1xuICAgIGdhbWVDYW52YXMud2lkdGggPSBnYW1lQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgIGdhbWVDYW52YXMuaGVpZ2h0ID0gZ2FtZUNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgYmFja2dyb3VuZENhbnZhcy53aWR0aCA9IGJhY2tncm91bmRDYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgYmFja2dyb3VuZENhbnZhcy5oZWlnaHQgPSBiYWNrZ3JvdW5kQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgICBkcmF3R3JpZCgpO1xuICB9XG5cbmZ1bmN0aW9uIGFuaW1hdGUoKSB7XG4gICAgdmFyIG11bHQgPSBmcHMgLyA2MDtcbiAgICBmcmFtZUNvdW50Kys7XG4gICAgaWYgKGZyYW1lQ291bnQgJSAxMCA9PT0gMCkge1xuICAgICAgICBmcHMgPSBjYWxjdWxhdGVGUFMoKTtcbiAgICAgICAgZnBzQ291bnRlci5pbm5lclRleHQgPSBgRlBTOiAke2Zwc31gO1xuICAgIH1cbiAgICBnYW1lQ2FudmFzQ3R4LmNsZWFyUmVjdCgwLCAwLCBnYW1lQ2FudmFzLndpZHRoLCBnYW1lQ2FudmFzLmhlaWdodCk7XG5cbiAgICBPYmplY3QudmFsdWVzKGN1cnJlbnRSb29tLmdldFBsYXllcnMoKSkuZm9yRWFjaChwbGF5ZXIgPT4ge1xuICAgICAgICBwbGF5ZXIuc25ha2UuZHJhdygpO1xuICAgICAgICBwbGF5ZXIuc25ha2UudXBkYXRlRW1pdHRlcigocGVyZm9ybWFuY2Uubm93KCkvMTAgLSBsYXN0VGltZSkvMTApO1xuICAgIH0pXG4gICAgLy8gZW1pdHRlci50aWNrKDAuMyk7XG4gICAgLy8gZW1pdHRlci5kcmF3KCk7XG59XG52YXIgZnJhbWVDb3VudCA9IDA7XG52YXIgbGFzdFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAvIDEwO1xuZnVuY3Rpb24gY2FsY3VsYXRlRlBTKCkge1xuICAgIHZhciBjdXJyZW50VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC8gMTA7XG4gICAgdmFyIHRpbWVEaWZmID0gY3VycmVudFRpbWUgLSBsYXN0VGltZTtcbiAgICB2YXIgZnBzID0gTWF0aC5yb3VuZCgxMDAwIC8gdGltZURpZmYpO1xuICAgIGxhc3RUaW1lID0gY3VycmVudFRpbWU7XG4gICAgcmV0dXJuIGZwcztcbn1cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdXBkYXRlQ2FudmFzU2l6ZSk7XG5kcmF3R3JpZCgpO1xubGV0IGluaXRpYWxpemVkID0gZmFsc2U7XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVHYW1lU3RhdGUoZ2FtZVN0YXRlOiBNZXNzYWdlR2FtZXBsYXkpIHtcblxuICAgIGlmICghaW5pdGlhbGl6ZWQpIHtcblxuICAgICAgICAvLyBJbml0aWFsaXplIHNuYWtlcyB0aGUgZmlyc3QgdGltZSB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZFxuICAgICAgICBnYW1lU3RhdGUuc25ha2VIZWFkcy5mb3JFYWNoKGhlYWREYXRhID0+IHtcbiAgICAgICAgICAgIGxldCBoZWFkID0gaGVhZERhdGEubGFzdFNlZ21lbnQ7XG4gICAgICAgICAgICBsZXQgdXNlcm5hbWUgPSBoZWFkRGF0YS51c2VybmFtZTtcbiAgICAgICAgICAgIGxldCBwb3MgPSBoZWFkLmVuZFBvaW50XG4gICAgICAgICAgICBjdXJyZW50Um9vbS5nZXRQbGF5ZXJzKClbdXNlcm5hbWVdLnNuYWtlID0gbmV3IFNuYWtlKG5ldyBMaW5lU2VnbWVudChuZXcgVmVjdG9yKHBvcy54LCBwb3MueSkgLCBuZXcgVmVjdG9yKHBvcy54LCBwb3MueSkgLCBoZWFkLmlzQ29sbGlkYWJsZSwgaGVhZC5lbmRBbmdsZSksY3VycmVudFJvb20uZ2V0UGxheWVycygpW3VzZXJuYW1lXS5jb2xvciwgZ2FtZUNhbnZhc0N0eClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaW5wdXRNYW5hZ2VyID0gbmV3IElucHV0TWFuYWdlcihjdXJyZW50Um9vbS5nZXRQbGF5ZXJzKClbY3VycmVudFBsYXllci51c2VybmFtZV0uc25ha2UsJ0EnLCdEJyk7XG5cbiAgICAgICAgaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICB9IFxuICAgICBlbHNlIHtcbiAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIHNuYWtlcyBiYXNlZCBvbiB0aGUgbmV3IGdhbWUgc3RhdGVcbiAgICAgICAgZ2FtZVN0YXRlLnNuYWtlSGVhZHMuZm9yRWFjaChuZXdIZWFkRGF0YSA9PiB7XG4gICAgICAgICAgICBsZXQgaGVhZCA9IG5ld0hlYWREYXRhLmxhc3RTZWdtZW50O1xuICAgICAgICAgICAgbGV0IHVzZXJuYW1lID0gbmV3SGVhZERhdGEudXNlcm5hbWU7XG4gICAgICAgICAgICBsZXQgZW5kUG9zID0gaGVhZC5lbmRQb2ludFxuICAgICAgICAgICAgbGV0IHNuYWtlVG9VcGRhdGUgPSBjdXJyZW50Um9vbS5nZXRQbGF5ZXJzKClbdXNlcm5hbWVdLnNuYWtlO1xuXG4gICAgICAgICAgaWYoaGVhZC5pc05ld1RoaXNUaWNrKXtcbiAgICAgICAgICAgIGlmKG5ld0hlYWREYXRhLnNlZ21lbnRUeXBlID09ICdMaW5lU2VnbWVudCcpe1xuICAgICAgICAgICAgICAgIGhlYWQgPSBoZWFkIGFzIG1lc3NhZ2VMaW5lU2VnbWVudFxuICAgICAgICAgICAgICAgIGxldCBzdGFydFBvcyA9IGhlYWQuc3RhcnRQb2ludDtcbiAgICAgICAgICAgICAgICBzbmFrZVRvVXBkYXRlLmFkZFNlZ21lbnQobmV3IExpbmVTZWdtZW50KG5ldyBWZWN0b3Ioc3RhcnRQb3MueCwgc3RhcnRQb3MueSksIG5ldyBWZWN0b3IoZW5kUG9zLngsIGVuZFBvcy55KSwgaGVhZC5pc0NvbGxpZGFibGUsIGhlYWQuZW5kQW5nbGUpKTtcbiAgICAgICAgICAgIH0gXG4gICAgICAgICAgICBlbHNlIGlmIChuZXdIZWFkRGF0YS5zZWdtZW50VHlwZSA9PSAnQXJjU2VnbWVudCcpe1xuICAgICAgICAgICAgICAgIGhlYWQgPSBoZWFkIGFzIG1lc3NhZ2VBcmNTZWdtZW50XG4gICAgICAgICAgICAgICAgbGV0IGNlbnRlciA9IGhlYWQuY2VudGVyO1xuICAgICAgICAgICAgICAgIHNuYWtlVG9VcGRhdGUuYWRkU2VnbWVudChuZXcgQXJjU2VnbWVudChuZXcgVmVjdG9yKGNlbnRlci54LCBjZW50ZXIueSksIGhlYWQucmFkaXVzLCBoZWFkLnN0YXJ0QW5nbGUsIGhlYWQuZW5kQW5nbGUsIGhlYWQuY291bnRlckNsb2Nrd2lzZSwgaGVhZC5pc0NvbGxpZGFibGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGlmKG5ld0hlYWREYXRhLnNlZ21lbnRUeXBlID09ICdMaW5lU2VnbWVudCcpe1xuICAgICAgICAgICAgaGVhZCA9IGhlYWQgYXMgbWVzc2FnZUxpbmVTZWdtZW50XG4gICAgICAgICAgICBsZXQgc3RhcnRQb3MgPSBoZWFkLnN0YXJ0UG9pbnQ7XG4gICAgICAgICAgICBzbmFrZVRvVXBkYXRlLnNlZ21lbnRzW3NuYWtlVG9VcGRhdGUuc2VnbWVudHMubGVuZ3RoLTFdID0gKG5ldyBMaW5lU2VnbWVudChuZXcgVmVjdG9yKHN0YXJ0UG9zLngsIHN0YXJ0UG9zLnkpLCBuZXcgVmVjdG9yKGVuZFBvcy54LCBlbmRQb3MueSksIGhlYWQuaXNDb2xsaWRhYmxlLCBoZWFkLmVuZEFuZ2xlKSk7XG4gICAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChuZXdIZWFkRGF0YS5zZWdtZW50VHlwZSA9PSAnQXJjU2VnbWVudCcpe1xuICAgICAgICAgICAgaGVhZCA9IGhlYWQgYXMgbWVzc2FnZUFyY1NlZ21lbnRcbiAgICAgICAgICAgIGxldCBjZW50ZXIgPSBoZWFkLmNlbnRlcjtcbiAgICAgICAgICAgIHNuYWtlVG9VcGRhdGUuc2VnbWVudHNbc25ha2VUb1VwZGF0ZS5zZWdtZW50cy5sZW5ndGgtMV0gPSAobmV3IEFyY1NlZ21lbnQobmV3IFZlY3RvcihjZW50ZXIueCwgY2VudGVyLnkpLCBoZWFkLnJhZGl1cywgaGVhZC5zdGFydEFuZ2xlLCBoZWFkLmVuZEFuZ2xlLCBoZWFkLmNvdW50ZXJDbG9ja3dpc2UsIGhlYWQuaXNDb2xsaWRhYmxlKSk7XG4gICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGFuaW1hdGUoKTtcblxuXG4gIH0iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qKlxuICogVGhlc2UgdmFsdWVzIGFyZSB1c2VkIGJ5IHRoZSBgQWJzdHJhY3RWZWN0b3Iucm91bmRgIG1ldGhvZCB0byBpbmNyZWFzZVxuICogcGVyZm9ybWFuY2UgdnMuIHVzaW5nICBOdW1iZXIudG9GaXhlZC5cbiAqL1xudmFyIHByZWNpc2lvbiA9IFtcbiAgICAxLFxuICAgIDEwLFxuICAgIDEwMCxcbiAgICAxMDAwLFxuICAgIDEwMDAwLFxuICAgIDEwMDAwMCxcbiAgICAxMDAwMDAwLFxuICAgIDEwMDAwMDAwLFxuICAgIDEwMDAwMDAwMCxcbiAgICAxMDAwMDAwMDAwLFxuICAgIDEwMDAwMDAwMDAwXG5dO1xuLyoqXG4gKiBUaGUgY2xhc3MgdGhhdCBhbGwgb3RoZXIgdmVjdG9yIHJlcHJlc2VudGF0aW9ucyBhcmUgZGVyaXZlZCBmcm9tLlxuICpcbiAqIENvbnRhaW5zIHRoZSBjb3JlIGltcGxlbWVudGF0aW9uIGZvciBhbGwgbWV0aG9kcyB0aGF0IHdpbGwgYmUgZXhwb3NlZCBieVxuICogdmVjdG9yIGluc3RhbmNlcy5cbiAqXG4gKiBFeGFtcGxlIG9mIGNyZWF0aW5nIGEgY3VzdG9tIGltcGxlbWVudGF0aW9uOlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBBYnN0cmFjdFZlY3RvciB9IGZyb20gXCIuL0Fic3RyYWN0VmVjdG9yXCJcbiAqXG4gKiBleHBvcnQgY2xhc3MgTXlDdXN0b21WZWN0b3IgZXh0ZW5kcyBBYnN0cmFjdFZlY3RvciB7XG4gKiAgY29uc3RydWN0b3IgKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gKiAgICBzdXBlcihDdXN0b21WZWN0b3JUeXBlKVxuICogIH1cbiAqIH1cbiAqIGBgYFxuICovXG52YXIgQWJzdHJhY3RWZWN0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQWJzdHJhY3RWZWN0b3IoY3Rvcikge1xuICAgICAgICB0aGlzLmN0b3IgPSBjdG9yO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgYm90aCB4IGFuZCB5IGF4aXMgdmFsdWVcbiAgICAgKiBAcGFyYW0geCAgIE5ldyB4IHZhbFxuICAgICAqIEBwYXJhbSB5ICAgTmV3IHkgdmFsXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnNldEF4ZXMgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHRlciBmb3IgeCB0aGUgYXhpcyB2YWx1ZVxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5nZXRYID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy54O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0dGVyIGZvciB4IGF4aXMgdmFsdWVcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuc2V0WCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0dGVyIGZvciB5IGF4aXMgdmFsdWVcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuZ2V0WSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHRlciBmb3IgeSBheGlzLlxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5zZXRZID0gZnVuY3Rpb24gKHkpIHtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHZlY3RvciBhcyBhIGZvcm1hdHRlZCBzdHJpbmcsIGUuZyBcIigwLCA0KVwiXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKHJvdW5kKSB7XG4gICAgICAgIGlmIChyb3VuZCA9PT0gdm9pZCAwKSB7IHJvdW5kID0gZmFsc2U7IH1cbiAgICAgICAgaWYgKHJvdW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gXCIoXCIgKyBNYXRoLnJvdW5kKHRoaXMueCkgKyBcIiwgXCIgKyBNYXRoLnJvdW5kKHRoaXMueSkgKyBcIilcIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCIoXCIgKyB0aGlzLnggKyBcIiwgXCIgKyB0aGlzLnkgKyBcIilcIjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiBhbiBBcnJheSBjb250YWluaW5nIHRoZSB2ZWN0b3IgYXhlcywgZS5nIFswLCA0XVxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55XTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiBhbiBPYmplY3QgY29udGFpbmluZyB0aGUgdmVjdG9yIGF4ZXMsIGUuZyB7IHg6IDAsIHk6IDQgfVxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS50b09iamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IHRoaXMueCxcbiAgICAgICAgICAgIHk6IHRoaXMueVxuICAgICAgICB9O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkIHRoZSBwcm92aWRlZCB2ZWN0b3IgdG8gdGhpcyBvbmVcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHZlYykge1xuICAgICAgICB0aGlzLnggKz0gdmVjLng7XG4gICAgICAgIHRoaXMueSArPSB2ZWMueTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTdWJ0cmFjdCB0aGUgcHJvdmlkZWQgdmVjdG9yIGZyb20gdGhpcyBvbmVcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuc3VidHJhY3QgPSBmdW5jdGlvbiAodmVjKSB7XG4gICAgICAgIHRoaXMueCAtPSB2ZWMueDtcbiAgICAgICAgdGhpcy55IC09IHZlYy55O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHRoZSBwcm92aWRlZCB2ZWN0b3IgZXF1YWwgdG8gdGhpcyBvbmVcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKHZlYykge1xuICAgICAgICByZXR1cm4gdmVjLnggPT09IHRoaXMueCAmJiB2ZWMueSA9PT0gdGhpcy55O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIHZlY3RvclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5tdWx0aXBseUJ5VmVjdG9yID0gZnVuY3Rpb24gKHZlYykge1xuICAgICAgICB0aGlzLnggKj0gdmVjLng7XG4gICAgICAgIHRoaXMueSAqPSB2ZWMueTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNdWx0aXBseSB0aGlzIHZlY3RvciBieSB0aGUgcHJvdmlkZWQgdmVjdG9yXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLm11bFYgPSBmdW5jdGlvbiAodmVjKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11bHRpcGx5QnlWZWN0b3IodmVjKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpdmlkZSB0aGlzIHZlY3RvciBieSB0aGUgcHJvdmlkZWQgdmVjdG9yXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmRpdmlkZUJ5VmVjdG9yID0gZnVuY3Rpb24gKHZlYykge1xuICAgICAgICB0aGlzLnggLz0gdmVjLng7XG4gICAgICAgIHRoaXMueSAvPSB2ZWMueTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXZpZGUgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIHZlY3RvclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5kaXZWID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGl2aWRlQnlWZWN0b3Iodik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNdWx0aXBseSB0aGlzIHZlY3RvciBieSB0aGUgcHJvdmlkZWQgbnVtYmVyXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLm11bHRpcGx5QnlTY2FsYXIgPSBmdW5jdGlvbiAobikge1xuICAgICAgICB0aGlzLnggKj0gbjtcbiAgICAgICAgdGhpcy55ICo9IG47XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIG51bWJlclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5tdWxTID0gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXVsdGlwbHlCeVNjYWxhcihuKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpdml2ZSB0aGlzIHZlY3RvciBieSB0aGUgcHJvdmlkZWQgbnVtYmVyXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmRpdmlkZUJ5U2NhbGFyID0gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdGhpcy54IC89IG47XG4gICAgICAgIHRoaXMueSAvPSBuO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpdml2ZSB0aGlzIHZlY3RvciBieSB0aGUgcHJvdmlkZWQgbnVtYmVyXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmRpdlMgPSBmdW5jdGlvbiAobikge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXZpZGVCeVNjYWxhcihuKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE5vcm1hbGlzZSB0aGlzIHZlY3RvclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5ub3JtYWxpc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpdmlkZUJ5U2NhbGFyKHRoaXMubWFnbml0dWRlKCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRm9yIEFtZXJpY2FuIHNwZWxsaW5nLiBTYW1lIGFzIHVuaXQvbm9ybWFsaXNlIGZ1bmN0aW9uXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXNlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGUgc2FtZSBhcyBub3JtYWxpc2UgYW5kIG5vcm1hbGl6ZVxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS51bml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWxpc2UoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG1hZ25pdHVkZSAobGVuZ3RoKSBvZiB0aGlzIHZlY3RvclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5tYWduaXR1ZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB4ID0gdGhpcy54O1xuICAgICAgICB2YXIgeSA9IHRoaXMueTtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCh4ICogeCArIHkgKiB5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG1hZ25pdHVkZSAobGVuZ3RoKSBvZiB0aGlzIHZlY3RvclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hZ25pdHVkZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc3F1cmVkIGxlbmd0aCBvZiB0aGlzIHZlY3RvclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5sZW5ndGhTcSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHggPSB0aGlzLng7XG4gICAgICAgIHZhciB5ID0gdGhpcy55O1xuICAgICAgICByZXR1cm4geCAqIHggKyB5ICogeTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGRvdCBwcm9kdWN0IG9mIHRoaXMgdmVjdG9yIGJ5IGFub3RoZXJcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuZG90ID0gZnVuY3Rpb24gKHZlYykge1xuICAgICAgICByZXR1cm4gdmVjLnggKiB0aGlzLnggKyB2ZWMueSAqIHRoaXMueTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdGhpcyB2ZWN0b3IgYnkgYW5vdGhlci5cbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuY3Jvc3MgPSBmdW5jdGlvbiAodmVjKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnggKiB2ZWMueSAtIHRoaXMueSAqIHZlYy54O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV2ZXJzZXMgdGhpcyB2ZWN0b3IgaS5lIG11bHRpcGxpZXMgaXQgYnkgLTFcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUucmV2ZXJzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy54ID0gLXRoaXMueDtcbiAgICAgICAgdGhpcy55ID0gLXRoaXMueTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHZlY3RvciBheGVzIHZhbHVlcyB0byBhYnNvbHV0ZSB2YWx1ZXNcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuYWJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnggPSBNYXRoLmFicyh0aGlzLngpO1xuICAgICAgICB0aGlzLnkgPSBNYXRoLmFicyh0aGlzLnkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFplcm9lcyB0aGUgdmVjdG9yIGkuZSBzZXRzIGFsbCBheGVzIHRvIDBcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuemVybyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy54ID0gdGhpcy55ID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoaXMgdmVjdG9yIGFuZCBhbm90aGVyXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmRpc3RhbmNlID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgdmFyIHggPSB0aGlzLnggLSB2Lng7XG4gICAgICAgIHZhciB5ID0gdGhpcy55IC0gdi55O1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUm90YXRlcyB0aGUgdmV0b3IgYnkgcHJvdmlkZWQgcmFkaWFuc1xuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5yb3RhdGUgPSBmdW5jdGlvbiAocmFkcykge1xuICAgICAgICB2YXIgY29zID0gTWF0aC5jb3MocmFkcyk7XG4gICAgICAgIHZhciBzaW4gPSBNYXRoLnNpbihyYWRzKTtcbiAgICAgICAgdmFyIG94ID0gdGhpcy54O1xuICAgICAgICB2YXIgb3kgPSB0aGlzLnk7XG4gICAgICAgIHRoaXMueCA9IG94ICogY29zIC0gb3kgKiBzaW47XG4gICAgICAgIHRoaXMueSA9IG94ICogc2luICsgb3kgKiBjb3M7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUm91bmRzIHRoaXMgdmVjdG9yIHRvIG4gZGVjaW1hbCBwbGFjZXNcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUucm91bmQgPSBmdW5jdGlvbiAobikge1xuICAgICAgICBpZiAobiA9PT0gdm9pZCAwKSB7IG4gPSAyOyB9XG4gICAgICAgIHZhciBwID0gcHJlY2lzaW9uW25dO1xuICAgICAgICAvLyBUaGlzIHBlcmZvcm1zIHdhYWF5IGJldHRlciB0aGFuIHRvRml4ZWQgYW5kIGdpdmUgRmxvYXQzMiB0aGUgZWRnZSBhZ2Fpbi5cbiAgICAgICAgLy8gaHR0cDovL3d3dy5keW5hbWljZ3VydS5jb20vamF2YXNjcmlwdC9yb3VuZC1udW1iZXJzLXdpdGgtcHJlY2lzaW9uL1xuICAgICAgICB0aGlzLnggPSAoKDAuNSArIHRoaXMueCAqIHApIDw8IDApIC8gcDtcbiAgICAgICAgdGhpcy55ID0gKCgwLjUgKyB0aGlzLnkgKiBwKSA8PCAwKSAvIHA7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGNvcHkgb2YgdGhpcyB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgdGhpcy5jdG9yKHRoaXMueCwgdGhpcy55KTtcbiAgICB9O1xuICAgIHJldHVybiBBYnN0cmFjdFZlY3Rvcjtcbn0oKSk7XG5leHBvcnRzLkFic3RyYWN0VmVjdG9yID0gQWJzdHJhY3RWZWN0b3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1BYnN0cmFjdFZlY3Rvci5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEFic3RyYWN0VmVjdG9yXzEgPSByZXF1aXJlKFwiLi9BYnN0cmFjdFZlY3RvclwiKTtcbi8qKlxuICogQSB2ZWN0b3IgcmVwcmVzZW50YXRpb24gdGhhdCBzdG9yZXMgdGhlIGF4ZXMgaW4gYW4gQXJyYXlcbiAqXG4gKiBgYGBcbiAqIGNvbnN0IHYgPSBuZXcgVmVjMkQuQXJyYXlWZWN0b3IoMiwgNSlcbiAqIGBgYFxuICovXG52YXIgQXJyYXlWZWN0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFycmF5VmVjdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFycmF5VmVjdG9yKHgsIHkpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgQXJyYXlWZWN0b3IpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmF4ZXMgPSBbeCwgeV07XG4gICAgICAgIF90aGlzLmN0b3IgPSBBcnJheVZlY3RvcjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlWZWN0b3IucHJvdG90eXBlLCBcInhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmF4ZXNbMF07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHRoaXMuYXhlc1swXSA9IHg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheVZlY3Rvci5wcm90b3R5cGUsIFwieVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXhlc1sxXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoeSkge1xuICAgICAgICAgICAgdGhpcy5heGVzWzFdID0geTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIEFycmF5VmVjdG9yO1xufShBYnN0cmFjdFZlY3Rvcl8xLkFic3RyYWN0VmVjdG9yKSk7XG5leHBvcnRzLkFycmF5VmVjdG9yID0gQXJyYXlWZWN0b3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1BcnJheVZlY3Rvci5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEFic3RyYWN0VmVjdG9yXzEgPSByZXF1aXJlKFwiLi9BYnN0cmFjdFZlY3RvclwiKTtcbi8qKlxuICogQSB2ZWN0b3IgcmVwcmVzZW50YXRpb24gdGhhdCBzdG9yZXMgdGhlIGF4ZXMgaW4gYSBGbG9hdDMyQXJyYXlcbiAqXG4gKiBgYGBcbiAqIGNvbnN0IHYgPSBuZXcgVmVjMkQuRmxvYXQzMlZlY3RvcigyLCA1KVxuICogYGBgXG4gKi9cbnZhciBGbG9hdDMyVmVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGbG9hdDMyVmVjdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEZsb2F0MzJWZWN0b3IoeCwgeSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBGbG9hdDMyVmVjdG9yKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5heGVzID0gbmV3IEZsb2F0MzJBcnJheSgyKTtcbiAgICAgICAgX3RoaXMuYXhlc1swXSA9IHg7XG4gICAgICAgIF90aGlzLmF4ZXNbMV0gPSB5O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdDMyVmVjdG9yLnByb3RvdHlwZSwgXCJ4XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5heGVzWzBdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICB0aGlzLmF4ZXNbMF0gPSB4O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmxvYXQzMlZlY3Rvci5wcm90b3R5cGUsIFwieVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXhlc1sxXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoeSkge1xuICAgICAgICAgICAgdGhpcy5heGVzWzFdID0geTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIEZsb2F0MzJWZWN0b3I7XG59KEFic3RyYWN0VmVjdG9yXzEuQWJzdHJhY3RWZWN0b3IpKTtcbmV4cG9ydHMuRmxvYXQzMlZlY3RvciA9IEZsb2F0MzJWZWN0b3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1GbG9hdDMyVmVjdG9yLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbn1cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL0Fic3RyYWN0VmVjdG9yXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL0FycmF5VmVjdG9yXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL0Zsb2F0MzJWZWN0b3JcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vVmVjdG9yXCIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZlYzJELmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgQWJzdHJhY3RWZWN0b3JfMSA9IHJlcXVpcmUoXCIuL0Fic3RyYWN0VmVjdG9yXCIpO1xuLyoqXG4gKiBBIHZlY3RvciByZXByZXNlbnRhdGlvbiB0aGF0IHN0b3JlcyB0aGUgYXhlcyBhcyBwYXJ0IG9mIHRoZSBpbnN0YW5jZSBpdHNlbGZcbiAqXG4gKiBgYGB0c1xuICogY29uc3QgdiA9IG5ldyBWZWMyRC5WZWN0b3IoMiwgNSlcbiAqIGBgYFxuICovXG52YXIgVmVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhWZWN0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVmVjdG9yKHgsIHkpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgVmVjdG9yKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5feCA9IHg7XG4gICAgICAgIF90aGlzLl95ID0geTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVmVjdG9yLnByb3RvdHlwZSwgXCJ4XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5feDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgdGhpcy5feCA9IHg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWZWN0b3IucHJvdG90eXBlLCBcInlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl95O1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh5KSB7XG4gICAgICAgICAgICB0aGlzLl95ID0geTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIFZlY3Rvcjtcbn0oQWJzdHJhY3RWZWN0b3JfMS5BYnN0cmFjdFZlY3RvcikpO1xuZXhwb3J0cy5WZWN0b3IgPSBWZWN0b3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1WZWN0b3IuanMubWFwIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL1dlYlNvY2tldENsaWVudC93ZWJzb2NrZXQudHNcIik7XG4iXSwibmFtZXMiOlsiY2VudGVyIiwicmFkaXVzIiwic3RhcnRBbmdsZSIsImVuZEFuZ2xlIiwiY291bnRlckNsb2Nrd2lzZSIsImlzQ29sbGlkYWJsZSIsImRyYXciLCJjb250ZXh0IiwiY29sb3IiLCJzY2FsZVgiLCJjYW52YXMiLCJ3aWR0aCIsInNjYWxlWSIsImhlaWdodCIsImxpbmVDYXAiLCJzdHJva2VTdHlsZSIsInRoaXMiLCJiZWdpblBhdGgiLCJhcmMiLCJ4IiwieSIsIk1hdGgiLCJtaW4iLCJzdHJva2UiLCJjbG9zZVBhdGgiLCJkcmF3RGVidWciLCJ0YW5nZW50X2FuZ2xlIiwiUEkiLCJkcmF3RG90IiwiZHJhd0Fycm93IiwiZW5kUG9pbnQiLCJjb3MiLCJzaW4iLCJkcmF3QXJjIiwiaXNDb3VudGVyQ2xvY2t3aXNlIiwiZ2V0Q29udGludWluZ1NlZ21lbnQiLCJ0cmFuc2Zvcm0iLCJBcmNTZWdtZW50IiwiY2xvbmUiLCJhZGQiLCJkcmF3R3JpZCIsImJhY2tncm91bmRDYW52YXNDdHgiLCJjbGVhclJlY3QiLCJiYWNrZ3JvdW5kQ2FudmFzIiwibGluZVdpZHRoIiwiZ3JpZFNpemUiLCJtb3ZlVG8iLCJsaW5lVG8iLCJkb3RYIiwiZG90WSIsImRvdFNpemUiLCJmaWxsU3R5bGUiLCJmaWxsIiwiY3R4IiwiZnJvbSIsInRvIiwiYW5nbGUiLCJhdGFuMiIsImhlYWRMZW5ndGgiLCJuZXdfdG8iLCJWZWN0b3IiLCJzbmFrZSIsImxlZnRLZXkiLCJyaWdodEtleSIsImtleU1hcCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbktleURvd24iLCJiaW5kIiwib25LZXlVcCIsImV2ZW50IiwiaXNBbGl2ZSIsImtleSIsInRvVXBwZXJDYXNlIiwic2VuZEtleUV2ZW50VG9TZXJ2ZXIiLCJkaXNwb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInN0YXJ0IiwiZW5kIiwic3RhcnRQb2ludCIsImNhbGNFbmRBbmdsZSIsImF0YW4iLCJzcXJ0IiwidHJhbnNmb3JtZWRFbmRwb2ludCIsIkxpbmVTZWdtZW50IiwiY3VycmVudFJvb20iLCJjdXJyZW50UGxheWVyIiwicm9vbUNvZGVJbnB1dCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ1c2VybmFtZUlucHV0Iiwicm9vbUJ1dHRvbiIsInJlYWR5QnV0dG9uIiwibG9naW5EaXYiLCJyb29tRGl2IiwiZ2FtZURpdiIsImNvbG9yUGlja2VyIiwicm9vbVVzZXJzTGlzdCIsInJvb21Db2RlU3BhbiIsInBsYXllckNvdW50IiwiY29sb3JQaWNrZXJEaXYiLCJzdGFydFByb2dyZXNzQmFyIiwidXBkYXRlQnV0dG9uIiwidmFsdWUiLCJ0cmltIiwiZGlzYWJsZWQiLCJsZW5ndGgiLCJ0ZXh0Q29udGVudCIsImhhbmRsZVJvb21BY3Rpb24iLCJ1c2VybmFtZSIsIlBsYXllciIsImlubmVyVGV4dCIsImNyZWF0ZVJvb20iLCJqb2luUm9vbSIsImhhbmRsZVJlYWR5U3RhdGUiLCJpc1JlYWR5Iiwic2V0UGxheWVyRGF0YSIsImdldENvZGUiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJzaG93Um9vbVZpZXciLCJkYXRhIiwicm9vbUluZm8iLCJKU09OIiwicGFyc2UiLCJ0b1N0cmluZyIsIlJvb20iLCJnZXRIb3N0Iiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJwaWNrVGV4dENvbG9yQmFzZWRPbkJnQ29sb3JBZHZhbmNlZCIsImlubmVySFRNTCIsInVwZGF0ZVJvb21MaXN0IiwicmVhZHlQbGF5ZXJDb3VudCIsIm1heFBsYXllckNvdW50Iiwic2V0UGxheWVycyIsInNldEhvc3QiLCJzZXRNYXhTaXplIiwiT2JqZWN0Iiwia2V5cyIsImdldFBsYXllcnMiLCJnZXRNYXhTaXplIiwidmFsdWVzIiwiZm9yRWFjaCIsInBsYXllciIsInBsYXllckl0ZW0iLCJjcmVhdGVFbGVtZW50IiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiYXBwZW5kQ2hpbGQiLCJmaWx0ZXIiLCJwIiwiZmxvb3IiLCJzaG93RXJyb3JBbmltYXRpb24iLCJzZXRUaW1lb3V0IiwidXBkYXRlQ29sb3JQaWNrZXIiLCJ1cGRhdGVQbGF5ZXJDb2xvciIsImJnQ29sb3IiLCJsaWdodENvbG9yIiwiZGFya0NvbG9yIiwiY2hhckF0Iiwic3Vic3RyaW5nIiwiYyIsInBhcnNlSW50IiwibWFwIiwiY29sIiwicG93Iiwic3dpdGNoR2FtZVZpZXciLCJzdGF0ZSIsInNldEdhbWVTdGF0ZSIsInVwZGF0ZUNhbnZhc1NpemUiLCJvbmxvYWQiLCJzdGFydEdhbWUiLCJzZW5kU3RhcnRDb21tYW5kIiwicG9zaXRpb24iLCJlbWl0SW50ZXJ2YWwiLCJzaXplIiwic3BlZWQiLCJzaGFwZSIsImNhbnZhc0N0eCIsImZhZGVDb2xvciIsImZhZGVTaXplIiwiYWdlIiwiZW1pdFRpbWVNaWxsaXMiLCJhbGl2ZVBhcnRpY2xlcyIsInRpY2tzIiwiZW1pdFRpbWUiLCJwYXJ0aWNsZU1heEFnZSIsInRpY2siLCJkdCIsInB1c2giLCJnZXRSYW5kb21EaXJlY3Rpb24iLCJwYXJ0aWNsZSIsInZlbG9jaXR5IiwiY29sb3JGYWRlQW1vdW50IiwiYSIsInNpemVGYWRlQW1vdW50IiwibXVsdGlwbHlCeVNjYWxhciIsInIiLCJnIiwiYiIsImZpbGxSZWN0IiwicmFuZG9tIiwiaGV4VG9SZ2IiLCJoZXgiLCJyZXN1bHQiLCJleGVjIiwic3RhcnRQb3MiLCJzZWdtZW50cyIsInR1cm5SYWRpdXMiLCJlbWl0dGVyIiwiYWRkU2VnbWVudCIsInNlZ21lbnQiLCJzbGljZSIsInBvcCIsImluZGV4IiwiaGVhZCIsImtpbGwiLCJjb25zb2xlIiwibG9nIiwidXBkYXRlRW1pdHRlciIsInJlcGxhY2UiLCJ0b0pTT04iLCJjb2RlIiwiaG9zdCIsInBsYXllcnMiLCJtYXhTaXplIiwidW5kZWZpbmVkIiwiYWRkUGxheWVyIiwibmV3U2l6ZSIsIm5ld0dhbWVTdGF0ZSIsImdhbWVTdGF0ZSIsImdldEdhbWVTdGF0ZSIsInNvY2tldCIsInJlYWR5U3RhdGUiLCJXZWJTb2NrZXQiLCJPUEVOIiwic2VuZCIsInN0cmluZ2lmeSIsInR5cGUiLCJlcnJvciIsInJvb21Db2RlIiwicHJlc3NlZCIsImxvY2F0aW9uIiwiaG9zdG5hbWUiLCJvbm9wZW4iLCJvbm1lc3NhZ2UiLCJ1cGRhdGVHYW1lU3RhdGUiLCJhbGVydCIsIm1lc3NhZ2UiLCJvbmNsb3NlIiwib25lcnJvciIsImZwc0NvdW50ZXIiLCJ0b3AiLCJsZWZ0IiwiYm9keSIsImZwcyIsImdhbWVDYW52YXMiLCJnYW1lQ2FudmFzQ3R4IiwiZ2V0Q29udGV4dCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImZyYW1lQ291bnQiLCJsYXN0VGltZSIsInBlcmZvcm1hbmNlIiwibm93IiwiaW5pdGlhbGl6ZWQiLCJzbmFrZUhlYWRzIiwibmV3SGVhZERhdGEiLCJsYXN0U2VnbWVudCIsImVuZFBvcyIsInNuYWtlVG9VcGRhdGUiLCJpc05ld1RoaXNUaWNrIiwic2VnbWVudFR5cGUiLCJoZWFkRGF0YSIsInBvcyIsImN1cnJlbnRUaW1lIiwidGltZURpZmYiLCJyb3VuZCIsImNhbGN1bGF0ZUZQUyIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInByZWNpc2lvbiIsIkFic3RyYWN0VmVjdG9yIiwiY3RvciIsInByb3RvdHlwZSIsInNldEF4ZXMiLCJnZXRYIiwic2V0WCIsImdldFkiLCJzZXRZIiwidG9BcnJheSIsInRvT2JqZWN0IiwidmVjIiwic3VidHJhY3QiLCJlcXVhbHMiLCJtdWx0aXBseUJ5VmVjdG9yIiwibXVsViIsImRpdmlkZUJ5VmVjdG9yIiwiZGl2ViIsInYiLCJuIiwibXVsUyIsImRpdmlkZUJ5U2NhbGFyIiwiZGl2UyIsIm5vcm1hbGlzZSIsIm1hZ25pdHVkZSIsIm5vcm1hbGl6ZSIsInVuaXQiLCJsZW5ndGhTcSIsImRvdCIsImNyb3NzIiwicmV2ZXJzZSIsImFicyIsInplcm8iLCJkaXN0YW5jZSIsInJvdGF0ZSIsInJhZHMiLCJveCIsIm95IiwiZXh0ZW5kU3RhdGljcyIsIl9fZXh0ZW5kcyIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJkIiwiaGFzT3duUHJvcGVydHkiLCJfXyIsImNvbnN0cnVjdG9yIiwiY3JlYXRlIiwiQXJyYXlWZWN0b3IiLCJfc3VwZXIiLCJfdGhpcyIsImNhbGwiLCJheGVzIiwiZ2V0Iiwic2V0IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIkZsb2F0MzJWZWN0b3IiLCJGbG9hdDMyQXJyYXkiLCJfX2V4cG9ydCIsIm0iLCJfeCIsIl95IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkZWZpbml0aW9uIiwibyIsIm9iaiIsInByb3AiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyJdLCJzb3VyY2VSb290IjoiIn0=
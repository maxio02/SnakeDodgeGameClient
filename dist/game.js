/*! For license information please see game.js.LICENSE.txt */
(()=>{"use strict";var t={"./src/ArcSegment.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>c});var o,r=n("./src/Drawer.ts"),i=n("./node_modules/vector2d/src/Vec2D.js"),s=n("./src/Segment.ts"),a=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const c=function(t){function e(e,n,o,r,i,s){var a=t.call(this)||this;return a.center=e,a.radius=n,a.startAngle=o,a.endAngle=r,a.counterClockwise=i,a.isCollidable=s,a}return a(e,t),e.prototype.draw=function(t,e){var n=t.canvas.width/2e3,o=t.canvas.height/2e3;t.lineCap="round",t.strokeStyle=e,1==this.isCollidable&&(t.beginPath(),t.arc(this.center.x*n,this.center.y*o,this.radius*Math.min(n,o),this.startAngle,this.endAngle,this.counterClockwise),t.stroke(),t.closePath())},e.prototype.drawDebug=function(t,e){var n=this.counterClockwise?-Math.PI:Math.PI;n+=this.endAngle,t.lineCap="round",(0,r.drawDot)(this.center.x,this.center.y,5,"#000000"),(0,r.drawArrow)(t,new i.Vector(this.endPoint.x,this.endPoint.y),new i.Vector(this.endPoint.x+this.radius*Math.cos(n),this.endPoint.y+this.radius*Math.sin(n))),(0,r.drawArc)(this.center.x,this.center.y,this.radius,0,0,!1)},Object.defineProperty(e.prototype,"endPoint",{get:function(){return new i.Vector(this.center.x+this.radius*Math.cos(this.endAngle),this.center.y+this.radius*Math.sin(this.endAngle))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"penpendicularEndAngle",{get:function(){return this.isCounterClockwise?this.endAngle-Math.PI/2:this.endAngle+Math.PI/2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"penpendicularStartAngle",{get:function(){return this.isCounterClockwise?this.startAngle-Math.PI/2:this.startAngle+Math.PI/2},enumerable:!1,configurable:!0}),e.prototype.isCounterClockwise=function(){return this.counterClockwise},e.prototype.getContinuingSegment=function(t){return new e(this.center.clone().add(t),this.radius,this.endAngle,this.endAngle,this.counterClockwise,this.isCollidable)},e}(s.default)},"./src/Drawer.ts":(t,e,n)=>{n.r(e),n.d(e,{drawArc:()=>a,drawArrow:()=>c,drawDot:()=>s,drawGrid:()=>i});var o=n("./node_modules/vector2d/src/Vec2D.js"),r=n("./src/index.ts");function i(){var t=r.backgroundCanvasCtx.canvas.width/2e3,e=r.backgroundCanvasCtx.canvas.height/2e3;r.backgroundCanvasCtx.clearRect(0,0,r.backgroundCanvas.width,r.backgroundCanvas.height),r.backgroundCanvasCtx.strokeStyle="rgba(0, 0, 0, 0.3)",r.backgroundCanvasCtx.lineWidth=2;for(var n=r.gridSize;n<r.backgroundCanvas.width;n+=r.gridSize*t)r.backgroundCanvasCtx.beginPath(),r.backgroundCanvasCtx.moveTo(n,0),r.backgroundCanvasCtx.lineTo(n,r.backgroundCanvas.height),r.backgroundCanvasCtx.stroke();for(var o=r.gridSize;o<r.backgroundCanvas.height;o+=r.gridSize*e)r.backgroundCanvasCtx.beginPath(),r.backgroundCanvasCtx.moveTo(0,o),r.backgroundCanvasCtx.lineTo(r.backgroundCanvas.width,o),r.backgroundCanvasCtx.stroke()}function s(t,e,n,o){r.backgroundCanvasCtx.beginPath(),r.backgroundCanvasCtx.arc(t,e,n,0,2*Math.PI,!1),r.backgroundCanvasCtx.fillStyle=o,r.backgroundCanvasCtx.fill(),r.backgroundCanvasCtx.closePath()}function a(t,e,n,o,i,s){r.backgroundCanvasCtx.lineCap="round",r.backgroundCanvasCtx.strokeStyle="#3466aa",r.backgroundCanvasCtx.beginPath(),r.backgroundCanvasCtx.arc(t,e,n,0,2*Math.PI,s),r.backgroundCanvasCtx.lineWidth=5,r.backgroundCanvasCtx.stroke(),r.backgroundCanvasCtx.closePath()}function c(t,e,n){if(e.x!=n.x&&e.y!=n.y){var r=Math.atan2(n.y-e.y,n.x-e.x),i=10,s=new o.Vector(n.x,n.y);s.x-=11.5*Math.cos(r),s.y-=11.5*Math.sin(r),t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(s.x,s.y),t.strokeStyle="#bbbbbb",t.lineWidth=10,t.stroke(),t.beginPath(),t.moveTo(s.x,s.y),t.lineTo(s.x-i*Math.cos(r-Math.PI/7),s.y-i*Math.sin(r-Math.PI/7)),t.lineTo(s.x-i*Math.cos(r+Math.PI/7),s.y-i*Math.sin(r+Math.PI/7)),t.lineTo(s.x,s.y),t.lineTo(s.x-i*Math.cos(r-Math.PI/7),s.y-i*Math.sin(r-Math.PI/7)),t.strokeStyle="#bbbbbb",t.lineWidth=10,t.stroke(),t.fillStyle="#bbbbbb",t.fill(),t.closePath()}}},"./src/InputManager.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});var o=n("./src/WebSocketClient/websocket.ts");const r=function(){function t(t,e,n){this.keyMap={},window.addEventListener("keydown",this.onKeyDown.bind(this)),window.addEventListener("keyup",this.onKeyUp.bind(this)),this.snake=t,this.leftKey=e,this.rightKey=n}return t.prototype.onKeyDown=function(t){if(this.snake.isAlive){var e=t.key.toUpperCase();if(e==this.leftKey||e==this.rightKey){if(this.keyMap[this.rightKey]&&e==this.leftKey)this.keyMap[this.rightKey]=!1;else if(this.keyMap[this.leftKey]&&e==this.rightKey)this.keyMap[this.leftKey]=!1;else if(this.keyMap[e])return;this.keyMap[e]=!0,(0,o.sendKeyEventToServer)(e==this.rightKey?1:0,!0)}}},t.prototype.onKeyUp=function(t){if(this.snake.isAlive){var e=t.key.toUpperCase();this.keyMap[e]&&(this.keyMap[e]=!1,(0,o.sendKeyEventToServer)(e==this.rightKey?1:0,!1))}},t.prototype.dispose=function(){window.removeEventListener("keydown",this.onKeyDown.bind(this)),window.removeEventListener("keyup",this.onKeyUp.bind(this))},t}()},"./src/LineSegment.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var o,r=n("./src/Segment.ts"),i=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const s=function(t){function e(e,n,o,r){var i=t.call(this)||this;return i.isCollidable=!0,i.startPoint=e,i.endPoint=n,i.isCollidable=o,i.endAngle=r,i}return i(e,t),e.prototype.draw=function(t,e){var n=t.canvas.width/2e3,o=t.canvas.height/2e3;t.strokeStyle=e,t.lineCap="round",1==this.isCollidable&&(t.beginPath(),t.moveTo(this.startPoint.x*n,this.startPoint.y*o),t.lineTo(this.endPoint.x*n,this.endPoint.y*o),t.stroke(),t.closePath())},e.prototype.calcEndAngle=function(){return Math.atan((this.endPoint.y-this.startPoint.y)/(this.endPoint.x-this.startPoint.x))},Object.defineProperty(e.prototype,"length",{get:function(){return Math.sqrt(Math.pow(this.startPoint.x-this.endPoint.x,2)+Math.pow(this.startPoint.y-this.endPoint.y,2))},enumerable:!1,configurable:!0}),e.prototype.getContinuingSegment=function(t){var n=this.endPoint.clone().add(t);return new e(n,n,this.isCollidable,this.endAngle)},e}(r.default)},"./src/MenuManager/login.ts":(t,e,n)=>{n.r(e),n.d(e,{currentPlayer:()=>c,currentRoom:()=>a,handleReadyState:()=>S,handleRoomAction:()=>P,showErrorAnimation:()=>_,showRoomView:()=>k,switchGameView:()=>j,updateButton:()=>w,updateColorPicker:()=>A,updatePlayerColor:()=>O,updateRoomList:()=>M});var o=n("./src/index.ts"),r=n("./src/ViewModels/Player.ts"),i=n("./src/ViewModels/Room.ts"),s=n("./src/WebSocketClient/websocket.ts"),a=null,c=null,l=document.getElementById("roomCodeInput"),u=document.getElementById("usernameInput"),d=document.getElementById("joinButton"),h=document.getElementById("readyButton"),y=document.getElementById("login-div"),p=document.getElementById("room-div"),f=document.getElementById("game-canvas-container"),g=document.getElementById("color-picker"),m=document.getElementById("room-users-list"),v=document.getElementById("room-code"),b=document.getElementById("player-count"),x=document.getElementById("color-picker-container"),C=document.getElementById("start-progress-bar");function w(){""==u.value.trim()?d.disabled=!0:d.disabled=!1,5==l.value.trim().length?d.textContent="JOIN ROOM":d.textContent="CREATE ROOM"}function P(){var t=u.value;t&&(c=new r.Player(t),"CREATE ROOM"===d.innerText?(0,s.createRoom)(u.value):(0,s.joinRoom)(l.value.toUpperCase(),u.value))}function S(){c.isReady=!c.isReady,(0,s.setPlayerData)(c,a.getCode()),c.isReady?(h.classList.remove("red-button"),h.classList.add("green-button")):(h.classList.add("red-button"),h.classList.remove("green-button"))}function k(t){var e=JSON.parse(t.toString());a=new i.Room(e.room.code,e.room.host,e.room.players,e.room.maxSize),c.username==a.getHost().username&&document.getElementById("startButton").classList.remove("display-none"),x.style.backgroundColor=c.color,g.value=c.color,document.getElementById("color-label").style.color=E(g.value,"#FFFFFF","#000000"),y.classList.add("display-none"),p.classList.add("display-flex"),l.value=a.getCode(),v.innerHTML=a.getCode(),(0,s.setPlayerData)(c,a.getCode()),M(t)}function M(t){var e,n,o=JSON.parse(t.toString());a.setPlayers(o.room.players),a.setHost(o.room.host),a.setMaxSize(o.room.maxSize),b.innerHTML="".concat(Object.keys(a.getPlayers()).length,"/").concat(a.getMaxSize()),m.innerHTML="",Object.values(a.getPlayers()).forEach((function(t){var e=document.createElement("li");e.textContent=t.username+"",t.username==a.getHost().username?e.insertAdjacentHTML("afterbegin",'<i class="fa-solid fa-crown" style="color: '.concat(t.color,';"></i>')):e.insertAdjacentHTML("afterbegin",'<i class="fa-solid fa-circle" style="color: '.concat(t.color,'; margin-left: 4px"></i>')),t.isReady?e.insertAdjacentHTML("beforeend",' <i class="fa-solid fa-circle" style="color: #37cb48;"></i>'):e.insertAdjacentHTML("beforeend",' <i class="fa-solid fa-circle" style="color: #cb3737;"></i>'),m.appendChild(e)})),c.username==a.getHost().username&&document.getElementById("startButton").classList.remove("display-none"),e=Object.values(a.getPlayers()).filter((function(t){return t.isReady})).length,0!=(n=a.getMaxSize())&&(C.style.width=Math.floor(e/n*100)+"%")}function _(){d.classList.add("red-button"),d.classList.add("wiggle"),setTimeout((function(){d.classList.remove("red-button"),d.classList.remove("wiggle")}),600)}function A(){x.style.backgroundColor=g.value}function O(){c.color=g.value,document.getElementById("color-label").style.color=E(g.value,"#FFFFFF","#000000"),(0,s.setPlayerData)(c,a.getCode())}function E(t,e,n){var o="#"===t.charAt(0)?t.substring(1,7):t,r=[parseInt(o.substring(0,2),16)/255,parseInt(o.substring(2,4),16)/255,parseInt(o.substring(4,6),16)/255].map((function(t){return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}));return.2126*r[0]+.7152*r[1]+.0722*r[2]>.4?n:e}function j(t){switch(t.state){case 0:a.setGameState(0),y.classList.add("display-none"),p.classList.add("display-none"),p.classList.remove("display-flex"),f.classList.remove("display-none"),f.classList.add("display-flex"),(0,o.updateCanvasSize)();break;case 1:a.setGameState(1),y.classList.add("display-none"),p.classList.add("display-flex"),f.classList.add("display-none")}}window.onload=function(){w()},window.updateButton=w,window.handleRoomAction=P,window.handleReadyState=S,window.updateColorPicker=A,window.updatePlayerColor=O,window.startGame=function(){c.username==a.getHost().username&&(0,s.sendStartCommand)(a.getCode())}},"./src/ParticleSystem/Emitter.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var o=n("./src/ParticleSystem/Particle.ts"),r=n("./src/ParticleSystem/ParticleSystemUtils.ts"),i=function(){return i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},i.apply(this,arguments)};const s=function(){function t(t,e,n,o,r,i,s,a,c,l,u){void 0===r&&(r="circle"),void 0===a&&(a=!0),void 0===c&&(c=!0),void 0===u&&(u=0),this.aliveParticles=[],this.ticks=0,this.position=t,this.emitTime=e,this.size=n,this.speed=o,this.shape=r,this.color=i,this.canvasCtx=s,this.fadeColor=a,this.fadeSize=c,this.particleMaxAge=l,this.emitTimeMillis=u}return t.prototype.tick=function(t){this.emitTimeMillis+this.particleMaxAge<0||(this.emitTimeMillis-=t,this.ticks%this.emitTime==0&&this.emitTimeMillis>0&&(this.aliveParticles.push(new o.default(this.position.clone(),(0,r.getRandomDirection)(),this.size,this.speed,this.shape,i({},this.color),this.canvasCtx,this.particleMaxAge,this.fadeColor,this.fadeSize)),this.aliveParticles.push(new o.default(this.position.clone(),(0,r.getRandomDirection)(),this.size,this.speed,this.shape,i({},this.color),this.canvasCtx,this.particleMaxAge,this.fadeColor,this.fadeSize)),this.aliveParticles.push(new o.default(this.position.clone(),(0,r.getRandomDirection)(),this.size,this.speed,this.shape,i({},this.color),this.canvasCtx,this.particleMaxAge,this.fadeColor,this.fadeSize))),this.aliveParticles.forEach((function(e){e.tick(t)})),this.aliveParticles=this.aliveParticles.filter((function(t){return t.age>0})),this.ticks++)},t.prototype.draw=function(){this.aliveParticles.forEach((function(t){t.draw()}))},t}()},"./src/ParticleSystem/Particle.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>o});const o=function(){function t(t,e,n,o,r,i,s,a,c,l){void 0===r&&(r="circle"),this.position=t,this.velocity=e,this.size=n,this.speed=o,this.shape=r,this.color=i,this.canvasCtx=s,this.fadeColor=c,this.fadeSize=l,this.age=a,this.colorFadeAmount=this.color.a/this.age,this.sizeFadeAmount=this.size/this.age}return t.prototype.tick=function(t){this.position.add(this.velocity.clone().multiplyByScalar(t*this.speed)),this.fadeColor&&(this.color.a-=this.colorFadeAmount),this.fadeSize&&(this.size-=this.sizeFadeAmount),this.age--},t.prototype.draw=function(){switch(this.canvasCtx.moveTo(this.position.x,this.position.y),this.canvasCtx.fillStyle="rgba(".concat(this.color.r,",").concat(this.color.g,", ").concat(this.color.b,", ").concat(this.color.a,")"),this.canvasCtx.beginPath(),this.shape){case"circle":this.canvasCtx.arc(this.position.x,this.position.y,this.size,0,2*Math.PI),this.canvasCtx.fill();break;case"square":this.canvasCtx.fillRect(this.position.x-this.size,this.position.y-this.size,2*this.size,2*this.size)}this.canvasCtx.closePath()},t}()},"./src/ParticleSystem/ParticleSystemUtils.ts":(t,e,n)=>{n.r(e),n.d(e,{getRandomDirection:()=>r,hexToRgb:()=>i});var o=n("./node_modules/vector2d/src/Vec2D.js");function r(){return new o.Vector(2*Math.random()-1,2*Math.random()-1)}function i(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}},"./src/Segment.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>o});const o=function(){}},"./src/Snake.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var o=n("./src/ParticleSystem/Emitter.ts"),r=n("./src/ParticleSystem/ParticleSystemUtils.ts"),i=function(){return i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},i.apply(this,arguments)};const s=function(){function t(t,e,n){this.segments=[],this.isAlive=!0,this.turnRadius=60,this.emitter=null,this.addSegment(t),this.color=e,this.canvasCtx=n}return t.prototype.addSegment=function(t){this.segments.push(t)},Object.defineProperty(t.prototype,"head",{get:function(){return this.segments.slice(-1).pop()},enumerable:!1,configurable:!0}),t.prototype.draw=function(){var t=this,e=this.canvasCtx.canvas.width/2e3,n=this.canvasCtx.canvas.height/2e3;this.canvasCtx.lineWidth=12*Math.min(e,n),this.segments.forEach((function(o,r){o.draw(t.canvasCtx,t.color),t.head==o&&(t.canvasCtx.beginPath(),t.canvasCtx.arc(o.endPoint.x*e,o.endPoint.y*n,.5*Math.min(e,n),0,2*Math.PI),t.canvasCtx.stroke(),t.canvasCtx.closePath())}))},t.prototype.kill=function(){console.log("SNAKE DEAD"),this.isAlive=!1,this.emitter=new o.default(this.head.endPoint,1,7,4,"circle",i(i({},(0,r.hexToRgb)(this.color)),{a:1}),this.canvasCtx,!0,!0,70,4)},t.prototype.updateEmitter=function(t){this.emitter&&(this.emitter.tick(t),this.emitter.draw())},t}()},"./src/ViewModels/Player.ts":(t,e,n)=>{n.r(e),n.d(e,{Player:()=>o});var o=function(){function t(t,e){void 0===e&&(e=!1),this.username=t,this.isReady=e,this.color="#000000".replace(/0/g,(function(){return(~~(16*Math.random())).toString(16)}))}return t.prototype.toJSON=function(){return{username:this.username,isReady:this.isReady,color:this.color}},t}()},"./src/ViewModels/Room.ts":(t,e,n)=>{n.r(e),n.d(e,{Room:()=>o});var o=function(){function t(t,e,n,o){void 0===o&&(o=5),this.players={},this.code=t,this.host=e,this.maxSize=o,null!=n?this.players=n:this.addPlayer(e)}return t.prototype.addPlayer=function(t){return!(Object.keys(this.players).length>=this.maxSize||(this.players[t.username]=t,0))},t.prototype.getCode=function(){return this.code},t.prototype.getPlayers=function(){return this.players},t.prototype.getHost=function(){return this.host},t.prototype.setHost=function(t){this.host=t},t.prototype.setPlayers=function(t){this.players=t},t.prototype.setMaxSize=function(t){this.maxSize=t},t.prototype.getMaxSize=function(){return this.maxSize},t.prototype.setGameState=function(t){this.gameState=t},t.prototype.getGameState=function(){return this.gameState},t}()},"./src/WebSocketClient/websocket.ts":(t,e,n)=>{n.r(e),n.d(e,{createRoom:()=>s,joinRoom:()=>a,sendKeyEventToServer:()=>l,sendStartCommand:()=>u,setPlayerData:()=>c});var o,r=n("./src/index.ts"),i=n("./src/MenuManager/login.ts");function s(t){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"CREATE_ROOM",username:t})):console.error("WebSocket connection is not open")}function a(t,e){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"JOIN_ROOM",roomCode:t,username:e})):console.error("WebSocket connection is not open")}function c(t,e){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"PLAYER_DATA",player:t,roomCode:e})):console.error("WebSocket connection is not open")}function l(t,e){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"KEY_EVENT",roomCode:i.currentRoom.getCode(),username:i.currentPlayer.username,key:t,pressed:e})):console.error("WebSocket connection is not open")}function u(t){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"BEGIN_GAME",roomCode:t})):console.error("WebSocket connection is not open")}(o=new WebSocket("ws://".concat(window.location.hostname,":8080"))).onopen=function(){console.log("WebSocket connection established")},o.onmessage=function(t){var e=JSON.parse(t.data);switch(e.type){case"JOINED_ROOM":(0,i.showRoomView)(t.data);break;case"ROOM_DOES_NOT_EXIST":(0,i.showErrorAnimation)();break;case"ROOM_DATA":(0,i.updateRoomList)(t.data);break;case"GAME_STATE":(0,i.switchGameView)(e);break;case"GAMEPLAY_DATA":(0,r.updateGameState)(e);break;case"ERROR":alert("Error: ".concat(e.message))}},o.onclose=function(){console.log("WebSocket connection closed")},o.onerror=function(t){console.error("WebSocket error:",t)}},"./src/index.ts":(t,e,n)=>{n.r(e),n.d(e,{backgroundCanvas:()=>p,backgroundCanvasCtx:()=>f,fps:()=>d,gameCanvas:()=>h,gameCanvasCtx:()=>y,gridSize:()=>g,updateCanvasSize:()=>m,updateGameState:()=>C});var o=n("./node_modules/vector2d/src/Vec2D.js"),r=n("./src/ArcSegment.ts"),i=n("./src/Drawer.ts"),s=n("./src/InputManager.ts"),a=n("./src/LineSegment.ts"),c=n("./src/Snake.ts"),l=n("./src/MenuManager/login.ts"),u=document.createElement("div");u.style.position="absolute",u.style.top="10px",u.style.left="10px",u.style.color="black",document.body.appendChild(u);var d=60,h=document.getElementById("game-canvas"),y=h.getContext("2d"),p=document.getElementById("background-canvas"),f=p.getContext("2d");p.width=p.getBoundingClientRect().width,p.height=p.getBoundingClientRect().height,h.width=h.getBoundingClientRect().width,h.height=h.getBoundingClientRect().height;var g=60;function m(){h.width=h.getBoundingClientRect().width,h.height=h.getBoundingClientRect().height,p.width=p.getBoundingClientRect().width,p.height=p.getBoundingClientRect().height,(0,i.drawGrid)()}var v=0,b=performance.now()/10;window.addEventListener("resize",m),(0,i.drawGrid)();var x=!1;function C(t){x?t.snakeHeads.forEach((function(t){var e=t.lastSegment,n=t.username,i=e.endPoint,s=l.currentRoom.getPlayers()[n].snake;if(e.isNewThisTick){if("LineSegment"==t.segmentType){var c=e.startPoint;s.addSegment(new a.default(new o.Vector(c.x,c.y),new o.Vector(i.x,i.y),e.isCollidable,e.endAngle))}else if("ArcSegment"==t.segmentType){var u=e.center;s.addSegment(new r.default(new o.Vector(u.x,u.y),e.radius,e.startAngle,e.endAngle,e.counterClockwise,e.isCollidable))}}else"LineSegment"==t.segmentType?(c=e.startPoint,s.segments[s.segments.length-1]=new a.default(new o.Vector(c.x,c.y),new o.Vector(i.x,i.y),e.isCollidable,e.endAngle)):"ArcSegment"==t.segmentType&&(u=e.center,s.segments[s.segments.length-1]=new r.default(new o.Vector(u.x,u.y),e.radius,e.startAngle,e.endAngle,e.counterClockwise,e.isCollidable))})):(t.snakeHeads.forEach((function(t){var e=t.lastSegment,n=t.username,r=e.endPoint;l.currentRoom.getPlayers()[n].snake=new c.default(new a.default(new o.Vector(r.x,r.y),new o.Vector(r.x,r.y),e.isCollidable,e.endAngle),l.currentRoom.getPlayers()[n].color,y)})),new s.default(l.currentRoom.getPlayers()[l.currentPlayer.username].snake,"A","D"),x=!0),++v%10==0&&(d=function(){var t=performance.now()/10,e=t-b,n=Math.round(1e3/e);return b=t,n}(),u.innerText="FPS: ".concat(d)),y.clearRect(0,0,h.width,h.height),Object.values(l.currentRoom.getPlayers()).forEach((function(t){t.snake.draw(),t.snake.updateEmitter((performance.now()/10-b)/10)}))}},"./node_modules/vector2d/src/AbstractVector.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10],o=function(){function t(t){this.ctor=t}return t.prototype.setAxes=function(t,e){return this.x=t,this.y=e,this},t.prototype.getX=function(){return this.x},t.prototype.setX=function(t){return this.x=t,this},t.prototype.getY=function(){return this.y},t.prototype.setY=function(t){return this.y=t,this},t.prototype.toString=function(t){return void 0===t&&(t=!1),t?"("+Math.round(this.x)+", "+Math.round(this.y)+")":"("+this.x+", "+this.y+")"},t.prototype.toArray=function(){return[this.x,this.y]},t.prototype.toObject=function(){return{x:this.x,y:this.y}},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.multiplyByVector=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.mulV=function(t){return this.multiplyByVector(t)},t.prototype.divideByVector=function(t){return this.x/=t.x,this.y/=t.y,this},t.prototype.divV=function(t){return this.divideByVector(t)},t.prototype.multiplyByScalar=function(t){return this.x*=t,this.y*=t,this},t.prototype.mulS=function(t){return this.multiplyByScalar(t)},t.prototype.divideByScalar=function(t){return this.x/=t,this.y/=t,this},t.prototype.divS=function(t){return this.divideByScalar(t)},t.prototype.normalise=function(){return this.divideByScalar(this.magnitude())},t.prototype.normalize=function(){return this.normalise()},t.prototype.unit=function(){return this.normalise()},t.prototype.magnitude=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.length=function(){return this.magnitude()},t.prototype.lengthSq=function(){var t=this.x,e=this.y;return t*t+e*e},t.prototype.dot=function(t){return t.x*this.x+t.y*this.y},t.prototype.cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this},t.prototype.zero=function(){return this.x=this.y=0,this},t.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),o=this.x,r=this.y;return this.x=o*e-r*n,this.y=o*n+r*e,this},t.prototype.round=function(t){void 0===t&&(t=2);var e=n[t];return this.x=(.5+this.x*e<<0)/e,this.y=(.5+this.y*e<<0)/e,this},t.prototype.clone=function(){return new this.ctor(this.x,this.y)},t}();e.AbstractVector=o},"./node_modules/vector2d/src/ArrayVector.js":function(t,e,n){var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(n,o){var r=t.call(this,e)||this;return r.axes=[n,o],r.ctor=e,r}return r(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.axes[0]},set:function(t){this.axes[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.axes[1]},set:function(t){this.axes[1]=t},enumerable:!0,configurable:!0}),e}(n("./node_modules/vector2d/src/AbstractVector.js").AbstractVector);e.ArrayVector=i},"./node_modules/vector2d/src/Float32Vector.js":function(t,e,n){var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(n,o){var r=t.call(this,e)||this;return r.axes=new Float32Array(2),r.axes[0]=n,r.axes[1]=o,r}return r(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.axes[0]},set:function(t){this.axes[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.axes[1]},set:function(t){this.axes[1]=t},enumerable:!0,configurable:!0}),e}(n("./node_modules/vector2d/src/AbstractVector.js").AbstractVector);e.Float32Vector=i},"./node_modules/vector2d/src/Vec2D.js":(t,e,n)=>{function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),o(n("./node_modules/vector2d/src/AbstractVector.js")),o(n("./node_modules/vector2d/src/ArrayVector.js")),o(n("./node_modules/vector2d/src/Float32Vector.js")),o(n("./node_modules/vector2d/src/Vector.js"))},"./node_modules/vector2d/src/Vector.js":function(t,e,n){var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(n,o){var r=t.call(this,e)||this;return r._x=n,r._y=o,r}return r(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!0,configurable:!0}),e}(n("./node_modules/vector2d/src/AbstractVector.js").AbstractVector);e.Vector=i}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n("./src/index.ts")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxlQUFlQyxFQUFTNEUsT0FBT0MsWUFBYSxDQUFFN1AsTUFBTyxXQUU3RG1DLE9BQU80SSxlQUFlQyxFQUFTLGFBQWMsQ0FBRWhMLE9BQU8sR0FBTyxFQ0ZwQ2lQLEVBQW9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9BcmNTZWdtZW50LnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvRHJhd2VyLnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvSW5wdXRNYW5hZ2VyLnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvTGluZVNlZ21lbnQudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9NZW51TWFuYWdlci9sb2dpbi50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL1BhcnRpY2xlU3lzdGVtL0VtaXR0ZXIudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9QYXJ0aWNsZVN5c3RlbS9QYXJ0aWNsZS50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL1BhcnRpY2xlU3lzdGVtL1BhcnRpY2xlU3lzdGVtVXRpbHMudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9TZWdtZW50LnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvU25ha2UudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9WaWV3TW9kZWxzL1BsYXllci50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL1ZpZXdNb2RlbHMvUm9vbS50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL1dlYlNvY2tldENsaWVudC93ZWJzb2NrZXQudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vbm9kZV9tb2R1bGVzL3ZlY3RvcjJkL3NyYy9BYnN0cmFjdFZlY3Rvci5qcyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vbm9kZV9tb2R1bGVzL3ZlY3RvcjJkL3NyYy9BcnJheVZlY3Rvci5qcyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vbm9kZV9tb2R1bGVzL3ZlY3RvcjJkL3NyYy9GbG9hdDMyVmVjdG9yLmpzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9ub2RlX21vZHVsZXMvdmVjdG9yMmQvc3JjL1ZlYzJELmpzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9ub2RlX21vZHVsZXMvdmVjdG9yMmQvc3JjL1ZlY3Rvci5qcyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NuYWtlX2dhbWUvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3NuYWtlX2dhbWUvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkcmF3QXJjLCBkcmF3QXJyb3csIGRyYXdEb3QgfSBmcm9tIFwiLi9EcmF3ZXJcIjtcclxuaW1wb3J0ICogYXMgVmVjMkQgZnJvbSAndmVjdG9yMmQnO1xyXG5pbXBvcnQgU2VnbWVudCBmcm9tIFwiLi9TZWdtZW50XCI7XHJcbmltcG9ydCB7IGdhbWVDYW52YXNDdHggfSBmcm9tIFwiLi9pbmRleFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXJjU2VnbWVudCBleHRlbmRzIFNlZ21lbnQge1xyXG5cclxuXHJcbiAgICBwdWJsaWMgY2VudGVyOiBWZWMyRC5WZWN0b3I7XHJcbiAgICBwdWJsaWMgcmFkaXVzOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgc3RhcnRBbmdsZTogbnVtYmVyO1xyXG4gICAgcHVibGljIGVuZEFuZ2xlOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGNvdW50ZXJDbG9ja3dpc2U6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgaXNDb2xsaWRhYmxlOiBib29sZWFuO1xyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihjZW50ZXI6IFZlYzJELlZlY3RvciwgcmFkaXVzOiBudW1iZXIsIHN0YXJ0QW5nbGU6IG51bWJlciwgZW5kQW5nbGU6IG51bWJlciwgY291bnRlckNsb2Nrd2lzZTogYm9vbGVhbiwgaXNDb2xsaWRhYmxlOiBib29sZWFuKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmNlbnRlciA9IGNlbnRlcjtcclxuICAgICAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cztcclxuICAgICAgICB0aGlzLnN0YXJ0QW5nbGUgPSBzdGFydEFuZ2xlO1xyXG4gICAgICAgIHRoaXMuZW5kQW5nbGUgPSBlbmRBbmdsZTtcclxuICAgICAgICB0aGlzLmNvdW50ZXJDbG9ja3dpc2UgPSBjb3VudGVyQ2xvY2t3aXNlO1xyXG4gICAgICAgIHRoaXMuaXNDb2xsaWRhYmxlID0gaXNDb2xsaWRhYmxlO1xyXG4gICAgICB9XHJcblxyXG5cclxuICAgIGRyYXcoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBjb2xvcjogc3RyaW5nKTogdm9pZCB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNjYWxlWCA9IGNvbnRleHQuY2FudmFzLndpZHRoIC8gMjAwMDtcclxuICAgICAgICBjb25zdCBzY2FsZVkgPSBjb250ZXh0LmNhbnZhcy5oZWlnaHQgLyAyMDAwO1xyXG5cclxuICAgICAgICBcclxuICAgICAgICBjb250ZXh0LmxpbmVDYXAgPSBcInJvdW5kXCI7XHJcbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGNvbG9yO1xyXG4gICAgICAgIGlmICh0aGlzLmlzQ29sbGlkYWJsZSA9PSB0cnVlKXtcclxuICAgICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgY29udGV4dC5hcmModGhpcy5jZW50ZXIueCAqIHNjYWxlWCwgdGhpcy5jZW50ZXIueSAqIHNjYWxlWSwgdGhpcy5yYWRpdXMgKiBNYXRoLm1pbihzY2FsZVgsIHNjYWxlWSksIHRoaXMuc3RhcnRBbmdsZSwgdGhpcy5lbmRBbmdsZSwgdGhpcy5jb3VudGVyQ2xvY2t3aXNlKTtcclxuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcclxuICAgICAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0RlYnVnKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgY29sb3I6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIC8vIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSAnI2ZmMDBmZmZmJ1xyXG4gICAgICAgIGxldCB0YW5nZW50X2FuZ2xlID0gdGhpcy5jb3VudGVyQ2xvY2t3aXNlID8tIE1hdGguUEkgIDogTWF0aC5QSTtcclxuXHJcbiAgICAgICAgdGFuZ2VudF9hbmdsZSArPSB0aGlzLmVuZEFuZ2xlO1xyXG4gICAgICAgIGNvbnRleHQubGluZUNhcCA9IFwicm91bmRcIjtcclxuICAgICAgICBkcmF3RG90KHRoaXMuY2VudGVyLngsIHRoaXMuY2VudGVyLnksIDUsICcjMDAwMDAwJyk7XHJcbiAgICAgICAgZHJhd0Fycm93KGNvbnRleHQsbmV3IFZlYzJELlZlY3Rvcih0aGlzLmVuZFBvaW50LngsdGhpcy5lbmRQb2ludC55KSwgbmV3IFZlYzJELlZlY3Rvcih0aGlzLmVuZFBvaW50LnggKyB0aGlzLnJhZGl1cyAqIE1hdGguY29zKHRhbmdlbnRfYW5nbGUpLHRoaXMuZW5kUG9pbnQueSArIHRoaXMucmFkaXVzICogTWF0aC5zaW4odGFuZ2VudF9hbmdsZSkpKTtcclxuICAgICAgICBkcmF3QXJjKHRoaXMuY2VudGVyLngsIHRoaXMuY2VudGVyLnksIHRoaXMucmFkaXVzLCAwLCAwLCBmYWxzZSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldCBlbmRQb2ludCgpOiBWZWMyRC5WZWN0b3Ige1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMkQuVmVjdG9yKFxyXG4gICAgICAgIHRoaXMuY2VudGVyLnggKyB0aGlzLnJhZGl1cyAqIE1hdGguY29zKHRoaXMuZW5kQW5nbGUpLFxyXG4gICAgICAgIHRoaXMuY2VudGVyLnkgKyB0aGlzLnJhZGl1cyAqIE1hdGguc2luKHRoaXMuZW5kQW5nbGUpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcGVucGVuZGljdWxhckVuZEFuZ2xlKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNDb3VudGVyQ2xvY2t3aXNlPyB0aGlzLmVuZEFuZ2xlIC0gTWF0aC5QSSAvMiA6IHRoaXMuZW5kQW5nbGUgKyBNYXRoLlBJIC8gMjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcGVucGVuZGljdWxhclN0YXJ0QW5nbGUoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0NvdW50ZXJDbG9ja3dpc2U/IHRoaXMuc3RhcnRBbmdsZS0gTWF0aC5QSSAvMiA6IHRoaXMuc3RhcnRBbmdsZSArIE1hdGguUEkgLyAyO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQ291bnRlckNsb2Nrd2lzZSgpOiBib29sZWFue1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvdW50ZXJDbG9ja3dpc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29udGludWluZ1NlZ21lbnQodHJhbnNmb3JtOiBWZWMyRC5WZWN0b3IpOiBTZWdtZW50IHtcclxuICAgICAgICByZXR1cm4gbmV3IEFyY1NlZ21lbnQodGhpcy5jZW50ZXIuY2xvbmUoKS5hZGQodHJhbnNmb3JtKSBhcyBWZWMyRC5WZWN0b3IsIHRoaXMucmFkaXVzLCB0aGlzLmVuZEFuZ2xlLCB0aGlzLmVuZEFuZ2xlLCB0aGlzLmNvdW50ZXJDbG9ja3dpc2UsIHRoaXMuaXNDb2xsaWRhYmxlKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCJ2ZWN0b3IyZFwiO1xuaW1wb3J0IHsgYmFja2dyb3VuZENhbnZhcywgYmFja2dyb3VuZENhbnZhc0N0eCwgZ3JpZFNpemUgfSBmcm9tIFwiLi9pbmRleFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gZHJhd0dyaWQoKSB7XG5cbiAgICBjb25zdCBzY2FsZVggPSBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmNhbnZhcy53aWR0aCAvIDIwMDA7XG4gICAgY29uc3Qgc2NhbGVZID0gYmFja2dyb3VuZENhbnZhc0N0eC5jYW52YXMuaGVpZ2h0IC8gMjAwMDtcblxuXG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5jbGVhclJlY3QoMCwgMCwgYmFja2dyb3VuZENhbnZhcy53aWR0aCwgYmFja2dyb3VuZENhbnZhcy5oZWlnaHQpO1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgwLCAwLCAwLCAwLjMpJztcbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmxpbmVXaWR0aCA9IDI7XG4gICAgZm9yICh2YXIgeCA9IGdyaWRTaXplOyB4IDwgYmFja2dyb3VuZENhbnZhcy53aWR0aDsgeCArPSBncmlkU2l6ZSAqIHNjYWxlWCkge1xuICAgICAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4Lm1vdmVUbyh4ICwgMCk7XG4gICAgICAgIGJhY2tncm91bmRDYW52YXNDdHgubGluZVRvKHggLCBiYWNrZ3JvdW5kQ2FudmFzLmhlaWdodCk7XG4gICAgICAgIGJhY2tncm91bmRDYW52YXNDdHguc3Ryb2tlKCk7XG4gICAgfVxuICAgIGZvciAodmFyIHkgPSBncmlkU2l6ZTsgeSA8IGJhY2tncm91bmRDYW52YXMuaGVpZ2h0OyB5ICs9IGdyaWRTaXplICogc2NhbGVZKSB7XG4gICAgICAgIGJhY2tncm91bmRDYW52YXNDdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGJhY2tncm91bmRDYW52YXNDdHgubW92ZVRvKDAsIHkpO1xuICAgICAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmxpbmVUbyhiYWNrZ3JvdW5kQ2FudmFzLndpZHRoLCB5KTtcbiAgICAgICAgYmFja2dyb3VuZENhbnZhc0N0eC5zdHJva2UoKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3RG90KGRvdFg6IG51bWJlciwgZG90WTogbnVtYmVyLCBkb3RTaXplOiBudW1iZXIsIGNvbG9yOiBzdHJpbmcpIHtcbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmJlZ2luUGF0aCgpO1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguYXJjKFxuICAgICAgICBkb3RYLFxuICAgICAgICBkb3RZLFxuICAgICAgICBkb3RTaXplLFxuICAgICAgICAwLFxuICAgICAgICAyICogTWF0aC5QSSxcbiAgICAgICAgZmFsc2VcbiAgICApO1xuXG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmZpbGwoKTtcblxuICAgIGJhY2tncm91bmRDYW52YXNDdHguY2xvc2VQYXRoKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3QXJjKGRvdFg6IG51bWJlciwgZG90WTogbnVtYmVyLCByYWRpdXM6IG51bWJlciwgc3RhcnRBbmdsZTogbnVtYmVyLCBlbmRBbmdsZTogbnVtYmVyLCBjb3VudGVyQ2xvY2t3aXNlOiBib29sZWFuKSB7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5saW5lQ2FwID0gXCJyb3VuZFwiO1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguc3Ryb2tlU3R5bGUgPSBcIiMzNDY2YWFcIjtcbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmJlZ2luUGF0aCgpO1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguYXJjKGRvdFgsIGRvdFksIHJhZGl1cywgMCwgMiAqIE1hdGguUEksIGNvdW50ZXJDbG9ja3dpc2UpO1xuXG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5saW5lV2lkdGggPSA1O1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguc3Ryb2tlKCk7XG5cbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmNsb3NlUGF0aCgpO1xufVxuXG5cblxuXG5leHBvcnQgZnVuY3Rpb24gZHJhd0Fycm93KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBmcm9tOiBWZWN0b3IsIHRvOiBWZWN0b3IpIHtcbiAgICBpZiAoZnJvbS54ICE9IHRvLnggJiYgZnJvbS55ICE9IHRvLnkpIHtcbiAgICAgICAgdmFyIGFuZ2xlID0gTWF0aC5hdGFuMih0by55IC0gZnJvbS55LCB0by54IC0gZnJvbS54KTtcbiAgICAgICAgY29uc3Qgd2lkdGggPSAxMDtcbiAgICAgICAgdmFyIGhlYWRMZW5ndGggPSAxMDtcbiAgICAgICAgdmFyIG5ld190byA9IG5ldyBWZWN0b3IodG8ueCwgdG8ueSk7XG4gICAgICAgIC8vIFRoaXMgbWFrZXMgaXQgc28gdGhlIGVuZCBvZiB0aGUgYXJyb3cgaGVhZCBpcyBsb2NhdGVkIGF0IHRveCwgdG95LCBkb24ndCBhc2sgd2hlcmUgMS4xNSBjb21lcyBmcm9tXG4gICAgICAgIG5ld190by54IC09IE1hdGguY29zKGFuZ2xlKSAqICgod2lkdGggKiAxLjE1KSk7XG4gICAgICAgIG5ld190by55IC09IE1hdGguc2luKGFuZ2xlKSAqICgod2lkdGggKiAxLjE1KSk7XG5cblxuXG4gICAgICAgIC8vc3RhcnRpbmcgcGF0aCBvZiB0aGUgYXJyb3cgZnJvbSB0aGUgc3RhcnQgc3F1YXJlIHRvIHRoZSBlbmQgc3F1YXJlIGFuZCBkcmF3aW5nIHRoZSBzdHJva2VcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBjdHgubW92ZVRvKGZyb20ueCwgZnJvbS55KTtcbiAgICAgICAgY3R4LmxpbmVUbyhuZXdfdG8ueCwgbmV3X3RvLnkpO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBcIiNiYmJiYmJcIjtcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IHdpZHRoO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG5cbiAgICAgICAgLy9zdGFydGluZyBhIG5ldyBwYXRoIGZyb20gdGhlIGhlYWQgb2YgdGhlIGFycm93IHRvIG9uZSBvZiB0aGUgc2lkZXMgb2YgdGhlIHBvaW50XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4Lm1vdmVUbyhuZXdfdG8ueCwgbmV3X3RvLnkpO1xuICAgICAgICBjdHgubGluZVRvKG5ld190by54IC0gaGVhZExlbmd0aCAqIE1hdGguY29zKGFuZ2xlIC0gTWF0aC5QSSAvIDcpLCBuZXdfdG8ueSAtIGhlYWRMZW5ndGggKiBNYXRoLnNpbihhbmdsZSAtIE1hdGguUEkgLyA3KSk7XG5cbiAgICAgICAgLy9wYXRoIGZyb20gdGhlIHNpZGUgcG9pbnQgb2YgdGhlIGFycm93LCB0byB0aGUgb3RoZXIgc2lkZSBwb2ludFxuICAgICAgICBjdHgubGluZVRvKG5ld190by54IC0gaGVhZExlbmd0aCAqIE1hdGguY29zKGFuZ2xlICsgTWF0aC5QSSAvIDcpLCBuZXdfdG8ueSAtIGhlYWRMZW5ndGggKiBNYXRoLnNpbihhbmdsZSArIE1hdGguUEkgLyA3KSk7XG5cbiAgICAgICAgLy9wYXRoIGZyb20gdGhlIHNpZGUgcG9pbnQgYmFjayB0byB0aGUgdGlwIG9mIHRoZSBhcnJvdywgYW5kIHRoZW4gYWdhaW4gdG8gdGhlIG9wcG9zaXRlIHNpZGUgcG9pbnRcbiAgICAgICAgY3R4LmxpbmVUbyhuZXdfdG8ueCwgbmV3X3RvLnkpO1xuICAgICAgICBjdHgubGluZVRvKG5ld190by54IC0gaGVhZExlbmd0aCAqIE1hdGguY29zKGFuZ2xlIC0gTWF0aC5QSSAvIDcpLCBuZXdfdG8ueSAtIGhlYWRMZW5ndGggKiBNYXRoLnNpbihhbmdsZSAtIE1hdGguUEkgLyA3KSk7XG5cbiAgICAgICAgLy9kcmF3cyB0aGUgcGF0aHMgY3JlYXRlZCBhYm92ZVxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBcIiNiYmJiYmJcIjtcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IHdpZHRoO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBcIiNiYmJiYmJcIjtcbiAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgIH1cbn0iLCJpbXBvcnQgU25ha2UgZnJvbSBcIi4vU25ha2VcIjtcclxuaW1wb3J0IHsgc2VuZEtleUV2ZW50VG9TZXJ2ZXIgfSBmcm9tIFwiLi9XZWJTb2NrZXRDbGllbnQvd2Vic29ja2V0XCI7XHJcblxyXG5leHBvcnQgY29uc3QgZW51bSBEaXJ7XHJcbiAgTEVGVCxcclxuICBSSUdIVFxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIElucHV0TWFuYWdlciB7XHJcbiAgcHJpdmF0ZSBrZXlNYXA6IHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9ID0ge307XHJcbiAgcHJpdmF0ZSBzbmFrZTogU25ha2U7XHJcbiAgcHJpdmF0ZSBsZWZ0S2V5OiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSByaWdodEtleTogc3RyaW5nO1xyXG5cclxuICBjb25zdHJ1Y3RvcihzbmFrZTogU25ha2UsIGxlZnRLZXk6IHN0cmluZywgcmlnaHRLZXk6IHN0cmluZykge1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLm9uS2V5RG93bi5iaW5kKHRoaXMpKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMub25LZXlVcC5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuc25ha2UgPSBzbmFrZTtcclxuICAgIHRoaXMubGVmdEtleSA9IGxlZnRLZXk7XHJcbiAgICB0aGlzLnJpZ2h0S2V5ID0gcmlnaHRLZXk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uS2V5RG93bihldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG4gICAgLy9pZiBzbmFrZSBpcyBkZWFkLCBpZ25vcmUgdGhlIGtleSBwcmVzc2VzXHJcbiAgICBpZighdGhpcy5zbmFrZS5pc0FsaXZlKSByZXR1cm47XHJcblxyXG4gICAgY29uc3Qga2V5ID0gZXZlbnQua2V5LnRvVXBwZXJDYXNlKCk7XHJcbiAgICBcclxuXHJcbiAgICAvL2lnbm9yZSBrZXlzIG5vdCBhc3NpZ25lZCB0byBzZWxmLCB0aGlzIHdvdWxkIHJlc3VsdCBpbiB0aGUga2V5bWFwIGhhdmluZyB1bm5lY2Vzc2FyeSBrZXlzIGFuZCB0cmlnZ2VyaW5nIHRoZSBvbmtleVVwIGV2ZW50c1xyXG4gICAgaWYoa2V5ICE9IHRoaXMubGVmdEtleSAmJiBrZXkgIT0gdGhpcy5yaWdodEtleSl7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvL3N3aXRjaCBvZmYgdGhlIGN1cnJlbnQgZG93biBrZXkgaWYgdGhlIG90aGVyIGRpcmVjdGlvbiBpcyBwcmVzc2VkXHJcbiAgICBpZiAodGhpcy5rZXlNYXBbdGhpcy5yaWdodEtleV0gJiYga2V5ID09IHRoaXMubGVmdEtleSkge1xyXG4gICAgICB0aGlzLmtleU1hcFt0aGlzLnJpZ2h0S2V5XSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodGhpcy5rZXlNYXBbdGhpcy5sZWZ0S2V5XSAmJiBrZXkgPT0gdGhpcy5yaWdodEtleSkge1xyXG4gICAgICB0aGlzLmtleU1hcFt0aGlzLmxlZnRLZXldID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvL3JldHVybiBpZiB0aGUga2V5IGlzIGFscmFlZHkgaW4gdGhlIG1hcCwgcHJldmVudHMgYXV0b2NsaWNraW5nXHJcbiAgICBlbHNlIGlmICh0aGlzLmtleU1hcFtrZXldKSB7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgdGhpcy5rZXlNYXBba2V5XSA9IHRydWU7XHJcblxyXG4gICAgc2VuZEtleUV2ZW50VG9TZXJ2ZXIoa2V5ID09IHRoaXMucmlnaHRLZXkgPyBEaXIuUklHSFQgOiBEaXIuTEVGVCwgdHJ1ZSk7XHJcbiAgfVxyXG4gIHByaXZhdGUgb25LZXlVcChldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG4gICAgLy9pZiBzbmFrZSBpcyBkZWFkLCBpZ25vcmUgdGhlIGtleSBwcmVzc2VzXHJcbiAgICBpZighdGhpcy5zbmFrZS5pc0FsaXZlKSByZXR1cm47XHJcbiAgICBcclxuICAgIGNvbnN0IGtleSA9IGV2ZW50LmtleS50b1VwcGVyQ2FzZSgpO1xyXG5cclxuICAgIC8vY2hlY2sgaWYgdGhlIGtleSBpcyBpbiB0aGUga2V5bWFwLCBpZiBub3QganVzdCBpZ25vcmUgaXRcclxuICAgIGlmICghdGhpcy5rZXlNYXBba2V5XSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLmtleU1hcFtrZXldID0gZmFsc2U7XHJcblxyXG4gICAgc2VuZEtleUV2ZW50VG9TZXJ2ZXIoa2V5ID09IHRoaXMucmlnaHRLZXkgPyBEaXIuUklHSFQgOiBEaXIuTEVGVCwgZmFsc2UpO1xyXG4gIH1cclxuXHJcblxyXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLm9uS2V5RG93bi5iaW5kKHRoaXMpKTtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMub25LZXlVcC5iaW5kKHRoaXMpKTtcclxuICB9XHJcblxyXG5cclxuXHJcbn1cclxuXHJcbiIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCJ2ZWN0b3IyZFwiO1xyXG5pbXBvcnQgU2VnbWVudCBmcm9tIFwiLi9TZWdtZW50XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaW5lU2VnbWVudCBleHRlbmRzIFNlZ21lbnQge1xyXG5cclxuXHJcbiAgICBwdWJsaWMgc3RhcnRQb2ludDogVmVjdG9yO1xyXG4gICAgcHVibGljIGVuZFBvaW50OiBWZWN0b3I7XHJcbiAgICBwdWJsaWMgZW5kQW5nbGU6IG51bWJlcjtcclxuICAgIHB1YmxpYyBpc0NvbGxpZGFibGU6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHN0YXJ0OiBWZWN0b3IsIGVuZDogVmVjdG9yLCBpc0NvbGxpZGFibGU6IGJvb2xlYW4sIGFuZ2xlPzogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnN0YXJ0UG9pbnQgPSBzdGFydDtcclxuICAgICAgICB0aGlzLmVuZFBvaW50ID0gZW5kO1xyXG4gICAgICAgIHRoaXMuaXNDb2xsaWRhYmxlID0gaXNDb2xsaWRhYmxlO1xyXG4gICAgICAgIHRoaXMuZW5kQW5nbGUgPSBhbmdsZTtcclxuICAgICAgICBcclxuICAgICAgfVxyXG5cclxuICAgICAgZHJhdyhjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGNvbG9yOiBzdHJpbmcpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgY29uc3Qgc2NhbGVYID0gY29udGV4dC5jYW52YXMud2lkdGggLyAyMDAwO1xyXG4gICAgICAgIGNvbnN0IHNjYWxlWSA9IGNvbnRleHQuY2FudmFzLmhlaWdodCAvIDIwMDA7XHJcbiAgICAgICAgLy8gY29udGV4dC5zdHJva2VTdHlsZSA9ICcjZmYwMGZmZmYnXHJcbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGNvbG9yO1xyXG4gICAgICAgIGNvbnRleHQubGluZUNhcCA9IFwicm91bmRcIjtcclxuICAgICAgICBpZiAodGhpcy5pc0NvbGxpZGFibGUgPT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKHRoaXMuc3RhcnRQb2ludC54ICogc2NhbGVYLCB0aGlzLnN0YXJ0UG9pbnQueSAqIHNjYWxlWSk7XHJcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHRoaXMuZW5kUG9pbnQueCAqIHNjYWxlWCwgdGhpcy5lbmRQb2ludC55ICogc2NhbGVZKTtcclxuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcclxuICAgICAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNhbGNFbmRBbmdsZSgpOiBudW1iZXJ7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguYXRhbigodGhpcy5lbmRQb2ludC55IC0gdGhpcy5zdGFydFBvaW50LnkpIC8gKHRoaXMuZW5kUG9pbnQueCAtIHRoaXMuc3RhcnRQb2ludC54KSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGxlbmd0aCgpOiBudW1iZXJ7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCgodGhpcy5zdGFydFBvaW50LnggLSB0aGlzLmVuZFBvaW50LngpKioyICsgKHRoaXMuc3RhcnRQb2ludC55IC0gdGhpcy5lbmRQb2ludC55KSoqMik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29udGludWluZ1NlZ21lbnQodHJhbnNmb3JtOiBWZWN0b3IpOiBTZWdtZW50IHtcclxuICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZEVuZHBvaW50ID0gdGhpcy5lbmRQb2ludC5jbG9uZSgpLmFkZCh0cmFuc2Zvcm0pIGFzIFZlY3RvcjtcclxuICAgICAgICByZXR1cm4gbmV3IExpbmVTZWdtZW50KFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1lZEVuZHBvaW50LCBcclxuICAgICAgICAgICAgdHJhbnNmb3JtZWRFbmRwb2ludCwgXHJcbiAgICAgICAgICAgIHRoaXMuaXNDb2xsaWRhYmxlLCBcclxuICAgICAgICAgICAgdGhpcy5lbmRBbmdsZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgdXBkYXRlQ2FudmFzU2l6ZSB9IGZyb20gXCIuLlwiO1xyXG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi4vVmlld01vZGVscy9QbGF5ZXJcIjtcclxuaW1wb3J0IHsgR2FtZVN0YXRlLCBSb29tIH0gZnJvbSBcIi4uL1ZpZXdNb2RlbHMvUm9vbVwiO1xyXG5pbXBvcnQgeyBHYW1lU3RhdGVEYXRhIH0gZnJvbSBcIi4uL1dlYlNvY2tldENsaWVudC9tZXNzYWdlVHlwZXNcIjtcclxuaW1wb3J0IHsgY3JlYXRlUm9vbSwgam9pblJvb20sIHNlbmRTdGFydENvbW1hbmQsIHNldFBsYXllckRhdGEgfSBmcm9tIFwiLi4vV2ViU29ja2V0Q2xpZW50L3dlYnNvY2tldFwiO1xyXG5cclxuXHJcbmV4cG9ydCBsZXQgY3VycmVudFJvb206IFJvb20gfCBudWxsID0gbnVsbDtcclxuZXhwb3J0IGxldCBjdXJyZW50UGxheWVyOiBQbGF5ZXIgfCBudWxsID0gbnVsbDtcclxuXHJcbmNvbnN0IHJvb21Db2RlSW5wdXQgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb21Db2RlSW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50KTtcclxuY29uc3QgdXNlcm5hbWVJbnB1dCA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcm5hbWVJbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQpO1xyXG5jb25zdCByb29tQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pvaW5CdXR0b24nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuY29uc3QgcmVhZHlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVhZHlCdXR0b24nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuY29uc3QgbG9naW5EaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW4tZGl2JykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbmNvbnN0IHJvb21EaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vbS1kaXYnKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuY29uc3QgZ2FtZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lLWNhbnZhcy1jb250YWluZXInKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuY29uc3QgY29sb3JQaWNrZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3ItcGlja2VyJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuY29uc3Qgcm9vbVVzZXJzTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb29tLXVzZXJzLWxpc3QnKSBhcyBIVE1MVUxpc3RFbGVtZW50O1xyXG5jb25zdCByb29tQ29kZVNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vbS1jb2RlJykgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcbmNvbnN0IHBsYXllckNvdW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXllci1jb3VudCcpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG5jb25zdCBjb2xvclBpY2tlckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvci1waWNrZXItY29udGFpbmVyJyk7XHJcbmNvbnN0IHN0YXJ0UHJvZ3Jlc3NCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnQtcHJvZ3Jlc3MtYmFyJyk7XHJcbi8vIHNyYy9sb2dpbi50c1xyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQnV0dG9uKCkge1xyXG5cclxuXHJcbiAgICBpZiAodXNlcm5hbWVJbnB1dC52YWx1ZS50cmltKCkgPT0gJycpIHtcclxuICAgICAgICByb29tQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcm9vbUJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyb29tQ29kZUlucHV0LnZhbHVlLnRyaW0oKS5sZW5ndGggPT0gNSkge1xyXG4gICAgICAgIHJvb21CdXR0b24udGV4dENvbnRlbnQgPSAnSk9JTiBST09NJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcm9vbUJ1dHRvbi50ZXh0Q29udGVudCA9ICdDUkVBVEUgUk9PTSc7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVSb29tQWN0aW9uKCkge1xyXG4gICAgY29uc3QgdXNlcm5hbWUgPSB1c2VybmFtZUlucHV0LnZhbHVlO1xyXG4gICAgaWYgKCF1c2VybmFtZSkgcmV0dXJuO1xyXG5cclxuICAgIGN1cnJlbnRQbGF5ZXIgPSBuZXcgUGxheWVyKHVzZXJuYW1lKTtcclxuXHJcbiAgICBpZiAocm9vbUJ1dHRvbi5pbm5lclRleHQgPT09ICdDUkVBVEUgUk9PTScpIHtcclxuICAgICAgICBjcmVhdGVSb29tKHVzZXJuYW1lSW5wdXQudmFsdWUpO1xyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgam9pblJvb20ocm9vbUNvZGVJbnB1dC52YWx1ZS50b1VwcGVyQ2FzZSgpLCB1c2VybmFtZUlucHV0LnZhbHVlKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVJlYWR5U3RhdGUoKSB7XHJcblxyXG4gICAgY3VycmVudFBsYXllci5pc1JlYWR5ID0gIWN1cnJlbnRQbGF5ZXIuaXNSZWFkeTtcclxuICAgIHNldFBsYXllckRhdGEoY3VycmVudFBsYXllciwgY3VycmVudFJvb20uZ2V0Q29kZSgpKTtcclxuICAgIHVwZGF0ZVJlYWR5QnV0dG9uKGN1cnJlbnRQbGF5ZXIuaXNSZWFkeSk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVSZWFkeUJ1dHRvbihpc1JlYWR5OiBib29sZWFuKSB7XHJcbiAgICBpZiAoaXNSZWFkeSkge1xyXG4gICAgICAgIHJlYWR5QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3JlZC1idXR0b24nKTtcclxuICAgICAgICByZWFkeUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdncmVlbi1idXR0b24nKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJlYWR5QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3JlZC1idXR0b24nKTtcclxuICAgICAgICByZWFkeUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdncmVlbi1idXR0b24nKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3dSb29tVmlldyhkYXRhOiBKU09OKSB7XHJcbiAgICAvL3NldCB0aGUgY2xpZW50IFZpZXdNb2RlbCBvZiB0aGUgcm9vbSB0byB0aGUgc2VydmVycyByZXNwb25zZVxyXG4gICAgbGV0IHJvb21JbmZvID0gSlNPTi5wYXJzZShkYXRhLnRvU3RyaW5nKCkpO1xyXG4gICAgY3VycmVudFJvb20gPSBuZXcgUm9vbShyb29tSW5mb1sncm9vbSddWydjb2RlJ10sIHJvb21JbmZvWydyb29tJ11bJ2hvc3QnXSwgcm9vbUluZm9bJ3Jvb20nXVsncGxheWVycyddLCByb29tSW5mb1sncm9vbSddWydtYXhTaXplJ10pXHJcblxyXG4gICAgLy9zaG93IHN0YXJ0R2FtZUJ1dHRvbiBcclxuICAgIGlmIChjdXJyZW50UGxheWVyLnVzZXJuYW1lID09IGN1cnJlbnRSb29tLmdldEhvc3QoKS51c2VybmFtZSkge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydEJ1dHRvbicpLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vc2V0IGEgcmFuZG9tIGNvbG9yIGZvciBhIHBsYXllclxyXG4gICAgY29sb3JQaWNrZXJEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY3VycmVudFBsYXllci5jb2xvcjtcclxuICAgIGNvbG9yUGlja2VyLnZhbHVlID0gY3VycmVudFBsYXllci5jb2xvcjtcclxuICAgIGxldCBjb2xvclBpY2tlckxhYmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbG9yLWxhYmVsJyk7XHJcbiAgICBjb2xvclBpY2tlckxhYmVsLnN0eWxlLmNvbG9yID0gcGlja1RleHRDb2xvckJhc2VkT25CZ0NvbG9yQWR2YW5jZWQoY29sb3JQaWNrZXIudmFsdWUsICcjRkZGRkZGJywgJyMwMDAwMDAnKTtcclxuXHJcbiAgICAvL3Nob3cgdGhlIG5ldyBlbGVtZW50XHJcbiAgICBsb2dpbkRpdi5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LW5vbmUnKTtcclxuICAgIHJvb21EaXYuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1mbGV4Jyk7XHJcblxyXG5cclxuXHJcbiAgICByb29tQ29kZUlucHV0LnZhbHVlID0gY3VycmVudFJvb20uZ2V0Q29kZSgpO1xyXG4gICAgcm9vbUNvZGVTcGFuLmlubmVySFRNTCA9IGN1cnJlbnRSb29tLmdldENvZGUoKTtcclxuICAgIHNldFBsYXllckRhdGEoY3VycmVudFBsYXllciwgY3VycmVudFJvb20uZ2V0Q29kZSgpKTtcclxuICAgIHVwZGF0ZVJvb21MaXN0KGRhdGEpO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVJvb21MaXN0KGRhdGE6IEpTT04pIHtcclxuICAgIGxldCByb29tSW5mbyA9IEpTT04ucGFyc2UoZGF0YS50b1N0cmluZygpKTtcclxuXHJcbiAgICAvLyB1cGRhdGluZyB0aGUgY3VycmVudCByb29tIHBsYXllcnMgYW5kIGhvc3RcclxuICAgIGN1cnJlbnRSb29tLnNldFBsYXllcnMocm9vbUluZm9bJ3Jvb20nXVsncGxheWVycyddKTtcclxuICAgIGN1cnJlbnRSb29tLnNldEhvc3Qocm9vbUluZm9bJ3Jvb20nXVsnaG9zdCddKTtcclxuICAgIGN1cnJlbnRSb29tLnNldE1heFNpemUocm9vbUluZm9bJ3Jvb20nXVsnbWF4U2l6ZSddKVxyXG5cclxuXHJcbiAgICBwbGF5ZXJDb3VudC5pbm5lckhUTUwgPSBgJHtPYmplY3Qua2V5cyhjdXJyZW50Um9vbS5nZXRQbGF5ZXJzKCkpLmxlbmd0aH0vJHtjdXJyZW50Um9vbS5nZXRNYXhTaXplKCl9YDtcclxuICAgIHJvb21Vc2Vyc0xpc3QuaW5uZXJIVE1MID0gJyc7XHJcblxyXG4gICAgT2JqZWN0LnZhbHVlcyhjdXJyZW50Um9vbS5nZXRQbGF5ZXJzKCkpLmZvckVhY2goKHBsYXllcjogeyB1c2VybmFtZTogc3RyaW5nIHwgbnVtYmVyOyBpc1JlYWR5OiBib29sZWFuOyBjb2xvcjogc3RyaW5nOyB9KSA9PiB7XHJcbiAgICAgICAgY29uc3QgcGxheWVySXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcblxyXG4gICAgICAgIHBsYXllckl0ZW0udGV4dENvbnRlbnQgPSBwbGF5ZXIudXNlcm5hbWUgKyAnJztcclxuXHJcbiAgICAgICAgaWYgKHBsYXllci51c2VybmFtZSA9PSBjdXJyZW50Um9vbS5nZXRIb3N0KCkudXNlcm5hbWUpIHtcclxuICAgICAgICAgICAgcGxheWVySXRlbS5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCBgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1jcm93blwiIHN0eWxlPVwiY29sb3I6ICR7cGxheWVyLmNvbG9yfTtcIj48L2k+YClcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGxheWVySXRlbS5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCBgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1jaXJjbGVcIiBzdHlsZT1cImNvbG9yOiAke3BsYXllci5jb2xvcn07IG1hcmdpbi1sZWZ0OiA0cHhcIj48L2k+YClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwbGF5ZXIuaXNSZWFkeSkge1xyXG4gICAgICAgICAgICBwbGF5ZXJJdGVtLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgJyA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLWNpcmNsZVwiIHN0eWxlPVwiY29sb3I6ICMzN2NiNDg7XCI+PC9pPicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBsYXllckl0ZW0uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCAnIDxpIGNsYXNzPVwiZmEtc29saWQgZmEtY2lyY2xlXCIgc3R5bGU9XCJjb2xvcjogI2NiMzczNztcIj48L2k+Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByb29tVXNlcnNMaXN0LmFwcGVuZENoaWxkKHBsYXllckl0ZW0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy9zaG93IHN0YXJ0R2FtZUJ1dHRvbiBcclxuICAgIGlmIChjdXJyZW50UGxheWVyLnVzZXJuYW1lID09IGN1cnJlbnRSb29tLmdldEhvc3QoKS51c2VybmFtZSkge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydEJ1dHRvbicpLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVN0YXJ0QnV0dG9uUHJvZ3Jlc3MoT2JqZWN0LnZhbHVlcyhjdXJyZW50Um9vbS5nZXRQbGF5ZXJzKCkpLmZpbHRlcihwID0+IHAuaXNSZWFkeSkubGVuZ3RoLCBjdXJyZW50Um9vbS5nZXRNYXhTaXplKCkpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gdXBkYXRlU3RhcnRCdXR0b25Qcm9ncmVzcyhyZWFkeVBsYXllckNvdW50OiBudW1iZXIsIG1heFBsYXllckNvdW50OiBudW1iZXIpIHtcclxuICAgIGlmIChtYXhQbGF5ZXJDb3VudCA9PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgc3RhcnRQcm9ncmVzc0Jhci5zdHlsZS53aWR0aCA9IE1hdGguZmxvb3IocmVhZHlQbGF5ZXJDb3VudCAvIG1heFBsYXllckNvdW50ICogMTAwKSArICclJztcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gc2hvd0Vycm9yQW5pbWF0aW9uKCkge1xyXG4gICAgcm9vbUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdyZWQtYnV0dG9uJyk7XHJcbiAgICByb29tQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3dpZ2dsZScpO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgcm9vbUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdyZWQtYnV0dG9uJyk7XHJcbiAgICAgICAgcm9vbUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCd3aWdnbGUnKTtcclxuICAgIH0sIDYwMClcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVDb2xvclBpY2tlcigpIHtcclxuICAgIGNvbG9yUGlja2VyRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yUGlja2VyLnZhbHVlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUGxheWVyQ29sb3IoKSB7XHJcbiAgICBjdXJyZW50UGxheWVyLmNvbG9yID0gY29sb3JQaWNrZXIudmFsdWU7XHJcbiAgICBsZXQgY29sb3JQaWNrZXJMYWJlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvci1sYWJlbCcpO1xyXG4gICAgY29sb3JQaWNrZXJMYWJlbC5zdHlsZS5jb2xvciA9IHBpY2tUZXh0Q29sb3JCYXNlZE9uQmdDb2xvckFkdmFuY2VkKGNvbG9yUGlja2VyLnZhbHVlLCAnI0ZGRkZGRicsICcjMDAwMDAwJyk7XHJcbiAgICBzZXRQbGF5ZXJEYXRhKGN1cnJlbnRQbGF5ZXIsIGN1cnJlbnRSb29tLmdldENvZGUoKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBpY2tUZXh0Q29sb3JCYXNlZE9uQmdDb2xvckFkdmFuY2VkKGJnQ29sb3I6IHN0cmluZywgbGlnaHRDb2xvcjogc3RyaW5nLCBkYXJrQ29sb3I6IHN0cmluZykge1xyXG4gICAgdmFyIGNvbG9yID0gKGJnQ29sb3IuY2hhckF0KDApID09PSAnIycpID8gYmdDb2xvci5zdWJzdHJpbmcoMSwgNykgOiBiZ0NvbG9yO1xyXG4gICAgdmFyIHIgPSBwYXJzZUludChjb2xvci5zdWJzdHJpbmcoMCwgMiksIDE2KTsgLy8gaGV4VG9SXHJcbiAgICB2YXIgZyA9IHBhcnNlSW50KGNvbG9yLnN1YnN0cmluZygyLCA0KSwgMTYpOyAvLyBoZXhUb0dcclxuICAgIHZhciBiID0gcGFyc2VJbnQoY29sb3Iuc3Vic3RyaW5nKDQsIDYpLCAxNik7IC8vIGhleFRvQlxyXG4gICAgdmFyIHVpY29sb3JzID0gW3IgLyAyNTUsIGcgLyAyNTUsIGIgLyAyNTVdO1xyXG4gICAgdmFyIGMgPSB1aWNvbG9ycy5tYXAoKGNvbCkgPT4ge1xyXG4gICAgICAgIGlmIChjb2wgPD0gMC4wMzkyOCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY29sIC8gMTIuOTI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBNYXRoLnBvdygoY29sICsgMC4wNTUpIC8gMS4wNTUsIDIuNCk7XHJcbiAgICB9KTtcclxuICAgIHZhciBMID0gKDAuMjEyNiAqIGNbMF0pICsgKDAuNzE1MiAqIGNbMV0pICsgKDAuMDcyMiAqIGNbMl0pO1xyXG4gICAgcmV0dXJuIChMID4gMC40KSA/IGRhcmtDb2xvciA6IGxpZ2h0Q29sb3I7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0YXJ0R2FtZSgpIHtcclxuXHJcbiAgICAvL3ZlcmlmeSB0aGF0IHRoZSBwbGF5ZXIgc2VuZGluZyB0aGUgc3RhcnQgcmVxdWVzdCBpcyB0aGUgaG9zdFxyXG4gICAgaWYgKGN1cnJlbnRQbGF5ZXIudXNlcm5hbWUgIT0gY3VycmVudFJvb20uZ2V0SG9zdCgpLnVzZXJuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbmRTdGFydENvbW1hbmQoY3VycmVudFJvb20uZ2V0Q29kZSgpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHN3aXRjaEdhbWVWaWV3KGRhdGE6IEdhbWVTdGF0ZURhdGEpIHtcclxuICAgIHN3aXRjaCAoZGF0YS5zdGF0ZSkge1xyXG4gICAgICAgIGNhc2UgMDpcclxuICAgICAgICBjdXJyZW50Um9vbS5zZXRHYW1lU3RhdGUoR2FtZVN0YXRlLlJVTk5JTkcpO1xyXG4gICAgICAgIGxvZ2luRGl2LmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgICAgIHJvb21EaXYuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ub25lJyk7XHJcbiAgICAgICAgcm9vbURpdi5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LWZsZXgnKTtcclxuICAgICAgICBnYW1lRGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgICAgIGdhbWVEaXYuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1mbGV4Jyk7XHJcbiAgICAgICAgLy91cGRhdGUgdGhlIGdhbWUgY2FudmFzIHRvIGZpdCB0aGUgc2NyZWVuXHJcbiAgICAgICAgdXBkYXRlQ2FudmFzU2l6ZSgpO1xyXG5cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgIGN1cnJlbnRSb29tLnNldEdhbWVTdGF0ZShHYW1lU3RhdGUuSU5fTE9CQlkpO1xyXG4gICAgICAgIGxvZ2luRGl2LmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgICAgIHJvb21EaXYuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1mbGV4Jyk7XHJcbiAgICAgICAgZ2FtZURpdi5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LW5vbmUnKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICB1cGRhdGVCdXR0b24oKTtcclxufTtcclxuXHJcbih3aW5kb3cgYXMgYW55KS51cGRhdGVCdXR0b24gPSB1cGRhdGVCdXR0b247XHJcbih3aW5kb3cgYXMgYW55KS5oYW5kbGVSb29tQWN0aW9uID0gaGFuZGxlUm9vbUFjdGlvbjtcclxuKHdpbmRvdyBhcyBhbnkpLmhhbmRsZVJlYWR5U3RhdGUgPSBoYW5kbGVSZWFkeVN0YXRlO1xyXG4od2luZG93IGFzIGFueSkudXBkYXRlQ29sb3JQaWNrZXIgPSB1cGRhdGVDb2xvclBpY2tlcjtcclxuKHdpbmRvdyBhcyBhbnkpLnVwZGF0ZVBsYXllckNvbG9yID0gdXBkYXRlUGxheWVyQ29sb3I7XHJcbih3aW5kb3cgYXMgYW55KS5zdGFydEdhbWUgPSBzdGFydEdhbWU7IiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcInZlY3RvcjJkXCI7XHJcbmltcG9ydCBQYXJ0aWNsZSwgeyBzaGFwZSB9IGZyb20gXCIuL1BhcnRpY2xlXCI7XHJcbmltcG9ydCB7IGdldFJhbmRvbURpcmVjdGlvbiB9IGZyb20gXCIuL1BhcnRpY2xlU3lzdGVtVXRpbHNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVtaXR0ZXJ7XHJcbiAgICBwcml2YXRlIGFsaXZlUGFydGljbGVzOiBQYXJ0aWNsZVtdID0gW107XHJcbiAgICBwdWJsaWMgcG9zaXRpb246IFZlY3RvcjtcclxuICAgIHB1YmxpYyBlbWl0VGltZTogbnVtYmVyO1xyXG4gICAgcHVibGljIHNoYXBlOiBzaGFwZTtcclxuICAgIHB1YmxpYyBzaXplOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgc3BlZWQ6IG51bWJlcjtcclxuICAgIHB1YmxpYyBjb2xvcjoge3I6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIsIGE6IG51bWJlcn07XHJcbiAgICBwdWJsaWMgZmFkZUNvbG9yOiBib29sZWFuO1xyXG4gICAgcHVibGljIGZhZGVTaXplOiBib29sZWFuO1xyXG4gICAgcHVibGljIHBhcnRpY2xlTWF4QWdlOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgY2FudmFzQ3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICBwdWJsaWMgZW1pdFRpbWVNaWxsaXM6IG51bWJlcjtcclxuICAgIHByaXZhdGUgdGlja3M6IG51bWJlciA9IDA7XHJcbiAgICBcclxuXHJcbiAgICBcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwb3NpdGlvbjogVmVjdG9yLCBlbWl0SW50ZXJ2YWw6IG51bWJlciwgc2l6ZTogbnVtYmVyLCBzcGVlZDogbnVtYmVyLCBzaGFwZTogc2hhcGUgPSAnY2lyY2xlJywgY29sb3I6IHtyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBhOiBudW1iZXJ9LCBjYW52YXNDdHg6Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCAgZmFkZUNvbG9yOiBib29sZWFuID0gdHJ1ZSwgZmFkZVNpemU6IGJvb2xlYW4gPSB0cnVlLCBhZ2U6IG51bWJlciwgZW1pdFRpbWVNaWxsaXM6IG51bWJlciA9IDApe1xyXG4gICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgdGhpcy5lbWl0VGltZSA9IGVtaXRJbnRlcnZhbDtcclxuICAgIHRoaXMuc2l6ZSA9IHNpemU7XHJcbiAgICB0aGlzLnNwZWVkID0gc3BlZWQ7XHJcbiAgICB0aGlzLnNoYXBlID0gc2hhcGU7XHJcbiAgICB0aGlzLmNvbG9yID0gY29sb3I7XHJcbiAgICB0aGlzLmNhbnZhc0N0eCA9IGNhbnZhc0N0eDtcclxuICAgIHRoaXMuZmFkZUNvbG9yID0gZmFkZUNvbG9yO1xyXG4gICAgdGhpcy5mYWRlU2l6ZSA9IGZhZGVTaXplOyBcclxuICAgIHRoaXMucGFydGljbGVNYXhBZ2UgPSBhZ2U7XHJcbiAgICB0aGlzLmVtaXRUaW1lTWlsbGlzID0gZW1pdFRpbWVNaWxsaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRpY2soZHQ6IG51bWJlcil7XHJcbiAgICAgICAgaWYgKCh0aGlzLmVtaXRUaW1lTWlsbGlzICsgdGhpcy5wYXJ0aWNsZU1heEFnZSkgPCAwKSByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMuZW1pdFRpbWVNaWxsaXMgLT0gZHQ7XHJcblxyXG5cclxuICAgICAgICBpZiAodGhpcy50aWNrcyAlIHRoaXMuZW1pdFRpbWUgPT0gMCAmJiB0aGlzLmVtaXRUaW1lTWlsbGlzID4gMCl7XHJcbiAgICAgICAgICAgIHRoaXMuYWxpdmVQYXJ0aWNsZXMucHVzaChuZXcgUGFydGljbGUodGhpcy5wb3NpdGlvbi5jbG9uZSgpIGFzIFZlY3RvciwgZ2V0UmFuZG9tRGlyZWN0aW9uKCksIHRoaXMuc2l6ZSwgdGhpcy5zcGVlZCwgdGhpcy5zaGFwZSx7Li4udGhpcy5jb2xvcn0sdGhpcy5jYW52YXNDdHgsIHRoaXMucGFydGljbGVNYXhBZ2UsIHRoaXMuZmFkZUNvbG9yLCB0aGlzLmZhZGVTaXplKSk7XHJcbiAgICAgICAgICAgIHRoaXMuYWxpdmVQYXJ0aWNsZXMucHVzaChuZXcgUGFydGljbGUodGhpcy5wb3NpdGlvbi5jbG9uZSgpIGFzIFZlY3RvciwgZ2V0UmFuZG9tRGlyZWN0aW9uKCksIHRoaXMuc2l6ZSwgdGhpcy5zcGVlZCwgdGhpcy5zaGFwZSx7Li4udGhpcy5jb2xvcn0sdGhpcy5jYW52YXNDdHgsIHRoaXMucGFydGljbGVNYXhBZ2UsIHRoaXMuZmFkZUNvbG9yLCB0aGlzLmZhZGVTaXplKSk7XHJcbiAgICAgICAgICAgIHRoaXMuYWxpdmVQYXJ0aWNsZXMucHVzaChuZXcgUGFydGljbGUodGhpcy5wb3NpdGlvbi5jbG9uZSgpIGFzIFZlY3RvciwgZ2V0UmFuZG9tRGlyZWN0aW9uKCksIHRoaXMuc2l6ZSwgdGhpcy5zcGVlZCwgdGhpcy5zaGFwZSx7Li4udGhpcy5jb2xvcn0sdGhpcy5jYW52YXNDdHgsIHRoaXMucGFydGljbGVNYXhBZ2UsIHRoaXMuZmFkZUNvbG9yLCB0aGlzLmZhZGVTaXplKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYWxpdmVQYXJ0aWNsZXMuZm9yRWFjaChwYXJ0aWNsZSA9PiB7XHJcbiAgICAgICAgICAgIHBhcnRpY2xlLnRpY2soZHQpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWxpdmVQYXJ0aWNsZXMgPSB0aGlzLmFsaXZlUGFydGljbGVzLmZpbHRlcihwYXJ0aWNsZSA9PiBwYXJ0aWNsZS5hZ2UgPiAwKTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMudGlja3MrKztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdygpe1xyXG4gICAgICAgIHRoaXMuYWxpdmVQYXJ0aWNsZXMuZm9yRWFjaChwYXJ0aWNsZSA9PiB7XHJcbiAgICAgICAgICAgIHBhcnRpY2xlLmRyYXcoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCJ2ZWN0b3IyZFwiO1xyXG5leHBvcnQgdHlwZSBzaGFwZSA9ICdjaXJjbGUnIHwgJ3NxdWFyZSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhcnRpY2xlIHtcclxuICAgIHBvc2l0aW9uOiBWZWN0b3I7XHJcbiAgICB2ZWxvY2l0eTogVmVjdG9yO1xyXG4gICAgc2hhcGU6IHNoYXBlO1xyXG4gICAgc2l6ZTogbnVtYmVyO1xyXG4gICAgc3BlZWQ6IG51bWJlcjtcclxuICAgIGNvbG9yOiB7cjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciwgYTogbnVtYmVyfTtcclxuICAgIGZhZGVDb2xvcjogYm9vbGVhbjtcclxuICAgIGZhZGVTaXplOiBib29sZWFuO1xyXG4gICAgYWdlOiBudW1iZXI7XHJcbiAgICBjYW52YXNDdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIHByaXZhdGUgc2l6ZUZhZGVBbW91bnQ6IG51bWJlcjtcclxuICAgIHByaXZhdGUgY29sb3JGYWRlQW1vdW50OiBudW1iZXI7XHJcblxyXG4gXHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHBvc2l0aW9uOiBWZWN0b3IsIHZlbG9jaXR5OiBWZWN0b3IsIHNpemU6IG51bWJlciwgc3BlZWQ6IG51bWJlciwgIHNoYXBlOiBzaGFwZSA9ICdjaXJjbGUnLCBjb2xvcjoge3I6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIsIGE6IG51bWJlcn0sIGNhbnZhc0N0eDpDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGFnZTogbnVtYmVyLCAgZmFkZUNvbG9yPzogYm9vbGVhbiwgZmFkZVNpemU/OiBib29sZWFuKXtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICAgICAgdGhpcy52ZWxvY2l0eSA9IHZlbG9jaXR5O1xyXG4gICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XHJcbiAgICAgICAgdGhpcy5zcGVlZCA9IHNwZWVkO1xyXG4gICAgICAgIHRoaXMuc2hhcGUgPSBzaGFwZTtcclxuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XHJcbiAgICAgICAgdGhpcy5jYW52YXNDdHggPSBjYW52YXNDdHg7XHJcbiAgICAgICAgdGhpcy5mYWRlQ29sb3IgPSBmYWRlQ29sb3I7XHJcbiAgICAgICAgdGhpcy5mYWRlU2l6ZSA9IGZhZGVTaXplOyBcclxuICAgICAgICB0aGlzLmFnZSA9IGFnZTtcclxuICAgICAgICB0aGlzLmNvbG9yRmFkZUFtb3VudCA9IHRoaXMuY29sb3IuYS90aGlzLmFnZTtcclxuICAgICAgICB0aGlzLnNpemVGYWRlQW1vdW50ID0gdGhpcy5zaXplL3RoaXMuYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB0aWNrKGR0OiBudW1iZXIpe1xyXG5cclxuICAgICAgICB0aGlzLnBvc2l0aW9uLmFkZCh0aGlzLnZlbG9jaXR5LmNsb25lKCkubXVsdGlwbHlCeVNjYWxhcihkdCAqIHRoaXMuc3BlZWQpKTtcclxuICAgICAgICBpZih0aGlzLmZhZGVDb2xvcil7XHJcbiAgICAgICAgICAgIHRoaXMuY29sb3IuYSAtPSB0aGlzLmNvbG9yRmFkZUFtb3VudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5mYWRlU2l6ZSl7XHJcbiAgICAgICAgICAgIHRoaXMuc2l6ZSAtPSAgdGhpcy5zaXplRmFkZUFtb3VudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hZ2UtLTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdygpe1xyXG4gICAgICAgIHRoaXMuY2FudmFzQ3R4Lm1vdmVUbyh0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSk7XHJcbiAgICAgICAgdGhpcy5jYW52YXNDdHguZmlsbFN0eWxlID0gYHJnYmEoJHt0aGlzLmNvbG9yLnJ9LCR7dGhpcy5jb2xvci5nfSwgJHt0aGlzLmNvbG9yLmJ9LCAke3RoaXMuY29sb3IuYX0pYDtcclxuICAgICAgICB0aGlzLmNhbnZhc0N0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc2hhcGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnY2lyY2xlJzpcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmFyYyh0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSwgdGhpcy5zaXplLCAwLCAyKk1hdGguUEkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguZmlsbCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3NxdWFyZSc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5maWxsUmVjdCh0aGlzLnBvc2l0aW9uLngtdGhpcy5zaXplLCB0aGlzLnBvc2l0aW9uLnktdGhpcy5zaXplLCB0aGlzLnNpemUqMiwgdGhpcy5zaXplKjIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2FudmFzQ3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCJ2ZWN0b3IyZFwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJhbmRvbURpcmVjdGlvbigpOiBWZWN0b3J7XHJcblxyXG4gICAgcmV0dXJuKG5ldyBWZWN0b3IoTWF0aC5yYW5kb20oKSoyLTEsIE1hdGgucmFuZG9tKCkqMi0xKSlcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhleFRvUmdiKGhleDogc3RyaW5nKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gL14jPyhbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KSQvaS5leGVjKGhleCk7XHJcbiAgICByZXR1cm4gcmVzdWx0ID8ge1xyXG4gICAgICByOiBwYXJzZUludChyZXN1bHRbMV0sIDE2KSxcclxuICAgICAgZzogcGFyc2VJbnQocmVzdWx0WzJdLCAxNiksXHJcbiAgICAgIGI6IHBhcnNlSW50KHJlc3VsdFszXSwgMTYpXHJcbiAgICB9IDogbnVsbDtcclxuICB9IiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcInZlY3RvcjJkXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFNlZ21lbnQge1xuICAgIGFic3RyYWN0IGlzQ29sbGlkYWJsZTogYm9vbGVhbjtcbiAgICBhYnN0cmFjdCBkcmF3KGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgY29sb3I6IHN0cmluZyk6IHZvaWQ7XG4gICAgYWJzdHJhY3QgZ2V0IGVuZEFuZ2xlKCk6IG51bWJlcjtcbiAgICBhYnN0cmFjdCBnZXQgZW5kUG9pbnQoKTogVmVjdG9yO1xuICAgIGFic3RyYWN0IGdldENvbnRpbnVpbmdTZWdtZW50KHRyYW5zZm9ybTogVmVjdG9yKTogU2VnbWVudDtcbn0iLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwidmVjdG9yMmRcIjtcbmltcG9ydCBBcmNTZWdtZW50IGZyb20gXCIuL0FyY1NlZ21lbnRcIjtcbmltcG9ydCBMaW5lU2VnbWVudCBmcm9tIFwiLi9MaW5lU2VnbWVudFwiO1xuaW1wb3J0IFNlZ21lbnQgZnJvbSBcIi4vU2VnbWVudFwiO1xuaW1wb3J0IEVtaXR0ZXIgZnJvbSBcIi4vUGFydGljbGVTeXN0ZW0vRW1pdHRlclwiO1xuaW1wb3J0IHsgaGV4VG9SZ2IgfSBmcm9tIFwiLi9QYXJ0aWNsZVN5c3RlbS9QYXJ0aWNsZVN5c3RlbVV0aWxzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNuYWtlIHtcbiAgICBwdWJsaWMgc2VnbWVudHM6IFNlZ21lbnRbXSA9IFtdO1xuICAgIHByaXZhdGUgY29sb3I6IHN0cmluZztcbiAgICBwdWJsaWMgaXNBbGl2ZTogYm9vbGVhbiA9IHRydWU7XG4gICAgcHVibGljIHR1cm5SYWRpdXM6IG51bWJlciA9IDYwO1xuICAgIHByaXZhdGUgZW1pdHRlcjogRW1pdHRlciB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgY2FudmFzQ3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cblxuICAgIGNvbnN0cnVjdG9yKHN0YXJ0UG9zOiBMaW5lU2VnbWVudCwgY29sb3I6IHN0cmluZywgY2FudmFzQ3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcbiAgICAgICAgdGhpcy5hZGRTZWdtZW50KHN0YXJ0UG9zKTtcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgICAgICB0aGlzLmNhbnZhc0N0eCA9IGNhbnZhc0N0eFxuICAgIH1cbiAgICBhZGRTZWdtZW50KHNlZ21lbnQ6IFNlZ21lbnQpIHtcbiAgICAgICAgdGhpcy5zZWdtZW50cy5wdXNoKHNlZ21lbnQpO1xuICAgIH1cblxuICAgIGdldCBoZWFkKCk6IFNlZ21lbnQge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50cy5zbGljZSgtMSkucG9wKCk7XG4gICAgfVxuXG4gICAgZHJhdygpIHtcbiAgICAgICAgY29uc3Qgc2NhbGVYID0gdGhpcy5jYW52YXNDdHguY2FudmFzLndpZHRoIC8gMjAwMDtcbiAgICAgICAgY29uc3Qgc2NhbGVZID0gdGhpcy5jYW52YXNDdHguY2FudmFzLmhlaWdodCAvIDIwMDA7XG5cblxuICAgICAgICB0aGlzLmNhbnZhc0N0eC5saW5lV2lkdGggPSAxMiAqIE1hdGgubWluKHNjYWxlWCwgc2NhbGVZKTtcbiAgICAgICAgLy9UT0RPIGZpeCB0aGlzIHRvIGJlIGEgc2luZ2xlIHBhdGhcbiAgICAgICAgLy8gY29udGV4dC5iZWdpblBhdGgoKTtcblxuICAgICAgICB0aGlzLnNlZ21lbnRzLmZvckVhY2goKHNlZ21lbnQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBzZWdtZW50LmRyYXcodGhpcy5jYW52YXNDdHgsIHRoaXMuY29sb3IpO1xuXG4gICAgICAgICAgICAvL2RyYXcgYSBkb3QgYXQgdGhlIGhlYWQsIHRoaXMgaXMgdXNlZnVsbCBpZiB0aGUgc2VnbWVudCBpcyBpbnZpc2libGVcbiAgICAgICAgICAgIGlmICh0aGlzLmhlYWQgPT0gc2VnbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmFyYyhzZWdtZW50LmVuZFBvaW50LnggKiBzY2FsZVgsIHNlZ21lbnQuZW5kUG9pbnQueSAqIHNjYWxlWSwgMC41ICogTWF0aC5taW4oc2NhbGVYLCBzY2FsZVkpLCAwLCAyICogTWF0aC5QSSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguc3Ryb2tlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBjb250ZXh0LnN0cm9rZSgpO1xuICAgIH1cblxua2lsbCgpIHtcbiAgICBjb25zb2xlLmxvZyhcIlNOQUtFIERFQURcIilcbiAgICB0aGlzLmlzQWxpdmUgPSBmYWxzZTtcbiAgICB0aGlzLmVtaXR0ZXIgPSBuZXcgRW1pdHRlcih0aGlzLmhlYWQuZW5kUG9pbnQsIDEsIDcsIDQsICdjaXJjbGUnLCB7IC4uLmhleFRvUmdiKHRoaXMuY29sb3IpLCBhOiAxIH0sIHRoaXMuY2FudmFzQ3R4LCB0cnVlLCB0cnVlLCA3MCwgNCk7XG59XG5cbnVwZGF0ZUVtaXR0ZXIoZHQ6IG51bWJlcikge1xuICAgIGlmICh0aGlzLmVtaXR0ZXIpIHtcbiAgICAgICAgdGhpcy5lbWl0dGVyLnRpY2soZHQpO1xuICAgICAgICB0aGlzLmVtaXR0ZXIuZHJhdygpO1xuICAgIH1cbn1cbiAgICBcbn0iLCJpbXBvcnQgU25ha2UgZnJvbSBcIi4uL1NuYWtlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUGxheWVyIHtcclxuICAgIHB1YmxpYyB1c2VybmFtZTogc3RyaW5nO1xyXG4gICAgcHVibGljIGlzUmVhZHk6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgY29sb3I6IHN0cmluZztcclxuICAgIHB1YmxpYyBzbmFrZTogU25ha2U7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKHVzZXJuYW1lOiBzdHJpbmcsIGlzUmVhZHk6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTtcclxuICAgICAgICB0aGlzLmlzUmVhZHkgPSBpc1JlYWR5O1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBcIiMwMDAwMDBcIi5yZXBsYWNlKC8wL2csZnVuY3Rpb24oKXtyZXR1cm4gKH5+KE1hdGgucmFuZG9tKCkqMTYpKS50b1N0cmluZygxNik7fSk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICB1c2VybmFtZTogdGhpcy51c2VybmFtZSxcclxuICAgICAgICAgIGlzUmVhZHk6IHRoaXMuaXNSZWFkeSxcclxuICAgICAgICAgIGNvbG9yOiB0aGlzLmNvbG9yXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxufSIsImltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuL1BsYXllclwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVudW0gR2FtZVN0YXRlIHtcclxuICAgIFJVTk5JTkcsXHJcbiAgICBJTl9MT0JCWSxcclxuICAgIEZJTklTSEVEXHJcbn1cclxuZXhwb3J0IGNsYXNzIFJvb20ge1xyXG4gICAgcHJpdmF0ZSBwbGF5ZXJzOiB7IFtrZXk6IHN0cmluZ106IFBsYXllcjsgfSA9IHt9O1xyXG4gICAgcHJpdmF0ZSBtYXhTaXplOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGdhbWVTdGF0ZTogR2FtZVN0YXRlO1xyXG4gICAgcHJpdmF0ZSBob3N0OiBQbGF5ZXI7XHJcbiAgICBwcml2YXRlIGNvZGU6IHN0cmluZztcclxuXHJcblxyXG4gICAgY29uc3RydWN0b3IoY29kZTogc3RyaW5nLCBob3N0OiBQbGF5ZXIsIHBsYXllcnM/OiB7IFtrZXk6IHN0cmluZ106IFBsYXllcjsgfSwgbWF4U2l6ZTogbnVtYmVyID0gNSkge1xyXG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XHJcbiAgICAgICAgdGhpcy5ob3N0ID0gaG9zdDtcclxuICAgICAgICB0aGlzLm1heFNpemUgPSBtYXhTaXplO1xyXG5cclxuICAgICAgICBpZiAocGxheWVycyAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJzID0gcGxheWVycztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5hZGRQbGF5ZXIoaG9zdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkUGxheWVyKHBsYXllcjogUGxheWVyKTogYm9vbGVhbiB7XHJcblxyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnBsYXllcnMpLmxlbmd0aCA+PSB0aGlzLm1heFNpemUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wbGF5ZXJzW3BsYXllci51c2VybmFtZV0gPSBwbGF5ZXI7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldENvZGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29kZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UGxheWVycygpOiB7IFtrZXk6IHN0cmluZ106IFBsYXllcjsgfSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGxheWVycztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SG9zdCgpOiBQbGF5ZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhvc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldEhvc3QocGxheWVyOiBQbGF5ZXIpIHtcclxuICAgICAgICB0aGlzLmhvc3QgPSBwbGF5ZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFBsYXllcnMocGxheWVyczogeyBba2V5OiBzdHJpbmddOiBQbGF5ZXI7IH0pe1xyXG4gICAgICAgIHRoaXMucGxheWVycyA9IHBsYXllcnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldE1heFNpemUobmV3U2l6ZTogbnVtYmVyKXtcclxuICAgICAgICB0aGlzLm1heFNpemUgPSBuZXdTaXplO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNYXhTaXplKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWF4U2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0R2FtZVN0YXRlKG5ld0dhbWVTdGF0ZTogR2FtZVN0YXRlKXtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZSA9IG5ld0dhbWVTdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0R2FtZVN0YXRlKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2FtZVN0YXRlO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgdXBkYXRlR2FtZVN0YXRlIH0gZnJvbSBcIi4uXCI7XHJcbmltcG9ydCB7IERpciB9IGZyb20gXCIuLi9JbnB1dE1hbmFnZXJcIjtcclxuaW1wb3J0IHsgY3VycmVudFBsYXllciwgY3VycmVudFJvb20sIHNob3dFcnJvckFuaW1hdGlvbiwgc2hvd1Jvb21WaWV3LCBzd2l0Y2hHYW1lVmlldywgdXBkYXRlUm9vbUxpc3QgfSBmcm9tIFwiLi4vTWVudU1hbmFnZXIvbG9naW5cIjtcclxuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4uL1ZpZXdNb2RlbHMvUGxheWVyXCI7XHJcblxyXG5sZXQgc29ja2V0OiBXZWJTb2NrZXQ7XHJcblxyXG5mdW5jdGlvbiBpbml0V2ViU29ja2V0KCkge1xyXG4gICAgc29ja2V0ID0gbmV3IFdlYlNvY2tldChgd3M6Ly8ke3dpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZX06ODA4MGApO1xyXG4gICAgXHJcbiAgICBzb2NrZXQub25vcGVuID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgY29ubmVjdGlvbiBlc3RhYmxpc2hlZCcpO1xyXG4gICAgfTtcclxuXHJcbiAgICBzb2NrZXQub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ01lc3NhZ2UgZnJvbSBzZXJ2ZXI6JywgZGF0YSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnSk9JTkVEX1JPT00nOlxyXG4gICAgICAgICAgICAgICAgc2hvd1Jvb21WaWV3KGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ1JPT01fRE9FU19OT1RfRVhJU1QnOlxyXG4gICAgICAgICAgICAgICAgc2hvd0Vycm9yQW5pbWF0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnUk9PTV9EQVRBJzpcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVJvb21MaXN0KGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ0dBTUVfU1RBVEUnOlxyXG4gICAgICAgICAgICAgICAgc3dpdGNoR2FtZVZpZXcoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnR0FNRVBMQVlfREFUQSc6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVHYW1lU3RhdGUoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnRVJST1InOlxyXG4gICAgICAgICAgICAgICAgYWxlcnQoYEVycm9yOiAke2RhdGEubWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIHNvY2tldC5vbmNsb3NlID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgY29ubmVjdGlvbiBjbG9zZWQnKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHNvY2tldC5vbmVycm9yID0gKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignV2ViU29ja2V0IGVycm9yOicsIGVycm9yKTtcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSb29tKHVzZXJuYW1lOiBzdHJpbmcpIHtcclxuICAgIGlmIChzb2NrZXQgJiYgc29ja2V0LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XHJcbiAgICAgICAgc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiAnQ1JFQVRFX1JPT00nLCB1c2VybmFtZTogdXNlcm5hbWUgfSkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdXZWJTb2NrZXQgY29ubmVjdGlvbiBpcyBub3Qgb3BlbicpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gam9pblJvb20ocm9vbUNvZGU6IHN0cmluZywgdXNlcm5hbWU6IHN0cmluZykge1xyXG4gICAgaWYgKHNvY2tldCAmJiBzb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcclxuICAgICAgICBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGU6ICdKT0lOX1JPT00nLCByb29tQ29kZTogcm9vbUNvZGUsIHVzZXJuYW1lOiB1c2VybmFtZSB9KSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1dlYlNvY2tldCBjb25uZWN0aW9uIGlzIG5vdCBvcGVuJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRQbGF5ZXJEYXRhKHBsYXllcjogUGxheWVyLCByb29tQ29kZTogc3RyaW5nKSB7XHJcbiAgICBpZiAoc29ja2V0ICYmIHNvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xyXG4gICAgICAgIHNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogJ1BMQVlFUl9EQVRBJywgcGxheWVyOiBwbGF5ZXIsIHJvb21Db2RlOiByb29tQ29kZX0pKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignV2ViU29ja2V0IGNvbm5lY3Rpb24gaXMgbm90IG9wZW4nKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNlbmRLZXlFdmVudFRvU2VydmVyKGtleTogRGlyLCBwcmVzc2VkOiBib29sZWFuKXtcclxuICAgIGlmIChzb2NrZXQgJiYgc29ja2V0LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XHJcbiAgICAgICAgc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiAnS0VZX0VWRU5UJywgcm9vbUNvZGU6IGN1cnJlbnRSb29tLmdldENvZGUoKSwgdXNlcm5hbWU6IGN1cnJlbnRQbGF5ZXIudXNlcm5hbWUsIGtleToga2V5LCBwcmVzc2VkOiBwcmVzc2VkIH0pKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignV2ViU29ja2V0IGNvbm5lY3Rpb24gaXMgbm90IG9wZW4nKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNlbmRTdGFydENvbW1hbmQocm9vbUNvZGU6IHN0cmluZykge1xyXG4gICAgaWYgKHNvY2tldCAmJiBzb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcclxuICAgICAgICBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGU6ICdCRUdJTl9HQU1FJywgcm9vbUNvZGU6IHJvb21Db2RlfSkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdXZWJTb2NrZXQgY29ubmVjdGlvbiBpcyBub3Qgb3BlbicpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcbmluaXRXZWJTb2NrZXQoKTtcclxuIiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcInZlY3RvcjJkXCI7XG5pbXBvcnQgQXJjU2VnbWVudCBmcm9tIFwiLi9BcmNTZWdtZW50XCI7XG5pbXBvcnQgeyBkcmF3R3JpZCB9IGZyb20gXCIuL0RyYXdlclwiO1xuaW1wb3J0IElucHV0TWFuYWdlciBmcm9tIFwiLi9JbnB1dE1hbmFnZXJcIjtcbmltcG9ydCBMaW5lU2VnbWVudCBmcm9tIFwiLi9MaW5lU2VnbWVudFwiO1xuaW1wb3J0IFNuYWtlIGZyb20gXCIuL1NuYWtlXCI7XG5pbXBvcnQgRW1pdHRlciBmcm9tIFwiLi9QYXJ0aWNsZVN5c3RlbS9FbWl0dGVyXCI7XG5pbXBvcnQgeyBNZXNzYWdlR2FtZXBsYXksIG1lc3NhZ2VBcmNTZWdtZW50LCBtZXNzYWdlTGluZVNlZ21lbnQgfSBmcm9tIFwiLi9XZWJTb2NrZXRDbGllbnQvbWVzc2FnZVR5cGVzXCI7XG5pbXBvcnQgeyBjdXJyZW50UGxheWVyLCBjdXJyZW50Um9vbSB9IGZyb20gXCIuL01lbnVNYW5hZ2VyL2xvZ2luXCI7XG5cbnZhciBmcHNDb3VudGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5mcHNDb3VudGVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbmZwc0NvdW50ZXIuc3R5bGUudG9wID0gJzEwcHgnO1xuZnBzQ291bnRlci5zdHlsZS5sZWZ0ID0gJzEwcHgnO1xuZnBzQ291bnRlci5zdHlsZS5jb2xvciA9ICdibGFjayc7XG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZwc0NvdW50ZXIpO1xuZXhwb3J0IHZhciBmcHMgPSA2MDtcblxuZXhwb3J0IHZhciBnYW1lQ2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtY2FudmFzJykgIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuZXhwb3J0IHZhciBnYW1lQ2FudmFzQ3R4ID0gZ2FtZUNhbnZhcy5nZXRDb250ZXh0KCcyZCcpITtcblxuZXhwb3J0IHZhciBiYWNrZ3JvdW5kQ2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhY2tncm91bmQtY2FudmFzJykgIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuZXhwb3J0IHZhciBiYWNrZ3JvdW5kQ2FudmFzQ3R4ID0gYmFja2dyb3VuZENhbnZhcy5nZXRDb250ZXh0KCcyZCcpITtcblxuYmFja2dyb3VuZENhbnZhcyEud2lkdGggPSBiYWNrZ3JvdW5kQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuYmFja2dyb3VuZENhbnZhcyEuaGVpZ2h0ID0gYmFja2dyb3VuZENhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG5nYW1lQ2FudmFzIS53aWR0aCA9IGdhbWVDYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG5nYW1lQ2FudmFzIS5oZWlnaHQgPSBnYW1lQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbmV4cG9ydCB2YXIgZ3JpZFNpemUgPSA2MDtcbmxldCBpbnB1dE1hbmFnZXI7XG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQ2FudmFzU2l6ZSgpIHtcbiAgICBnYW1lQ2FudmFzLndpZHRoID0gZ2FtZUNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICBnYW1lQ2FudmFzLmhlaWdodCA9IGdhbWVDYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuICAgIGJhY2tncm91bmRDYW52YXMud2lkdGggPSBiYWNrZ3JvdW5kQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgIGJhY2tncm91bmRDYW52YXMuaGVpZ2h0ID0gYmFja2dyb3VuZENhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgZHJhd0dyaWQoKTtcbiAgfVxuXG5mdW5jdGlvbiBhbmltYXRlKCkge1xuICAgIHZhciBtdWx0ID0gZnBzIC8gNjA7XG4gICAgZnJhbWVDb3VudCsrO1xuICAgIGlmIChmcmFtZUNvdW50ICUgMTAgPT09IDApIHtcbiAgICAgICAgZnBzID0gY2FsY3VsYXRlRlBTKCk7XG4gICAgICAgIGZwc0NvdW50ZXIuaW5uZXJUZXh0ID0gYEZQUzogJHtmcHN9YDtcbiAgICB9XG4gICAgZ2FtZUNhbnZhc0N0eC5jbGVhclJlY3QoMCwgMCwgZ2FtZUNhbnZhcy53aWR0aCwgZ2FtZUNhbnZhcy5oZWlnaHQpO1xuXG4gICAgT2JqZWN0LnZhbHVlcyhjdXJyZW50Um9vbS5nZXRQbGF5ZXJzKCkpLmZvckVhY2gocGxheWVyID0+IHtcbiAgICAgICAgcGxheWVyLnNuYWtlLmRyYXcoKTtcbiAgICAgICAgcGxheWVyLnNuYWtlLnVwZGF0ZUVtaXR0ZXIoKHBlcmZvcm1hbmNlLm5vdygpLzEwIC0gbGFzdFRpbWUpLzEwKTtcbiAgICB9KVxuICAgIC8vIGVtaXR0ZXIudGljaygwLjMpO1xuICAgIC8vIGVtaXR0ZXIuZHJhdygpO1xufVxudmFyIGZyYW1lQ291bnQgPSAwO1xudmFyIGxhc3RUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLyAxMDtcbmZ1bmN0aW9uIGNhbGN1bGF0ZUZQUygpIHtcbiAgICB2YXIgY3VycmVudFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAvIDEwO1xuICAgIHZhciB0aW1lRGlmZiA9IGN1cnJlbnRUaW1lIC0gbGFzdFRpbWU7XG4gICAgdmFyIGZwcyA9IE1hdGgucm91bmQoMTAwMCAvIHRpbWVEaWZmKTtcbiAgICBsYXN0VGltZSA9IGN1cnJlbnRUaW1lO1xuICAgIHJldHVybiBmcHM7XG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHVwZGF0ZUNhbnZhc1NpemUpO1xuZHJhd0dyaWQoKTtcbmxldCBpbml0aWFsaXplZCA9IGZhbHNlO1xuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlR2FtZVN0YXRlKGdhbWVTdGF0ZTogTWVzc2FnZUdhbWVwbGF5KSB7XG5cbiAgICBpZiAoIWluaXRpYWxpemVkKSB7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBzbmFrZXMgdGhlIGZpcnN0IHRpbWUgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWRcbiAgICAgICAgZ2FtZVN0YXRlLnNuYWtlSGVhZHMuZm9yRWFjaChoZWFkRGF0YSA9PiB7XG4gICAgICAgICAgICBsZXQgaGVhZCA9IGhlYWREYXRhLmxhc3RTZWdtZW50O1xuICAgICAgICAgICAgbGV0IHVzZXJuYW1lID0gaGVhZERhdGEudXNlcm5hbWU7XG4gICAgICAgICAgICBsZXQgcG9zID0gaGVhZC5lbmRQb2ludFxuICAgICAgICAgICAgY3VycmVudFJvb20uZ2V0UGxheWVycygpW3VzZXJuYW1lXS5zbmFrZSA9IG5ldyBTbmFrZShuZXcgTGluZVNlZ21lbnQobmV3IFZlY3Rvcihwb3MueCwgcG9zLnkpICwgbmV3IFZlY3Rvcihwb3MueCwgcG9zLnkpICwgaGVhZC5pc0NvbGxpZGFibGUsIGhlYWQuZW5kQW5nbGUpLGN1cnJlbnRSb29tLmdldFBsYXllcnMoKVt1c2VybmFtZV0uY29sb3IsIGdhbWVDYW52YXNDdHgpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlucHV0TWFuYWdlciA9IG5ldyBJbnB1dE1hbmFnZXIoY3VycmVudFJvb20uZ2V0UGxheWVycygpW2N1cnJlbnRQbGF5ZXIudXNlcm5hbWVdLnNuYWtlLCdBJywnRCcpO1xuXG4gICAgICAgIGluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgfSBcbiAgICAgZWxzZSB7XG4gICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBzbmFrZXMgYmFzZWQgb24gdGhlIG5ldyBnYW1lIHN0YXRlXG4gICAgICAgIGdhbWVTdGF0ZS5zbmFrZUhlYWRzLmZvckVhY2gobmV3SGVhZERhdGEgPT4ge1xuICAgICAgICAgICAgbGV0IGhlYWQgPSBuZXdIZWFkRGF0YS5sYXN0U2VnbWVudDtcbiAgICAgICAgICAgIGxldCB1c2VybmFtZSA9IG5ld0hlYWREYXRhLnVzZXJuYW1lO1xuICAgICAgICAgICAgbGV0IGVuZFBvcyA9IGhlYWQuZW5kUG9pbnRcbiAgICAgICAgICAgIGxldCBzbmFrZVRvVXBkYXRlID0gY3VycmVudFJvb20uZ2V0UGxheWVycygpW3VzZXJuYW1lXS5zbmFrZTtcblxuICAgICAgICAgIGlmKGhlYWQuaXNOZXdUaGlzVGljayl7XG4gICAgICAgICAgICBpZihuZXdIZWFkRGF0YS5zZWdtZW50VHlwZSA9PSAnTGluZVNlZ21lbnQnKXtcbiAgICAgICAgICAgICAgICBoZWFkID0gaGVhZCBhcyBtZXNzYWdlTGluZVNlZ21lbnRcbiAgICAgICAgICAgICAgICBsZXQgc3RhcnRQb3MgPSBoZWFkLnN0YXJ0UG9pbnQ7XG4gICAgICAgICAgICAgICAgc25ha2VUb1VwZGF0ZS5hZGRTZWdtZW50KG5ldyBMaW5lU2VnbWVudChuZXcgVmVjdG9yKHN0YXJ0UG9zLngsIHN0YXJ0UG9zLnkpLCBuZXcgVmVjdG9yKGVuZFBvcy54LCBlbmRQb3MueSksIGhlYWQuaXNDb2xsaWRhYmxlLCBoZWFkLmVuZEFuZ2xlKSk7XG4gICAgICAgICAgICB9IFxuICAgICAgICAgICAgZWxzZSBpZiAobmV3SGVhZERhdGEuc2VnbWVudFR5cGUgPT0gJ0FyY1NlZ21lbnQnKXtcbiAgICAgICAgICAgICAgICBoZWFkID0gaGVhZCBhcyBtZXNzYWdlQXJjU2VnbWVudFxuICAgICAgICAgICAgICAgIGxldCBjZW50ZXIgPSBoZWFkLmNlbnRlcjtcbiAgICAgICAgICAgICAgICBzbmFrZVRvVXBkYXRlLmFkZFNlZ21lbnQobmV3IEFyY1NlZ21lbnQobmV3IFZlY3RvcihjZW50ZXIueCwgY2VudGVyLnkpLCBoZWFkLnJhZGl1cywgaGVhZC5zdGFydEFuZ2xlLCBoZWFkLmVuZEFuZ2xlLCBoZWFkLmNvdW50ZXJDbG9ja3dpc2UsIGhlYWQuaXNDb2xsaWRhYmxlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBpZihuZXdIZWFkRGF0YS5zZWdtZW50VHlwZSA9PSAnTGluZVNlZ21lbnQnKXtcbiAgICAgICAgICAgIGhlYWQgPSBoZWFkIGFzIG1lc3NhZ2VMaW5lU2VnbWVudFxuICAgICAgICAgICAgbGV0IHN0YXJ0UG9zID0gaGVhZC5zdGFydFBvaW50O1xuICAgICAgICAgICAgc25ha2VUb1VwZGF0ZS5zZWdtZW50c1tzbmFrZVRvVXBkYXRlLnNlZ21lbnRzLmxlbmd0aC0xXSA9IChuZXcgTGluZVNlZ21lbnQobmV3IFZlY3RvcihzdGFydFBvcy54LCBzdGFydFBvcy55KSwgbmV3IFZlY3RvcihlbmRQb3MueCwgZW5kUG9zLnkpLCBoZWFkLmlzQ29sbGlkYWJsZSwgaGVhZC5lbmRBbmdsZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobmV3SGVhZERhdGEuc2VnbWVudFR5cGUgPT0gJ0FyY1NlZ21lbnQnKXtcbiAgICAgICAgICAgIGhlYWQgPSBoZWFkIGFzIG1lc3NhZ2VBcmNTZWdtZW50XG4gICAgICAgICAgICBsZXQgY2VudGVyID0gaGVhZC5jZW50ZXI7XG4gICAgICAgICAgICBzbmFrZVRvVXBkYXRlLnNlZ21lbnRzW3NuYWtlVG9VcGRhdGUuc2VnbWVudHMubGVuZ3RoLTFdID0gKG5ldyBBcmNTZWdtZW50KG5ldyBWZWN0b3IoY2VudGVyLngsIGNlbnRlci55KSwgaGVhZC5yYWRpdXMsIGhlYWQuc3RhcnRBbmdsZSwgaGVhZC5lbmRBbmdsZSwgaGVhZC5jb3VudGVyQ2xvY2t3aXNlLCBoZWFkLmlzQ29sbGlkYWJsZSkpO1xuICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBhbmltYXRlKCk7XG5cblxuICB9IiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vKipcbiAqIFRoZXNlIHZhbHVlcyBhcmUgdXNlZCBieSB0aGUgYEFic3RyYWN0VmVjdG9yLnJvdW5kYCBtZXRob2QgdG8gaW5jcmVhc2VcbiAqIHBlcmZvcm1hbmNlIHZzLiB1c2luZyAgTnVtYmVyLnRvRml4ZWQuXG4gKi9cbnZhciBwcmVjaXNpb24gPSBbXG4gICAgMSxcbiAgICAxMCxcbiAgICAxMDAsXG4gICAgMTAwMCxcbiAgICAxMDAwMCxcbiAgICAxMDAwMDAsXG4gICAgMTAwMDAwMCxcbiAgICAxMDAwMDAwMCxcbiAgICAxMDAwMDAwMDAsXG4gICAgMTAwMDAwMDAwMCxcbiAgICAxMDAwMDAwMDAwMFxuXTtcbi8qKlxuICogVGhlIGNsYXNzIHRoYXQgYWxsIG90aGVyIHZlY3RvciByZXByZXNlbnRhdGlvbnMgYXJlIGRlcml2ZWQgZnJvbS5cbiAqXG4gKiBDb250YWlucyB0aGUgY29yZSBpbXBsZW1lbnRhdGlvbiBmb3IgYWxsIG1ldGhvZHMgdGhhdCB3aWxsIGJlIGV4cG9zZWQgYnlcbiAqIHZlY3RvciBpbnN0YW5jZXMuXG4gKlxuICogRXhhbXBsZSBvZiBjcmVhdGluZyBhIGN1c3RvbSBpbXBsZW1lbnRhdGlvbjpcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgQWJzdHJhY3RWZWN0b3IgfSBmcm9tIFwiLi9BYnN0cmFjdFZlY3RvclwiXG4gKlxuICogZXhwb3J0IGNsYXNzIE15Q3VzdG9tVmVjdG9yIGV4dGVuZHMgQWJzdHJhY3RWZWN0b3Ige1xuICogIGNvbnN0cnVjdG9yICh4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICogICAgc3VwZXIoQ3VzdG9tVmVjdG9yVHlwZSlcbiAqICB9XG4gKiB9XG4gKiBgYGBcbiAqL1xudmFyIEFic3RyYWN0VmVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFic3RyYWN0VmVjdG9yKGN0b3IpIHtcbiAgICAgICAgdGhpcy5jdG9yID0gY3RvcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGJvdGggeCBhbmQgeSBheGlzIHZhbHVlXG4gICAgICogQHBhcmFtIHggICBOZXcgeCB2YWxcbiAgICAgKiBAcGFyYW0geSAgIE5ldyB5IHZhbFxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5zZXRBeGVzID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgZm9yIHggdGhlIGF4aXMgdmFsdWVcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHRlciBmb3IgeCBheGlzIHZhbHVlXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnNldFggPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHRlciBmb3IgeSBheGlzIHZhbHVlXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmdldFkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgZm9yIHkgYXhpcy5cbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuc2V0WSA9IGZ1bmN0aW9uICh5KSB7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSB2ZWN0b3IgYXMgYSBmb3JtYXR0ZWQgc3RyaW5nLCBlLmcgXCIoMCwgNClcIlxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChyb3VuZCkge1xuICAgICAgICBpZiAocm91bmQgPT09IHZvaWQgMCkgeyByb3VuZCA9IGZhbHNlOyB9XG4gICAgICAgIGlmIChyb3VuZCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiKFwiICsgTWF0aC5yb3VuZCh0aGlzLngpICsgXCIsIFwiICsgTWF0aC5yb3VuZCh0aGlzLnkpICsgXCIpXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiKFwiICsgdGhpcy54ICsgXCIsIFwiICsgdGhpcy55ICsgXCIpXCI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYW4gQXJyYXkgY29udGFpbmluZyB0aGUgdmVjdG9yIGF4ZXMsIGUuZyBbMCwgNF1cbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueV07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYW4gT2JqZWN0IGNvbnRhaW5pbmcgdGhlIHZlY3RvciBheGVzLCBlLmcgeyB4OiAwLCB5OiA0IH1cbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUudG9PYmplY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiB0aGlzLngsXG4gICAgICAgICAgICB5OiB0aGlzLnlcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZCB0aGUgcHJvdmlkZWQgdmVjdG9yIHRvIHRoaXMgb25lXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh2ZWMpIHtcbiAgICAgICAgdGhpcy54ICs9IHZlYy54O1xuICAgICAgICB0aGlzLnkgKz0gdmVjLnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU3VidHJhY3QgdGhlIHByb3ZpZGVkIHZlY3RvciBmcm9tIHRoaXMgb25lXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnN1YnRyYWN0ID0gZnVuY3Rpb24gKHZlYykge1xuICAgICAgICB0aGlzLnggLT0gdmVjLng7XG4gICAgICAgIHRoaXMueSAtPSB2ZWMueTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiB0aGUgcHJvdmlkZWQgdmVjdG9yIGVxdWFsIHRvIHRoaXMgb25lXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uICh2ZWMpIHtcbiAgICAgICAgcmV0dXJuIHZlYy54ID09PSB0aGlzLnggJiYgdmVjLnkgPT09IHRoaXMueTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE11bHRpcGx5IHRoaXMgdmVjdG9yIGJ5IHRoZSBwcm92aWRlZCB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubXVsdGlwbHlCeVZlY3RvciA9IGZ1bmN0aW9uICh2ZWMpIHtcbiAgICAgICAgdGhpcy54ICo9IHZlYy54O1xuICAgICAgICB0aGlzLnkgKj0gdmVjLnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIHZlY3RvclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5tdWxWID0gZnVuY3Rpb24gKHZlYykge1xuICAgICAgICByZXR1cm4gdGhpcy5tdWx0aXBseUJ5VmVjdG9yKHZlYyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXZpZGUgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIHZlY3RvclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5kaXZpZGVCeVZlY3RvciA9IGZ1bmN0aW9uICh2ZWMpIHtcbiAgICAgICAgdGhpcy54IC89IHZlYy54O1xuICAgICAgICB0aGlzLnkgLz0gdmVjLnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGl2aWRlIHRoaXMgdmVjdG9yIGJ5IHRoZSBwcm92aWRlZCB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuZGl2ViA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpdmlkZUJ5VmVjdG9yKHYpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIG51bWJlclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5tdWx0aXBseUJ5U2NhbGFyID0gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdGhpcy54ICo9IG47XG4gICAgICAgIHRoaXMueSAqPSBuO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE11bHRpcGx5IHRoaXMgdmVjdG9yIGJ5IHRoZSBwcm92aWRlZCBudW1iZXJcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubXVsUyA9IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11bHRpcGx5QnlTY2FsYXIobik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXZpdmUgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIG51bWJlclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5kaXZpZGVCeVNjYWxhciA9IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIHRoaXMueCAvPSBuO1xuICAgICAgICB0aGlzLnkgLz0gbjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXZpdmUgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIG51bWJlclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5kaXZTID0gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGl2aWRlQnlTY2FsYXIobik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBOb3JtYWxpc2UgdGhpcyB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubm9ybWFsaXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXZpZGVCeVNjYWxhcih0aGlzLm1hZ25pdHVkZSgpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZvciBBbWVyaWNhbiBzcGVsbGluZy4gU2FtZSBhcyB1bml0L25vcm1hbGlzZSBmdW5jdGlvblxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGlzZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhlIHNhbWUgYXMgbm9ybWFsaXNlIGFuZCBub3JtYWxpemVcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUudW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXNlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtYWduaXR1ZGUgKGxlbmd0aCkgb2YgdGhpcyB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubWFnbml0dWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgeCA9IHRoaXMueDtcbiAgICAgICAgdmFyIHkgPSB0aGlzLnk7XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtYWduaXR1ZGUgKGxlbmd0aCkgb2YgdGhpcyB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYWduaXR1ZGUoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHNxdXJlZCBsZW5ndGggb2YgdGhpcyB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubGVuZ3RoU3EgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB4ID0gdGhpcy54O1xuICAgICAgICB2YXIgeSA9IHRoaXMueTtcbiAgICAgICAgcmV0dXJuIHggKiB4ICsgeSAqIHk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBkb3QgcHJvZHVjdCBvZiB0aGlzIHZlY3RvciBieSBhbm90aGVyXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmRvdCA9IGZ1bmN0aW9uICh2ZWMpIHtcbiAgICAgICAgcmV0dXJuIHZlYy54ICogdGhpcy54ICsgdmVjLnkgKiB0aGlzLnk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHRoaXMgdmVjdG9yIGJ5IGFub3RoZXIuXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmNyb3NzID0gZnVuY3Rpb24gKHZlYykge1xuICAgICAgICByZXR1cm4gdGhpcy54ICogdmVjLnkgLSB0aGlzLnkgKiB2ZWMueDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldmVyc2VzIHRoaXMgdmVjdG9yIGkuZSBtdWx0aXBsaWVzIGl0IGJ5IC0xXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnJldmVyc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMueCA9IC10aGlzLng7XG4gICAgICAgIHRoaXMueSA9IC10aGlzLnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2ZWN0b3IgYXhlcyB2YWx1ZXMgdG8gYWJzb2x1dGUgdmFsdWVzXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmFicyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy54ID0gTWF0aC5hYnModGhpcy54KTtcbiAgICAgICAgdGhpcy55ID0gTWF0aC5hYnModGhpcy55KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBaZXJvZXMgdGhlIHZlY3RvciBpLmUgc2V0cyBhbGwgYXhlcyB0byAwXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnplcm8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMueCA9IHRoaXMueSA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5kaXN0YW5jZSA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHZhciB4ID0gdGhpcy54IC0gdi54O1xuICAgICAgICB2YXIgeSA9IHRoaXMueSAtIHYueTtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCh4ICogeCArIHkgKiB5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJvdGF0ZXMgdGhlIHZldG9yIGJ5IHByb3ZpZGVkIHJhZGlhbnNcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUucm90YXRlID0gZnVuY3Rpb24gKHJhZHMpIHtcbiAgICAgICAgdmFyIGNvcyA9IE1hdGguY29zKHJhZHMpO1xuICAgICAgICB2YXIgc2luID0gTWF0aC5zaW4ocmFkcyk7XG4gICAgICAgIHZhciBveCA9IHRoaXMueDtcbiAgICAgICAgdmFyIG95ID0gdGhpcy55O1xuICAgICAgICB0aGlzLnggPSBveCAqIGNvcyAtIG95ICogc2luO1xuICAgICAgICB0aGlzLnkgPSBveCAqIHNpbiArIG95ICogY29zO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJvdW5kcyB0aGlzIHZlY3RvciB0byBuIGRlY2ltYWwgcGxhY2VzXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnJvdW5kID0gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgaWYgKG4gPT09IHZvaWQgMCkgeyBuID0gMjsgfVxuICAgICAgICB2YXIgcCA9IHByZWNpc2lvbltuXTtcbiAgICAgICAgLy8gVGhpcyBwZXJmb3JtcyB3YWFheSBiZXR0ZXIgdGhhbiB0b0ZpeGVkIGFuZCBnaXZlIEZsb2F0MzIgdGhlIGVkZ2UgYWdhaW4uXG4gICAgICAgIC8vIGh0dHA6Ly93d3cuZHluYW1pY2d1cnUuY29tL2phdmFzY3JpcHQvcm91bmQtbnVtYmVycy13aXRoLXByZWNpc2lvbi9cbiAgICAgICAgdGhpcy54ID0gKCgwLjUgKyB0aGlzLnggKiBwKSA8PCAwKSAvIHA7XG4gICAgICAgIHRoaXMueSA9ICgoMC41ICsgdGhpcy55ICogcCkgPDwgMCkgLyBwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBjb3B5IG9mIHRoaXMgdmVjdG9yXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMuY3Rvcih0aGlzLngsIHRoaXMueSk7XG4gICAgfTtcbiAgICByZXR1cm4gQWJzdHJhY3RWZWN0b3I7XG59KCkpO1xuZXhwb3J0cy5BYnN0cmFjdFZlY3RvciA9IEFic3RyYWN0VmVjdG9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QWJzdHJhY3RWZWN0b3IuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBBYnN0cmFjdFZlY3Rvcl8xID0gcmVxdWlyZShcIi4vQWJzdHJhY3RWZWN0b3JcIik7XG4vKipcbiAqIEEgdmVjdG9yIHJlcHJlc2VudGF0aW9uIHRoYXQgc3RvcmVzIHRoZSBheGVzIGluIGFuIEFycmF5XG4gKlxuICogYGBgXG4gKiBjb25zdCB2ID0gbmV3IFZlYzJELkFycmF5VmVjdG9yKDIsIDUpXG4gKiBgYGBcbiAqL1xudmFyIEFycmF5VmVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBcnJheVZlY3RvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBcnJheVZlY3Rvcih4LCB5KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIEFycmF5VmVjdG9yKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5heGVzID0gW3gsIHldO1xuICAgICAgICBfdGhpcy5jdG9yID0gQXJyYXlWZWN0b3I7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5VmVjdG9yLnByb3RvdHlwZSwgXCJ4XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5heGVzWzBdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICB0aGlzLmF4ZXNbMF0gPSB4O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlWZWN0b3IucHJvdG90eXBlLCBcInlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmF4ZXNbMV07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHkpIHtcbiAgICAgICAgICAgIHRoaXMuYXhlc1sxXSA9IHk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBBcnJheVZlY3Rvcjtcbn0oQWJzdHJhY3RWZWN0b3JfMS5BYnN0cmFjdFZlY3RvcikpO1xuZXhwb3J0cy5BcnJheVZlY3RvciA9IEFycmF5VmVjdG9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXJyYXlWZWN0b3IuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBBYnN0cmFjdFZlY3Rvcl8xID0gcmVxdWlyZShcIi4vQWJzdHJhY3RWZWN0b3JcIik7XG4vKipcbiAqIEEgdmVjdG9yIHJlcHJlc2VudGF0aW9uIHRoYXQgc3RvcmVzIHRoZSBheGVzIGluIGEgRmxvYXQzMkFycmF5XG4gKlxuICogYGBgXG4gKiBjb25zdCB2ID0gbmV3IFZlYzJELkZsb2F0MzJWZWN0b3IoMiwgNSlcbiAqIGBgYFxuICovXG52YXIgRmxvYXQzMlZlY3RvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRmxvYXQzMlZlY3RvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBGbG9hdDMyVmVjdG9yKHgsIHkpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgRmxvYXQzMlZlY3RvcikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuYXhlcyA9IG5ldyBGbG9hdDMyQXJyYXkoMik7XG4gICAgICAgIF90aGlzLmF4ZXNbMF0gPSB4O1xuICAgICAgICBfdGhpcy5heGVzWzFdID0geTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmxvYXQzMlZlY3Rvci5wcm90b3R5cGUsIFwieFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXhlc1swXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgdGhpcy5heGVzWzBdID0geDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZsb2F0MzJWZWN0b3IucHJvdG90eXBlLCBcInlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmF4ZXNbMV07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHkpIHtcbiAgICAgICAgICAgIHRoaXMuYXhlc1sxXSA9IHk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBGbG9hdDMyVmVjdG9yO1xufShBYnN0cmFjdFZlY3Rvcl8xLkFic3RyYWN0VmVjdG9yKSk7XG5leHBvcnRzLkZsb2F0MzJWZWN0b3IgPSBGbG9hdDMyVmVjdG9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RmxvYXQzMlZlY3Rvci5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG59XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9BYnN0cmFjdFZlY3RvclwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9BcnJheVZlY3RvclwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9GbG9hdDMyVmVjdG9yXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL1ZlY3RvclwiKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1WZWMyRC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEFic3RyYWN0VmVjdG9yXzEgPSByZXF1aXJlKFwiLi9BYnN0cmFjdFZlY3RvclwiKTtcbi8qKlxuICogQSB2ZWN0b3IgcmVwcmVzZW50YXRpb24gdGhhdCBzdG9yZXMgdGhlIGF4ZXMgYXMgcGFydCBvZiB0aGUgaW5zdGFuY2UgaXRzZWxmXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IHYgPSBuZXcgVmVjMkQuVmVjdG9yKDIsIDUpXG4gKiBgYGBcbiAqL1xudmFyIFZlY3RvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVmVjdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFZlY3Rvcih4LCB5KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFZlY3RvcikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuX3ggPSB4O1xuICAgICAgICBfdGhpcy5feSA9IHk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlY3Rvci5wcm90b3R5cGUsIFwieFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3g7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHRoaXMuX3ggPSB4O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVmVjdG9yLnByb3RvdHlwZSwgXCJ5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5feTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoeSkge1xuICAgICAgICAgICAgdGhpcy5feSA9IHk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBWZWN0b3I7XG59KEFic3RyYWN0VmVjdG9yXzEuQWJzdHJhY3RWZWN0b3IpKTtcbmV4cG9ydHMuVmVjdG9yID0gVmVjdG9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VmVjdG9yLmpzLm1hcCIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9pbmRleC50c1wiKTtcbiJdLCJuYW1lcyI6WyJjZW50ZXIiLCJyYWRpdXMiLCJzdGFydEFuZ2xlIiwiZW5kQW5nbGUiLCJjb3VudGVyQ2xvY2t3aXNlIiwiaXNDb2xsaWRhYmxlIiwiZHJhdyIsImNvbnRleHQiLCJjb2xvciIsInNjYWxlWCIsImNhbnZhcyIsIndpZHRoIiwic2NhbGVZIiwiaGVpZ2h0IiwibGluZUNhcCIsInN0cm9rZVN0eWxlIiwidGhpcyIsImJlZ2luUGF0aCIsImFyYyIsIngiLCJ5IiwiTWF0aCIsIm1pbiIsInN0cm9rZSIsImNsb3NlUGF0aCIsImRyYXdEZWJ1ZyIsInRhbmdlbnRfYW5nbGUiLCJQSSIsImRyYXdEb3QiLCJkcmF3QXJyb3ciLCJlbmRQb2ludCIsImNvcyIsInNpbiIsImRyYXdBcmMiLCJpc0NvdW50ZXJDbG9ja3dpc2UiLCJnZXRDb250aW51aW5nU2VnbWVudCIsInRyYW5zZm9ybSIsIkFyY1NlZ21lbnQiLCJjbG9uZSIsImFkZCIsImRyYXdHcmlkIiwiYmFja2dyb3VuZENhbnZhc0N0eCIsImNsZWFyUmVjdCIsImJhY2tncm91bmRDYW52YXMiLCJsaW5lV2lkdGgiLCJncmlkU2l6ZSIsIm1vdmVUbyIsImxpbmVUbyIsImRvdFgiLCJkb3RZIiwiZG90U2l6ZSIsImZpbGxTdHlsZSIsImZpbGwiLCJjdHgiLCJmcm9tIiwidG8iLCJhbmdsZSIsImF0YW4yIiwiaGVhZExlbmd0aCIsIm5ld190byIsIlZlY3RvciIsInNuYWtlIiwibGVmdEtleSIsInJpZ2h0S2V5Iiwia2V5TWFwIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uS2V5RG93biIsImJpbmQiLCJvbktleVVwIiwiZXZlbnQiLCJpc0FsaXZlIiwia2V5IiwidG9VcHBlckNhc2UiLCJzZW5kS2V5RXZlbnRUb1NlcnZlciIsImRpc3Bvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic3RhcnQiLCJlbmQiLCJzdGFydFBvaW50IiwiY2FsY0VuZEFuZ2xlIiwiYXRhbiIsInNxcnQiLCJ0cmFuc2Zvcm1lZEVuZHBvaW50IiwiTGluZVNlZ21lbnQiLCJjdXJyZW50Um9vbSIsImN1cnJlbnRQbGF5ZXIiLCJyb29tQ29kZUlucHV0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInVzZXJuYW1lSW5wdXQiLCJyb29tQnV0dG9uIiwicmVhZHlCdXR0b24iLCJsb2dpbkRpdiIsInJvb21EaXYiLCJnYW1lRGl2IiwiY29sb3JQaWNrZXIiLCJyb29tVXNlcnNMaXN0Iiwicm9vbUNvZGVTcGFuIiwicGxheWVyQ291bnQiLCJjb2xvclBpY2tlckRpdiIsInN0YXJ0UHJvZ3Jlc3NCYXIiLCJ1cGRhdGVCdXR0b24iLCJ2YWx1ZSIsInRyaW0iLCJkaXNhYmxlZCIsImxlbmd0aCIsInRleHRDb250ZW50IiwiaGFuZGxlUm9vbUFjdGlvbiIsInVzZXJuYW1lIiwiUGxheWVyIiwiaW5uZXJUZXh0IiwiY3JlYXRlUm9vbSIsImpvaW5Sb29tIiwiaGFuZGxlUmVhZHlTdGF0ZSIsImlzUmVhZHkiLCJzZXRQbGF5ZXJEYXRhIiwiZ2V0Q29kZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsInNob3dSb29tVmlldyIsImRhdGEiLCJyb29tSW5mbyIsIkpTT04iLCJwYXJzZSIsInRvU3RyaW5nIiwiUm9vbSIsImdldEhvc3QiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsInBpY2tUZXh0Q29sb3JCYXNlZE9uQmdDb2xvckFkdmFuY2VkIiwiaW5uZXJIVE1MIiwidXBkYXRlUm9vbUxpc3QiLCJyZWFkeVBsYXllckNvdW50IiwibWF4UGxheWVyQ291bnQiLCJzZXRQbGF5ZXJzIiwic2V0SG9zdCIsInNldE1heFNpemUiLCJPYmplY3QiLCJrZXlzIiwiZ2V0UGxheWVycyIsImdldE1heFNpemUiLCJ2YWx1ZXMiLCJmb3JFYWNoIiwicGxheWVyIiwicGxheWVySXRlbSIsImNyZWF0ZUVsZW1lbnQiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJhcHBlbmRDaGlsZCIsImZpbHRlciIsInAiLCJmbG9vciIsInNob3dFcnJvckFuaW1hdGlvbiIsInNldFRpbWVvdXQiLCJ1cGRhdGVDb2xvclBpY2tlciIsInVwZGF0ZVBsYXllckNvbG9yIiwiYmdDb2xvciIsImxpZ2h0Q29sb3IiLCJkYXJrQ29sb3IiLCJjaGFyQXQiLCJzdWJzdHJpbmciLCJjIiwicGFyc2VJbnQiLCJtYXAiLCJjb2wiLCJwb3ciLCJzd2l0Y2hHYW1lVmlldyIsInN0YXRlIiwic2V0R2FtZVN0YXRlIiwidXBkYXRlQ2FudmFzU2l6ZSIsIm9ubG9hZCIsInN0YXJ0R2FtZSIsInNlbmRTdGFydENvbW1hbmQiLCJwb3NpdGlvbiIsImVtaXRJbnRlcnZhbCIsInNpemUiLCJzcGVlZCIsInNoYXBlIiwiY2FudmFzQ3R4IiwiZmFkZUNvbG9yIiwiZmFkZVNpemUiLCJhZ2UiLCJlbWl0VGltZU1pbGxpcyIsImFsaXZlUGFydGljbGVzIiwidGlja3MiLCJlbWl0VGltZSIsInBhcnRpY2xlTWF4QWdlIiwidGljayIsImR0IiwicHVzaCIsImdldFJhbmRvbURpcmVjdGlvbiIsInBhcnRpY2xlIiwidmVsb2NpdHkiLCJjb2xvckZhZGVBbW91bnQiLCJhIiwic2l6ZUZhZGVBbW91bnQiLCJtdWx0aXBseUJ5U2NhbGFyIiwiciIsImciLCJiIiwiZmlsbFJlY3QiLCJyYW5kb20iLCJoZXhUb1JnYiIsImhleCIsInJlc3VsdCIsImV4ZWMiLCJzdGFydFBvcyIsInNlZ21lbnRzIiwidHVyblJhZGl1cyIsImVtaXR0ZXIiLCJhZGRTZWdtZW50Iiwic2VnbWVudCIsInNsaWNlIiwicG9wIiwiaW5kZXgiLCJoZWFkIiwia2lsbCIsImNvbnNvbGUiLCJsb2ciLCJ1cGRhdGVFbWl0dGVyIiwicmVwbGFjZSIsInRvSlNPTiIsImNvZGUiLCJob3N0IiwicGxheWVycyIsIm1heFNpemUiLCJ1bmRlZmluZWQiLCJhZGRQbGF5ZXIiLCJuZXdTaXplIiwibmV3R2FtZVN0YXRlIiwiZ2FtZVN0YXRlIiwiZ2V0R2FtZVN0YXRlIiwic29ja2V0IiwicmVhZHlTdGF0ZSIsIldlYlNvY2tldCIsIk9QRU4iLCJzZW5kIiwic3RyaW5naWZ5IiwidHlwZSIsImVycm9yIiwicm9vbUNvZGUiLCJwcmVzc2VkIiwibG9jYXRpb24iLCJob3N0bmFtZSIsIm9ub3BlbiIsIm9ubWVzc2FnZSIsInVwZGF0ZUdhbWVTdGF0ZSIsImFsZXJ0IiwibWVzc2FnZSIsIm9uY2xvc2UiLCJvbmVycm9yIiwiZnBzQ291bnRlciIsInRvcCIsImxlZnQiLCJib2R5IiwiZnBzIiwiZ2FtZUNhbnZhcyIsImdhbWVDYW52YXNDdHgiLCJnZXRDb250ZXh0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZnJhbWVDb3VudCIsImxhc3RUaW1lIiwicGVyZm9ybWFuY2UiLCJub3ciLCJpbml0aWFsaXplZCIsInNuYWtlSGVhZHMiLCJuZXdIZWFkRGF0YSIsImxhc3RTZWdtZW50IiwiZW5kUG9zIiwic25ha2VUb1VwZGF0ZSIsImlzTmV3VGhpc1RpY2siLCJzZWdtZW50VHlwZSIsImhlYWREYXRhIiwicG9zIiwiY3VycmVudFRpbWUiLCJ0aW1lRGlmZiIsInJvdW5kIiwiY2FsY3VsYXRlRlBTIiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwicHJlY2lzaW9uIiwiQWJzdHJhY3RWZWN0b3IiLCJjdG9yIiwicHJvdG90eXBlIiwic2V0QXhlcyIsImdldFgiLCJzZXRYIiwiZ2V0WSIsInNldFkiLCJ0b0FycmF5IiwidG9PYmplY3QiLCJ2ZWMiLCJzdWJ0cmFjdCIsImVxdWFscyIsIm11bHRpcGx5QnlWZWN0b3IiLCJtdWxWIiwiZGl2aWRlQnlWZWN0b3IiLCJkaXZWIiwidiIsIm4iLCJtdWxTIiwiZGl2aWRlQnlTY2FsYXIiLCJkaXZTIiwibm9ybWFsaXNlIiwibWFnbml0dWRlIiwibm9ybWFsaXplIiwidW5pdCIsImxlbmd0aFNxIiwiZG90IiwiY3Jvc3MiLCJyZXZlcnNlIiwiYWJzIiwiemVybyIsImRpc3RhbmNlIiwicm90YXRlIiwicmFkcyIsIm94Iiwib3kiLCJleHRlbmRTdGF0aWNzIiwiX19leHRlbmRzIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsImQiLCJoYXNPd25Qcm9wZXJ0eSIsIl9fIiwiY29uc3RydWN0b3IiLCJjcmVhdGUiLCJBcnJheVZlY3RvciIsIl9zdXBlciIsIl90aGlzIiwiY2FsbCIsImF4ZXMiLCJnZXQiLCJzZXQiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwiRmxvYXQzMlZlY3RvciIsIkZsb2F0MzJBcnJheSIsIl9fZXhwb3J0IiwibSIsIl94IiwiX3kiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImRlZmluaXRpb24iLCJvIiwib2JqIiwicHJvcCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIl0sInNvdXJjZVJvb3QiOiIifQ==
/*! For license information please see login.js.LICENSE.txt */
(()=>{"use strict";var e={"./src/MenuManager/login.ts":(e,t,o)=>{o.r(t),o.d(t,{handleReadyState:()=>O,handleRoomAction:()=>S,showErrorAnimation:()=>E,showRoomView:()=>p,updateButton:()=>g,updateRoomList:()=>b});var n=o("./src/WebSocketClient/websocket.ts"),r=document.getElementById("roomCodeInput"),a=document.getElementById("usernameInput"),s=document.getElementById("joinButton"),c=document.getElementById("readyButton"),i=document.getElementById("login-div"),d=document.getElementById("room-div"),l=document.getElementById("room-users-list"),u=document.getElementById("room-title"),m=document.getElementById("player-count"),y=!1;function g(){""==a.value.trim()?s.disabled=!0:s.disabled=!1,5==r.value.trim().length?s.textContent="JOIN ROOM":s.textContent="CREATE ROOM"}function S(){"CREATE ROOM"===s.innerText?(0,n.createRoom)(a.value):(0,n.joinRoom)(r.value.toUpperCase(),a.value)}function O(){y=!y,(0,n.setReadyState)(a.value,r.value,y),y?(c.classList.remove("red-button"),c.classList.add("green-button")):(c.classList.add("red-button"),c.classList.remove("green-button"))}function p(e){var t=JSON.parse(e.toString());i.classList.add("display-none"),d.classList.add("display-flex"),r.value=t.room.code,u.innerHTML="WELCOME TO<br>".concat(t.room.code),b(e)}function b(e){var t=JSON.parse(e.toString()),o=t.room.players;m.innerHTML="".concat(o.length,"/").concat(t.room.maxSize),l.innerHTML="",o.forEach((function(e){var t=document.createElement("li");t.textContent=e.username+(e.isReady?" ðŸŸ¢":" ðŸ”´"),l.appendChild(t)}))}function E(){s.classList.add("red-button"),s.classList.add("wiggle"),setTimeout((function(){s.classList.remove("red-button"),s.classList.remove("wiggle")}),600)}window.updateButton=g,window.handleRoomAction=S,window.handleReadyState=O},"./src/WebSocketClient/websocket.ts":(e,t,o)=>{o.r(t),o.d(t,{createRoom:()=>a,getReadyState:()=>i,joinRoom:()=>s,setReadyState:()=>c});var n,r=o("./src/MenuManager/login.ts");function a(e){n&&n.readyState===WebSocket.OPEN?n.send(JSON.stringify({type:"CREATE_ROOM",username:e})):console.error("WebSocket connection is not open")}function s(e,t){n&&n.readyState===WebSocket.OPEN?n.send(JSON.stringify({type:"JOIN_ROOM",roomCode:e,username:t})):console.error("WebSocket connection is not open")}function c(e,t,o){n&&n.readyState===WebSocket.OPEN?n.send(JSON.stringify({type:"SET_READY",username:e,roomCode:t,readyState:o})):console.error("WebSocket connection is not open")}function i(e){n&&n.readyState===WebSocket.OPEN?n.send(JSON.stringify({type:"GET_READY",username:e})):console.error("WebSocket connection is not open")}(n=new WebSocket("ws://".concat(window.location.hostname,":8080"))).onopen=function(){console.log("WebSocket connection established")},n.onmessage=function(e){var t=JSON.parse(e.data);switch(console.log("Message from server:",t),t.type){case"JOINED_ROOM":(0,r.showRoomView)(e.data);break;case"ROOM_DOES_NOT_EXIST":(0,r.showErrorAnimation)();break;case"ROOM_DATA":(0,r.updateRoomList)(e.data);break;case"ERROR":alert("Error: ".concat(t.message))}},n.onclose=function(){console.log("WebSocket connection closed")},n.onerror=function(e){console.error("WebSocket error:",e)}}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,o),a.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o("./src/MenuManager/login.ts")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VSxFQUFFRixFQUFZQyxLQUFTVCxFQUFvQlUsRUFBRU4sRUFBU0ssSUFDNUVFLE9BQU9DLGVBQWVSLEVBQVNLLEVBQUssQ0FBRUksWUFBWSxFQUFNQyxJQUFLTixFQUFXQyxJQUUxRSxFQ05EVCxFQUFvQlUsRUFBSSxDQUFDSyxFQUFLQyxJQUFVTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHQ0NsRmhCLEVBQW9Cb0IsRUFBS2hCLElBQ0gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNYLE9BQU9DLGVBQWVSLEVBQVNpQixPQUFPQyxZQUFhLENBQUU3RSxNQUFPLFdBRTdEa0UsT0FBT0MsZUFBZVIsRUFBUyxhQUFjLENBQUUzRCxPQUFPLEdBQU8sRUNGcEN1RCxFQUFvQiIsInNvdXJjZXMiOlsid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvTWVudU1hbmFnZXIvbG9naW4udHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9XZWJTb2NrZXRDbGllbnQvd2Vic29ja2V0LnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3NuYWtlX2dhbWUvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVSb29tLCBnZXRSZWFkeVN0YXRlLCBqb2luUm9vbSwgc2V0UmVhZHlTdGF0ZSB9IGZyb20gXCIuLi9XZWJTb2NrZXRDbGllbnQvd2Vic29ja2V0XCI7XHJcblxyXG5jb25zdCByb29tQ29kZUlucHV0ID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb29tQ29kZUlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudCk7XHJcbmNvbnN0IHVzZXJuYW1lSW5wdXQgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJuYW1lSW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50KTtcclxuY29uc3Qgcm9vbUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqb2luQnV0dG9uJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbmNvbnN0IHJlYWR5QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlYWR5QnV0dG9uJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbmNvbnN0IGxvZ2luRGl2PSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW4tZGl2JykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbmNvbnN0IHJvb21EaXY9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb29tLWRpdicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5jb25zdCByb29tVXNlcnNMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb20tdXNlcnMtbGlzdCcpIGFzIEhUTUxVTGlzdEVsZW1lbnQ7XHJcbmNvbnN0IHJvb21UaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb29tLXRpdGxlJykgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcbmNvbnN0IHBsYXllckNvdW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXllci1jb3VudCcpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG5sZXQgaXNSZWFkeSA9IGZhbHNlO1xyXG4vLyBzcmMvbG9naW4udHNcclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUJ1dHRvbigpIHtcclxuICAgIFxyXG5cclxuICAgIGlmICh1c2VybmFtZUlucHV0LnZhbHVlLnRyaW0oKSA9PSAnJykge1xyXG4gICAgICAgIHJvb21CdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByb29tQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJvb21Db2RlSW5wdXQudmFsdWUudHJpbSgpLmxlbmd0aCA9PSA1KSB7XHJcbiAgICAgICAgcm9vbUJ1dHRvbi50ZXh0Q29udGVudCA9ICdKT0lOIFJPT00nO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByb29tQnV0dG9uLnRleHRDb250ZW50ID0gJ0NSRUFURSBST09NJztcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVJvb21BY3Rpb24oKSB7XHJcbiAgICBpZiAocm9vbUJ1dHRvbi5pbm5lclRleHQgPT09ICdDUkVBVEUgUk9PTScpIHtcclxuICAgICAgICBjcmVhdGVSb29tKHVzZXJuYW1lSW5wdXQudmFsdWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBcclxuICAgICAgICBqb2luUm9vbShyb29tQ29kZUlucHV0LnZhbHVlLnRvVXBwZXJDYXNlKCksIHVzZXJuYW1lSW5wdXQudmFsdWUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlUmVhZHlTdGF0ZSgpIHtcclxuICAgIGlzUmVhZHkgPSAhaXNSZWFkeTtcclxuICAgIHNldFJlYWR5U3RhdGUodXNlcm5hbWVJbnB1dC52YWx1ZSwgcm9vbUNvZGVJbnB1dC52YWx1ZSwgaXNSZWFkeSlcclxuICAgIGlmKGlzUmVhZHkpe1xyXG4gICAgICAgIHJlYWR5QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3JlZC1idXR0b24nKTtcclxuICAgICAgICByZWFkeUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdncmVlbi1idXR0b24nKTtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICAgcmVhZHlCdXR0b24uY2xhc3NMaXN0LmFkZCgncmVkLWJ1dHRvbicpO1xyXG4gICAgICAgIHJlYWR5QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2dyZWVuLWJ1dHRvbicpO1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzaG93Um9vbVZpZXcoZGF0YTogSlNPTil7XHJcbiAgICBcclxuICAgIGxldCByb29tSW5mbyA9IEpTT04ucGFyc2UoZGF0YS50b1N0cmluZygpKTtcclxuICAgIGxvZ2luRGl2LmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgcm9vbURpdi5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LWZsZXgnKTtcclxuICAgIHJvb21Db2RlSW5wdXQudmFsdWUgPSByb29tSW5mb1sncm9vbSddWydjb2RlJ107XHJcbiAgICByb29tVGl0bGUuaW5uZXJIVE1MICA9IGBXRUxDT01FIFRPPGJyPiR7cm9vbUluZm9bJ3Jvb20nXVsnY29kZSddfWA7XHJcbiAgICB1cGRhdGVSb29tTGlzdChkYXRhKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVJvb21MaXN0KGRhdGE6IEpTT04pe1xyXG4gICAgbGV0IHJvb21JbmZvID0gSlNPTi5wYXJzZShkYXRhLnRvU3RyaW5nKCkpO1xyXG4gICAgbGV0IHBsYXllcnMgPSByb29tSW5mb1sncm9vbSddWydwbGF5ZXJzJ107XHJcbiAgICBwbGF5ZXJDb3VudC5pbm5lckhUTUwgPSBgJHtwbGF5ZXJzLmxlbmd0aH0vJHtyb29tSW5mb1sncm9vbSddWydtYXhTaXplJ119YDtcclxuICAgIHJvb21Vc2Vyc0xpc3QuaW5uZXJIVE1MID0gJyc7XHJcblxyXG4gICAgcGxheWVycy5mb3JFYWNoKChwbGF5ZXI6IHsgdXNlcm5hbWU6IHN0cmluZyB8IG51bWJlcjsgaXNSZWFkeTogYm9vbGVhbjsgfSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBsYXllckl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gICAgICAgIHBsYXllckl0ZW0udGV4dENvbnRlbnQgPSBwbGF5ZXIudXNlcm5hbWUgKyAocGxheWVyLmlzUmVhZHkgPyAnIPCfn6InIDogJyDwn5S0Jyk7XHJcbiAgICAgICAgcm9vbVVzZXJzTGlzdC5hcHBlbmRDaGlsZChwbGF5ZXJJdGVtKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2hvd0Vycm9yQW5pbWF0aW9uKCkge1xyXG4gICAgcm9vbUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdyZWQtYnV0dG9uJyk7XHJcbiAgICByb29tQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3dpZ2dsZScpO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICByb29tQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3JlZC1idXR0b24nKTtcclxuICAgIHJvb21CdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnd2lnZ2xlJyk7XHJcbiAgICB9LCA2MDApXHJcbn1cclxuXHJcbih3aW5kb3cgYXMgYW55KS51cGRhdGVCdXR0b24gPSB1cGRhdGVCdXR0b247XHJcbih3aW5kb3cgYXMgYW55KS5oYW5kbGVSb29tQWN0aW9uID0gaGFuZGxlUm9vbUFjdGlvbjtcclxuKHdpbmRvdyBhcyBhbnkpLmhhbmRsZVJlYWR5U3RhdGUgPSBoYW5kbGVSZWFkeVN0YXRlOyIsImltcG9ydCB7IHNob3dFcnJvckFuaW1hdGlvbiwgc2hvd1Jvb21WaWV3LCB1cGRhdGVSb29tTGlzdCB9IGZyb20gXCIuLi9NZW51TWFuYWdlci9sb2dpblwiO1xyXG5cclxubGV0IHNvY2tldDogV2ViU29ja2V0O1xyXG5cclxuZnVuY3Rpb24gaW5pdFdlYlNvY2tldCgpIHtcclxuICAgIHNvY2tldCA9IG5ldyBXZWJTb2NrZXQoYHdzOi8vJHt3aW5kb3cubG9jYXRpb24uaG9zdG5hbWV9OjgwODBgKTtcclxuICAgIFxyXG4gICAgc29ja2V0Lm9ub3BlbiA9ICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnV2ViU29ja2V0IGNvbm5lY3Rpb24gZXN0YWJsaXNoZWQnKTtcclxuICAgIH07XHJcblxyXG4gICAgc29ja2V0Lm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdNZXNzYWdlIGZyb20gc2VydmVyOicsIGRhdGEpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ0pPSU5FRF9ST09NJzpcclxuICAgICAgICAgICAgICAgIHNob3dSb29tVmlldyhldmVudC5kYXRhKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdST09NX0RPRVNfTk9UX0VYSVNUJzpcclxuICAgICAgICAgICAgICAgIHNob3dFcnJvckFuaW1hdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ1JPT01fREFUQSc6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVSb29tTGlzdChldmVudC5kYXRhKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdFUlJPUic6XHJcbiAgICAgICAgICAgICAgICBhbGVydChgRXJyb3I6ICR7ZGF0YS5tZXNzYWdlfWApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgc29ja2V0Lm9uY2xvc2UgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBjb25uZWN0aW9uIGNsb3NlZCcpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgc29ja2V0Lm9uZXJyb3IgPSAoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdXZWJTb2NrZXQgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJvb20odXNlcm5hbWU6IHN0cmluZykge1xyXG4gICAgaWYgKHNvY2tldCAmJiBzb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcclxuICAgICAgICBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGU6ICdDUkVBVEVfUk9PTScsIHVzZXJuYW1lOiB1c2VybmFtZSB9KSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1dlYlNvY2tldCBjb25uZWN0aW9uIGlzIG5vdCBvcGVuJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBqb2luUm9vbShyb29tQ29kZTogc3RyaW5nLCB1c2VybmFtZTogc3RyaW5nKSB7XHJcbiAgICBpZiAoc29ja2V0ICYmIHNvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xyXG4gICAgICAgIHNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogJ0pPSU5fUk9PTScsIHJvb21Db2RlOiByb29tQ29kZSwgdXNlcm5hbWU6IHVzZXJuYW1lIH0pKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignV2ViU29ja2V0IGNvbm5lY3Rpb24gaXMgbm90IG9wZW4nKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldFJlYWR5U3RhdGUodXNlcm5hbWU6IHN0cmluZywgcm9vbUNvZGU6IHN0cmluZywgcmVhZHlTdGF0ZTogYm9vbGVhbikge1xyXG4gICAgaWYgKHNvY2tldCAmJiBzb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcclxuICAgICAgICBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGU6ICdTRVRfUkVBRFknLCB1c2VybmFtZTogdXNlcm5hbWUsIHJvb21Db2RlOiByb29tQ29kZSwgcmVhZHlTdGF0ZTogcmVhZHlTdGF0ZX0pKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignV2ViU29ja2V0IGNvbm5lY3Rpb24gaXMgbm90IG9wZW4nKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlYWR5U3RhdGUodXNlcm5hbWU6IHN0cmluZykge1xyXG4gICAgaWYgKHNvY2tldCAmJiBzb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcclxuICAgICAgICBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGU6ICdHRVRfUkVBRFknLCB1c2VybmFtZTogdXNlcm5hbWUgfSkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdXZWJTb2NrZXQgY29ubmVjdGlvbiBpcyBub3Qgb3BlbicpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuaW5pdFdlYlNvY2tldCgpO1xyXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL01lbnVNYW5hZ2VyL2xvZ2luLnRzXCIpO1xuIl0sIm5hbWVzIjpbInJvb21Db2RlSW5wdXQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidXNlcm5hbWVJbnB1dCIsInJvb21CdXR0b24iLCJyZWFkeUJ1dHRvbiIsImxvZ2luRGl2Iiwicm9vbURpdiIsInJvb21Vc2Vyc0xpc3QiLCJyb29tVGl0bGUiLCJwbGF5ZXJDb3VudCIsImlzUmVhZHkiLCJ1cGRhdGVCdXR0b24iLCJ2YWx1ZSIsInRyaW0iLCJkaXNhYmxlZCIsImxlbmd0aCIsInRleHRDb250ZW50IiwiaGFuZGxlUm9vbUFjdGlvbiIsImlubmVyVGV4dCIsImNyZWF0ZVJvb20iLCJqb2luUm9vbSIsInRvVXBwZXJDYXNlIiwiaGFuZGxlUmVhZHlTdGF0ZSIsInNldFJlYWR5U3RhdGUiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJzaG93Um9vbVZpZXciLCJkYXRhIiwicm9vbUluZm8iLCJKU09OIiwicGFyc2UiLCJ0b1N0cmluZyIsImlubmVySFRNTCIsInVwZGF0ZVJvb21MaXN0IiwicGxheWVycyIsImZvckVhY2giLCJwbGF5ZXIiLCJwbGF5ZXJJdGVtIiwiY3JlYXRlRWxlbWVudCIsInVzZXJuYW1lIiwiYXBwZW5kQ2hpbGQiLCJzaG93RXJyb3JBbmltYXRpb24iLCJzZXRUaW1lb3V0Iiwid2luZG93Iiwic29ja2V0IiwicmVhZHlTdGF0ZSIsIldlYlNvY2tldCIsIk9QRU4iLCJzZW5kIiwic3RyaW5naWZ5IiwidHlwZSIsImNvbnNvbGUiLCJlcnJvciIsInJvb21Db2RlIiwiZ2V0UmVhZHlTdGF0ZSIsImxvY2F0aW9uIiwiaG9zdG5hbWUiLCJvbm9wZW4iLCJsb2ciLCJvbm1lc3NhZ2UiLCJldmVudCIsImFsZXJ0IiwibWVzc2FnZSIsIm9uY2xvc2UiLCJvbmVycm9yIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIl0sInNvdXJjZVJvb3QiOiIifQ==
/*! For license information please see game.js.LICENSE.txt */
(()=>{"use strict";var t={"./src/ArcSegment.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>c});var o,i=n("./src/Drawer.ts"),r=n("./node_modules/vector2d/src/Vec2D.js"),s=n("./src/Segment.ts"),a=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const c=function(t){function e(e,n,o,i,r,s){var a=t.call(this)||this;return a.center=e,a.radius=n,a.startAngle=o,a.endAngle=i,a.counterClockwise=r,a.isCollidable=s,a}return a(e,t),e.prototype.draw=function(t,e){t.lineCap="round",t.strokeStyle=e,1==this.isCollidable&&(t.beginPath(),t.arc(this.center.x,this.center.y,this.radius,this.startAngle,this.endAngle,this.counterClockwise),t.stroke(),t.closePath())},e.prototype.drawDebug=function(t,e){var n=this.counterClockwise?-Math.PI:Math.PI;n+=this.endAngle,t.lineCap="round",(0,i.drawDot)(this.center.x,this.center.y,5,"#000000"),(0,i.drawArrow)(t,new r.Vector(this.endPoint.x,this.endPoint.y),new r.Vector(this.endPoint.x+this.radius*Math.cos(n),this.endPoint.y+this.radius*Math.sin(n))),(0,i.drawArc)(this.center.x,this.center.y,this.radius,0,0,!1)},Object.defineProperty(e.prototype,"endPoint",{get:function(){return new r.Vector(this.center.x+this.radius*Math.cos(this.endAngle),this.center.y+this.radius*Math.sin(this.endAngle))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"penpendicularEndAngle",{get:function(){return this.isCounterClockwise?this.endAngle-Math.PI/2:this.endAngle+Math.PI/2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"penpendicularStartAngle",{get:function(){return this.isCounterClockwise?this.startAngle-Math.PI/2:this.startAngle+Math.PI/2},enumerable:!1,configurable:!0}),e.prototype.isCounterClockwise=function(){return this.counterClockwise},e.prototype.getContinuingSegment=function(t){return new e(this.center.clone().add(t),this.radius,this.endAngle,this.endAngle,this.counterClockwise,this.isCollidable)},e}(s.default)},"./src/Drawer.ts":(t,e,n)=>{n.r(e),n.d(e,{drawArc:()=>a,drawArrow:()=>c,drawDot:()=>s,drawGrid:()=>r});var o=n("./node_modules/vector2d/src/Vec2D.js"),i=n("./src/index.ts");function r(){i.backgroundCanvasCtx.clearRect(0,0,i.backgroundCanvas.width,i.backgroundCanvas.height),i.backgroundCanvasCtx.strokeStyle="rgba(0, 0, 0, 0.3)",i.backgroundCanvasCtx.lineWidth=2;for(var t=i.gridSize;t<i.backgroundCanvas.width;t+=i.gridSize)i.backgroundCanvasCtx.beginPath(),i.backgroundCanvasCtx.moveTo(t,0),i.backgroundCanvasCtx.lineTo(t,i.backgroundCanvas.height),i.backgroundCanvasCtx.stroke();for(var e=i.gridSize;e<i.backgroundCanvas.height;e+=i.gridSize)i.backgroundCanvasCtx.beginPath(),i.backgroundCanvasCtx.moveTo(0,e),i.backgroundCanvasCtx.lineTo(i.backgroundCanvas.width,e),i.backgroundCanvasCtx.stroke()}function s(t,e,n,o){i.backgroundCanvasCtx.beginPath(),i.backgroundCanvasCtx.arc(t,e,n,0,2*Math.PI,!1),i.backgroundCanvasCtx.fillStyle=o,i.backgroundCanvasCtx.fill(),i.backgroundCanvasCtx.closePath()}function a(t,e,n,o,r,s){i.backgroundCanvasCtx.lineCap="round",i.backgroundCanvasCtx.strokeStyle="#3466aa",i.backgroundCanvasCtx.beginPath(),i.backgroundCanvasCtx.arc(t,e,n,0,2*Math.PI,s),i.backgroundCanvasCtx.lineWidth=5,i.backgroundCanvasCtx.stroke(),i.backgroundCanvasCtx.closePath()}function c(t,e,n){if(e.x!=n.x&&e.y!=n.y){var i=Math.atan2(n.y-e.y,n.x-e.x),r=10,s=new o.Vector(n.x,n.y);s.x-=11.5*Math.cos(i),s.y-=11.5*Math.sin(i),t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(s.x,s.y),t.strokeStyle="#bbbbbb",t.lineWidth=10,t.stroke(),t.beginPath(),t.moveTo(s.x,s.y),t.lineTo(s.x-r*Math.cos(i-Math.PI/7),s.y-r*Math.sin(i-Math.PI/7)),t.lineTo(s.x-r*Math.cos(i+Math.PI/7),s.y-r*Math.sin(i+Math.PI/7)),t.lineTo(s.x,s.y),t.lineTo(s.x-r*Math.cos(i-Math.PI/7),s.y-r*Math.sin(i-Math.PI/7)),t.strokeStyle="#bbbbbb",t.lineWidth=10,t.stroke(),t.fillStyle="#bbbbbb",t.fill(),t.closePath()}}},"./src/InputManager.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>i});var o=n("./src/WebSocketClient/websocket.ts");const i=function(){function t(t,e,n){this.keyMap={},window.addEventListener("keydown",this.onKeyDown.bind(this)),window.addEventListener("keyup",this.onKeyUp.bind(this)),this.snake=t,this.leftKey=e,this.rightKey=n}return t.prototype.onKeyDown=function(t){if(this.snake.isAlive){var e=t.key.toUpperCase();if(e==this.leftKey||e==this.rightKey){if(this.keyMap[this.rightKey]&&e==this.leftKey)this.keyMap[this.rightKey]=!1;else if(this.keyMap[this.leftKey]&&e==this.rightKey)this.keyMap[this.leftKey]=!1;else if(this.keyMap[e])return;this.keyMap[e]=!0,this.snake.head.endPoint,(0,o.sendKeyEventToServer)(e==this.rightKey?"right":"left",!0)}}},t.prototype.onKeyUp=function(t){if(this.snake.isAlive){var e=t.key.toUpperCase();this.keyMap[e]&&(this.keyMap[e]=!1,(0,o.sendKeyEventToServer)(e==this.rightKey?"right":"left",!1))}},t.prototype.dispose=function(){window.removeEventListener("keydown",this.onKeyDown.bind(this)),window.removeEventListener("keyup",this.onKeyUp.bind(this))},t}()},"./src/LineSegment.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var o,i=n("./src/Segment.ts"),r=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const s=function(t){function e(e,n,o,i){var r=t.call(this)||this;return r.isCollidable=!0,r.startPoint=e,r.endPoint=n,r.isCollidable=o,r.endAngle=i,r}return r(e,t),e.prototype.draw=function(t,e){t.strokeStyle=e,t.lineCap="round",1==this.isCollidable&&(t.beginPath(),t.moveTo(this.startPoint.x,this.startPoint.y),t.lineTo(this.endPoint.x,this.endPoint.y),t.stroke(),t.closePath())},e.prototype.calcEndAngle=function(){return Math.atan((this.endPoint.y-this.startPoint.y)/(this.endPoint.x-this.startPoint.x))},Object.defineProperty(e.prototype,"length",{get:function(){return Math.sqrt(Math.pow(this.startPoint.x-this.endPoint.x,2)+Math.pow(this.startPoint.y-this.endPoint.y,2))},enumerable:!1,configurable:!0}),e.prototype.getContinuingSegment=function(t){var n=this.endPoint.clone().add(t);return new e(n,n,this.isCollidable,this.endAngle)},e}(i.default)},"./src/MenuManager/login.ts":(t,e,n)=>{n.r(e),n.d(e,{currentPlayer:()=>a,currentRoom:()=>s,handleReadyState:()=>P,handleRoomAction:()=>w,showErrorAnimation:()=>M,showRoomView:()=>S,switchGameView:()=>E,updateButton:()=>C,updateColorPicker:()=>_,updatePlayerColor:()=>O,updateRoomList:()=>k});var o=n("./src/ViewModels/Player.ts"),i=n("./src/ViewModels/Room.ts"),r=n("./src/WebSocketClient/websocket.ts"),s=null,a=null,c=document.getElementById("roomCodeInput"),l=document.getElementById("usernameInput"),d=document.getElementById("joinButton"),u=document.getElementById("readyButton"),h=document.getElementById("login-div"),y=document.getElementById("room-div"),p=document.getElementById("game-canvas-container"),f=document.getElementById("color-picker"),g=document.getElementById("room-users-list"),m=document.getElementById("room-code"),v=document.getElementById("player-count"),b=document.getElementById("color-picker-container"),x=document.getElementById("start-progress-bar");function C(){""==l.value.trim()?d.disabled=!0:d.disabled=!1,5==c.value.trim().length?d.textContent="JOIN ROOM":d.textContent="CREATE ROOM"}function w(){var t=l.value;t&&(a=new o.Player(t),"CREATE ROOM"===d.innerText?(0,r.createRoom)(l.value):(0,r.joinRoom)(c.value.toUpperCase(),l.value))}function P(){a.isReady=!a.isReady,(0,r.setPlayerData)(a,s.getCode()),a.isReady?(u.classList.remove("red-button"),u.classList.add("green-button")):(u.classList.add("red-button"),u.classList.remove("green-button"))}function S(t){var e=JSON.parse(t.toString());s=new i.Room(e.room.code,e.room.host,e.room.players,e.room.maxSize),a.username==s.getHost().username&&document.getElementById("startButton").classList.remove("display-none"),b.style.backgroundColor=a.color,f.value=a.color,document.getElementById("color-label").style.color=A(f.value,"#FFFFFF","#000000"),h.classList.add("display-none"),y.classList.add("display-flex"),c.value=s.getCode(),m.innerHTML=s.getCode(),(0,r.setPlayerData)(a,s.getCode()),k(t)}function k(t){var e,n,o=JSON.parse(t.toString());s.setPlayers(o.room.players),s.setHost(o.room.host),s.setMaxSize(o.room.maxSize),v.innerHTML="".concat(Object.keys(s.getPlayers()).length,"/").concat(s.getMaxSize()),g.innerHTML="",Object.values(s.getPlayers()).forEach((function(t){var e=document.createElement("li");e.textContent=t.username+"",t.username==s.getHost().username?e.insertAdjacentHTML("afterbegin",'<i class="fa-solid fa-crown" style="color: '.concat(t.color,';"></i>')):e.insertAdjacentHTML("afterbegin",'<i class="fa-solid fa-circle" style="color: '.concat(t.color,'; margin-left: 4px"></i>')),t.isReady?e.insertAdjacentHTML("beforeend",' <i class="fa-solid fa-circle" style="color: #37cb48;"></i>'):e.insertAdjacentHTML("beforeend",' <i class="fa-solid fa-circle" style="color: #cb3737;"></i>'),g.appendChild(e)})),a.username==s.getHost().username&&document.getElementById("startButton").classList.remove("display-none"),e=Object.values(s.getPlayers()).filter((function(t){return t.isReady})).length,0!=(n=s.getMaxSize())&&(x.style.width=Math.floor(e/n*100)+"%")}function M(){d.classList.add("red-button"),d.classList.add("wiggle"),setTimeout((function(){d.classList.remove("red-button"),d.classList.remove("wiggle")}),600)}function _(){b.style.backgroundColor=f.value}function O(){a.color=f.value,document.getElementById("color-label").style.color=A(f.value,"#FFFFFF","#000000"),(0,r.setPlayerData)(a,s.getCode())}function A(t,e,n){var o="#"===t.charAt(0)?t.substring(1,7):t,i=[parseInt(o.substring(0,2),16)/255,parseInt(o.substring(2,4),16)/255,parseInt(o.substring(4,6),16)/255].map((function(t){return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}));return.2126*i[0]+.7152*i[1]+.0722*i[2]>.4?n:e}function E(t){switch(t.state){case 0:s.setGameState(0),h.classList.add("display-none"),y.classList.add("display-none"),y.classList.remove("display-flex"),p.classList.remove("display-none"),p.classList.add("display-flex");break;case 1:s.setGameState(1),h.classList.add("display-none"),y.classList.add("display-flex"),p.classList.add("display-none")}}window.onload=function(){C()},window.updateButton=C,window.handleRoomAction=w,window.handleReadyState=P,window.updateColorPicker=_,window.updatePlayerColor=O,window.startGame=function(){a.username==s.getHost().username&&(0,r.sendStartCommand)(s.getCode())}},"./src/ParticleSystem/Emitter.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var o=n("./src/ParticleSystem/Particle.ts"),i=n("./src/ParticleSystem/ParticleSystemUtils.ts"),r=function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};const s=function(){function t(t,e,n,o,i,r,s,a,c,l,d){void 0===i&&(i="circle"),void 0===a&&(a=!0),void 0===c&&(c=!0),void 0===d&&(d=0),this.aliveParticles=[],this.ticks=0,this.position=t,this.emitTime=e,this.size=n,this.speed=o,this.shape=i,this.color=r,this.canvasCtx=s,this.fadeColor=a,this.fadeSize=c,this.particleMaxAge=l,this.emitTimeMillis=d}return t.prototype.tick=function(t){this.emitTimeMillis+this.particleMaxAge<0||(this.emitTimeMillis-=t,this.ticks%this.emitTime==0&&this.emitTimeMillis>0&&(this.aliveParticles.push(new o.default(this.position.clone(),(0,i.getRandomDirection)(),this.size,this.speed,this.shape,r({},this.color),this.canvasCtx,this.particleMaxAge,this.fadeColor,this.fadeSize)),this.aliveParticles.push(new o.default(this.position.clone(),(0,i.getRandomDirection)(),this.size,this.speed,this.shape,r({},this.color),this.canvasCtx,this.particleMaxAge,this.fadeColor,this.fadeSize)),this.aliveParticles.push(new o.default(this.position.clone(),(0,i.getRandomDirection)(),this.size,this.speed,this.shape,r({},this.color),this.canvasCtx,this.particleMaxAge,this.fadeColor,this.fadeSize))),this.aliveParticles.forEach((function(e){e.tick(t)})),this.aliveParticles=this.aliveParticles.filter((function(t){return t.age>0})),this.ticks++)},t.prototype.draw=function(){this.aliveParticles.forEach((function(t){t.draw()}))},t}()},"./src/ParticleSystem/Particle.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>o});const o=function(){function t(t,e,n,o,i,r,s,a,c,l){void 0===i&&(i="circle"),this.position=t,this.velocity=e,this.size=n,this.speed=o,this.shape=i,this.color=r,this.canvasCtx=s,this.fadeColor=c,this.fadeSize=l,this.age=a,this.colorFadeAmount=this.color.a/this.age,this.sizeFadeAmount=this.size/this.age}return t.prototype.tick=function(t){this.position.add(this.velocity.clone().multiplyByScalar(t*this.speed)),this.fadeColor&&(this.color.a-=this.colorFadeAmount),this.fadeSize&&(this.size-=this.sizeFadeAmount),this.age--},t.prototype.draw=function(){switch(this.canvasCtx.moveTo(this.position.x,this.position.y),this.canvasCtx.fillStyle="rgba(".concat(this.color.r,",").concat(this.color.g,", ").concat(this.color.b,", ").concat(this.color.a,")"),this.canvasCtx.beginPath(),this.shape){case"circle":this.canvasCtx.arc(this.position.x,this.position.y,this.size,0,2*Math.PI),this.canvasCtx.fill();break;case"square":this.canvasCtx.fillRect(this.position.x-this.size,this.position.y-this.size,2*this.size,2*this.size)}this.canvasCtx.closePath()},t}()},"./src/ParticleSystem/ParticleSystemUtils.ts":(t,e,n)=>{n.r(e),n.d(e,{getRandomDirection:()=>i,hexToRgb:()=>r});var o=n("./node_modules/vector2d/src/Vec2D.js");function i(){return new o.Vector(2*Math.random()-1,2*Math.random()-1)}function r(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}},"./src/Segment.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>o});const o=function(){}},"./src/Snake.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>l});var o=n("./node_modules/vector2d/src/Vec2D.js"),i=n("./src/ArcSegment.ts"),r=n("./src/LineSegment.ts"),s=n("./src/ParticleSystem/Emitter.ts"),a=n("./src/ParticleSystem/ParticleSystemUtils.ts"),c=function(){return c=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},c.apply(this,arguments)};const l=function(){function t(t,e,n){this.segments=[],this.isAlive=!0,this.turnRadius=60,this.emitter=null,this.distanceToChangeOfState=10,this.addSegment(t),this.color=e,this.canvasCtx=n}return t.prototype.addSegment=function(t){this.segments.push(t)},Object.defineProperty(t.prototype,"head",{get:function(){return this.segments.slice(-1).pop()},enumerable:!1,configurable:!0}),t.prototype.draw=function(){var t=this;this.canvasCtx.lineWidth=12,this.segments.forEach((function(e,n){e.draw(t.canvasCtx,t.color),t.head==e&&(e instanceof i.default?(t.canvasCtx.beginPath(),t.canvasCtx.arc(e.center.x,e.center.y,e.radius,e.endAngle,e.endAngle,e.isCounterClockwise()),t.canvasCtx.stroke(),t.canvasCtx.closePath()):e instanceof r.default&&(t.canvasCtx.beginPath(),t.canvasCtx.moveTo(e.endPoint.x,e.endPoint.y),t.canvasCtx.lineTo(e.endPoint.x,e.endPoint.y),t.canvasCtx.stroke(),t.canvasCtx.closePath()))}))},t.prototype.kill=function(){console.log("SNAKE DEAD"),this.isAlive=!1,this.emitter=new s.default(this.head.endPoint,1,7,4,"circle",c(c({},(0,a.hexToRgb)(this.color)),{a:1}),this.canvasCtx,!0,!0,70,4)},t.prototype.updateEmitter=function(t){this.emitter&&(this.emitter.tick(t),this.emitter.draw())},t.prototype.checkWalls=function(){var t=this.head;t.endPoint.x<0?this.addSegment(t.getContinuingSegment(new o.Vector(this.canvasCtx.canvas.width,0))):t.endPoint.x>this.canvasCtx.canvas.width&&this.addSegment(t.getContinuingSegment(new o.Vector(-this.canvasCtx.canvas.width,0))),t.endPoint.y<0?this.addSegment(t.getContinuingSegment(new o.Vector(0,this.canvasCtx.canvas.height))):t.endPoint.y>this.canvasCtx.canvas.height&&this.addSegment(t.getContinuingSegment(new o.Vector(0,-this.canvasCtx.canvas.height)))},t}()},"./src/ViewModels/Player.ts":(t,e,n)=>{n.r(e),n.d(e,{Player:()=>o});var o=function(){function t(t,e){void 0===e&&(e=!1),this.username=t,this.isReady=e,this.color="#000000".replace(/0/g,(function(){return(~~(16*Math.random())).toString(16)}))}return t.prototype.toJSON=function(){return{username:this.username,isReady:this.isReady,color:this.color}},t}()},"./src/ViewModels/Room.ts":(t,e,n)=>{n.r(e),n.d(e,{Room:()=>o});var o=function(){function t(t,e,n,o){void 0===o&&(o=5),this.players={},this.code=t,this.host=e,this.maxSize=o,null!=n?this.players=n:this.addPlayer(e)}return t.prototype.addPlayer=function(t){return!(Object.keys(this.players).length>=this.maxSize||(this.players[t.username]=t,0))},t.prototype.getCode=function(){return this.code},t.prototype.getPlayers=function(){return this.players},t.prototype.getHost=function(){return this.host},t.prototype.setHost=function(t){this.host=t},t.prototype.setPlayers=function(t){this.players=t},t.prototype.setMaxSize=function(t){this.maxSize=t},t.prototype.getMaxSize=function(){return this.maxSize},t.prototype.setGameState=function(t){this.gameState=t},t.prototype.getGameState=function(){return this.gameState},t}()},"./src/WebSocketClient/websocket.ts":(t,e,n)=>{n.r(e),n.d(e,{createRoom:()=>s,joinRoom:()=>a,sendKeyEventToServer:()=>l,sendStartCommand:()=>d,setPlayerData:()=>c});var o,i=n("./src/index.ts"),r=n("./src/MenuManager/login.ts");function s(t){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"CREATE_ROOM",username:t})):console.error("WebSocket connection is not open")}function a(t,e){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"JOIN_ROOM",roomCode:t,username:e})):console.error("WebSocket connection is not open")}function c(t,e){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"PLAYER_DATA",player:t,roomCode:e})):console.error("WebSocket connection is not open")}function l(t,e){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"KEY_EVENT",player:r.currentPlayer,key:t,pressed:e})):console.error("WebSocket connection is not open")}function d(t){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"BEGIN_GAME",roomCode:t})):console.error("WebSocket connection is not open")}(o=new WebSocket("ws://".concat(window.location.hostname,":8080"))).onopen=function(){console.log("WebSocket connection established")},o.onmessage=function(t){var e=JSON.parse(t.data);switch(console.log("Message from server:",e),e.type){case"JOINED_ROOM":(0,r.showRoomView)(t.data);break;case"ROOM_DOES_NOT_EXIST":(0,r.showErrorAnimation)();break;case"ROOM_DATA":(0,r.updateRoomList)(t.data);break;case"GAME_STATE":(0,r.switchGameView)(e);break;case"GAMEPLAY_DATA":(0,i.updateGameState)(e);break;case"ERROR":alert("Error: ".concat(e.message))}},o.onclose=function(){console.log("WebSocket connection closed")},o.onerror=function(t){console.error("WebSocket error:",t)}},"./src/index.ts":(t,e,n)=>{n.r(e),n.d(e,{backgroundCanvas:()=>y,backgroundCanvasCtx:()=>p,fps:()=>d,gameCanvas:()=>u,gameCanvasCtx:()=>h,gridSize:()=>f,updateGameState:()=>b});var o=n("./node_modules/vector2d/src/Vec2D.js"),i=n("./src/Drawer.ts"),r=n("./src/InputManager.ts"),s=n("./src/LineSegment.ts"),a=n("./src/Snake.ts"),c=n("./src/MenuManager/login.ts"),l=document.createElement("div");l.style.position="absolute",l.style.top="10px",l.style.left="10px",l.style.color="black",document.body.appendChild(l);var d=60,u=document.getElementById("game-canvas"),h=u.getContext("2d"),y=document.getElementById("background-canvas"),p=y.getContext("2d");y.width=y.getBoundingClientRect().width,y.height=y.getBoundingClientRect().height,u.width=u.getBoundingClientRect().width,u.height=u.getBoundingClientRect().height;var f=60;var g=0,m=performance.now()/10;window.addEventListener("resize",(function(){u.width=u.getBoundingClientRect().width,u.height=u.getBoundingClientRect().height,y.width=y.getBoundingClientRect().width,y.height=y.getBoundingClientRect().height,(0,i.drawGrid)()})),(0,i.drawGrid)();var v=!1;function b(t){v?t.snakeHeads.forEach((function(t){var e=t.lastSegment,n=t.username,i=e.endPoint,r=c.currentRoom.getPlayers()[n].snake;if(e.isNewThisTick)if("LineSegment"==t.segmentType){var a=e.startPoint;r.addSegment(new s.default(new o.Vector(a.x,a.y),new o.Vector(i.x,i.y),e.isCollidable,e.endAngle))}else t.segmentType;else a=e.startPoint,r.segments[r.segments.length-1]=new s.default(new o.Vector(a.x,a.y),new o.Vector(i.x,i.y),e.isCollidable,e.endAngle)})):(t.snakeHeads.forEach((function(t){var e=t.lastSegment,n=t.username,i=e.endPoint;c.currentRoom.getPlayers()[n].snake=new a.default(new s.default(new o.Vector(i.x,i.y),new o.Vector(i.x,i.y),e.isCollidable,e.endAngle),c.currentRoom.getPlayers()[n].color,h)})),new r.default(c.currentRoom.getPlayers()[c.currentPlayer.username].snake,"A","D"),v=!0),++g%10==0&&(d=function(){var t=performance.now()/10,e=t-m,n=Math.round(1e3/e);return m=t,n}(),l.innerText="FPS: ".concat(d)),h.clearRect(0,0,u.width,u.height),Object.values(c.currentRoom.getPlayers()).forEach((function(t){t.snake.draw()}))}},"./node_modules/vector2d/src/AbstractVector.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10],o=function(){function t(t){this.ctor=t}return t.prototype.setAxes=function(t,e){return this.x=t,this.y=e,this},t.prototype.getX=function(){return this.x},t.prototype.setX=function(t){return this.x=t,this},t.prototype.getY=function(){return this.y},t.prototype.setY=function(t){return this.y=t,this},t.prototype.toString=function(t){return void 0===t&&(t=!1),t?"("+Math.round(this.x)+", "+Math.round(this.y)+")":"("+this.x+", "+this.y+")"},t.prototype.toArray=function(){return[this.x,this.y]},t.prototype.toObject=function(){return{x:this.x,y:this.y}},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.multiplyByVector=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.mulV=function(t){return this.multiplyByVector(t)},t.prototype.divideByVector=function(t){return this.x/=t.x,this.y/=t.y,this},t.prototype.divV=function(t){return this.divideByVector(t)},t.prototype.multiplyByScalar=function(t){return this.x*=t,this.y*=t,this},t.prototype.mulS=function(t){return this.multiplyByScalar(t)},t.prototype.divideByScalar=function(t){return this.x/=t,this.y/=t,this},t.prototype.divS=function(t){return this.divideByScalar(t)},t.prototype.normalise=function(){return this.divideByScalar(this.magnitude())},t.prototype.normalize=function(){return this.normalise()},t.prototype.unit=function(){return this.normalise()},t.prototype.magnitude=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.length=function(){return this.magnitude()},t.prototype.lengthSq=function(){var t=this.x,e=this.y;return t*t+e*e},t.prototype.dot=function(t){return t.x*this.x+t.y*this.y},t.prototype.cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this},t.prototype.zero=function(){return this.x=this.y=0,this},t.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),o=this.x,i=this.y;return this.x=o*e-i*n,this.y=o*n+i*e,this},t.prototype.round=function(t){void 0===t&&(t=2);var e=n[t];return this.x=(.5+this.x*e<<0)/e,this.y=(.5+this.y*e<<0)/e,this},t.prototype.clone=function(){return new this.ctor(this.x,this.y)},t}();e.AbstractVector=o},"./node_modules/vector2d/src/ArrayVector.js":function(t,e,n){var o,i=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(n,o){var i=t.call(this,e)||this;return i.axes=[n,o],i.ctor=e,i}return i(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.axes[0]},set:function(t){this.axes[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.axes[1]},set:function(t){this.axes[1]=t},enumerable:!0,configurable:!0}),e}(n("./node_modules/vector2d/src/AbstractVector.js").AbstractVector);e.ArrayVector=r},"./node_modules/vector2d/src/Float32Vector.js":function(t,e,n){var o,i=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(n,o){var i=t.call(this,e)||this;return i.axes=new Float32Array(2),i.axes[0]=n,i.axes[1]=o,i}return i(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.axes[0]},set:function(t){this.axes[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.axes[1]},set:function(t){this.axes[1]=t},enumerable:!0,configurable:!0}),e}(n("./node_modules/vector2d/src/AbstractVector.js").AbstractVector);e.Float32Vector=r},"./node_modules/vector2d/src/Vec2D.js":(t,e,n)=>{function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),o(n("./node_modules/vector2d/src/AbstractVector.js")),o(n("./node_modules/vector2d/src/ArrayVector.js")),o(n("./node_modules/vector2d/src/Float32Vector.js")),o(n("./node_modules/vector2d/src/Vector.js"))},"./node_modules/vector2d/src/Vector.js":function(t,e,n){var o,i=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(n,o){var i=t.call(this,e)||this;return i._x=n,i._y=o,i}return i(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!0,configurable:!0}),e}(n("./node_modules/vector2d/src/AbstractVector.js").AbstractVector);e.Vector=r}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n("./src/index.ts")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bmFrZV9nYW1lLy4vc3JjL0RyYXdlci50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL0lucHV0TWFuYWdlci50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL0xpbmVTZWdtZW50LnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvTWVudU1hbmFnZXIvbG9naW4udHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9QYXJ0aWNsZVN5c3RlbS9FbWl0dGVyLnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvUGFydGljbGVTeXN0ZW0vUGFydGljbGUudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9QYXJ0aWNsZVN5c3RlbS9QYXJ0aWNsZVN5c3RlbVV0aWxzLnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvU2VnbWVudC50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL1NuYWtlLnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvVmlld01vZGVscy9QbGF5ZXIudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9WaWV3TW9kZWxzL1Jvb20udHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9XZWJTb2NrZXRDbGllbnQvd2Vic29ja2V0LnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL25vZGVfbW9kdWxlcy92ZWN0b3IyZC9zcmMvQWJzdHJhY3RWZWN0b3IuanMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL25vZGVfbW9kdWxlcy92ZWN0b3IyZC9zcmMvQXJyYXlWZWN0b3IuanMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL25vZGVfbW9kdWxlcy92ZWN0b3IyZC9zcmMvRmxvYXQzMlZlY3Rvci5qcyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vbm9kZV9tb2R1bGVzL3ZlY3RvcjJkL3NyYy9WZWMyRC5qcyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vbm9kZV9tb2R1bGVzL3ZlY3RvcjJkL3NyYy9WZWN0b3IuanMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL3NuYWtlX2dhbWUvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3NuYWtlX2dhbWUvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZHJhd0FyYywgZHJhd0Fycm93LCBkcmF3RG90IH0gZnJvbSBcIi4vRHJhd2VyXCI7XHJcbmltcG9ydCAqIGFzIFZlYzJEIGZyb20gJ3ZlY3RvcjJkJztcclxuaW1wb3J0IFNlZ21lbnQgZnJvbSBcIi4vU2VnbWVudFwiO1xyXG5pbXBvcnQgeyBnYW1lQ2FudmFzQ3R4IH0gZnJvbSBcIi4vaW5kZXhcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFyY1NlZ21lbnQgZXh0ZW5kcyBTZWdtZW50IHtcclxuXHJcblxyXG4gICAgcHVibGljIGNlbnRlcjogVmVjMkQuVmVjdG9yO1xyXG4gICAgcHVibGljIHJhZGl1czogbnVtYmVyO1xyXG4gICAgcHVibGljIHN0YXJ0QW5nbGU6IG51bWJlcjtcclxuICAgIHB1YmxpYyBlbmRBbmdsZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBjb3VudGVyQ2xvY2t3aXNlOiBib29sZWFuO1xyXG4gICAgcHVibGljIGlzQ29sbGlkYWJsZTogYm9vbGVhbjtcclxuXHJcblxyXG4gICAgY29uc3RydWN0b3IoY2VudGVyOiBWZWMyRC5WZWN0b3IsIHJhZGl1czogbnVtYmVyLCBzdGFydEFuZ2xlOiBudW1iZXIsIGVuZEFuZ2xlOiBudW1iZXIsIGNvdW50ZXJDbG9ja3dpc2U6IGJvb2xlYW4sIGlzQ29sbGlkYWJsZTogYm9vbGVhbikge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5jZW50ZXIgPSBjZW50ZXI7XHJcbiAgICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7XHJcbiAgICAgICAgdGhpcy5zdGFydEFuZ2xlID0gc3RhcnRBbmdsZTtcclxuICAgICAgICB0aGlzLmVuZEFuZ2xlID0gZW5kQW5nbGU7XHJcbiAgICAgICAgdGhpcy5jb3VudGVyQ2xvY2t3aXNlID0gY291bnRlckNsb2Nrd2lzZTtcclxuICAgICAgICB0aGlzLmlzQ29sbGlkYWJsZSA9IGlzQ29sbGlkYWJsZTtcclxuICAgICAgfVxyXG5cclxuXHJcbiAgICBkcmF3KGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgY29sb3I6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGNvbnRleHQubGluZUNhcCA9IFwicm91bmRcIjtcclxuICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gY29sb3I7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNDb2xsaWRhYmxlID09IHRydWUpe1xyXG4gICAgICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBjb250ZXh0LmFyYyh0aGlzLmNlbnRlci54LCB0aGlzLmNlbnRlci55LCB0aGlzLnJhZGl1cywgdGhpcy5zdGFydEFuZ2xlLCB0aGlzLmVuZEFuZ2xlLCB0aGlzLmNvdW50ZXJDbG9ja3dpc2UpO1xyXG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkcmF3RGVidWcoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBjb2xvcjogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgLy8gY29udGV4dC5zdHJva2VTdHlsZSA9ICcjZmYwMGZmZmYnXHJcbiAgICAgICAgbGV0IHRhbmdlbnRfYW5nbGUgPSB0aGlzLmNvdW50ZXJDbG9ja3dpc2UgPy0gTWF0aC5QSSAgOiBNYXRoLlBJO1xyXG5cclxuICAgICAgICB0YW5nZW50X2FuZ2xlICs9IHRoaXMuZW5kQW5nbGU7XHJcbiAgICAgICAgY29udGV4dC5saW5lQ2FwID0gXCJyb3VuZFwiO1xyXG4gICAgICAgIGRyYXdEb3QodGhpcy5jZW50ZXIueCwgdGhpcy5jZW50ZXIueSwgNSwgJyMwMDAwMDAnKTtcclxuICAgICAgICBkcmF3QXJyb3coY29udGV4dCxuZXcgVmVjMkQuVmVjdG9yKHRoaXMuZW5kUG9pbnQueCx0aGlzLmVuZFBvaW50LnkpLCBuZXcgVmVjMkQuVmVjdG9yKHRoaXMuZW5kUG9pbnQueCArIHRoaXMucmFkaXVzICogTWF0aC5jb3ModGFuZ2VudF9hbmdsZSksdGhpcy5lbmRQb2ludC55ICsgdGhpcy5yYWRpdXMgKiBNYXRoLnNpbih0YW5nZW50X2FuZ2xlKSkpO1xyXG4gICAgICAgIGRyYXdBcmModGhpcy5jZW50ZXIueCwgdGhpcy5jZW50ZXIueSwgdGhpcy5yYWRpdXMsIDAsIDAsIGZhbHNlKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGVuZFBvaW50KCk6IFZlYzJELlZlY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyRC5WZWN0b3IoXHJcbiAgICAgICAgdGhpcy5jZW50ZXIueCArIHRoaXMucmFkaXVzICogTWF0aC5jb3ModGhpcy5lbmRBbmdsZSksXHJcbiAgICAgICAgdGhpcy5jZW50ZXIueSArIHRoaXMucmFkaXVzICogTWF0aC5zaW4odGhpcy5lbmRBbmdsZSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBwZW5wZW5kaWN1bGFyRW5kQW5nbGUoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0NvdW50ZXJDbG9ja3dpc2U/IHRoaXMuZW5kQW5nbGUgLSBNYXRoLlBJIC8yIDogdGhpcy5lbmRBbmdsZSArIE1hdGguUEkgLyAyO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBwZW5wZW5kaWN1bGFyU3RhcnRBbmdsZSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzQ291bnRlckNsb2Nrd2lzZT8gdGhpcy5zdGFydEFuZ2xlLSBNYXRoLlBJIC8yIDogdGhpcy5zdGFydEFuZ2xlICsgTWF0aC5QSSAvIDI7XHJcbiAgICB9XHJcblxyXG4gICAgaXNDb3VudGVyQ2xvY2t3aXNlKCk6IGJvb2xlYW57XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY291bnRlckNsb2Nrd2lzZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb250aW51aW5nU2VnbWVudCh0cmFuc2Zvcm06IFZlYzJELlZlY3Rvcik6IFNlZ21lbnQge1xyXG4gICAgICAgIHJldHVybiBuZXcgQXJjU2VnbWVudCh0aGlzLmNlbnRlci5jbG9uZSgpLmFkZCh0cmFuc2Zvcm0pIGFzIFZlYzJELlZlY3RvciwgdGhpcy5yYWRpdXMsIHRoaXMuZW5kQW5nbGUsIHRoaXMuZW5kQW5nbGUsIHRoaXMuY291bnRlckNsb2Nrd2lzZSwgdGhpcy5pc0NvbGxpZGFibGUpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcInZlY3RvcjJkXCI7XG5pbXBvcnQgeyBiYWNrZ3JvdW5kQ2FudmFzLCBiYWNrZ3JvdW5kQ2FudmFzQ3R4LCBncmlkU2l6ZSB9IGZyb20gXCIuL2luZGV4XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3R3JpZCgpIHtcbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmNsZWFyUmVjdCgwLCAwLCBiYWNrZ3JvdW5kQ2FudmFzLndpZHRoLCBiYWNrZ3JvdW5kQ2FudmFzLmhlaWdodCk7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5zdHJva2VTdHlsZSA9ICdyZ2JhKDAsIDAsIDAsIDAuMyknO1xuICAgIGJhY2tncm91bmRDYW52YXNDdHgubGluZVdpZHRoID0gMjtcbiAgICBmb3IgKHZhciB4ID0gZ3JpZFNpemU7IHggPCBiYWNrZ3JvdW5kQ2FudmFzLndpZHRoOyB4ICs9IGdyaWRTaXplKSB7XG4gICAgICAgIGJhY2tncm91bmRDYW52YXNDdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGJhY2tncm91bmRDYW52YXNDdHgubW92ZVRvKHgsIDApO1xuICAgICAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmxpbmVUbyh4LCBiYWNrZ3JvdW5kQ2FudmFzLmhlaWdodCk7XG4gICAgICAgIGJhY2tncm91bmRDYW52YXNDdHguc3Ryb2tlKCk7XG4gICAgfVxuICAgIGZvciAodmFyIHkgPSBncmlkU2l6ZTsgeSA8IGJhY2tncm91bmRDYW52YXMuaGVpZ2h0OyB5ICs9IGdyaWRTaXplKSB7XG4gICAgICAgIGJhY2tncm91bmRDYW52YXNDdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGJhY2tncm91bmRDYW52YXNDdHgubW92ZVRvKDAsIHkpO1xuICAgICAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmxpbmVUbyhiYWNrZ3JvdW5kQ2FudmFzLndpZHRoLCB5KTtcbiAgICAgICAgYmFja2dyb3VuZENhbnZhc0N0eC5zdHJva2UoKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3RG90KGRvdFg6IG51bWJlciwgZG90WTogbnVtYmVyLCBkb3RTaXplOiBudW1iZXIsIGNvbG9yOiBzdHJpbmcpIHtcbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmJlZ2luUGF0aCgpO1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguYXJjKFxuICAgICAgICBkb3RYLFxuICAgICAgICBkb3RZLFxuICAgICAgICBkb3RTaXplLFxuICAgICAgICAwLFxuICAgICAgICAyICogTWF0aC5QSSxcbiAgICAgICAgZmFsc2VcbiAgICApO1xuXG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmZpbGwoKTtcblxuICAgIGJhY2tncm91bmRDYW52YXNDdHguY2xvc2VQYXRoKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3QXJjKGRvdFg6IG51bWJlciwgZG90WTogbnVtYmVyLCByYWRpdXM6IG51bWJlciwgc3RhcnRBbmdsZTogbnVtYmVyLCBlbmRBbmdsZTogbnVtYmVyLCBjb3VudGVyQ2xvY2t3aXNlOiBib29sZWFuKSB7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5saW5lQ2FwID0gXCJyb3VuZFwiO1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguc3Ryb2tlU3R5bGUgPSBcIiMzNDY2YWFcIjtcbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmJlZ2luUGF0aCgpO1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguYXJjKGRvdFgsIGRvdFksIHJhZGl1cywgMCwgMiAqIE1hdGguUEksIGNvdW50ZXJDbG9ja3dpc2UpO1xuXG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5saW5lV2lkdGggPSA1O1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguc3Ryb2tlKCk7XG5cbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmNsb3NlUGF0aCgpO1xufVxuXG5cblxuXG5leHBvcnQgZnVuY3Rpb24gZHJhd0Fycm93KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBmcm9tOiBWZWN0b3IsIHRvOiBWZWN0b3IpIHtcbiAgICBpZiAoZnJvbS54ICE9IHRvLnggJiYgZnJvbS55ICE9IHRvLnkpIHtcbiAgICAgICAgdmFyIGFuZ2xlID0gTWF0aC5hdGFuMih0by55IC0gZnJvbS55LCB0by54IC0gZnJvbS54KTtcbiAgICAgICAgY29uc3Qgd2lkdGggPSAxMDtcbiAgICAgICAgdmFyIGhlYWRMZW5ndGggPSAxMDtcbiAgICAgICAgdmFyIG5ld190byA9IG5ldyBWZWN0b3IodG8ueCwgdG8ueSk7XG4gICAgICAgIC8vIFRoaXMgbWFrZXMgaXQgc28gdGhlIGVuZCBvZiB0aGUgYXJyb3cgaGVhZCBpcyBsb2NhdGVkIGF0IHRveCwgdG95LCBkb24ndCBhc2sgd2hlcmUgMS4xNSBjb21lcyBmcm9tXG4gICAgICAgIG5ld190by54IC09IE1hdGguY29zKGFuZ2xlKSAqICgod2lkdGggKiAxLjE1KSk7XG4gICAgICAgIG5ld190by55IC09IE1hdGguc2luKGFuZ2xlKSAqICgod2lkdGggKiAxLjE1KSk7XG5cblxuXG4gICAgICAgIC8vc3RhcnRpbmcgcGF0aCBvZiB0aGUgYXJyb3cgZnJvbSB0aGUgc3RhcnQgc3F1YXJlIHRvIHRoZSBlbmQgc3F1YXJlIGFuZCBkcmF3aW5nIHRoZSBzdHJva2VcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBjdHgubW92ZVRvKGZyb20ueCwgZnJvbS55KTtcbiAgICAgICAgY3R4LmxpbmVUbyhuZXdfdG8ueCwgbmV3X3RvLnkpO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBcIiNiYmJiYmJcIjtcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IHdpZHRoO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG5cbiAgICAgICAgLy9zdGFydGluZyBhIG5ldyBwYXRoIGZyb20gdGhlIGhlYWQgb2YgdGhlIGFycm93IHRvIG9uZSBvZiB0aGUgc2lkZXMgb2YgdGhlIHBvaW50XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4Lm1vdmVUbyhuZXdfdG8ueCwgbmV3X3RvLnkpO1xuICAgICAgICBjdHgubGluZVRvKG5ld190by54IC0gaGVhZExlbmd0aCAqIE1hdGguY29zKGFuZ2xlIC0gTWF0aC5QSSAvIDcpLCBuZXdfdG8ueSAtIGhlYWRMZW5ndGggKiBNYXRoLnNpbihhbmdsZSAtIE1hdGguUEkgLyA3KSk7XG5cbiAgICAgICAgLy9wYXRoIGZyb20gdGhlIHNpZGUgcG9pbnQgb2YgdGhlIGFycm93LCB0byB0aGUgb3RoZXIgc2lkZSBwb2ludFxuICAgICAgICBjdHgubGluZVRvKG5ld190by54IC0gaGVhZExlbmd0aCAqIE1hdGguY29zKGFuZ2xlICsgTWF0aC5QSSAvIDcpLCBuZXdfdG8ueSAtIGhlYWRMZW5ndGggKiBNYXRoLnNpbihhbmdsZSArIE1hdGguUEkgLyA3KSk7XG5cbiAgICAgICAgLy9wYXRoIGZyb20gdGhlIHNpZGUgcG9pbnQgYmFjayB0byB0aGUgdGlwIG9mIHRoZSBhcnJvdywgYW5kIHRoZW4gYWdhaW4gdG8gdGhlIG9wcG9zaXRlIHNpZGUgcG9pbnRcbiAgICAgICAgY3R4LmxpbmVUbyhuZXdfdG8ueCwgbmV3X3RvLnkpO1xuICAgICAgICBjdHgubGluZVRvKG5ld190by54IC0gaGVhZExlbmd0aCAqIE1hdGguY29zKGFuZ2xlIC0gTWF0aC5QSSAvIDcpLCBuZXdfdG8ueSAtIGhlYWRMZW5ndGggKiBNYXRoLnNpbihhbmdsZSAtIE1hdGguUEkgLyA3KSk7XG5cbiAgICAgICAgLy9kcmF3cyB0aGUgcGF0aHMgY3JlYXRlZCBhYm92ZVxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBcIiNiYmJiYmJcIjtcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IHdpZHRoO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBcIiNiYmJiYmJcIjtcbiAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwidmVjdG9yMmRcIjtcclxuaW1wb3J0IEFyY1NlZ21lbnQgZnJvbSBcIi4vQXJjU2VnbWVudFwiO1xyXG5pbXBvcnQgTGluZVNlZ21lbnQgZnJvbSBcIi4vTGluZVNlZ21lbnRcIjtcclxuaW1wb3J0IFNuYWtlIGZyb20gXCIuL1NuYWtlXCI7XHJcbmltcG9ydCB7IHNlbmRLZXlFdmVudFRvU2VydmVyIH0gZnJvbSBcIi4vV2ViU29ja2V0Q2xpZW50L3dlYnNvY2tldFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW5wdXRNYW5hZ2VyIHtcclxuICBwcml2YXRlIGtleU1hcDogeyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0gPSB7fTtcclxuICBwcml2YXRlIHNuYWtlOiBTbmFrZTtcclxuICBwcml2YXRlIGxlZnRLZXk6IHN0cmluZztcclxuICBwcml2YXRlIHJpZ2h0S2V5OiBzdHJpbmc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHNuYWtlOiBTbmFrZSwgbGVmdEtleTogc3RyaW5nLCByaWdodEtleTogc3RyaW5nKSB7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25LZXlEb3duLmJpbmQodGhpcykpO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5vbktleVVwLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5zbmFrZSA9IHNuYWtlO1xyXG4gICAgdGhpcy5sZWZ0S2V5ID0gbGVmdEtleTtcclxuICAgIHRoaXMucmlnaHRLZXkgPSByaWdodEtleTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25LZXlEb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XHJcbiAgICAvL2lmIHNuYWtlIGlzIGRlYWQsIGlnbm9yZSB0aGUga2V5IHByZXNzZXNcclxuICAgIGlmKCF0aGlzLnNuYWtlLmlzQWxpdmUpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBrZXkgPSBldmVudC5rZXkudG9VcHBlckNhc2UoKTtcclxuICAgIFxyXG5cclxuICAgIC8vaWdub3JlIGtleXMgbm90IGFzc2lnbmVkIHRvIHNlbGYsIHRoaXMgd291bGQgcmVzdWx0IGluIHRoZSBrZXltYXAgaGF2aW5nIHVubmVjZXNzYXJ5IGtleXMgYW5kIHRyaWdnZXJpbmcgdGhlIG9ua2V5VXAgZXZlbnRzXHJcbiAgICBpZihrZXkgIT0gdGhpcy5sZWZ0S2V5ICYmIGtleSAhPSB0aGlzLnJpZ2h0S2V5KXtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vc3dpdGNoIG9mZiB0aGUgY3VycmVudCBkb3duIGtleSBpZiB0aGUgb3RoZXIgZGlyZWN0aW9uIGlzIHByZXNzZWRcclxuICAgIGlmICh0aGlzLmtleU1hcFt0aGlzLnJpZ2h0S2V5XSAmJiBrZXkgPT0gdGhpcy5sZWZ0S2V5KSB7XHJcbiAgICAgIHRoaXMua2V5TWFwW3RoaXMucmlnaHRLZXldID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0aGlzLmtleU1hcFt0aGlzLmxlZnRLZXldICYmIGtleSA9PSB0aGlzLnJpZ2h0S2V5KSB7XHJcbiAgICAgIHRoaXMua2V5TWFwW3RoaXMubGVmdEtleV0gPSBmYWxzZTtcclxuICAgIH1cclxuICAgIC8vcmV0dXJuIGlmIHRoZSBrZXkgaXMgYWxyYWVkeSBpbiB0aGUgbWFwLCBwcmV2ZW50cyBhdXRvY2xpY2tpbmdcclxuICAgIGVsc2UgaWYgKHRoaXMua2V5TWFwW2tleV0pIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICB0aGlzLmtleU1hcFtrZXldID0gdHJ1ZTtcclxuXHJcblxyXG4gICAgbGV0IGhlYWQgPSB0aGlzLnNuYWtlLmhlYWQ7XHJcbiAgICBsZXQgZW5kUG9pbnQgPSBoZWFkLmVuZFBvaW50O1xyXG4gICAgbGV0IHRhbmdlbnRBbmdsZSA9IDA7XHJcblxyXG5cclxuICAgIHNlbmRLZXlFdmVudFRvU2VydmVyKGtleSA9PSB0aGlzLnJpZ2h0S2V5ID8gJ3JpZ2h0JyA6ICdsZWZ0JywgdHJ1ZSk7XHJcblxyXG5cclxuICAgIC8vIGlmIChoZWFkIGluc3RhbmNlb2YgTGluZVNlZ21lbnQpIHtcclxuICAgIC8vICAgdGFuZ2VudEFuZ2xlICs9IE1hdGguUEkgLyAyO1xyXG5cclxuICAgIC8vICAgaWYgKGtleSA9PSB0aGlzLnJpZ2h0S2V5KSB7XHJcblxyXG4gICAgLy8gICAgIHRoaXMuc25ha2UuYWRkU2VnbWVudChuZXcgQXJjU2VnbWVudChuZXcgVmVjdG9yKFxyXG4gICAgLy8gICAgICAgZW5kUG9pbnQueCArIHRoaXMuc25ha2UudHVyblJhZGl1cyAqIE1hdGguY29zKHRoaXMuc25ha2UuaGVhZC5lbmRBbmdsZSArIHRhbmdlbnRBbmdsZSksXHJcbiAgICAvLyAgICAgICBlbmRQb2ludC55ICsgdGhpcy5zbmFrZS50dXJuUmFkaXVzICogTWF0aC5zaW4odGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlICsgdGFuZ2VudEFuZ2xlKSksXHJcbiAgICAvLyAgICAgICB0aGlzLnNuYWtlLnR1cm5SYWRpdXMsIHRoaXMuc25ha2UuaGVhZC5lbmRBbmdsZSAtIHRhbmdlbnRBbmdsZSwgdGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlIC0gdGFuZ2VudEFuZ2xlLCBmYWxzZSwgaGVhZC5pc0NvbGxpZGFibGUpKVxyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIGlmIChrZXkgPT0gdGhpcy5sZWZ0S2V5KSB7XHJcbiAgICAvLyAgICAgdGhpcy5zbmFrZS5hZGRTZWdtZW50KG5ldyBBcmNTZWdtZW50KG5ldyBWZWN0b3IoXHJcbiAgICAvLyAgICAgICBlbmRQb2ludC54ICsgdGhpcy5zbmFrZS50dXJuUmFkaXVzICogTWF0aC5jb3ModGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlIC0gdGFuZ2VudEFuZ2xlKSxcclxuICAgIC8vICAgICAgIGVuZFBvaW50LnkgKyB0aGlzLnNuYWtlLnR1cm5SYWRpdXMgKiBNYXRoLnNpbih0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgLSB0YW5nZW50QW5nbGUpKSxcclxuICAgIC8vICAgICAgIHRoaXMuc25ha2UudHVyblJhZGl1cywgdGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlICsgdGFuZ2VudEFuZ2xlLCB0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgKyB0YW5nZW50QW5nbGUsIHRydWUsIGhlYWQuaXNDb2xsaWRhYmxlKSlcclxuICAgIC8vICAgfVxyXG5cclxuICAgIC8vIH0gXHJcblxyXG4gICAgLy8gZWxzZSBpZiAoaGVhZCBpbnN0YW5jZW9mIEFyY1NlZ21lbnQpIHtcclxuXHJcbiAgICAvLyAgIHRhbmdlbnRBbmdsZSA9IGhlYWQuaXNDb3VudGVyQ2xvY2t3aXNlID8gLU1hdGguUEkgOiBNYXRoLlBJO1xyXG4gICAgLy8gICBpZiAoa2V5ID09IHRoaXMucmlnaHRLZXkpIHtcclxuICAgIC8vICAgICB0aGlzLnNuYWtlLmFkZFNlZ21lbnQobmV3IEFyY1NlZ21lbnQobmV3IFZlY3RvcihcclxuICAgIC8vICAgICAgIGVuZFBvaW50LnggLSB0aGlzLnNuYWtlLnR1cm5SYWRpdXMgKiBNYXRoLmNvcyh0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgKyB0YW5nZW50QW5nbGUpLFxyXG4gICAgLy8gICAgICAgZW5kUG9pbnQueSAtIHRoaXMuc25ha2UudHVyblJhZGl1cyAqIE1hdGguc2luKHRoaXMuc25ha2UuaGVhZC5lbmRBbmdsZSArIHRhbmdlbnRBbmdsZSkpLFxyXG4gICAgLy8gICAgICAgdGhpcy5zbmFrZS50dXJuUmFkaXVzLCB0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgLSB0YW5nZW50QW5nbGUsIHRoaXMuc25ha2UuaGVhZC5lbmRBbmdsZSAtIHRhbmdlbnRBbmdsZSwgZmFsc2UsIGhlYWQuaXNDb2xsaWRhYmxlKSlcclxuICAgIC8vICAgfVxyXG4gICAgLy8gICBpZiAoa2V5ID09IHRoaXMubGVmdEtleSkge1xyXG4gICAgLy8gICAgIHRoaXMuc25ha2UuYWRkU2VnbWVudChuZXcgQXJjU2VnbWVudChuZXcgVmVjdG9yKFxyXG4gICAgLy8gICAgICAgZW5kUG9pbnQueCAtIHRoaXMuc25ha2UudHVyblJhZGl1cyAqIE1hdGguY29zKHRoaXMuc25ha2UuaGVhZC5lbmRBbmdsZSAtIHRhbmdlbnRBbmdsZSksXHJcbiAgICAvLyAgICAgICBlbmRQb2ludC55IC0gdGhpcy5zbmFrZS50dXJuUmFkaXVzICogTWF0aC5zaW4odGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlIC0gdGFuZ2VudEFuZ2xlKSksXHJcbiAgICAvLyAgICAgICB0aGlzLnNuYWtlLnR1cm5SYWRpdXMsIHRoaXMuc25ha2UuaGVhZC5lbmRBbmdsZSArIHRhbmdlbnRBbmdsZSwgdGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlICsgdGFuZ2VudEFuZ2xlLCB0cnVlLCBoZWFkLmlzQ29sbGlkYWJsZSkpXHJcbiAgICAvLyAgIH1cclxuXHJcbiAgICAvLyB9XHJcblxyXG4gIH1cclxuICBwcml2YXRlIG9uS2V5VXAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuICAgIC8vaWYgc25ha2UgaXMgZGVhZCwgaWdub3JlIHRoZSBrZXkgcHJlc3Nlc1xyXG4gICAgaWYoIXRoaXMuc25ha2UuaXNBbGl2ZSkgcmV0dXJuO1xyXG4gICAgXHJcbiAgICBjb25zdCBrZXkgPSBldmVudC5rZXkudG9VcHBlckNhc2UoKTtcclxuXHJcbiAgICAvL2NoZWNrIGlmIHRoZSBrZXkgaXMgaW4gdGhlIGtleW1hcCwgaWYgbm90IGp1c3QgaWdub3JlIGl0XHJcbiAgICBpZiAoIXRoaXMua2V5TWFwW2tleV0pIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5rZXlNYXBba2V5XSA9IGZhbHNlO1xyXG5cclxuICAgIHNlbmRLZXlFdmVudFRvU2VydmVyKGtleSA9PSB0aGlzLnJpZ2h0S2V5ID8gJ3JpZ2h0JyA6ICdsZWZ0JywgZmFsc2UpO1xyXG5cclxuXHJcblxyXG4gICAgLy8gbGV0IGhlYWQgPSB0aGlzLnNuYWtlLmhlYWQ7XHJcbiAgICAvLyBsZXQgZW5kUG9pbnQgPSBoZWFkLmVuZFBvaW50O1xyXG4gICAgLy8gbGV0IGFuZ2xlID0gaGVhZC5lbmRBbmdsZTtcclxuXHJcbiAgICAvLyBpZiAoa2V5ID09IHRoaXMubGVmdEtleSAmJiBoZWFkIGluc3RhbmNlb2YgQXJjU2VnbWVudCAmJiBoZWFkLmlzQ291bnRlckNsb2Nrd2lzZSgpKSB7XHJcblxyXG4gICAgLy8gICBhbmdsZSAtPSBNYXRoLlBJIC8gMjtcclxuICAgIC8vIH0gZWxzZSBpZiAoa2V5ID09IHRoaXMucmlnaHRLZXkgJiYgaGVhZCBpbnN0YW5jZW9mIEFyY1NlZ21lbnQgJiYgIWhlYWQuaXNDb3VudGVyQ2xvY2t3aXNlKCkpIHtcclxuXHJcbiAgICAvLyAgIGFuZ2xlICs9IE1hdGguUEkgLyAyO1xyXG4gICAgLy8gfVxyXG5cclxuXHJcblxyXG4gICAgLy8gdGhpcy5zbmFrZS5hZGRTZWdtZW50KG5ldyBMaW5lU2VnbWVudChlbmRQb2ludCxcclxuICAgIC8vICAgbmV3IFZlY3RvcihlbmRQb2ludC54ICsgNSAqIE1hdGguY29zKGFuZ2xlKSwgZW5kUG9pbnQueSArIDUgKiBNYXRoLnNpbihhbmdsZSkpLCBoZWFkLmlzQ29sbGlkYWJsZSAsYW5nbGUpKTtcclxuXHJcblxyXG5cclxuICAgIC8vY29uc29sZS5sb2codGhpcy5zbmFrZS5oZWFkKTtcclxuICB9XHJcblxyXG5cclxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5vbktleURvd24uYmluZCh0aGlzKSk7XHJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLm9uS2V5VXAuYmluZCh0aGlzKSk7XHJcbiAgfVxyXG5cclxuXHJcblxyXG59XHJcblxyXG4iLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwidmVjdG9yMmRcIjtcclxuaW1wb3J0IFNlZ21lbnQgZnJvbSBcIi4vU2VnbWVudFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGluZVNlZ21lbnQgZXh0ZW5kcyBTZWdtZW50IHtcclxuXHJcblxyXG4gICAgcHVibGljIHN0YXJ0UG9pbnQ6IFZlY3RvcjtcclxuICAgIHB1YmxpYyBlbmRQb2ludDogVmVjdG9yO1xyXG4gICAgcHVibGljIGVuZEFuZ2xlOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgaXNDb2xsaWRhYmxlOiBib29sZWFuID0gdHJ1ZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzdGFydDogVmVjdG9yLCBlbmQ6IFZlY3RvciwgaXNDb2xsaWRhYmxlOiBib29sZWFuLCBhbmdsZT86IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5zdGFydFBvaW50ID0gc3RhcnQ7XHJcbiAgICAgICAgdGhpcy5lbmRQb2ludCA9IGVuZDtcclxuICAgICAgICB0aGlzLmlzQ29sbGlkYWJsZSA9IGlzQ29sbGlkYWJsZTtcclxuICAgICAgICB0aGlzLmVuZEFuZ2xlID0gYW5nbGU7XHJcbiAgICAgICAgXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGRyYXcoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBjb2xvcjogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgLy8gY29udGV4dC5zdHJva2VTdHlsZSA9ICcjZmYwMGZmZmYnXHJcbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGNvbG9yO1xyXG4gICAgICAgIGNvbnRleHQubGluZUNhcCA9IFwicm91bmRcIjtcclxuICAgICAgICBpZiAodGhpcy5pc0NvbGxpZGFibGUgPT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKHRoaXMuc3RhcnRQb2ludC54LCB0aGlzLnN0YXJ0UG9pbnQueSk7XHJcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHRoaXMuZW5kUG9pbnQueCwgdGhpcy5lbmRQb2ludC55KTtcclxuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcclxuICAgICAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNhbGNFbmRBbmdsZSgpOiBudW1iZXJ7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguYXRhbigodGhpcy5lbmRQb2ludC55IC0gdGhpcy5zdGFydFBvaW50LnkpIC8gKHRoaXMuZW5kUG9pbnQueCAtIHRoaXMuc3RhcnRQb2ludC54KSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGxlbmd0aCgpOiBudW1iZXJ7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCgodGhpcy5zdGFydFBvaW50LnggLSB0aGlzLmVuZFBvaW50LngpKioyICsgKHRoaXMuc3RhcnRQb2ludC55IC0gdGhpcy5lbmRQb2ludC55KSoqMik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29udGludWluZ1NlZ21lbnQodHJhbnNmb3JtOiBWZWN0b3IpOiBTZWdtZW50IHtcclxuICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZEVuZHBvaW50ID0gdGhpcy5lbmRQb2ludC5jbG9uZSgpLmFkZCh0cmFuc2Zvcm0pIGFzIFZlY3RvcjtcclxuICAgICAgICByZXR1cm4gbmV3IExpbmVTZWdtZW50KFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1lZEVuZHBvaW50LCBcclxuICAgICAgICAgICAgdHJhbnNmb3JtZWRFbmRwb2ludCwgXHJcbiAgICAgICAgICAgIHRoaXMuaXNDb2xsaWRhYmxlLCBcclxuICAgICAgICAgICAgdGhpcy5lbmRBbmdsZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4uL1ZpZXdNb2RlbHMvUGxheWVyXCI7XHJcbmltcG9ydCB7IEdhbWVTdGF0ZSwgUm9vbSB9IGZyb20gXCIuLi9WaWV3TW9kZWxzL1Jvb21cIjtcclxuaW1wb3J0IHsgR2FtZVN0YXRlRGF0YSB9IGZyb20gXCIuLi9XZWJTb2NrZXRDbGllbnQvbWVzc2FnZVR5cGVzXCI7XHJcbmltcG9ydCB7IGNyZWF0ZVJvb20sIGpvaW5Sb29tLCBzZW5kU3RhcnRDb21tYW5kLCBzZXRQbGF5ZXJEYXRhIH0gZnJvbSBcIi4uL1dlYlNvY2tldENsaWVudC93ZWJzb2NrZXRcIjtcclxuXHJcblxyXG5leHBvcnQgbGV0IGN1cnJlbnRSb29tOiBSb29tIHwgbnVsbCA9IG51bGw7XHJcbmV4cG9ydCBsZXQgY3VycmVudFBsYXllcjogUGxheWVyIHwgbnVsbCA9IG51bGw7XHJcblxyXG5jb25zdCByb29tQ29kZUlucHV0ID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb29tQ29kZUlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudCk7XHJcbmNvbnN0IHVzZXJuYW1lSW5wdXQgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJuYW1lSW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50KTtcclxuY29uc3Qgcm9vbUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqb2luQnV0dG9uJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbmNvbnN0IHJlYWR5QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlYWR5QnV0dG9uJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbmNvbnN0IGxvZ2luRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luLWRpdicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5jb25zdCByb29tRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb20tZGl2JykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbmNvbnN0IGdhbWVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZS1jYW52YXMtY29udGFpbmVyJykgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbmNvbnN0IGNvbG9yUGlja2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbG9yLXBpY2tlcicpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbmNvbnN0IHJvb21Vc2Vyc0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vbS11c2Vycy1saXN0JykgYXMgSFRNTFVMaXN0RWxlbWVudDtcclxuY29uc3Qgcm9vbUNvZGVTcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb20tY29kZScpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG5jb25zdCBwbGF5ZXJDb3VudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGF5ZXItY291bnQnKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcclxuY29uc3QgY29sb3JQaWNrZXJEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3ItcGlja2VyLWNvbnRhaW5lcicpO1xyXG5jb25zdCBzdGFydFByb2dyZXNzQmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0LXByb2dyZXNzLWJhcicpO1xyXG4vLyBzcmMvbG9naW4udHNcclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUJ1dHRvbigpIHtcclxuXHJcblxyXG4gICAgaWYgKHVzZXJuYW1lSW5wdXQudmFsdWUudHJpbSgpID09ICcnKSB7XHJcbiAgICAgICAgcm9vbUJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJvb21CdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocm9vbUNvZGVJbnB1dC52YWx1ZS50cmltKCkubGVuZ3RoID09IDUpIHtcclxuICAgICAgICByb29tQnV0dG9uLnRleHRDb250ZW50ID0gJ0pPSU4gUk9PTSc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJvb21CdXR0b24udGV4dENvbnRlbnQgPSAnQ1JFQVRFIFJPT00nO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlUm9vbUFjdGlvbigpIHtcclxuICAgIGNvbnN0IHVzZXJuYW1lID0gdXNlcm5hbWVJbnB1dC52YWx1ZTtcclxuICAgIGlmICghdXNlcm5hbWUpIHJldHVybjtcclxuXHJcbiAgICBjdXJyZW50UGxheWVyID0gbmV3IFBsYXllcih1c2VybmFtZSk7XHJcblxyXG4gICAgaWYgKHJvb21CdXR0b24uaW5uZXJUZXh0ID09PSAnQ1JFQVRFIFJPT00nKSB7XHJcbiAgICAgICAgY3JlYXRlUm9vbSh1c2VybmFtZUlucHV0LnZhbHVlKTtcclxuICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgIGpvaW5Sb29tKHJvb21Db2RlSW5wdXQudmFsdWUudG9VcHBlckNhc2UoKSwgdXNlcm5hbWVJbnB1dC52YWx1ZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVSZWFkeVN0YXRlKCkge1xyXG5cclxuICAgIGN1cnJlbnRQbGF5ZXIuaXNSZWFkeSA9ICFjdXJyZW50UGxheWVyLmlzUmVhZHk7XHJcbiAgICBzZXRQbGF5ZXJEYXRhKGN1cnJlbnRQbGF5ZXIsIGN1cnJlbnRSb29tLmdldENvZGUoKSk7XHJcbiAgICB1cGRhdGVSZWFkeUJ1dHRvbihjdXJyZW50UGxheWVyLmlzUmVhZHkpO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlUmVhZHlCdXR0b24oaXNSZWFkeTogYm9vbGVhbikge1xyXG4gICAgaWYgKGlzUmVhZHkpIHtcclxuICAgICAgICByZWFkeUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdyZWQtYnV0dG9uJyk7XHJcbiAgICAgICAgcmVhZHlCdXR0b24uY2xhc3NMaXN0LmFkZCgnZ3JlZW4tYnV0dG9uJyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZWFkeUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdyZWQtYnV0dG9uJyk7XHJcbiAgICAgICAgcmVhZHlCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnZ3JlZW4tYnV0dG9uJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzaG93Um9vbVZpZXcoZGF0YTogSlNPTikge1xyXG4gICAgLy9zZXQgdGhlIGNsaWVudCBWaWV3TW9kZWwgb2YgdGhlIHJvb20gdG8gdGhlIHNlcnZlcnMgcmVzcG9uc2VcclxuICAgIGxldCByb29tSW5mbyA9IEpTT04ucGFyc2UoZGF0YS50b1N0cmluZygpKTtcclxuICAgIGN1cnJlbnRSb29tID0gbmV3IFJvb20ocm9vbUluZm9bJ3Jvb20nXVsnY29kZSddLCByb29tSW5mb1sncm9vbSddWydob3N0J10sIHJvb21JbmZvWydyb29tJ11bJ3BsYXllcnMnXSwgcm9vbUluZm9bJ3Jvb20nXVsnbWF4U2l6ZSddKVxyXG5cclxuICAgIC8vc2hvdyBzdGFydEdhbWVCdXR0b24gXHJcbiAgICBpZiAoY3VycmVudFBsYXllci51c2VybmFtZSA9PSBjdXJyZW50Um9vbS5nZXRIb3N0KCkudXNlcm5hbWUpIHtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnRCdXR0b24nKS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LW5vbmUnKTtcclxuICAgIH1cclxuXHJcbiAgICAvL3NldCBhIHJhbmRvbSBjb2xvciBmb3IgYSBwbGF5ZXJcclxuICAgIGNvbG9yUGlja2VyRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGN1cnJlbnRQbGF5ZXIuY29sb3I7XHJcbiAgICBjb2xvclBpY2tlci52YWx1ZSA9IGN1cnJlbnRQbGF5ZXIuY29sb3I7XHJcbiAgICBsZXQgY29sb3JQaWNrZXJMYWJlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvci1sYWJlbCcpO1xyXG4gICAgY29sb3JQaWNrZXJMYWJlbC5zdHlsZS5jb2xvciA9IHBpY2tUZXh0Q29sb3JCYXNlZE9uQmdDb2xvckFkdmFuY2VkKGNvbG9yUGlja2VyLnZhbHVlLCAnI0ZGRkZGRicsICcjMDAwMDAwJyk7XHJcblxyXG4gICAgLy9zaG93IHRoZSBuZXcgZWxlbWVudFxyXG4gICAgbG9naW5EaXYuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ub25lJyk7XHJcbiAgICByb29tRGl2LmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktZmxleCcpO1xyXG5cclxuXHJcblxyXG4gICAgcm9vbUNvZGVJbnB1dC52YWx1ZSA9IGN1cnJlbnRSb29tLmdldENvZGUoKTtcclxuICAgIHJvb21Db2RlU3Bhbi5pbm5lckhUTUwgPSBjdXJyZW50Um9vbS5nZXRDb2RlKCk7XHJcbiAgICBzZXRQbGF5ZXJEYXRhKGN1cnJlbnRQbGF5ZXIsIGN1cnJlbnRSb29tLmdldENvZGUoKSk7XHJcbiAgICB1cGRhdGVSb29tTGlzdChkYXRhKTtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVSb29tTGlzdChkYXRhOiBKU09OKSB7XHJcbiAgICBsZXQgcm9vbUluZm8gPSBKU09OLnBhcnNlKGRhdGEudG9TdHJpbmcoKSk7XHJcblxyXG4gICAgLy8gdXBkYXRpbmcgdGhlIGN1cnJlbnQgcm9vbSBwbGF5ZXJzIGFuZCBob3N0XHJcbiAgICBjdXJyZW50Um9vbS5zZXRQbGF5ZXJzKHJvb21JbmZvWydyb29tJ11bJ3BsYXllcnMnXSk7XHJcbiAgICBjdXJyZW50Um9vbS5zZXRIb3N0KHJvb21JbmZvWydyb29tJ11bJ2hvc3QnXSk7XHJcbiAgICBjdXJyZW50Um9vbS5zZXRNYXhTaXplKHJvb21JbmZvWydyb29tJ11bJ21heFNpemUnXSlcclxuXHJcblxyXG4gICAgcGxheWVyQ291bnQuaW5uZXJIVE1MID0gYCR7T2JqZWN0LmtleXMoY3VycmVudFJvb20uZ2V0UGxheWVycygpKS5sZW5ndGh9LyR7Y3VycmVudFJvb20uZ2V0TWF4U2l6ZSgpfWA7XHJcbiAgICByb29tVXNlcnNMaXN0LmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgIE9iamVjdC52YWx1ZXMoY3VycmVudFJvb20uZ2V0UGxheWVycygpKS5mb3JFYWNoKChwbGF5ZXI6IHsgdXNlcm5hbWU6IHN0cmluZyB8IG51bWJlcjsgaXNSZWFkeTogYm9vbGVhbjsgY29sb3I6IHN0cmluZzsgfSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBsYXllckl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG5cclxuICAgICAgICBwbGF5ZXJJdGVtLnRleHRDb250ZW50ID0gcGxheWVyLnVzZXJuYW1lICsgJyc7XHJcblxyXG4gICAgICAgIGlmIChwbGF5ZXIudXNlcm5hbWUgPT0gY3VycmVudFJvb20uZ2V0SG9zdCgpLnVzZXJuYW1lKSB7XHJcbiAgICAgICAgICAgIHBsYXllckl0ZW0uaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmJlZ2luJywgYDxpIGNsYXNzPVwiZmEtc29saWQgZmEtY3Jvd25cIiBzdHlsZT1cImNvbG9yOiAke3BsYXllci5jb2xvcn07XCI+PC9pPmApXHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBsYXllckl0ZW0uaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmJlZ2luJywgYDxpIGNsYXNzPVwiZmEtc29saWQgZmEtY2lyY2xlXCIgc3R5bGU9XCJjb2xvcjogJHtwbGF5ZXIuY29sb3J9OyBtYXJnaW4tbGVmdDogNHB4XCI+PC9pPmApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocGxheWVyLmlzUmVhZHkpIHtcclxuICAgICAgICAgICAgcGxheWVySXRlbS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsICcgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1jaXJjbGVcIiBzdHlsZT1cImNvbG9yOiAjMzdjYjQ4O1wiPjwvaT4nKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwbGF5ZXJJdGVtLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgJyA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLWNpcmNsZVwiIHN0eWxlPVwiY29sb3I6ICNjYjM3Mzc7XCI+PC9pPicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcm9vbVVzZXJzTGlzdC5hcHBlbmRDaGlsZChwbGF5ZXJJdGVtKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vc2hvdyBzdGFydEdhbWVCdXR0b24gXHJcbiAgICBpZiAoY3VycmVudFBsYXllci51c2VybmFtZSA9PSBjdXJyZW50Um9vbS5nZXRIb3N0KCkudXNlcm5hbWUpIHtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnRCdXR0b24nKS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LW5vbmUnKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVTdGFydEJ1dHRvblByb2dyZXNzKE9iamVjdC52YWx1ZXMoY3VycmVudFJvb20uZ2V0UGxheWVycygpKS5maWx0ZXIocCA9PiBwLmlzUmVhZHkpLmxlbmd0aCwgY3VycmVudFJvb20uZ2V0TWF4U2l6ZSgpKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVN0YXJ0QnV0dG9uUHJvZ3Jlc3MocmVhZHlQbGF5ZXJDb3VudDogbnVtYmVyLCBtYXhQbGF5ZXJDb3VudDogbnVtYmVyKSB7XHJcbiAgICBpZiAobWF4UGxheWVyQ291bnQgPT0gMCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHN0YXJ0UHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSBNYXRoLmZsb29yKHJlYWR5UGxheWVyQ291bnQgLyBtYXhQbGF5ZXJDb3VudCAqIDEwMCkgKyAnJSc7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3dFcnJvckFuaW1hdGlvbigpIHtcclxuICAgIHJvb21CdXR0b24uY2xhc3NMaXN0LmFkZCgncmVkLWJ1dHRvbicpO1xyXG4gICAgcm9vbUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd3aWdnbGUnKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHJvb21CdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgncmVkLWJ1dHRvbicpO1xyXG4gICAgICAgIHJvb21CdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnd2lnZ2xlJyk7XHJcbiAgICB9LCA2MDApXHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQ29sb3JQaWNrZXIoKSB7XHJcbiAgICBjb2xvclBpY2tlckRpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvclBpY2tlci52YWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVBsYXllckNvbG9yKCkge1xyXG4gICAgY3VycmVudFBsYXllci5jb2xvciA9IGNvbG9yUGlja2VyLnZhbHVlO1xyXG4gICAgbGV0IGNvbG9yUGlja2VyTGFiZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3ItbGFiZWwnKTtcclxuICAgIGNvbG9yUGlja2VyTGFiZWwuc3R5bGUuY29sb3IgPSBwaWNrVGV4dENvbG9yQmFzZWRPbkJnQ29sb3JBZHZhbmNlZChjb2xvclBpY2tlci52YWx1ZSwgJyNGRkZGRkYnLCAnIzAwMDAwMCcpO1xyXG4gICAgc2V0UGxheWVyRGF0YShjdXJyZW50UGxheWVyLCBjdXJyZW50Um9vbS5nZXRDb2RlKCkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwaWNrVGV4dENvbG9yQmFzZWRPbkJnQ29sb3JBZHZhbmNlZChiZ0NvbG9yOiBzdHJpbmcsIGxpZ2h0Q29sb3I6IHN0cmluZywgZGFya0NvbG9yOiBzdHJpbmcpIHtcclxuICAgIHZhciBjb2xvciA9IChiZ0NvbG9yLmNoYXJBdCgwKSA9PT0gJyMnKSA/IGJnQ29sb3Iuc3Vic3RyaW5nKDEsIDcpIDogYmdDb2xvcjtcclxuICAgIHZhciByID0gcGFyc2VJbnQoY29sb3Iuc3Vic3RyaW5nKDAsIDIpLCAxNik7IC8vIGhleFRvUlxyXG4gICAgdmFyIGcgPSBwYXJzZUludChjb2xvci5zdWJzdHJpbmcoMiwgNCksIDE2KTsgLy8gaGV4VG9HXHJcbiAgICB2YXIgYiA9IHBhcnNlSW50KGNvbG9yLnN1YnN0cmluZyg0LCA2KSwgMTYpOyAvLyBoZXhUb0JcclxuICAgIHZhciB1aWNvbG9ycyA9IFtyIC8gMjU1LCBnIC8gMjU1LCBiIC8gMjU1XTtcclxuICAgIHZhciBjID0gdWljb2xvcnMubWFwKChjb2wpID0+IHtcclxuICAgICAgICBpZiAoY29sIDw9IDAuMDM5MjgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbCAvIDEyLjkyO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gTWF0aC5wb3coKGNvbCArIDAuMDU1KSAvIDEuMDU1LCAyLjQpO1xyXG4gICAgfSk7XHJcbiAgICB2YXIgTCA9ICgwLjIxMjYgKiBjWzBdKSArICgwLjcxNTIgKiBjWzFdKSArICgwLjA3MjIgKiBjWzJdKTtcclxuICAgIHJldHVybiAoTCA+IDAuNCkgPyBkYXJrQ29sb3IgOiBsaWdodENvbG9yO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdGFydEdhbWUoKSB7XHJcblxyXG4gICAgLy92ZXJpZnkgdGhhdCB0aGUgcGxheWVyIHNlbmRpbmcgdGhlIHN0YXJ0IHJlcXVlc3QgaXMgdGhlIGhvc3RcclxuICAgIGlmIChjdXJyZW50UGxheWVyLnVzZXJuYW1lICE9IGN1cnJlbnRSb29tLmdldEhvc3QoKS51c2VybmFtZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBzZW5kU3RhcnRDb21tYW5kKGN1cnJlbnRSb29tLmdldENvZGUoKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzd2l0Y2hHYW1lVmlldyhkYXRhOiBHYW1lU3RhdGVEYXRhKSB7XHJcbiAgICBzd2l0Y2ggKGRhdGEuc3RhdGUpIHtcclxuICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgY3VycmVudFJvb20uc2V0R2FtZVN0YXRlKEdhbWVTdGF0ZS5SVU5OSU5HKTtcclxuICAgICAgICBsb2dpbkRpdi5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LW5vbmUnKTtcclxuICAgICAgICByb29tRGl2LmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgICAgIHJvb21EaXYuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1mbGV4Jyk7XHJcbiAgICAgICAgZ2FtZURpdi5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LW5vbmUnKTtcclxuICAgICAgICBnYW1lRGl2LmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktZmxleCcpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgY3VycmVudFJvb20uc2V0R2FtZVN0YXRlKEdhbWVTdGF0ZS5JTl9MT0JCWSk7XHJcbiAgICAgICAgbG9naW5EaXYuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ub25lJyk7XHJcbiAgICAgICAgcm9vbURpdi5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LWZsZXgnKTtcclxuICAgICAgICBnYW1lRGl2LmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxud2luZG93Lm9ubG9hZCA9ICgpID0+IHtcclxuICAgIHVwZGF0ZUJ1dHRvbigpO1xyXG59O1xyXG5cclxuKHdpbmRvdyBhcyBhbnkpLnVwZGF0ZUJ1dHRvbiA9IHVwZGF0ZUJ1dHRvbjtcclxuKHdpbmRvdyBhcyBhbnkpLmhhbmRsZVJvb21BY3Rpb24gPSBoYW5kbGVSb29tQWN0aW9uO1xyXG4od2luZG93IGFzIGFueSkuaGFuZGxlUmVhZHlTdGF0ZSA9IGhhbmRsZVJlYWR5U3RhdGU7XHJcbih3aW5kb3cgYXMgYW55KS51cGRhdGVDb2xvclBpY2tlciA9IHVwZGF0ZUNvbG9yUGlja2VyO1xyXG4od2luZG93IGFzIGFueSkudXBkYXRlUGxheWVyQ29sb3IgPSB1cGRhdGVQbGF5ZXJDb2xvcjtcclxuKHdpbmRvdyBhcyBhbnkpLnN0YXJ0R2FtZSA9IHN0YXJ0R2FtZTsiLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwidmVjdG9yMmRcIjtcclxuaW1wb3J0IFBhcnRpY2xlLCB7IHNoYXBlIH0gZnJvbSBcIi4vUGFydGljbGVcIjtcclxuaW1wb3J0IHsgZ2V0UmFuZG9tRGlyZWN0aW9uIH0gZnJvbSBcIi4vUGFydGljbGVTeXN0ZW1VdGlsc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW1pdHRlcntcclxuICAgIHByaXZhdGUgYWxpdmVQYXJ0aWNsZXM6IFBhcnRpY2xlW10gPSBbXTtcclxuICAgIHB1YmxpYyBwb3NpdGlvbjogVmVjdG9yO1xyXG4gICAgcHVibGljIGVtaXRUaW1lOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgc2hhcGU6IHNoYXBlO1xyXG4gICAgcHVibGljIHNpemU6IG51bWJlcjtcclxuICAgIHB1YmxpYyBzcGVlZDogbnVtYmVyO1xyXG4gICAgcHVibGljIGNvbG9yOiB7cjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciwgYTogbnVtYmVyfTtcclxuICAgIHB1YmxpYyBmYWRlQ29sb3I6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgZmFkZVNpemU6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgcGFydGljbGVNYXhBZ2U6IG51bWJlcjtcclxuICAgIHB1YmxpYyBjYW52YXNDdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIHB1YmxpYyBlbWl0VGltZU1pbGxpczogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB0aWNrczogbnVtYmVyID0gMDtcclxuICAgIFxyXG5cclxuICAgIFxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHBvc2l0aW9uOiBWZWN0b3IsIGVtaXRJbnRlcnZhbDogbnVtYmVyLCBzaXplOiBudW1iZXIsIHNwZWVkOiBudW1iZXIsIHNoYXBlOiBzaGFwZSA9ICdjaXJjbGUnLCBjb2xvcjoge3I6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIsIGE6IG51bWJlcn0sIGNhbnZhc0N0eDpDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsICBmYWRlQ29sb3I6IGJvb2xlYW4gPSB0cnVlLCBmYWRlU2l6ZTogYm9vbGVhbiA9IHRydWUsIGFnZTogbnVtYmVyLCBlbWl0VGltZU1pbGxpczogbnVtYmVyID0gMCl7XHJcbiAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICB0aGlzLmVtaXRUaW1lID0gZW1pdEludGVydmFsO1xyXG4gICAgdGhpcy5zaXplID0gc2l6ZTtcclxuICAgIHRoaXMuc3BlZWQgPSBzcGVlZDtcclxuICAgIHRoaXMuc2hhcGUgPSBzaGFwZTtcclxuICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcclxuICAgIHRoaXMuY2FudmFzQ3R4ID0gY2FudmFzQ3R4O1xyXG4gICAgdGhpcy5mYWRlQ29sb3IgPSBmYWRlQ29sb3I7XHJcbiAgICB0aGlzLmZhZGVTaXplID0gZmFkZVNpemU7IFxyXG4gICAgdGhpcy5wYXJ0aWNsZU1heEFnZSA9IGFnZTtcclxuICAgIHRoaXMuZW1pdFRpbWVNaWxsaXMgPSBlbWl0VGltZU1pbGxpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdGljayhkdDogbnVtYmVyKXtcclxuICAgICAgICBpZiAoKHRoaXMuZW1pdFRpbWVNaWxsaXMgKyB0aGlzLnBhcnRpY2xlTWF4QWdlKSA8IDApIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5lbWl0VGltZU1pbGxpcyAtPSBkdDtcclxuXHJcblxyXG4gICAgICAgIGlmICh0aGlzLnRpY2tzICUgdGhpcy5lbWl0VGltZSA9PSAwICYmIHRoaXMuZW1pdFRpbWVNaWxsaXMgPiAwKXtcclxuICAgICAgICAgICAgdGhpcy5hbGl2ZVBhcnRpY2xlcy5wdXNoKG5ldyBQYXJ0aWNsZSh0aGlzLnBvc2l0aW9uLmNsb25lKCkgYXMgVmVjdG9yLCBnZXRSYW5kb21EaXJlY3Rpb24oKSwgdGhpcy5zaXplLCB0aGlzLnNwZWVkLCB0aGlzLnNoYXBlLHsuLi50aGlzLmNvbG9yfSx0aGlzLmNhbnZhc0N0eCwgdGhpcy5wYXJ0aWNsZU1heEFnZSwgdGhpcy5mYWRlQ29sb3IsIHRoaXMuZmFkZVNpemUpKTtcclxuICAgICAgICAgICAgdGhpcy5hbGl2ZVBhcnRpY2xlcy5wdXNoKG5ldyBQYXJ0aWNsZSh0aGlzLnBvc2l0aW9uLmNsb25lKCkgYXMgVmVjdG9yLCBnZXRSYW5kb21EaXJlY3Rpb24oKSwgdGhpcy5zaXplLCB0aGlzLnNwZWVkLCB0aGlzLnNoYXBlLHsuLi50aGlzLmNvbG9yfSx0aGlzLmNhbnZhc0N0eCwgdGhpcy5wYXJ0aWNsZU1heEFnZSwgdGhpcy5mYWRlQ29sb3IsIHRoaXMuZmFkZVNpemUpKTtcclxuICAgICAgICAgICAgdGhpcy5hbGl2ZVBhcnRpY2xlcy5wdXNoKG5ldyBQYXJ0aWNsZSh0aGlzLnBvc2l0aW9uLmNsb25lKCkgYXMgVmVjdG9yLCBnZXRSYW5kb21EaXJlY3Rpb24oKSwgdGhpcy5zaXplLCB0aGlzLnNwZWVkLCB0aGlzLnNoYXBlLHsuLi50aGlzLmNvbG9yfSx0aGlzLmNhbnZhc0N0eCwgdGhpcy5wYXJ0aWNsZU1heEFnZSwgdGhpcy5mYWRlQ29sb3IsIHRoaXMuZmFkZVNpemUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hbGl2ZVBhcnRpY2xlcy5mb3JFYWNoKHBhcnRpY2xlID0+IHtcclxuICAgICAgICAgICAgcGFydGljbGUudGljayhkdClcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hbGl2ZVBhcnRpY2xlcyA9IHRoaXMuYWxpdmVQYXJ0aWNsZXMuZmlsdGVyKHBhcnRpY2xlID0+IHBhcnRpY2xlLmFnZSA+IDApO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy50aWNrcysrO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KCl7XHJcbiAgICAgICAgdGhpcy5hbGl2ZVBhcnRpY2xlcy5mb3JFYWNoKHBhcnRpY2xlID0+IHtcclxuICAgICAgICAgICAgcGFydGljbGUuZHJhdygpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcInZlY3RvcjJkXCI7XHJcbmV4cG9ydCB0eXBlIHNoYXBlID0gJ2NpcmNsZScgfCAnc3F1YXJlJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFydGljbGUge1xyXG4gICAgcG9zaXRpb246IFZlY3RvcjtcclxuICAgIHZlbG9jaXR5OiBWZWN0b3I7XHJcbiAgICBzaGFwZTogc2hhcGU7XHJcbiAgICBzaXplOiBudW1iZXI7XHJcbiAgICBzcGVlZDogbnVtYmVyO1xyXG4gICAgY29sb3I6IHtyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBhOiBudW1iZXJ9O1xyXG4gICAgZmFkZUNvbG9yOiBib29sZWFuO1xyXG4gICAgZmFkZVNpemU6IGJvb2xlYW47XHJcbiAgICBhZ2U6IG51bWJlcjtcclxuICAgIGNhbnZhc0N0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG4gICAgcHJpdmF0ZSBzaXplRmFkZUFtb3VudDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBjb2xvckZhZGVBbW91bnQ6IG51bWJlcjtcclxuXHJcbiBcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocG9zaXRpb246IFZlY3RvciwgdmVsb2NpdHk6IFZlY3Rvciwgc2l6ZTogbnVtYmVyLCBzcGVlZDogbnVtYmVyLCAgc2hhcGU6IHNoYXBlID0gJ2NpcmNsZScsIGNvbG9yOiB7cjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciwgYTogbnVtYmVyfSwgY2FudmFzQ3R4OkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgYWdlOiBudW1iZXIsICBmYWRlQ29sb3I/OiBib29sZWFuLCBmYWRlU2l6ZT86IGJvb2xlYW4pe1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgICAgICB0aGlzLnZlbG9jaXR5ID0gdmVsb2NpdHk7XHJcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcclxuICAgICAgICB0aGlzLnNwZWVkID0gc3BlZWQ7XHJcbiAgICAgICAgdGhpcy5zaGFwZSA9IHNoYXBlO1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcclxuICAgICAgICB0aGlzLmNhbnZhc0N0eCA9IGNhbnZhc0N0eDtcclxuICAgICAgICB0aGlzLmZhZGVDb2xvciA9IGZhZGVDb2xvcjtcclxuICAgICAgICB0aGlzLmZhZGVTaXplID0gZmFkZVNpemU7IFxyXG4gICAgICAgIHRoaXMuYWdlID0gYWdlO1xyXG4gICAgICAgIHRoaXMuY29sb3JGYWRlQW1vdW50ID0gdGhpcy5jb2xvci5hL3RoaXMuYWdlO1xyXG4gICAgICAgIHRoaXMuc2l6ZUZhZGVBbW91bnQgPSB0aGlzLnNpemUvdGhpcy5hZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRpY2soZHQ6IG51bWJlcil7XHJcblxyXG4gICAgICAgIHRoaXMucG9zaXRpb24uYWRkKHRoaXMudmVsb2NpdHkuY2xvbmUoKS5tdWx0aXBseUJ5U2NhbGFyKGR0ICogdGhpcy5zcGVlZCkpO1xyXG4gICAgICAgIGlmKHRoaXMuZmFkZUNvbG9yKXtcclxuICAgICAgICAgICAgdGhpcy5jb2xvci5hIC09IHRoaXMuY29sb3JGYWRlQW1vdW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLmZhZGVTaXplKXtcclxuICAgICAgICAgICAgdGhpcy5zaXplIC09ICB0aGlzLnNpemVGYWRlQW1vdW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFnZS0tO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KCl7XHJcbiAgICAgICAgdGhpcy5jYW52YXNDdHgubW92ZVRvKHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55KTtcclxuICAgICAgICB0aGlzLmNhbnZhc0N0eC5maWxsU3R5bGUgPSBgcmdiYSgke3RoaXMuY29sb3Iucn0sJHt0aGlzLmNvbG9yLmd9LCAke3RoaXMuY29sb3IuYn0sICR7dGhpcy5jb2xvci5hfSlgO1xyXG4gICAgICAgIHRoaXMuY2FudmFzQ3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5zaGFwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdjaXJjbGUnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguYXJjKHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55LCB0aGlzLnNpemUsIDAsIDIqTWF0aC5QSSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5maWxsKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnc3F1YXJlJzpcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmZpbGxSZWN0KHRoaXMucG9zaXRpb24ueC10aGlzLnNpemUsIHRoaXMucG9zaXRpb24ueS10aGlzLnNpemUsIHRoaXMuc2l6ZSoyLCB0aGlzLnNpemUqMik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jYW52YXNDdHguY2xvc2VQYXRoKCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcInZlY3RvcjJkXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tRGlyZWN0aW9uKCk6IFZlY3RvcntcclxuXHJcbiAgICByZXR1cm4obmV3IFZlY3RvcihNYXRoLnJhbmRvbSgpKjItMSwgTWF0aC5yYW5kb20oKSoyLTEpKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGV4VG9SZ2IoaGV4OiBzdHJpbmcpIHtcclxuICAgIHZhciByZXN1bHQgPSAvXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pLmV4ZWMoaGV4KTtcclxuICAgIHJldHVybiByZXN1bHQgPyB7XHJcbiAgICAgIHI6IHBhcnNlSW50KHJlc3VsdFsxXSwgMTYpLFxyXG4gICAgICBnOiBwYXJzZUludChyZXN1bHRbMl0sIDE2KSxcclxuICAgICAgYjogcGFyc2VJbnQocmVzdWx0WzNdLCAxNilcclxuICAgIH0gOiBudWxsO1xyXG4gIH0iLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwidmVjdG9yMmRcIjtcblxuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgU2VnbWVudCB7XG4gICAgYWJzdHJhY3QgaXNDb2xsaWRhYmxlOiBib29sZWFuO1xuICAgIGFic3RyYWN0IGRyYXcoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBjb2xvcjogc3RyaW5nKTogdm9pZDtcbiAgICBhYnN0cmFjdCBnZXQgZW5kQW5nbGUoKTogbnVtYmVyO1xuICAgIGFic3RyYWN0IGdldCBlbmRQb2ludCgpOiBWZWN0b3I7XG4gICAgYWJzdHJhY3QgZ2V0Q29udGludWluZ1NlZ21lbnQodHJhbnNmb3JtOiBWZWN0b3IpOiBTZWdtZW50O1xufSIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCJ2ZWN0b3IyZFwiO1xuaW1wb3J0IEFyY1NlZ21lbnQgZnJvbSBcIi4vQXJjU2VnbWVudFwiO1xuaW1wb3J0IExpbmVTZWdtZW50IGZyb20gXCIuL0xpbmVTZWdtZW50XCI7XG5pbXBvcnQgU2VnbWVudCBmcm9tIFwiLi9TZWdtZW50XCI7XG5pbXBvcnQgRW1pdHRlciBmcm9tIFwiLi9QYXJ0aWNsZVN5c3RlbS9FbWl0dGVyXCI7XG5pbXBvcnQgeyBoZXhUb1JnYiB9IGZyb20gXCIuL1BhcnRpY2xlU3lzdGVtL1BhcnRpY2xlU3lzdGVtVXRpbHNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU25ha2Uge1xuICAgIHB1YmxpYyBzZWdtZW50czogU2VnbWVudFtdID0gW107XG4gICAgcHJpdmF0ZSBjb2xvcjogc3RyaW5nO1xuICAgIHB1YmxpYyBpc0FsaXZlOiBib29sZWFuID0gdHJ1ZTtcbiAgICBwdWJsaWMgdHVyblJhZGl1czogbnVtYmVyID0gNjA7XG4gICAgcHJpdmF0ZSBlbWl0dGVyOiBFbWl0dGVyIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBjYW52YXNDdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcbiAgICBwcml2YXRlIGRpc3RhbmNlVG9DaGFuZ2VPZlN0YXRlOiBudW1iZXIgPSAxMDtcblxuXG4gICAgY29uc3RydWN0b3Ioc3RhcnRQb3M6IExpbmVTZWdtZW50LCBjb2xvcjogc3RyaW5nLCBjYW52YXNDdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xuICAgICAgICB0aGlzLmFkZFNlZ21lbnQoc3RhcnRQb3MpO1xuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgICAgIHRoaXMuY2FudmFzQ3R4ID0gY2FudmFzQ3R4XG4gICAgfVxuICAgIGFkZFNlZ21lbnQoc2VnbWVudDogU2VnbWVudCkge1xuICAgICAgICB0aGlzLnNlZ21lbnRzLnB1c2goc2VnbWVudCk7XG4gICAgfVxuXG4gICAgZ2V0IGhlYWQoKTogU2VnbWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzLnNsaWNlKC0xKS5wb3AoKTtcbiAgICB9XG5cbiAgICBkcmF3KCkge1xuICAgICAgICB0aGlzLmNhbnZhc0N0eC5saW5lV2lkdGggPSAxMjtcbiAgICAgICAgLy9UT0RPIGZpeCB0aGlzIHRvIGJlIGEgc2luZ2xlIHBhdGhcbiAgICAgICAgLy8gY29udGV4dC5iZWdpblBhdGgoKTtcblxuICAgICAgICB0aGlzLnNlZ21lbnRzLmZvckVhY2goKHNlZ21lbnQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBzZWdtZW50LmRyYXcodGhpcy5jYW52YXNDdHgsIHRoaXMuY29sb3IpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaGVhZCAhPSBzZWdtZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBBcmNTZWdtZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gc2VnbWVudC5kcmF3RGVidWcodGhpcy5jYW52YXNDdHgsICcjNjY2NjY2Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguYXJjKHNlZ21lbnQuY2VudGVyLngsIHNlZ21lbnQuY2VudGVyLnksIHNlZ21lbnQucmFkaXVzLCBzZWdtZW50LmVuZEFuZ2xlLCBzZWdtZW50LmVuZEFuZ2xlLCBzZWdtZW50LmlzQ291bnRlckNsb2Nrd2lzZSgpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5zdHJva2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBMaW5lU2VnbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4Lm1vdmVUbyhzZWdtZW50LmVuZFBvaW50LngsIHNlZ21lbnQuZW5kUG9pbnQueSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHgubGluZVRvKHNlZ21lbnQuZW5kUG9pbnQueCwgc2VnbWVudC5lbmRQb2ludC55KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5zdHJva2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgfVxuXG4gICAgLy8gbW92ZShkaXN0YW5jZTogbnVtYmVyKSB7XG4gICAgLy8gICAgIC8vZG8gbm90IG1vdmUgaXMgZGVhZCwgc2ltcGxlXG4gICAgLy8gICAgIGlmICghdGhpcy5pc0FsaXZlKSByZXR1cm47XG5cbiAgICAvLyAgICAgdGhpcy5jaGVja1dhbGxzKCk7XG5cbiAgICAvLyAgICAgLy8gZG8gbm90IG1vdmUgaWYgc25ha2UgaGFzIG5vIHNlZ21lbnRzXG4gICAgLy8gICAgIGNvbnN0IGxhc3RTZWdtZW50ID0gdGhpcy5oZWFkO1xuICAgIC8vICAgICBpZiAoIWxhc3RTZWdtZW50KSByZXR1cm47XG5cblxuICAgICAgICBcblxuXG4gICAgLy8gICAgIC8vbW92ZSB0aGUgc25ha2UgdGhlIGNvcnJlY3QgYW1vdW50LCBkZXBlbmRpbmcgb24gdGhlIGhlYWQgc2VnbWVudFxuICAgIC8vICAgICBpZiAobGFzdFNlZ21lbnQgaW5zdGFuY2VvZiBMaW5lU2VnbWVudCkge1xuICAgIC8vICAgICAgICAgY29uc3QgZHggPSBkaXN0YW5jZSAqIE1hdGguY29zKGxhc3RTZWdtZW50LmVuZEFuZ2xlKTtcbiAgICAvLyAgICAgICAgIGNvbnN0IGR5ID0gZGlzdGFuY2UgKiBNYXRoLnNpbihsYXN0U2VnbWVudC5lbmRBbmdsZSk7XG5cbiAgICAvLyAgICAgICAgIGNvbnN0IG5ld0VuZCA9IG5ldyBWZWN0b3IobGFzdFNlZ21lbnQuZW5kUG9pbnQueCArIGR4LCBsYXN0U2VnbWVudC5lbmRQb2ludC55ICsgZHkpO1xuICAgIC8vICAgICAgICAgbGFzdFNlZ21lbnQuZW5kUG9pbnQgPSBuZXdFbmQ7XG5cbiAgICAvLyAgICAgfVxuICAgIC8vICAgICBlbHNlIGlmIChsYXN0U2VnbWVudCBpbnN0YW5jZW9mIEFyY1NlZ21lbnQpIHtcbiAgICAvLyAgICAgICAgIGNvbnN0IGFuZ2xlRXh0ZW5zaW9uID0gZGlzdGFuY2UgLyBsYXN0U2VnbWVudC5yYWRpdXM7XG5cbiAgICAvLyAgICAgICAgIGxhc3RTZWdtZW50LmVuZEFuZ2xlID0gbGFzdFNlZ21lbnQuaXNDb3VudGVyQ2xvY2t3aXNlKCkgPyBsYXN0U2VnbWVudC5lbmRBbmdsZSAtIGFuZ2xlRXh0ZW5zaW9uIDogbGFzdFNlZ21lbnQuZW5kQW5nbGUgKyBhbmdsZUV4dGVuc2lvbjtcblxuICAgIC8vICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyAvLyBhZGQgbmV3IHNlZ21lbnQgbGFzdHNlZ21lbnQuY3JlYXRlZmxpcHBlZHN0YXRlXG4gICAgLy8gICAgIGlmIChsYXN0U2VnbWVudC5pc0NvbGxpZGFibGUgJiYgdGhpcy5kaXN0YW5jZVRvQ2hhbmdlT2ZTdGF0ZSA8IDApIHtcblxuICAgIC8vICAgICAgICAgdGhpcy5kaXN0YW5jZVRvQ2hhbmdlT2ZTdGF0ZSA9IE1hdGgucmFuZG9tKCkgKiA4MCArIDMwIC8vIDQwLTkwXG5cbiAgICAvLyAgICAgICAgIGlmIChsYXN0U2VnbWVudCBpbnN0YW5jZW9mIExpbmVTZWdtZW50KSB7XG4gICAgLy8gICAgICAgICAgICAgdGhpcy5hZGRTZWdtZW50KG5ldyBMaW5lU2VnbWVudChsYXN0U2VnbWVudC5lbmRQb2ludCwgbmV3IFZlY3RvcihsYXN0U2VnbWVudC5lbmRQb2ludC54LCBsYXN0U2VnbWVudC5lbmRQb2ludC55KSwgZmFsc2UsIGxhc3RTZWdtZW50LmVuZEFuZ2xlKSk7XG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgICAgICBlbHNlIGlmIChsYXN0U2VnbWVudCBpbnN0YW5jZW9mIEFyY1NlZ21lbnQpIHtcbiAgICAvLyAgICAgICAgICAgICB0aGlzLmFkZFNlZ21lbnQobmV3IEFyY1NlZ21lbnQobGFzdFNlZ21lbnQuY2VudGVyLCBsYXN0U2VnbWVudC5yYWRpdXMsIGxhc3RTZWdtZW50LmVuZEFuZ2xlLCBsYXN0U2VnbWVudC5lbmRBbmdsZSwgbGFzdFNlZ21lbnQuaXNDb3VudGVyQ2xvY2t3aXNlKCksIGZhbHNlKSlcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfVxuXG4gICAgLy8gICAgIGlmICghbGFzdFNlZ21lbnQuaXNDb2xsaWRhYmxlICYmIHRoaXMuZGlzdGFuY2VUb0NoYW5nZU9mU3RhdGUgPCAwKSB7XG5cbiAgICAvLyAgICAgICAgIHRoaXMuZGlzdGFuY2VUb0NoYW5nZU9mU3RhdGUgPSBNYXRoLnJhbmRvbSgpICogNTAwICsgODAgLy8gODAtMzIwXG5cbiAgICAvLyAgICAgICAgIGlmIChsYXN0U2VnbWVudCBpbnN0YW5jZW9mIExpbmVTZWdtZW50KSB7XG4gICAgLy8gICAgICAgICAgICAgdGhpcy5hZGRTZWdtZW50KG5ldyBMaW5lU2VnbWVudChsYXN0U2VnbWVudC5lbmRQb2ludCwgbmV3IFZlY3RvcihsYXN0U2VnbWVudC5lbmRQb2ludC54LCBsYXN0U2VnbWVudC5lbmRQb2ludC55KSwgdHJ1ZSwgbGFzdFNlZ21lbnQuZW5kQW5nbGUpKVxuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICAgICAgZWxzZSBpZiAobGFzdFNlZ21lbnQgaW5zdGFuY2VvZiBBcmNTZWdtZW50KSB7XG4gICAgLy8gICAgICAgICAgICAgdGhpcy5hZGRTZWdtZW50KG5ldyBBcmNTZWdtZW50KGxhc3RTZWdtZW50LmNlbnRlciwgbGFzdFNlZ21lbnQucmFkaXVzLCBsYXN0U2VnbWVudC5lbmRBbmdsZSwgbGFzdFNlZ21lbnQuZW5kQW5nbGUsIGxhc3RTZWdtZW50LmlzQ291bnRlckNsb2Nrd2lzZSgpLCB0cnVlKSlcbiAgICAvLyAgICAgICAgIH1cblxuICAgIC8vICAgICB9XG5cbiAgICAvLyAgICAgLy91cGRhdGUgdGhlIGRpc3RhbmNlIHRyYXZlbGxlZFxuICAgIC8vICAgICB0aGlzLmRpc3RhbmNlVG9DaGFuZ2VPZlN0YXRlIC09IGRpc3RhbmNlO1xuICAgIC8vIH1cblxua2lsbCgpIHtcbiAgICBjb25zb2xlLmxvZyhcIlNOQUtFIERFQURcIilcbiAgICB0aGlzLmlzQWxpdmUgPSBmYWxzZTtcbiAgICB0aGlzLmVtaXR0ZXIgPSBuZXcgRW1pdHRlcih0aGlzLmhlYWQuZW5kUG9pbnQsIDEsIDcsIDQsICdjaXJjbGUnLCB7IC4uLmhleFRvUmdiKHRoaXMuY29sb3IpLCBhOiAxIH0sIHRoaXMuY2FudmFzQ3R4LCB0cnVlLCB0cnVlLCA3MCwgNCk7XG59XG5cbnVwZGF0ZUVtaXR0ZXIoZHQ6IG51bWJlcikge1xuICAgIGlmICh0aGlzLmVtaXR0ZXIpIHtcbiAgICAgICAgdGhpcy5lbWl0dGVyLnRpY2soZHQpO1xuICAgICAgICB0aGlzLmVtaXR0ZXIuZHJhdygpO1xuICAgIH1cbn1cblxuY2hlY2tXYWxscygpIHtcbiAgICBjb25zdCBsYXN0U2VnbWVudCA9IHRoaXMuaGVhZDtcbiAgICBpZiAobGFzdFNlZ21lbnQuZW5kUG9pbnQueCA8IDApIHtcbiAgICAgICAgdGhpcy5hZGRTZWdtZW50KGxhc3RTZWdtZW50LmdldENvbnRpbnVpbmdTZWdtZW50KG5ldyBWZWN0b3IodGhpcy5jYW52YXNDdHguY2FudmFzLndpZHRoLCAwKSkpO1xuICAgIH0gXG4gICAgZWxzZSBpZiAobGFzdFNlZ21lbnQuZW5kUG9pbnQueCA+IHRoaXMuY2FudmFzQ3R4LmNhbnZhcy53aWR0aCkge1xuICAgICAgICB0aGlzLmFkZFNlZ21lbnQobGFzdFNlZ21lbnQuZ2V0Q29udGludWluZ1NlZ21lbnQobmV3IFZlY3RvcigtdGhpcy5jYW52YXNDdHguY2FudmFzLndpZHRoLCAwKSkpO1xuICAgIH1cbiAgICBcbiAgICBpZiAobGFzdFNlZ21lbnQuZW5kUG9pbnQueSA8IDApIHtcbiAgICAgICAgdGhpcy5hZGRTZWdtZW50KGxhc3RTZWdtZW50LmdldENvbnRpbnVpbmdTZWdtZW50KG5ldyBWZWN0b3IoMCwgdGhpcy5jYW52YXNDdHguY2FudmFzLmhlaWdodCkpKTtcbiAgICB9IFxuICAgIGVsc2UgaWYgKGxhc3RTZWdtZW50LmVuZFBvaW50LnkgPiB0aGlzLmNhbnZhc0N0eC5jYW52YXMuaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuYWRkU2VnbWVudChsYXN0U2VnbWVudC5nZXRDb250aW51aW5nU2VnbWVudChuZXcgVmVjdG9yKDAsIC10aGlzLmNhbnZhc0N0eC5jYW52YXMuaGVpZ2h0KSkpO1xuICAgIH1cbiAgICBcbn1cblxuICAgIFxufSIsImltcG9ydCBTbmFrZSBmcm9tIFwiLi4vU25ha2VcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQbGF5ZXIge1xyXG4gICAgcHVibGljIHVzZXJuYW1lOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgaXNSZWFkeTogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBjb2xvcjogc3RyaW5nO1xyXG4gICAgcHVibGljIHNuYWtlOiBTbmFrZTtcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IodXNlcm5hbWU6IHN0cmluZywgaXNSZWFkeTogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xyXG4gICAgICAgIHRoaXMuaXNSZWFkeSA9IGlzUmVhZHk7XHJcbiAgICAgICAgdGhpcy5jb2xvciA9IFwiIzAwMDAwMFwiLnJlcGxhY2UoLzAvZyxmdW5jdGlvbigpe3JldHVybiAofn4oTWF0aC5yYW5kb20oKSoxNikpLnRvU3RyaW5nKDE2KTt9KTtcclxuICAgIH1cclxuXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLFxyXG4gICAgICAgICAgaXNSZWFkeTogdGhpcy5pc1JlYWR5LFxyXG4gICAgICAgICAgY29sb3I6IHRoaXMuY29sb3JcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vUGxheWVyXCI7XHJcblxyXG5leHBvcnQgY29uc3QgZW51bSBHYW1lU3RhdGUge1xyXG4gICAgUlVOTklORyxcclxuICAgIElOX0xPQkJZLFxyXG4gICAgRklOSVNIRURcclxufVxyXG5leHBvcnQgY2xhc3MgUm9vbSB7XHJcbiAgICBwcml2YXRlIHBsYXllcnM6IHsgW2tleTogc3RyaW5nXTogUGxheWVyOyB9ID0ge307XHJcbiAgICBwcml2YXRlIG1heFNpemU6IG51bWJlcjtcclxuICAgIHByaXZhdGUgZ2FtZVN0YXRlOiBHYW1lU3RhdGU7XHJcbiAgICBwcml2YXRlIGhvc3Q6IFBsYXllcjtcclxuICAgIHByaXZhdGUgY29kZTogc3RyaW5nO1xyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb2RlOiBzdHJpbmcsIGhvc3Q6IFBsYXllciwgcGxheWVycz86IHsgW2tleTogc3RyaW5nXTogUGxheWVyOyB9LCBtYXhTaXplOiBudW1iZXIgPSA1KSB7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICB0aGlzLmhvc3QgPSBob3N0O1xyXG4gICAgICAgIHRoaXMubWF4U2l6ZSA9IG1heFNpemU7XHJcblxyXG4gICAgICAgIGlmIChwbGF5ZXJzICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllcnMgPSBwbGF5ZXJzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICB0aGlzLmFkZFBsYXllcihob3N0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRQbGF5ZXIocGxheWVyOiBQbGF5ZXIpOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMucGxheWVycykubGVuZ3RoID49IHRoaXMubWF4U2l6ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnBsYXllcnNbcGxheWVyLnVzZXJuYW1lXSA9IHBsYXllcjtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0Q29kZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb2RlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRQbGF5ZXJzKCk6IHsgW2tleTogc3RyaW5nXTogUGxheWVyOyB9IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wbGF5ZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRIb3N0KCk6IFBsYXllciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaG9zdDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0SG9zdChwbGF5ZXI6IFBsYXllcikge1xyXG4gICAgICAgIHRoaXMuaG9zdCA9IHBsYXllcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0UGxheWVycyhwbGF5ZXJzOiB7IFtrZXk6IHN0cmluZ106IFBsYXllcjsgfSl7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJzID0gcGxheWVycztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0TWF4U2l6ZShuZXdTaXplOiBudW1iZXIpe1xyXG4gICAgICAgIHRoaXMubWF4U2l6ZSA9IG5ld1NpemU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE1heFNpemUoKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYXhTaXplO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRHYW1lU3RhdGUobmV3R2FtZVN0YXRlOiBHYW1lU3RhdGUpe1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlID0gbmV3R2FtZVN0YXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRHYW1lU3RhdGUoKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5nYW1lU3RhdGU7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyB1cGRhdGVHYW1lU3RhdGUgfSBmcm9tIFwiLi5cIjtcclxuaW1wb3J0IHsgY3VycmVudFBsYXllciwgc2hvd0Vycm9yQW5pbWF0aW9uLCBzaG93Um9vbVZpZXcsIHN3aXRjaEdhbWVWaWV3LCB1cGRhdGVSb29tTGlzdCB9IGZyb20gXCIuLi9NZW51TWFuYWdlci9sb2dpblwiO1xyXG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi4vVmlld01vZGVscy9QbGF5ZXJcIjtcclxuXHJcbmxldCBzb2NrZXQ6IFdlYlNvY2tldDtcclxuXHJcbmZ1bmN0aW9uIGluaXRXZWJTb2NrZXQoKSB7XHJcbiAgICBzb2NrZXQgPSBuZXcgV2ViU29ja2V0KGB3czovLyR7d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lfTo4MDgwYCk7XHJcbiAgICBcclxuICAgIHNvY2tldC5vbm9wZW4gPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBjb25uZWN0aW9uIGVzdGFibGlzaGVkJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHNvY2tldC5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnTWVzc2FnZSBmcm9tIHNlcnZlcjonLCBkYXRhKTtcclxuICAgICAgICBcclxuICAgICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdKT0lORURfUk9PTSc6XHJcbiAgICAgICAgICAgICAgICBzaG93Um9vbVZpZXcoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnUk9PTV9ET0VTX05PVF9FWElTVCc6XHJcbiAgICAgICAgICAgICAgICBzaG93RXJyb3JBbmltYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdST09NX0RBVEEnOlxyXG4gICAgICAgICAgICAgICAgdXBkYXRlUm9vbUxpc3QoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnR0FNRV9TVEFURSc6XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2hHYW1lVmlldyhkYXRhKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdHQU1FUExBWV9EQVRBJzpcclxuICAgICAgICAgICAgICAgIHVwZGF0ZUdhbWVTdGF0ZShkYXRhKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdFUlJPUic6XHJcbiAgICAgICAgICAgICAgICBhbGVydChgRXJyb3I6ICR7ZGF0YS5tZXNzYWdlfWApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgc29ja2V0Lm9uY2xvc2UgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBjb25uZWN0aW9uIGNsb3NlZCcpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgc29ja2V0Lm9uZXJyb3IgPSAoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdXZWJTb2NrZXQgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJvb20odXNlcm5hbWU6IHN0cmluZykge1xyXG4gICAgaWYgKHNvY2tldCAmJiBzb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcclxuICAgICAgICBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGU6ICdDUkVBVEVfUk9PTScsIHVzZXJuYW1lOiB1c2VybmFtZSB9KSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1dlYlNvY2tldCBjb25uZWN0aW9uIGlzIG5vdCBvcGVuJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBqb2luUm9vbShyb29tQ29kZTogc3RyaW5nLCB1c2VybmFtZTogc3RyaW5nKSB7XHJcbiAgICBpZiAoc29ja2V0ICYmIHNvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xyXG4gICAgICAgIHNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogJ0pPSU5fUk9PTScsIHJvb21Db2RlOiByb29tQ29kZSwgdXNlcm5hbWU6IHVzZXJuYW1lIH0pKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignV2ViU29ja2V0IGNvbm5lY3Rpb24gaXMgbm90IG9wZW4nKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldFBsYXllckRhdGEocGxheWVyOiBQbGF5ZXIsIHJvb21Db2RlOiBzdHJpbmcpIHtcclxuICAgIGlmIChzb2NrZXQgJiYgc29ja2V0LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XHJcbiAgICAgICAgc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiAnUExBWUVSX0RBVEEnLCBwbGF5ZXI6IHBsYXllciwgcm9vbUNvZGU6IHJvb21Db2RlfSkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdXZWJTb2NrZXQgY29ubmVjdGlvbiBpcyBub3Qgb3BlbicpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2VuZEtleUV2ZW50VG9TZXJ2ZXIoa2V5OiBzdHJpbmcsIHByZXNzZWQ6IGJvb2xlYW4pe1xyXG4gICAgaWYgKHNvY2tldCAmJiBzb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcclxuICAgICAgICBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGU6ICdLRVlfRVZFTlQnLCBwbGF5ZXI6IGN1cnJlbnRQbGF5ZXIsIGtleToga2V5LCBwcmVzc2VkOiBwcmVzc2VkIH0pKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignV2ViU29ja2V0IGNvbm5lY3Rpb24gaXMgbm90IG9wZW4nKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNlbmRTdGFydENvbW1hbmQocm9vbUNvZGU6IHN0cmluZykge1xyXG4gICAgaWYgKHNvY2tldCAmJiBzb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcclxuICAgICAgICBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGU6ICdCRUdJTl9HQU1FJywgcm9vbUNvZGU6IHJvb21Db2RlfSkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdXZWJTb2NrZXQgY29ubmVjdGlvbiBpcyBub3Qgb3BlbicpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcbmluaXRXZWJTb2NrZXQoKTtcclxuIiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcInZlY3RvcjJkXCI7XG5pbXBvcnQgQXJjU2VnbWVudCBmcm9tIFwiLi9BcmNTZWdtZW50XCI7XG5pbXBvcnQgeyBkcmF3R3JpZCB9IGZyb20gXCIuL0RyYXdlclwiO1xuaW1wb3J0IElucHV0TWFuYWdlciBmcm9tIFwiLi9JbnB1dE1hbmFnZXJcIjtcbmltcG9ydCBMaW5lU2VnbWVudCBmcm9tIFwiLi9MaW5lU2VnbWVudFwiO1xuaW1wb3J0IFNuYWtlIGZyb20gXCIuL1NuYWtlXCI7XG5pbXBvcnQgRW1pdHRlciBmcm9tIFwiLi9QYXJ0aWNsZVN5c3RlbS9FbWl0dGVyXCI7XG5pbXBvcnQgQ29sbGlzaW9uSGFuZGxlciBmcm9tIFwiLi9Db2xsaXNpb25IYW5kbGVyXCI7XG5pbXBvcnQgeyBNZXNzYWdlR2FtZXBsYXksIG1lc3NhZ2VMaW5lU2VnbWVudCB9IGZyb20gXCIuL1dlYlNvY2tldENsaWVudC9tZXNzYWdlVHlwZXNcIjtcbmltcG9ydCBTZWdtZW50IGZyb20gXCIuL1NlZ21lbnRcIjtcbmltcG9ydCB7IGN1cnJlbnRQbGF5ZXIsIGN1cnJlbnRSb29tIH0gZnJvbSBcIi4vTWVudU1hbmFnZXIvbG9naW5cIjtcblxudmFyIGZwc0NvdW50ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbmZwc0NvdW50ZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuZnBzQ291bnRlci5zdHlsZS50b3AgPSAnMTBweCc7XG5mcHNDb3VudGVyLnN0eWxlLmxlZnQgPSAnMTBweCc7XG5mcHNDb3VudGVyLnN0eWxlLmNvbG9yID0gJ2JsYWNrJztcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZnBzQ291bnRlcik7XG5leHBvcnQgdmFyIGZwcyA9IDYwO1xuXG5leHBvcnQgdmFyIGdhbWVDYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZS1jYW52YXMnKSAgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XG5leHBvcnQgdmFyIGdhbWVDYW52YXNDdHggPSBnYW1lQ2FudmFzLmdldENvbnRleHQoJzJkJykhO1xuXG5leHBvcnQgdmFyIGJhY2tncm91bmRDYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFja2dyb3VuZC1jYW52YXMnKSAgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XG5leHBvcnQgdmFyIGJhY2tncm91bmRDYW52YXNDdHggPSBiYWNrZ3JvdW5kQ2FudmFzLmdldENvbnRleHQoJzJkJykhO1xuXG5iYWNrZ3JvdW5kQ2FudmFzIS53aWR0aCA9IGJhY2tncm91bmRDYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG5iYWNrZ3JvdW5kQ2FudmFzIS5oZWlnaHQgPSBiYWNrZ3JvdW5kQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbmdhbWVDYW52YXMhLndpZHRoID0gZ2FtZUNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbmdhbWVDYW52YXMhLmhlaWdodCA9IGdhbWVDYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuZXhwb3J0IHZhciBncmlkU2l6ZSA9IDYwO1xubGV0IGlucHV0TWFuYWdlcjtcbmZ1bmN0aW9uIHVwZGF0ZUNhbnZhc1NpemUoKSB7XG4gICAgZ2FtZUNhbnZhcy53aWR0aCA9IGdhbWVDYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgZ2FtZUNhbnZhcy5oZWlnaHQgPSBnYW1lQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgICBiYWNrZ3JvdW5kQ2FudmFzLndpZHRoID0gYmFja2dyb3VuZENhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICBiYWNrZ3JvdW5kQ2FudmFzLmhlaWdodCA9IGJhY2tncm91bmRDYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuICAgIGRyYXdHcmlkKCk7XG4gIH1cblxuZnVuY3Rpb24gYW5pbWF0ZSgpIHtcbiAgICB2YXIgbXVsdCA9IGZwcyAvIDYwO1xuICAgIGZyYW1lQ291bnQrKztcbiAgICBpZiAoZnJhbWVDb3VudCAlIDEwID09PSAwKSB7XG4gICAgICAgIGZwcyA9IGNhbGN1bGF0ZUZQUygpO1xuICAgICAgICBmcHNDb3VudGVyLmlubmVyVGV4dCA9IGBGUFM6ICR7ZnBzfWA7XG4gICAgfVxuICAgIGdhbWVDYW52YXNDdHguY2xlYXJSZWN0KDAsIDAsIGdhbWVDYW52YXMud2lkdGgsIGdhbWVDYW52YXMuaGVpZ2h0KTtcblxuICAgIE9iamVjdC52YWx1ZXMoY3VycmVudFJvb20uZ2V0UGxheWVycygpKS5mb3JFYWNoKHBsYXllciA9PiB7XG4gICAgICAgIHBsYXllci5zbmFrZS5kcmF3KCk7XG4gICAgICAgIC8vIHNuYWtlLnVwZGF0ZUVtaXR0ZXIoKHBlcmZvcm1hbmNlLm5vdygpLzEwIC0gbGFzdFRpbWUpLzEwKTtcbiAgICB9KVxuICAgIFxuICAgIC8vIGNvbGxpc2lvbkhhbmRsZXIuY2hlY2tDb2xsaXNpb25zKCk7XG4gICAgLy8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xuICAgIFxuICAgIC8vIGVtaXR0ZXIudGljaygwLjMpO1xuICAgIC8vIGVtaXR0ZXIuZHJhdygpO1xufVxudmFyIGZyYW1lQ291bnQgPSAwO1xudmFyIGxhc3RUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLyAxMDtcbmZ1bmN0aW9uIGNhbGN1bGF0ZUZQUygpIHtcbiAgICB2YXIgY3VycmVudFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAvIDEwO1xuICAgIHZhciB0aW1lRGlmZiA9IGN1cnJlbnRUaW1lIC0gbGFzdFRpbWU7XG4gICAgdmFyIGZwcyA9IE1hdGgucm91bmQoMTAwMCAvIHRpbWVEaWZmKTtcbiAgICBsYXN0VGltZSA9IGN1cnJlbnRUaW1lO1xuICAgIHJldHVybiBmcHM7XG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHVwZGF0ZUNhbnZhc1NpemUpO1xuZHJhd0dyaWQoKTtcbmxldCBpbml0aWFsaXplZCA9IGZhbHNlO1xuXG4vLyBjb25zdCBpbnB1dE1hbmFnZXJzOiBJbnB1dE1hbmFnZXJbXSA9IFtdXG4vLyBjb25zdCBjb2xvcnM6IHN0cmluZ1tdID0gW1wiI2VmODg4OFwiLCBcIiNmZjAwMDBcIiwgXCIjMDBhYWJiXCIsIFwiIzAwMDBlZVwiXVxuLy8gY29uc3Qga2V5bWFwczogc3RyaW5nW11bXSA9W1snQScsJ0QnXSxbJ0YnLCdIJ10sWydKJywnTCddLCBbJzgnLCcwJ11dIFxuLy8gZm9yIChsZXQgaSA9IDA7IGkgPCAyOyBpKyspe1xuLy8gICAgIGxldCBzdGFydFBvcyA9IG5ldyBWZWN0b3IoTWF0aC5yYW5kb20oKSogMTgwMCwgTWF0aC5yYW5kb20oKSo5MDApO1xuLy8gICAgIHNuYWtlcy5wdXNoKG5ldyBTbmFrZShuZXcgTGluZVNlZ21lbnQoc3RhcnRQb3MsIHN0YXJ0UG9zLmFkZChuZXcgVmVjdG9yKDEwLDEwKSksIHRydWUgLE1hdGgucmFuZG9tKCkqIDIqIE1hdGguUEkpLCBjb2xvcnNbaV0sIGdhbWVDYW52YXNDdHgpKTtcbi8vICAgICBpbnB1dE1hbmFnZXJzLnB1c2gobmV3IElucHV0TWFuYWdlcihzbmFrZXNbaV0sIGtleW1hcHNbaV1bMF0sIGtleW1hcHNbaV1bMV0pKVxuLy8gfVxuXG4vLyBjb25zdCBjb2xsaXNpb25IYW5kbGVyID0gbmV3IENvbGxpc2lvbkhhbmRsZXIoc25ha2VzKVxuLy8gY29uc3QgZW1pdHRlciA9IG5ldyBFbWl0dGVyKG5ldyBWZWN0b3IoZ2FtZUNhbnZhcy53aWR0aC8yLCBnYW1lQ2FudmFzLmhlaWdodC8yKSwgMiwgMTAsIDUsICdjaXJjbGUnLCB7cjoyNTUsIGc6MCwgYjoyNTUsIGE6MC41fSwgZ2FtZUNhbnZhc0N0eCwgdHJ1ZSwgdHJ1ZSwgMjAwKVxuXG4vLyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XG5cblxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlR2FtZVN0YXRlKGdhbWVTdGF0ZTogTWVzc2FnZUdhbWVwbGF5KSB7XG5cbiAgICBpZiAoIWluaXRpYWxpemVkKSB7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBzbmFrZXMgdGhlIGZpcnN0IHRpbWUgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWRcbiAgICAgICAgZ2FtZVN0YXRlLnNuYWtlSGVhZHMuZm9yRWFjaChoZWFkRGF0YSA9PiB7XG4gICAgICAgICAgICBsZXQgaGVhZCA9IGhlYWREYXRhLmxhc3RTZWdtZW50O1xuICAgICAgICAgICAgbGV0IHVzZXJuYW1lID0gaGVhZERhdGEudXNlcm5hbWU7XG4gICAgICAgICAgICBsZXQgcG9zID0gaGVhZC5lbmRQb2ludFxuICAgICAgICAgICAgY3VycmVudFJvb20uZ2V0UGxheWVycygpW3VzZXJuYW1lXS5zbmFrZSA9IG5ldyBTbmFrZShuZXcgTGluZVNlZ21lbnQobmV3IFZlY3Rvcihwb3MueCwgcG9zLnkpICwgbmV3IFZlY3Rvcihwb3MueCwgcG9zLnkpICwgaGVhZC5pc0NvbGxpZGFibGUsIGhlYWQuZW5kQW5nbGUpLGN1cnJlbnRSb29tLmdldFBsYXllcnMoKVt1c2VybmFtZV0uY29sb3IsIGdhbWVDYW52YXNDdHgpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlucHV0TWFuYWdlciA9IG5ldyBJbnB1dE1hbmFnZXIoY3VycmVudFJvb20uZ2V0UGxheWVycygpW2N1cnJlbnRQbGF5ZXIudXNlcm5hbWVdLnNuYWtlLCdBJywnRCcpO1xuXG4gICAgICAgIGluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgfSBcbiAgICAgZWxzZSB7XG4gICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBzbmFrZXMgYmFzZWQgb24gdGhlIG5ldyBnYW1lIHN0YXRlXG4gICAgICAgIGdhbWVTdGF0ZS5zbmFrZUhlYWRzLmZvckVhY2gobmV3SGVhZERhdGEgPT4ge1xuICAgICAgICAgICAgbGV0IGhlYWQgPSBuZXdIZWFkRGF0YS5sYXN0U2VnbWVudDtcbiAgICAgICAgICAgIGxldCB1c2VybmFtZSA9IG5ld0hlYWREYXRhLnVzZXJuYW1lO1xuICAgICAgICAgICAgbGV0IGVuZFBvcyA9IGhlYWQuZW5kUG9pbnRcbiAgICAgICAgICAgIGxldCBzbmFrZVRvVXBkYXRlID0gY3VycmVudFJvb20uZ2V0UGxheWVycygpW3VzZXJuYW1lXS5zbmFrZTtcblxuICAgICAgICAgIGlmKGhlYWQuaXNOZXdUaGlzVGljayl7XG4gICAgICAgICAgICBpZihuZXdIZWFkRGF0YS5zZWdtZW50VHlwZSA9PSAnTGluZVNlZ21lbnQnKXtcbiAgICAgICAgICAgICAgICBoZWFkID0gaGVhZCBhcyBtZXNzYWdlTGluZVNlZ21lbnRcbiAgICAgICAgICAgICAgICBsZXQgc3RhcnRQb3MgPSBoZWFkLnN0YXJ0UG9pbnQ7XG4gICAgICAgICAgICAgICAgc25ha2VUb1VwZGF0ZS5hZGRTZWdtZW50KG5ldyBMaW5lU2VnbWVudChuZXcgVmVjdG9yKHN0YXJ0UG9zLngsIHN0YXJ0UG9zLnkpLCBuZXcgVmVjdG9yKGVuZFBvcy54LCBlbmRQb3MueSksIGhlYWQuaXNDb2xsaWRhYmxlLCBoZWFkLmVuZEFuZ2xlKSk7XG4gICAgICAgICAgICB9IFxuICAgICAgICAgICAgZWxzZSBpZiAobmV3SGVhZERhdGEuc2VnbWVudFR5cGUgPT0gJ0FyY1NlZ21lbnQnKXtcbiAgICAgICAgICAgICAgICAvLyBzbmFrZXNbaW5kZXhdLmFkZFNlZ21lbnQobmV3IEFyY1NlZ21lbnQoaGVhZC4pKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgaGVhZCA9IGhlYWQgYXMgbWVzc2FnZUxpbmVTZWdtZW50XG4gICAgICAgICAgICBsZXQgc3RhcnRQb3MgPSBoZWFkLnN0YXJ0UG9pbnQ7XG4gICAgICAgICAgICBzbmFrZVRvVXBkYXRlLnNlZ21lbnRzW3NuYWtlVG9VcGRhdGUuc2VnbWVudHMubGVuZ3RoLTFdID0gKG5ldyBMaW5lU2VnbWVudChuZXcgVmVjdG9yKHN0YXJ0UG9zLngsIHN0YXJ0UG9zLnkpLCBuZXcgVmVjdG9yKGVuZFBvcy54LCBlbmRQb3MueSksIGhlYWQuaXNDb2xsaWRhYmxlLCBoZWFkLmVuZEFuZ2xlKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgYW5pbWF0ZSgpO1xuXG5cbiAgfSIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLyoqXG4gKiBUaGVzZSB2YWx1ZXMgYXJlIHVzZWQgYnkgdGhlIGBBYnN0cmFjdFZlY3Rvci5yb3VuZGAgbWV0aG9kIHRvIGluY3JlYXNlXG4gKiBwZXJmb3JtYW5jZSB2cy4gdXNpbmcgIE51bWJlci50b0ZpeGVkLlxuICovXG52YXIgcHJlY2lzaW9uID0gW1xuICAgIDEsXG4gICAgMTAsXG4gICAgMTAwLFxuICAgIDEwMDAsXG4gICAgMTAwMDAsXG4gICAgMTAwMDAwLFxuICAgIDEwMDAwMDAsXG4gICAgMTAwMDAwMDAsXG4gICAgMTAwMDAwMDAwLFxuICAgIDEwMDAwMDAwMDAsXG4gICAgMTAwMDAwMDAwMDBcbl07XG4vKipcbiAqIFRoZSBjbGFzcyB0aGF0IGFsbCBvdGhlciB2ZWN0b3IgcmVwcmVzZW50YXRpb25zIGFyZSBkZXJpdmVkIGZyb20uXG4gKlxuICogQ29udGFpbnMgdGhlIGNvcmUgaW1wbGVtZW50YXRpb24gZm9yIGFsbCBtZXRob2RzIHRoYXQgd2lsbCBiZSBleHBvc2VkIGJ5XG4gKiB2ZWN0b3IgaW5zdGFuY2VzLlxuICpcbiAqIEV4YW1wbGUgb2YgY3JlYXRpbmcgYSBjdXN0b20gaW1wbGVtZW50YXRpb246XG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IEFic3RyYWN0VmVjdG9yIH0gZnJvbSBcIi4vQWJzdHJhY3RWZWN0b3JcIlxuICpcbiAqIGV4cG9ydCBjbGFzcyBNeUN1c3RvbVZlY3RvciBleHRlbmRzIEFic3RyYWN0VmVjdG9yIHtcbiAqICBjb25zdHJ1Y3RvciAoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAqICAgIHN1cGVyKEN1c3RvbVZlY3RvclR5cGUpXG4gKiAgfVxuICogfVxuICogYGBgXG4gKi9cbnZhciBBYnN0cmFjdFZlY3RvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBYnN0cmFjdFZlY3RvcihjdG9yKSB7XG4gICAgICAgIHRoaXMuY3RvciA9IGN0b3I7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBib3RoIHggYW5kIHkgYXhpcyB2YWx1ZVxuICAgICAqIEBwYXJhbSB4ICAgTmV3IHggdmFsXG4gICAgICogQHBhcmFtIHkgICBOZXcgeSB2YWxcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuc2V0QXhlcyA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0dGVyIGZvciB4IHRoZSBheGlzIHZhbHVlXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmdldFggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLng7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgZm9yIHggYXhpcyB2YWx1ZVxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5zZXRYID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgZm9yIHkgYXhpcyB2YWx1ZVxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy55O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0dGVyIGZvciB5IGF4aXMuXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnNldFkgPSBmdW5jdGlvbiAoeSkge1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgdmVjdG9yIGFzIGEgZm9ybWF0dGVkIHN0cmluZywgZS5nIFwiKDAsIDQpXCJcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAocm91bmQpIHtcbiAgICAgICAgaWYgKHJvdW5kID09PSB2b2lkIDApIHsgcm91bmQgPSBmYWxzZTsgfVxuICAgICAgICBpZiAocm91bmQpIHtcbiAgICAgICAgICAgIHJldHVybiBcIihcIiArIE1hdGgucm91bmQodGhpcy54KSArIFwiLCBcIiArIE1hdGgucm91bmQodGhpcy55KSArIFwiKVwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIihcIiArIHRoaXMueCArIFwiLCBcIiArIHRoaXMueSArIFwiKVwiO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGFuIEFycmF5IGNvbnRhaW5pbmcgdGhlIHZlY3RvciBheGVzLCBlLmcgWzAsIDRdXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnldO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGFuIE9iamVjdCBjb250YWluaW5nIHRoZSB2ZWN0b3IgYXhlcywgZS5nIHsgeDogMCwgeTogNCB9XG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnRvT2JqZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogdGhpcy54LFxuICAgICAgICAgICAgeTogdGhpcy55XG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIHByb3ZpZGVkIHZlY3RvciB0byB0aGlzIG9uZVxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodmVjKSB7XG4gICAgICAgIHRoaXMueCArPSB2ZWMueDtcbiAgICAgICAgdGhpcy55ICs9IHZlYy55O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFN1YnRyYWN0IHRoZSBwcm92aWRlZCB2ZWN0b3IgZnJvbSB0aGlzIG9uZVxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5zdWJ0cmFjdCA9IGZ1bmN0aW9uICh2ZWMpIHtcbiAgICAgICAgdGhpcy54IC09IHZlYy54O1xuICAgICAgICB0aGlzLnkgLT0gdmVjLnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgdGhlIHByb3ZpZGVkIHZlY3RvciBlcXVhbCB0byB0aGlzIG9uZVxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAodmVjKSB7XG4gICAgICAgIHJldHVybiB2ZWMueCA9PT0gdGhpcy54ICYmIHZlYy55ID09PSB0aGlzLnk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNdWx0aXBseSB0aGlzIHZlY3RvciBieSB0aGUgcHJvdmlkZWQgdmVjdG9yXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLm11bHRpcGx5QnlWZWN0b3IgPSBmdW5jdGlvbiAodmVjKSB7XG4gICAgICAgIHRoaXMueCAqPSB2ZWMueDtcbiAgICAgICAgdGhpcy55ICo9IHZlYy55O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE11bHRpcGx5IHRoaXMgdmVjdG9yIGJ5IHRoZSBwcm92aWRlZCB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubXVsViA9IGZ1bmN0aW9uICh2ZWMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXVsdGlwbHlCeVZlY3Rvcih2ZWMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGl2aWRlIHRoaXMgdmVjdG9yIGJ5IHRoZSBwcm92aWRlZCB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuZGl2aWRlQnlWZWN0b3IgPSBmdW5jdGlvbiAodmVjKSB7XG4gICAgICAgIHRoaXMueCAvPSB2ZWMueDtcbiAgICAgICAgdGhpcy55IC89IHZlYy55O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpdmlkZSB0aGlzIHZlY3RvciBieSB0aGUgcHJvdmlkZWQgdmVjdG9yXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmRpdlYgPSBmdW5jdGlvbiAodikge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXZpZGVCeVZlY3Rvcih2KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE11bHRpcGx5IHRoaXMgdmVjdG9yIGJ5IHRoZSBwcm92aWRlZCBudW1iZXJcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubXVsdGlwbHlCeVNjYWxhciA9IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIHRoaXMueCAqPSBuO1xuICAgICAgICB0aGlzLnkgKj0gbjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNdWx0aXBseSB0aGlzIHZlY3RvciBieSB0aGUgcHJvdmlkZWQgbnVtYmVyXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLm11bFMgPSBmdW5jdGlvbiAobikge1xuICAgICAgICByZXR1cm4gdGhpcy5tdWx0aXBseUJ5U2NhbGFyKG4pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGl2aXZlIHRoaXMgdmVjdG9yIGJ5IHRoZSBwcm92aWRlZCBudW1iZXJcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuZGl2aWRlQnlTY2FsYXIgPSBmdW5jdGlvbiAobikge1xuICAgICAgICB0aGlzLnggLz0gbjtcbiAgICAgICAgdGhpcy55IC89IG47XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGl2aXZlIHRoaXMgdmVjdG9yIGJ5IHRoZSBwcm92aWRlZCBudW1iZXJcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuZGl2UyA9IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpdmlkZUJ5U2NhbGFyKG4pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTm9ybWFsaXNlIHRoaXMgdmVjdG9yXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLm5vcm1hbGlzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGl2aWRlQnlTY2FsYXIodGhpcy5tYWduaXR1ZGUoKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGb3IgQW1lcmljYW4gc3BlbGxpbmcuIFNhbWUgYXMgdW5pdC9ub3JtYWxpc2UgZnVuY3Rpb25cbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubm9ybWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWxpc2UoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZSBzYW1lIGFzIG5vcm1hbGlzZSBhbmQgbm9ybWFsaXplXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnVuaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGlzZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbWFnbml0dWRlIChsZW5ndGgpIG9mIHRoaXMgdmVjdG9yXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLm1hZ25pdHVkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHggPSB0aGlzLng7XG4gICAgICAgIHZhciB5ID0gdGhpcy55O1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbWFnbml0dWRlIChsZW5ndGgpIG9mIHRoaXMgdmVjdG9yXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmxlbmd0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFnbml0dWRlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzcXVyZWQgbGVuZ3RoIG9mIHRoaXMgdmVjdG9yXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmxlbmd0aFNxID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgeCA9IHRoaXMueDtcbiAgICAgICAgdmFyIHkgPSB0aGlzLnk7XG4gICAgICAgIHJldHVybiB4ICogeCArIHkgKiB5O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZG90IHByb2R1Y3Qgb2YgdGhpcyB2ZWN0b3IgYnkgYW5vdGhlclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5kb3QgPSBmdW5jdGlvbiAodmVjKSB7XG4gICAgICAgIHJldHVybiB2ZWMueCAqIHRoaXMueCArIHZlYy55ICogdGhpcy55O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3Jvc3MgcHJvZHVjdCBvZiB0aGlzIHZlY3RvciBieSBhbm90aGVyLlxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5jcm9zcyA9IGZ1bmN0aW9uICh2ZWMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueCAqIHZlYy55IC0gdGhpcy55ICogdmVjLng7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXZlcnNlcyB0aGlzIHZlY3RvciBpLmUgbXVsdGlwbGllcyBpdCBieSAtMVxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnggPSAtdGhpcy54O1xuICAgICAgICB0aGlzLnkgPSAtdGhpcy55O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdmVjdG9yIGF4ZXMgdmFsdWVzIHRvIGFic29sdXRlIHZhbHVlc1xuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5hYnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMueCA9IE1hdGguYWJzKHRoaXMueCk7XG4gICAgICAgIHRoaXMueSA9IE1hdGguYWJzKHRoaXMueSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogWmVyb2VzIHRoZSB2ZWN0b3IgaS5lIHNldHMgYWxsIGF4ZXMgdG8gMFxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS56ZXJvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnggPSB0aGlzLnkgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhpcyB2ZWN0b3IgYW5kIGFub3RoZXJcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuZGlzdGFuY2UgPSBmdW5jdGlvbiAodikge1xuICAgICAgICB2YXIgeCA9IHRoaXMueCAtIHYueDtcbiAgICAgICAgdmFyIHkgPSB0aGlzLnkgLSB2Lnk7XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSb3RhdGVzIHRoZSB2ZXRvciBieSBwcm92aWRlZCByYWRpYW5zXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnJvdGF0ZSA9IGZ1bmN0aW9uIChyYWRzKSB7XG4gICAgICAgIHZhciBjb3MgPSBNYXRoLmNvcyhyYWRzKTtcbiAgICAgICAgdmFyIHNpbiA9IE1hdGguc2luKHJhZHMpO1xuICAgICAgICB2YXIgb3ggPSB0aGlzLng7XG4gICAgICAgIHZhciBveSA9IHRoaXMueTtcbiAgICAgICAgdGhpcy54ID0gb3ggKiBjb3MgLSBveSAqIHNpbjtcbiAgICAgICAgdGhpcy55ID0gb3ggKiBzaW4gKyBveSAqIGNvcztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSb3VuZHMgdGhpcyB2ZWN0b3IgdG8gbiBkZWNpbWFsIHBsYWNlc1xuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5yb3VuZCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIGlmIChuID09PSB2b2lkIDApIHsgbiA9IDI7IH1cbiAgICAgICAgdmFyIHAgPSBwcmVjaXNpb25bbl07XG4gICAgICAgIC8vIFRoaXMgcGVyZm9ybXMgd2FhYXkgYmV0dGVyIHRoYW4gdG9GaXhlZCBhbmQgZ2l2ZSBGbG9hdDMyIHRoZSBlZGdlIGFnYWluLlxuICAgICAgICAvLyBodHRwOi8vd3d3LmR5bmFtaWNndXJ1LmNvbS9qYXZhc2NyaXB0L3JvdW5kLW51bWJlcnMtd2l0aC1wcmVjaXNpb24vXG4gICAgICAgIHRoaXMueCA9ICgoMC41ICsgdGhpcy54ICogcCkgPDwgMCkgLyBwO1xuICAgICAgICB0aGlzLnkgPSAoKDAuNSArIHRoaXMueSAqIHApIDw8IDApIC8gcDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGlzIHZlY3RvclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmN0b3IodGhpcy54LCB0aGlzLnkpO1xuICAgIH07XG4gICAgcmV0dXJuIEFic3RyYWN0VmVjdG9yO1xufSgpKTtcbmV4cG9ydHMuQWJzdHJhY3RWZWN0b3IgPSBBYnN0cmFjdFZlY3Rvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFic3RyYWN0VmVjdG9yLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgQWJzdHJhY3RWZWN0b3JfMSA9IHJlcXVpcmUoXCIuL0Fic3RyYWN0VmVjdG9yXCIpO1xuLyoqXG4gKiBBIHZlY3RvciByZXByZXNlbnRhdGlvbiB0aGF0IHN0b3JlcyB0aGUgYXhlcyBpbiBhbiBBcnJheVxuICpcbiAqIGBgYFxuICogY29uc3QgdiA9IG5ldyBWZWMyRC5BcnJheVZlY3RvcigyLCA1KVxuICogYGBgXG4gKi9cbnZhciBBcnJheVZlY3RvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXJyYXlWZWN0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXJyYXlWZWN0b3IoeCwgeSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBBcnJheVZlY3RvcikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuYXhlcyA9IFt4LCB5XTtcbiAgICAgICAgX3RoaXMuY3RvciA9IEFycmF5VmVjdG9yO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheVZlY3Rvci5wcm90b3R5cGUsIFwieFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXhlc1swXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgdGhpcy5heGVzWzBdID0geDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5VmVjdG9yLnByb3RvdHlwZSwgXCJ5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5heGVzWzFdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh5KSB7XG4gICAgICAgICAgICB0aGlzLmF4ZXNbMV0gPSB5O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gQXJyYXlWZWN0b3I7XG59KEFic3RyYWN0VmVjdG9yXzEuQWJzdHJhY3RWZWN0b3IpKTtcbmV4cG9ydHMuQXJyYXlWZWN0b3IgPSBBcnJheVZlY3Rvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFycmF5VmVjdG9yLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgQWJzdHJhY3RWZWN0b3JfMSA9IHJlcXVpcmUoXCIuL0Fic3RyYWN0VmVjdG9yXCIpO1xuLyoqXG4gKiBBIHZlY3RvciByZXByZXNlbnRhdGlvbiB0aGF0IHN0b3JlcyB0aGUgYXhlcyBpbiBhIEZsb2F0MzJBcnJheVxuICpcbiAqIGBgYFxuICogY29uc3QgdiA9IG5ldyBWZWMyRC5GbG9hdDMyVmVjdG9yKDIsIDUpXG4gKiBgYGBcbiAqL1xudmFyIEZsb2F0MzJWZWN0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEZsb2F0MzJWZWN0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRmxvYXQzMlZlY3Rvcih4LCB5KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIEZsb2F0MzJWZWN0b3IpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmF4ZXMgPSBuZXcgRmxvYXQzMkFycmF5KDIpO1xuICAgICAgICBfdGhpcy5heGVzWzBdID0geDtcbiAgICAgICAgX3RoaXMuYXhlc1sxXSA9IHk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZsb2F0MzJWZWN0b3IucHJvdG90eXBlLCBcInhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmF4ZXNbMF07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHRoaXMuYXhlc1swXSA9IHg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdDMyVmVjdG9yLnByb3RvdHlwZSwgXCJ5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5heGVzWzFdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh5KSB7XG4gICAgICAgICAgICB0aGlzLmF4ZXNbMV0gPSB5O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gRmxvYXQzMlZlY3Rvcjtcbn0oQWJzdHJhY3RWZWN0b3JfMS5BYnN0cmFjdFZlY3RvcikpO1xuZXhwb3J0cy5GbG9hdDMyVmVjdG9yID0gRmxvYXQzMlZlY3Rvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZsb2F0MzJWZWN0b3IuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xufVxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuX19leHBvcnQocmVxdWlyZShcIi4vQWJzdHJhY3RWZWN0b3JcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vQXJyYXlWZWN0b3JcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vRmxvYXQzMlZlY3RvclwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9WZWN0b3JcIikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VmVjMkQuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBBYnN0cmFjdFZlY3Rvcl8xID0gcmVxdWlyZShcIi4vQWJzdHJhY3RWZWN0b3JcIik7XG4vKipcbiAqIEEgdmVjdG9yIHJlcHJlc2VudGF0aW9uIHRoYXQgc3RvcmVzIHRoZSBheGVzIGFzIHBhcnQgb2YgdGhlIGluc3RhbmNlIGl0c2VsZlxuICpcbiAqIGBgYHRzXG4gKiBjb25zdCB2ID0gbmV3IFZlYzJELlZlY3RvcigyLCA1KVxuICogYGBgXG4gKi9cbnZhciBWZWN0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFZlY3RvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBWZWN0b3IoeCwgeSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBWZWN0b3IpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLl94ID0geDtcbiAgICAgICAgX3RoaXMuX3kgPSB5O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWZWN0b3IucHJvdG90eXBlLCBcInhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl94O1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICB0aGlzLl94ID0geDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlY3Rvci5wcm90b3R5cGUsIFwieVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3k7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHkpIHtcbiAgICAgICAgICAgIHRoaXMuX3kgPSB5O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gVmVjdG9yO1xufShBYnN0cmFjdFZlY3Rvcl8xLkFic3RyYWN0VmVjdG9yKSk7XG5leHBvcnRzLlZlY3RvciA9IFZlY3Rvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZlY3Rvci5qcy5tYXAiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvaW5kZXgudHNcIik7XG4iXSwibmFtZXMiOlsiY2VudGVyIiwicmFkaXVzIiwic3RhcnRBbmdsZSIsImVuZEFuZ2xlIiwiY291bnRlckNsb2Nrd2lzZSIsImlzQ29sbGlkYWJsZSIsImRyYXciLCJjb250ZXh0IiwiY29sb3IiLCJsaW5lQ2FwIiwic3Ryb2tlU3R5bGUiLCJ0aGlzIiwiYmVnaW5QYXRoIiwiYXJjIiwieCIsInkiLCJzdHJva2UiLCJjbG9zZVBhdGgiLCJkcmF3RGVidWciLCJ0YW5nZW50X2FuZ2xlIiwiTWF0aCIsIlBJIiwiZHJhd0RvdCIsImRyYXdBcnJvdyIsImVuZFBvaW50IiwiY29zIiwic2luIiwiZHJhd0FyYyIsImlzQ291bnRlckNsb2Nrd2lzZSIsImdldENvbnRpbnVpbmdTZWdtZW50IiwidHJhbnNmb3JtIiwiQXJjU2VnbWVudCIsImNsb25lIiwiYWRkIiwiZHJhd0dyaWQiLCJiYWNrZ3JvdW5kQ2FudmFzQ3R4IiwiY2xlYXJSZWN0IiwiYmFja2dyb3VuZENhbnZhcyIsIndpZHRoIiwiaGVpZ2h0IiwibGluZVdpZHRoIiwiZ3JpZFNpemUiLCJtb3ZlVG8iLCJsaW5lVG8iLCJkb3RYIiwiZG90WSIsImRvdFNpemUiLCJmaWxsU3R5bGUiLCJmaWxsIiwiY3R4IiwiZnJvbSIsInRvIiwiYW5nbGUiLCJhdGFuMiIsImhlYWRMZW5ndGgiLCJuZXdfdG8iLCJWZWN0b3IiLCJzbmFrZSIsImxlZnRLZXkiLCJyaWdodEtleSIsImtleU1hcCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbktleURvd24iLCJiaW5kIiwib25LZXlVcCIsImV2ZW50IiwiaXNBbGl2ZSIsImtleSIsInRvVXBwZXJDYXNlIiwiaGVhZCIsInNlbmRLZXlFdmVudFRvU2VydmVyIiwiZGlzcG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzdGFydCIsImVuZCIsInN0YXJ0UG9pbnQiLCJjYWxjRW5kQW5nbGUiLCJhdGFuIiwic3FydCIsInRyYW5zZm9ybWVkRW5kcG9pbnQiLCJMaW5lU2VnbWVudCIsImN1cnJlbnRSb29tIiwiY3VycmVudFBsYXllciIsInJvb21Db2RlSW5wdXQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidXNlcm5hbWVJbnB1dCIsInJvb21CdXR0b24iLCJyZWFkeUJ1dHRvbiIsImxvZ2luRGl2Iiwicm9vbURpdiIsImdhbWVEaXYiLCJjb2xvclBpY2tlciIsInJvb21Vc2Vyc0xpc3QiLCJyb29tQ29kZVNwYW4iLCJwbGF5ZXJDb3VudCIsImNvbG9yUGlja2VyRGl2Iiwic3RhcnRQcm9ncmVzc0JhciIsInVwZGF0ZUJ1dHRvbiIsInZhbHVlIiwidHJpbSIsImRpc2FibGVkIiwibGVuZ3RoIiwidGV4dENvbnRlbnQiLCJoYW5kbGVSb29tQWN0aW9uIiwidXNlcm5hbWUiLCJQbGF5ZXIiLCJpbm5lclRleHQiLCJjcmVhdGVSb29tIiwiam9pblJvb20iLCJoYW5kbGVSZWFkeVN0YXRlIiwiaXNSZWFkeSIsInNldFBsYXllckRhdGEiLCJnZXRDb2RlIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwic2hvd1Jvb21WaWV3IiwiZGF0YSIsInJvb21JbmZvIiwiSlNPTiIsInBhcnNlIiwidG9TdHJpbmciLCJSb29tIiwiZ2V0SG9zdCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwicGlja1RleHRDb2xvckJhc2VkT25CZ0NvbG9yQWR2YW5jZWQiLCJpbm5lckhUTUwiLCJ1cGRhdGVSb29tTGlzdCIsInJlYWR5UGxheWVyQ291bnQiLCJtYXhQbGF5ZXJDb3VudCIsInNldFBsYXllcnMiLCJzZXRIb3N0Iiwic2V0TWF4U2l6ZSIsIk9iamVjdCIsImtleXMiLCJnZXRQbGF5ZXJzIiwiZ2V0TWF4U2l6ZSIsInZhbHVlcyIsImZvckVhY2giLCJwbGF5ZXIiLCJwbGF5ZXJJdGVtIiwiY3JlYXRlRWxlbWVudCIsImluc2VydEFkamFjZW50SFRNTCIsImFwcGVuZENoaWxkIiwiZmlsdGVyIiwicCIsImZsb29yIiwic2hvd0Vycm9yQW5pbWF0aW9uIiwic2V0VGltZW91dCIsInVwZGF0ZUNvbG9yUGlja2VyIiwidXBkYXRlUGxheWVyQ29sb3IiLCJiZ0NvbG9yIiwibGlnaHRDb2xvciIsImRhcmtDb2xvciIsImNoYXJBdCIsInN1YnN0cmluZyIsImMiLCJwYXJzZUludCIsIm1hcCIsImNvbCIsInBvdyIsInN3aXRjaEdhbWVWaWV3Iiwic3RhdGUiLCJzZXRHYW1lU3RhdGUiLCJvbmxvYWQiLCJzdGFydEdhbWUiLCJzZW5kU3RhcnRDb21tYW5kIiwicG9zaXRpb24iLCJlbWl0SW50ZXJ2YWwiLCJzaXplIiwic3BlZWQiLCJzaGFwZSIsImNhbnZhc0N0eCIsImZhZGVDb2xvciIsImZhZGVTaXplIiwiYWdlIiwiZW1pdFRpbWVNaWxsaXMiLCJhbGl2ZVBhcnRpY2xlcyIsInRpY2tzIiwiZW1pdFRpbWUiLCJwYXJ0aWNsZU1heEFnZSIsInRpY2siLCJkdCIsInB1c2giLCJnZXRSYW5kb21EaXJlY3Rpb24iLCJwYXJ0aWNsZSIsInZlbG9jaXR5IiwiY29sb3JGYWRlQW1vdW50IiwiYSIsInNpemVGYWRlQW1vdW50IiwibXVsdGlwbHlCeVNjYWxhciIsInIiLCJnIiwiYiIsImZpbGxSZWN0IiwicmFuZG9tIiwiaGV4VG9SZ2IiLCJoZXgiLCJyZXN1bHQiLCJleGVjIiwic3RhcnRQb3MiLCJzZWdtZW50cyIsInR1cm5SYWRpdXMiLCJlbWl0dGVyIiwiZGlzdGFuY2VUb0NoYW5nZU9mU3RhdGUiLCJhZGRTZWdtZW50Iiwic2VnbWVudCIsInNsaWNlIiwicG9wIiwiaW5kZXgiLCJraWxsIiwiY29uc29sZSIsImxvZyIsInVwZGF0ZUVtaXR0ZXIiLCJjaGVja1dhbGxzIiwibGFzdFNlZ21lbnQiLCJjYW52YXMiLCJyZXBsYWNlIiwidG9KU09OIiwiY29kZSIsImhvc3QiLCJwbGF5ZXJzIiwibWF4U2l6ZSIsInVuZGVmaW5lZCIsImFkZFBsYXllciIsIm5ld1NpemUiLCJuZXdHYW1lU3RhdGUiLCJnYW1lU3RhdGUiLCJnZXRHYW1lU3RhdGUiLCJzb2NrZXQiLCJyZWFkeVN0YXRlIiwiV2ViU29ja2V0IiwiT1BFTiIsInNlbmQiLCJzdHJpbmdpZnkiLCJ0eXBlIiwiZXJyb3IiLCJyb29tQ29kZSIsInByZXNzZWQiLCJsb2NhdGlvbiIsImhvc3RuYW1lIiwib25vcGVuIiwib25tZXNzYWdlIiwidXBkYXRlR2FtZVN0YXRlIiwiYWxlcnQiLCJtZXNzYWdlIiwib25jbG9zZSIsIm9uZXJyb3IiLCJmcHNDb3VudGVyIiwidG9wIiwibGVmdCIsImJvZHkiLCJmcHMiLCJnYW1lQ2FudmFzIiwiZ2FtZUNhbnZhc0N0eCIsImdldENvbnRleHQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJmcmFtZUNvdW50IiwibGFzdFRpbWUiLCJwZXJmb3JtYW5jZSIsIm5vdyIsImluaXRpYWxpemVkIiwic25ha2VIZWFkcyIsIm5ld0hlYWREYXRhIiwiZW5kUG9zIiwic25ha2VUb1VwZGF0ZSIsImlzTmV3VGhpc1RpY2siLCJzZWdtZW50VHlwZSIsImhlYWREYXRhIiwicG9zIiwiY3VycmVudFRpbWUiLCJ0aW1lRGlmZiIsInJvdW5kIiwiY2FsY3VsYXRlRlBTIiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwicHJlY2lzaW9uIiwiQWJzdHJhY3RWZWN0b3IiLCJjdG9yIiwicHJvdG90eXBlIiwic2V0QXhlcyIsImdldFgiLCJzZXRYIiwiZ2V0WSIsInNldFkiLCJ0b0FycmF5IiwidG9PYmplY3QiLCJ2ZWMiLCJzdWJ0cmFjdCIsImVxdWFscyIsIm11bHRpcGx5QnlWZWN0b3IiLCJtdWxWIiwiZGl2aWRlQnlWZWN0b3IiLCJkaXZWIiwidiIsIm4iLCJtdWxTIiwiZGl2aWRlQnlTY2FsYXIiLCJkaXZTIiwibm9ybWFsaXNlIiwibWFnbml0dWRlIiwibm9ybWFsaXplIiwidW5pdCIsImxlbmd0aFNxIiwiZG90IiwiY3Jvc3MiLCJyZXZlcnNlIiwiYWJzIiwiemVybyIsImRpc3RhbmNlIiwicm90YXRlIiwicmFkcyIsIm94Iiwib3kiLCJleHRlbmRTdGF0aWNzIiwiX19leHRlbmRzIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsImQiLCJoYXNPd25Qcm9wZXJ0eSIsIl9fIiwiY29uc3RydWN0b3IiLCJjcmVhdGUiLCJBcnJheVZlY3RvciIsIl9zdXBlciIsIl90aGlzIiwiY2FsbCIsImF4ZXMiLCJnZXQiLCJzZXQiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwiRmxvYXQzMlZlY3RvciIsIkZsb2F0MzJBcnJheSIsIl9fZXhwb3J0IiwibSIsIl94IiwiX3kiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImRlZmluaXRpb24iLCJvIiwib2JqIiwicHJvcCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIl0sInNvdXJjZVJvb3QiOiIifQ==
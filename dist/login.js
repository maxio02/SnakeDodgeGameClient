/*! For license information please see login.js.LICENSE.txt */
(()=>{"use strict";var t={"./src/ArcSegment.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>c});var o,i=n("./src/Drawer.ts"),r=n("./node_modules/vector2d/src/Vec2D.js"),s=n("./src/Segment.ts"),a=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const c=function(t){function e(e,n,o,i,r,s){var a=t.call(this)||this;return a.center=e,a.radius=n,a.startAngle=o,a.endAngle=i,a.counterClockwise=r,a.isCollidable=s,a}return a(e,t),e.prototype.draw=function(t,e){t.lineCap="round",t.strokeStyle=e,1==this.isCollidable&&(t.beginPath(),t.arc(this.center.x,this.center.y,this.radius,this.startAngle,this.endAngle,this.counterClockwise),t.stroke(),t.closePath())},e.prototype.drawDebug=function(t,e){var n=this.counterClockwise?-Math.PI:Math.PI;n+=this.endAngle,t.lineCap="round",(0,i.drawDot)(this.center.x,this.center.y,5,"#000000"),(0,i.drawArrow)(t,new r.Vector(this.endPoint.x,this.endPoint.y),new r.Vector(this.endPoint.x+this.radius*Math.cos(n),this.endPoint.y+this.radius*Math.sin(n))),(0,i.drawArc)(this.center.x,this.center.y,this.radius,0,0,!1)},Object.defineProperty(e.prototype,"endPoint",{get:function(){return new r.Vector(this.center.x+this.radius*Math.cos(this.endAngle),this.center.y+this.radius*Math.sin(this.endAngle))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"penpendicularEndAngle",{get:function(){return this.isCounterClockwise?this.endAngle-Math.PI/2:this.endAngle+Math.PI/2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"penpendicularStartAngle",{get:function(){return this.isCounterClockwise?this.startAngle-Math.PI/2:this.startAngle+Math.PI/2},enumerable:!1,configurable:!0}),e.prototype.isCounterClockwise=function(){return this.counterClockwise},e.prototype.getContinuingSegment=function(t){return new e(this.center.clone().add(t),this.radius,this.endAngle,this.endAngle,this.counterClockwise,this.isCollidable)},e}(s.default)},"./src/Drawer.ts":(t,e,n)=>{n.r(e),n.d(e,{drawArc:()=>a,drawArrow:()=>c,drawDot:()=>s,drawGrid:()=>r});var o=n("./node_modules/vector2d/src/Vec2D.js"),i=n("./src/index.ts");function r(){i.backgroundCanvasCtx.clearRect(0,0,i.backgroundCanvas.width,i.backgroundCanvas.height),i.backgroundCanvasCtx.strokeStyle="rgba(0, 0, 0, 0.3)",i.backgroundCanvasCtx.lineWidth=2;for(var t=i.gridSize;t<i.backgroundCanvas.width;t+=i.gridSize)i.backgroundCanvasCtx.beginPath(),i.backgroundCanvasCtx.moveTo(t,0),i.backgroundCanvasCtx.lineTo(t,i.backgroundCanvas.height),i.backgroundCanvasCtx.stroke();for(var e=i.gridSize;e<i.backgroundCanvas.height;e+=i.gridSize)i.backgroundCanvasCtx.beginPath(),i.backgroundCanvasCtx.moveTo(0,e),i.backgroundCanvasCtx.lineTo(i.backgroundCanvas.width,e),i.backgroundCanvasCtx.stroke()}function s(t,e,n,o){i.backgroundCanvasCtx.beginPath(),i.backgroundCanvasCtx.arc(t,e,n,0,2*Math.PI,!1),i.backgroundCanvasCtx.fillStyle=o,i.backgroundCanvasCtx.fill(),i.backgroundCanvasCtx.closePath()}function a(t,e,n,o,r,s){i.backgroundCanvasCtx.lineCap="round",i.backgroundCanvasCtx.strokeStyle="#3466aa",i.backgroundCanvasCtx.beginPath(),i.backgroundCanvasCtx.arc(t,e,n,0,2*Math.PI,s),i.backgroundCanvasCtx.lineWidth=5,i.backgroundCanvasCtx.stroke(),i.backgroundCanvasCtx.closePath()}function c(t,e,n){if(e.x!=n.x&&e.y!=n.y){var i=Math.atan2(n.y-e.y,n.x-e.x),r=10,s=new o.Vector(n.x,n.y);s.x-=11.5*Math.cos(i),s.y-=11.5*Math.sin(i),t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(s.x,s.y),t.strokeStyle="#bbbbbb",t.lineWidth=10,t.stroke(),t.beginPath(),t.moveTo(s.x,s.y),t.lineTo(s.x-r*Math.cos(i-Math.PI/7),s.y-r*Math.sin(i-Math.PI/7)),t.lineTo(s.x-r*Math.cos(i+Math.PI/7),s.y-r*Math.sin(i+Math.PI/7)),t.lineTo(s.x,s.y),t.lineTo(s.x-r*Math.cos(i-Math.PI/7),s.y-r*Math.sin(i-Math.PI/7)),t.strokeStyle="#bbbbbb",t.lineWidth=10,t.stroke(),t.fillStyle="#bbbbbb",t.fill(),t.closePath()}}},"./src/InputManager.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>i});var o=n("./src/WebSocketClient/websocket.ts");const i=function(){function t(t,e,n){this.keyMap={},window.addEventListener("keydown",this.onKeyDown.bind(this)),window.addEventListener("keyup",this.onKeyUp.bind(this)),this.snake=t,this.leftKey=e,this.rightKey=n}return t.prototype.onKeyDown=function(t){if(this.snake.isAlive){var e=t.key.toUpperCase();if(e==this.leftKey||e==this.rightKey){if(this.keyMap[this.rightKey]&&e==this.leftKey)this.keyMap[this.rightKey]=!1;else if(this.keyMap[this.leftKey]&&e==this.rightKey)this.keyMap[this.leftKey]=!1;else if(this.keyMap[e])return;this.keyMap[e]=!0,this.snake.head.endPoint,(0,o.sendKeyEventToServer)(e==this.rightKey?"right":"left",!0)}}},t.prototype.onKeyUp=function(t){if(this.snake.isAlive){var e=t.key.toUpperCase();this.keyMap[e]&&(this.keyMap[e]=!1,(0,o.sendKeyEventToServer)(e==this.rightKey?"right":"left",!1))}},t.prototype.dispose=function(){window.removeEventListener("keydown",this.onKeyDown.bind(this)),window.removeEventListener("keyup",this.onKeyUp.bind(this))},t}()},"./src/LineSegment.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var o,i=n("./src/Segment.ts"),r=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const s=function(t){function e(e,n,o,i){var r=t.call(this)||this;return r.isCollidable=!0,r.startPoint=e,r.endPoint=n,r.isCollidable=o,r.endAngle=i,r}return r(e,t),e.prototype.draw=function(t,e){t.strokeStyle=e,t.lineCap="round",1==this.isCollidable&&(t.beginPath(),t.moveTo(this.startPoint.x,this.startPoint.y),t.lineTo(this.endPoint.x,this.endPoint.y),t.stroke(),t.closePath())},e.prototype.calcEndAngle=function(){return Math.atan((this.endPoint.y-this.startPoint.y)/(this.endPoint.x-this.startPoint.x))},Object.defineProperty(e.prototype,"length",{get:function(){return Math.sqrt(Math.pow(this.startPoint.x-this.endPoint.x,2)+Math.pow(this.startPoint.y-this.endPoint.y,2))},enumerable:!1,configurable:!0}),e.prototype.getContinuingSegment=function(t){var n=this.endPoint.clone().add(t);return new e(n,n,this.isCollidable,this.endAngle)},e}(i.default)},"./src/MenuManager/login.ts":(t,e,n)=>{n.r(e),n.d(e,{currentPlayer:()=>a,currentRoom:()=>s,handleReadyState:()=>P,handleRoomAction:()=>w,showErrorAnimation:()=>M,showRoomView:()=>S,switchGameView:()=>E,updateButton:()=>C,updateColorPicker:()=>_,updatePlayerColor:()=>O,updateRoomList:()=>k});var o=n("./src/ViewModels/Player.ts"),i=n("./src/ViewModels/Room.ts"),r=n("./src/WebSocketClient/websocket.ts"),s=null,a=null,c=document.getElementById("roomCodeInput"),l=document.getElementById("usernameInput"),d=document.getElementById("joinButton"),u=document.getElementById("readyButton"),h=document.getElementById("login-div"),y=document.getElementById("room-div"),p=document.getElementById("game-canvas-container"),f=document.getElementById("color-picker"),g=document.getElementById("room-users-list"),m=document.getElementById("room-code"),v=document.getElementById("player-count"),b=document.getElementById("color-picker-container"),x=document.getElementById("start-progress-bar");function C(){""==l.value.trim()?d.disabled=!0:d.disabled=!1,5==c.value.trim().length?d.textContent="JOIN ROOM":d.textContent="CREATE ROOM"}function w(){var t=l.value;t&&(a=new o.Player(t),"CREATE ROOM"===d.innerText?(0,r.createRoom)(l.value):(0,r.joinRoom)(c.value.toUpperCase(),l.value))}function P(){a.isReady=!a.isReady,(0,r.setPlayerData)(a,s.getCode()),a.isReady?(u.classList.remove("red-button"),u.classList.add("green-button")):(u.classList.add("red-button"),u.classList.remove("green-button"))}function S(t){var e=JSON.parse(t.toString());s=new i.Room(e.room.code,e.room.host,e.room.players,e.room.maxSize),a.username==s.getHost().username&&document.getElementById("startButton").classList.remove("display-none"),b.style.backgroundColor=a.color,f.value=a.color,document.getElementById("color-label").style.color=A(f.value,"#FFFFFF","#000000"),h.classList.add("display-none"),y.classList.add("display-flex"),c.value=s.getCode(),m.innerHTML=s.getCode(),(0,r.setPlayerData)(a,s.getCode()),k(t)}function k(t){var e,n,o=JSON.parse(t.toString());s.setPlayers(o.room.players),s.setHost(o.room.host),s.setMaxSize(o.room.maxSize),v.innerHTML="".concat(Object.keys(s.getPlayers()).length,"/").concat(s.getMaxSize()),g.innerHTML="",Object.values(s.getPlayers()).forEach((function(t){var e=document.createElement("li");e.textContent=t.username+"",t.username==s.getHost().username?e.insertAdjacentHTML("afterbegin",'<i class="fa-solid fa-crown" style="color: '.concat(t.color,';"></i>')):e.insertAdjacentHTML("afterbegin",'<i class="fa-solid fa-circle" style="color: '.concat(t.color,'; margin-left: 4px"></i>')),t.isReady?e.insertAdjacentHTML("beforeend",' <i class="fa-solid fa-circle" style="color: #37cb48;"></i>'):e.insertAdjacentHTML("beforeend",' <i class="fa-solid fa-circle" style="color: #cb3737;"></i>'),g.appendChild(e)})),a.username==s.getHost().username&&document.getElementById("startButton").classList.remove("display-none"),e=Object.values(s.getPlayers()).filter((function(t){return t.isReady})).length,0!=(n=s.getMaxSize())&&(x.style.width=Math.floor(e/n*100)+"%")}function M(){d.classList.add("red-button"),d.classList.add("wiggle"),setTimeout((function(){d.classList.remove("red-button"),d.classList.remove("wiggle")}),600)}function _(){b.style.backgroundColor=f.value}function O(){a.color=f.value,document.getElementById("color-label").style.color=A(f.value,"#FFFFFF","#000000"),(0,r.setPlayerData)(a,s.getCode())}function A(t,e,n){var o="#"===t.charAt(0)?t.substring(1,7):t,i=[parseInt(o.substring(0,2),16)/255,parseInt(o.substring(2,4),16)/255,parseInt(o.substring(4,6),16)/255].map((function(t){return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}));return.2126*i[0]+.7152*i[1]+.0722*i[2]>.4?n:e}function E(t){switch(t.state){case 0:s.setGameState(0),h.classList.add("display-none"),y.classList.add("display-none"),y.classList.remove("display-flex"),p.classList.remove("display-none"),p.classList.add("display-flex");break;case 1:s.setGameState(1),h.classList.add("display-none"),y.classList.add("display-flex"),p.classList.add("display-none")}}window.onload=function(){C()},window.updateButton=C,window.handleRoomAction=w,window.handleReadyState=P,window.updateColorPicker=_,window.updatePlayerColor=O,window.startGame=function(){a.username==s.getHost().username&&(0,r.sendStartCommand)(s.getCode())}},"./src/ParticleSystem/Emitter.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var o=n("./src/ParticleSystem/Particle.ts"),i=n("./src/ParticleSystem/ParticleSystemUtils.ts"),r=function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};const s=function(){function t(t,e,n,o,i,r,s,a,c,l,d){void 0===i&&(i="circle"),void 0===a&&(a=!0),void 0===c&&(c=!0),void 0===d&&(d=0),this.aliveParticles=[],this.ticks=0,this.position=t,this.emitTime=e,this.size=n,this.speed=o,this.shape=i,this.color=r,this.canvasCtx=s,this.fadeColor=a,this.fadeSize=c,this.particleMaxAge=l,this.emitTimeMillis=d}return t.prototype.tick=function(t){this.emitTimeMillis+this.particleMaxAge<0||(this.emitTimeMillis-=t,this.ticks%this.emitTime==0&&this.emitTimeMillis>0&&(this.aliveParticles.push(new o.default(this.position.clone(),(0,i.getRandomDirection)(),this.size,this.speed,this.shape,r({},this.color),this.canvasCtx,this.particleMaxAge,this.fadeColor,this.fadeSize)),this.aliveParticles.push(new o.default(this.position.clone(),(0,i.getRandomDirection)(),this.size,this.speed,this.shape,r({},this.color),this.canvasCtx,this.particleMaxAge,this.fadeColor,this.fadeSize)),this.aliveParticles.push(new o.default(this.position.clone(),(0,i.getRandomDirection)(),this.size,this.speed,this.shape,r({},this.color),this.canvasCtx,this.particleMaxAge,this.fadeColor,this.fadeSize))),this.aliveParticles.forEach((function(e){e.tick(t)})),this.aliveParticles=this.aliveParticles.filter((function(t){return t.age>0})),this.ticks++)},t.prototype.draw=function(){this.aliveParticles.forEach((function(t){t.draw()}))},t}()},"./src/ParticleSystem/Particle.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>o});const o=function(){function t(t,e,n,o,i,r,s,a,c,l){void 0===i&&(i="circle"),this.position=t,this.velocity=e,this.size=n,this.speed=o,this.shape=i,this.color=r,this.canvasCtx=s,this.fadeColor=c,this.fadeSize=l,this.age=a,this.colorFadeAmount=this.color.a/this.age,this.sizeFadeAmount=this.size/this.age}return t.prototype.tick=function(t){this.position.add(this.velocity.clone().multiplyByScalar(t*this.speed)),this.fadeColor&&(this.color.a-=this.colorFadeAmount),this.fadeSize&&(this.size-=this.sizeFadeAmount),this.age--},t.prototype.draw=function(){switch(this.canvasCtx.moveTo(this.position.x,this.position.y),this.canvasCtx.fillStyle="rgba(".concat(this.color.r,",").concat(this.color.g,", ").concat(this.color.b,", ").concat(this.color.a,")"),this.canvasCtx.beginPath(),this.shape){case"circle":this.canvasCtx.arc(this.position.x,this.position.y,this.size,0,2*Math.PI),this.canvasCtx.fill();break;case"square":this.canvasCtx.fillRect(this.position.x-this.size,this.position.y-this.size,2*this.size,2*this.size)}this.canvasCtx.closePath()},t}()},"./src/ParticleSystem/ParticleSystemUtils.ts":(t,e,n)=>{n.r(e),n.d(e,{getRandomDirection:()=>i,hexToRgb:()=>r});var o=n("./node_modules/vector2d/src/Vec2D.js");function i(){return new o.Vector(2*Math.random()-1,2*Math.random()-1)}function r(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}},"./src/Segment.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>o});const o=function(){}},"./src/Snake.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>l});var o=n("./node_modules/vector2d/src/Vec2D.js"),i=n("./src/ArcSegment.ts"),r=n("./src/LineSegment.ts"),s=n("./src/ParticleSystem/Emitter.ts"),a=n("./src/ParticleSystem/ParticleSystemUtils.ts"),c=function(){return c=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},c.apply(this,arguments)};const l=function(){function t(t,e,n){this.segments=[],this.isAlive=!0,this.turnRadius=60,this.emitter=null,this.distanceToChangeOfState=10,this.addSegment(t),this.color=e,this.canvasCtx=n}return t.prototype.addSegment=function(t){this.segments.push(t)},Object.defineProperty(t.prototype,"head",{get:function(){return this.segments.slice(-1).pop()},enumerable:!1,configurable:!0}),t.prototype.draw=function(){var t=this;this.canvasCtx.lineWidth=12,this.segments.forEach((function(e,n){e.draw(t.canvasCtx,t.color),t.head==e&&(e instanceof i.default?(t.canvasCtx.beginPath(),t.canvasCtx.arc(e.center.x,e.center.y,e.radius,e.endAngle,e.endAngle,e.isCounterClockwise()),t.canvasCtx.stroke(),t.canvasCtx.closePath()):e instanceof r.default&&(t.canvasCtx.beginPath(),t.canvasCtx.moveTo(e.endPoint.x,e.endPoint.y),t.canvasCtx.lineTo(e.endPoint.x,e.endPoint.y),t.canvasCtx.stroke(),t.canvasCtx.closePath()))}))},t.prototype.kill=function(){console.log("SNAKE DEAD"),this.isAlive=!1,this.emitter=new s.default(this.head.endPoint,1,7,4,"circle",c(c({},(0,a.hexToRgb)(this.color)),{a:1}),this.canvasCtx,!0,!0,70,4)},t.prototype.updateEmitter=function(t){this.emitter&&(this.emitter.tick(t),this.emitter.draw())},t.prototype.checkWalls=function(){var t=this.head;t.endPoint.x<0?this.addSegment(t.getContinuingSegment(new o.Vector(this.canvasCtx.canvas.width,0))):t.endPoint.x>this.canvasCtx.canvas.width&&this.addSegment(t.getContinuingSegment(new o.Vector(-this.canvasCtx.canvas.width,0))),t.endPoint.y<0?this.addSegment(t.getContinuingSegment(new o.Vector(0,this.canvasCtx.canvas.height))):t.endPoint.y>this.canvasCtx.canvas.height&&this.addSegment(t.getContinuingSegment(new o.Vector(0,-this.canvasCtx.canvas.height)))},t}()},"./src/ViewModels/Player.ts":(t,e,n)=>{n.r(e),n.d(e,{Player:()=>o});var o=function(){function t(t,e){void 0===e&&(e=!1),this.username=t,this.isReady=e,this.color="#000000".replace(/0/g,(function(){return(~~(16*Math.random())).toString(16)}))}return t.prototype.toJSON=function(){return{username:this.username,isReady:this.isReady,color:this.color}},t}()},"./src/ViewModels/Room.ts":(t,e,n)=>{n.r(e),n.d(e,{Room:()=>o});var o=function(){function t(t,e,n,o){void 0===o&&(o=5),this.players={},this.code=t,this.host=e,this.maxSize=o,null!=n?this.players=n:this.addPlayer(e)}return t.prototype.addPlayer=function(t){return!(Object.keys(this.players).length>=this.maxSize||(this.players[t.username]=t,0))},t.prototype.getCode=function(){return this.code},t.prototype.getPlayers=function(){return this.players},t.prototype.getHost=function(){return this.host},t.prototype.setHost=function(t){this.host=t},t.prototype.setPlayers=function(t){this.players=t},t.prototype.setMaxSize=function(t){this.maxSize=t},t.prototype.getMaxSize=function(){return this.maxSize},t.prototype.setGameState=function(t){this.gameState=t},t.prototype.getGameState=function(){return this.gameState},t}()},"./src/WebSocketClient/websocket.ts":(t,e,n)=>{n.r(e),n.d(e,{createRoom:()=>s,joinRoom:()=>a,sendKeyEventToServer:()=>l,sendStartCommand:()=>d,setPlayerData:()=>c});var o,i=n("./src/index.ts"),r=n("./src/MenuManager/login.ts");function s(t){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"CREATE_ROOM",username:t})):console.error("WebSocket connection is not open")}function a(t,e){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"JOIN_ROOM",roomCode:t,username:e})):console.error("WebSocket connection is not open")}function c(t,e){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"PLAYER_DATA",player:t,roomCode:e})):console.error("WebSocket connection is not open")}function l(t,e){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"KEY_EVENT",player:r.currentPlayer,key:t,pressed:e})):console.error("WebSocket connection is not open")}function d(t){o&&o.readyState===WebSocket.OPEN?o.send(JSON.stringify({type:"BEGIN_GAME",roomCode:t})):console.error("WebSocket connection is not open")}(o=new WebSocket("ws://".concat(window.location.hostname,":8080"))).onopen=function(){console.log("WebSocket connection established")},o.onmessage=function(t){var e=JSON.parse(t.data);switch(console.log("Message from server:",e),e.type){case"JOINED_ROOM":(0,r.showRoomView)(t.data);break;case"ROOM_DOES_NOT_EXIST":(0,r.showErrorAnimation)();break;case"ROOM_DATA":(0,r.updateRoomList)(t.data);break;case"GAME_STATE":(0,r.switchGameView)(e);break;case"GAMEPLAY_DATA":(0,i.updateGameState)(e);break;case"ERROR":alert("Error: ".concat(e.message))}},o.onclose=function(){console.log("WebSocket connection closed")},o.onerror=function(t){console.error("WebSocket error:",t)}},"./src/index.ts":(t,e,n)=>{n.r(e),n.d(e,{backgroundCanvas:()=>y,backgroundCanvasCtx:()=>p,fps:()=>d,gameCanvas:()=>u,gameCanvasCtx:()=>h,gridSize:()=>f,updateGameState:()=>b});var o=n("./node_modules/vector2d/src/Vec2D.js"),i=n("./src/Drawer.ts"),r=n("./src/InputManager.ts"),s=n("./src/LineSegment.ts"),a=n("./src/Snake.ts"),c=n("./src/MenuManager/login.ts"),l=document.createElement("div");l.style.position="absolute",l.style.top="10px",l.style.left="10px",l.style.color="black",document.body.appendChild(l);var d=60,u=document.getElementById("game-canvas"),h=u.getContext("2d"),y=document.getElementById("background-canvas"),p=y.getContext("2d");y.width=y.getBoundingClientRect().width,y.height=y.getBoundingClientRect().height,u.width=u.getBoundingClientRect().width,u.height=u.getBoundingClientRect().height;var f=60;var g=0,m=performance.now()/10;window.addEventListener("resize",(function(){u.width=u.getBoundingClientRect().width,u.height=u.getBoundingClientRect().height,y.width=y.getBoundingClientRect().width,y.height=y.getBoundingClientRect().height,(0,i.drawGrid)()})),(0,i.drawGrid)();var v=!1;function b(t){v?t.snakeHeads.forEach((function(t){var e=t.lastSegment,n=t.username,i=e.endPoint,r=c.currentRoom.getPlayers()[n].snake;if(e.isNewThisTick)if("LineSegment"==t.segmentType){var a=e.startPoint;r.addSegment(new s.default(new o.Vector(a.x,a.y),new o.Vector(i.x,i.y),e.isCollidable,e.endAngle))}else t.segmentType;else a=e.startPoint,r.segments[r.segments.length-1]=new s.default(new o.Vector(a.x,a.y),new o.Vector(i.x,i.y),e.isCollidable,e.endAngle)})):(t.snakeHeads.forEach((function(t){var e=t.lastSegment,n=t.username,i=e.endPoint;c.currentRoom.getPlayers()[n].snake=new a.default(new s.default(new o.Vector(i.x,i.y),new o.Vector(i.x,i.y),e.isCollidable,e.endAngle),c.currentRoom.getPlayers()[n].color,h)})),new r.default(c.currentRoom.getPlayers()[c.currentPlayer.username].snake,"A","D"),v=!0),++g%10==0&&(d=function(){var t=performance.now()/10,e=t-m,n=Math.round(1e3/e);return m=t,n}(),l.innerText="FPS: ".concat(d)),h.clearRect(0,0,u.width,u.height),Object.values(c.currentRoom.getPlayers()).forEach((function(t){t.snake.draw()}))}},"./node_modules/vector2d/src/AbstractVector.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10],o=function(){function t(t){this.ctor=t}return t.prototype.setAxes=function(t,e){return this.x=t,this.y=e,this},t.prototype.getX=function(){return this.x},t.prototype.setX=function(t){return this.x=t,this},t.prototype.getY=function(){return this.y},t.prototype.setY=function(t){return this.y=t,this},t.prototype.toString=function(t){return void 0===t&&(t=!1),t?"("+Math.round(this.x)+", "+Math.round(this.y)+")":"("+this.x+", "+this.y+")"},t.prototype.toArray=function(){return[this.x,this.y]},t.prototype.toObject=function(){return{x:this.x,y:this.y}},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.multiplyByVector=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.mulV=function(t){return this.multiplyByVector(t)},t.prototype.divideByVector=function(t){return this.x/=t.x,this.y/=t.y,this},t.prototype.divV=function(t){return this.divideByVector(t)},t.prototype.multiplyByScalar=function(t){return this.x*=t,this.y*=t,this},t.prototype.mulS=function(t){return this.multiplyByScalar(t)},t.prototype.divideByScalar=function(t){return this.x/=t,this.y/=t,this},t.prototype.divS=function(t){return this.divideByScalar(t)},t.prototype.normalise=function(){return this.divideByScalar(this.magnitude())},t.prototype.normalize=function(){return this.normalise()},t.prototype.unit=function(){return this.normalise()},t.prototype.magnitude=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.length=function(){return this.magnitude()},t.prototype.lengthSq=function(){var t=this.x,e=this.y;return t*t+e*e},t.prototype.dot=function(t){return t.x*this.x+t.y*this.y},t.prototype.cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this},t.prototype.zero=function(){return this.x=this.y=0,this},t.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),o=this.x,i=this.y;return this.x=o*e-i*n,this.y=o*n+i*e,this},t.prototype.round=function(t){void 0===t&&(t=2);var e=n[t];return this.x=(.5+this.x*e<<0)/e,this.y=(.5+this.y*e<<0)/e,this},t.prototype.clone=function(){return new this.ctor(this.x,this.y)},t}();e.AbstractVector=o},"./node_modules/vector2d/src/ArrayVector.js":function(t,e,n){var o,i=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(n,o){var i=t.call(this,e)||this;return i.axes=[n,o],i.ctor=e,i}return i(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.axes[0]},set:function(t){this.axes[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.axes[1]},set:function(t){this.axes[1]=t},enumerable:!0,configurable:!0}),e}(n("./node_modules/vector2d/src/AbstractVector.js").AbstractVector);e.ArrayVector=r},"./node_modules/vector2d/src/Float32Vector.js":function(t,e,n){var o,i=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(n,o){var i=t.call(this,e)||this;return i.axes=new Float32Array(2),i.axes[0]=n,i.axes[1]=o,i}return i(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.axes[0]},set:function(t){this.axes[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.axes[1]},set:function(t){this.axes[1]=t},enumerable:!0,configurable:!0}),e}(n("./node_modules/vector2d/src/AbstractVector.js").AbstractVector);e.Float32Vector=r},"./node_modules/vector2d/src/Vec2D.js":(t,e,n)=>{function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),o(n("./node_modules/vector2d/src/AbstractVector.js")),o(n("./node_modules/vector2d/src/ArrayVector.js")),o(n("./node_modules/vector2d/src/Float32Vector.js")),o(n("./node_modules/vector2d/src/Vector.js"))},"./node_modules/vector2d/src/Vector.js":function(t,e,n){var o,i=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(n,o){var i=t.call(this,e)||this;return i._x=n,i._y=o,i}return i(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!0,configurable:!0}),e}(n("./node_modules/vector2d/src/AbstractVector.js").AbstractVector);e.Vector=r}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n("./src/MenuManager/login.ts")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c25ha2VfZ2FtZS8uL3NyYy9EcmF3ZXIudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9JbnB1dE1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9MaW5lU2VnbWVudC50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL01lbnVNYW5hZ2VyL2xvZ2luLnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvUGFydGljbGVTeXN0ZW0vRW1pdHRlci50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL1BhcnRpY2xlU3lzdGVtL1BhcnRpY2xlLnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvUGFydGljbGVTeXN0ZW0vUGFydGljbGVTeXN0ZW1VdGlscy50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL1NlZ21lbnQudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9TbmFrZS50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL1ZpZXdNb2RlbHMvUGxheWVyLnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvVmlld01vZGVscy9Sb29tLnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvV2ViU29ja2V0Q2xpZW50L3dlYnNvY2tldC50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9ub2RlX21vZHVsZXMvdmVjdG9yMmQvc3JjL0Fic3RyYWN0VmVjdG9yLmpzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9ub2RlX21vZHVsZXMvdmVjdG9yMmQvc3JjL0FycmF5VmVjdG9yLmpzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9ub2RlX21vZHVsZXMvdmVjdG9yMmQvc3JjL0Zsb2F0MzJWZWN0b3IuanMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL25vZGVfbW9kdWxlcy92ZWN0b3IyZC9zcmMvVmVjMkQuanMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL25vZGVfbW9kdWxlcy92ZWN0b3IyZC9zcmMvVmVjdG9yLmpzIiwid2VicGFjazovL3NuYWtlX2dhbWUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3NuYWtlX2dhbWUvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRyYXdBcmMsIGRyYXdBcnJvdywgZHJhd0RvdCB9IGZyb20gXCIuL0RyYXdlclwiO1xyXG5pbXBvcnQgKiBhcyBWZWMyRCBmcm9tICd2ZWN0b3IyZCc7XHJcbmltcG9ydCBTZWdtZW50IGZyb20gXCIuL1NlZ21lbnRcIjtcclxuaW1wb3J0IHsgZ2FtZUNhbnZhc0N0eCB9IGZyb20gXCIuL2luZGV4XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcmNTZWdtZW50IGV4dGVuZHMgU2VnbWVudCB7XHJcblxyXG5cclxuICAgIHB1YmxpYyBjZW50ZXI6IFZlYzJELlZlY3RvcjtcclxuICAgIHB1YmxpYyByYWRpdXM6IG51bWJlcjtcclxuICAgIHB1YmxpYyBzdGFydEFuZ2xlOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgZW5kQW5nbGU6IG51bWJlcjtcclxuICAgIHByaXZhdGUgY291bnRlckNsb2Nrd2lzZTogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBpc0NvbGxpZGFibGU6IGJvb2xlYW47XHJcblxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNlbnRlcjogVmVjMkQuVmVjdG9yLCByYWRpdXM6IG51bWJlciwgc3RhcnRBbmdsZTogbnVtYmVyLCBlbmRBbmdsZTogbnVtYmVyLCBjb3VudGVyQ2xvY2t3aXNlOiBib29sZWFuLCBpc0NvbGxpZGFibGU6IGJvb2xlYW4pIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuY2VudGVyID0gY2VudGVyO1xyXG4gICAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzO1xyXG4gICAgICAgIHRoaXMuc3RhcnRBbmdsZSA9IHN0YXJ0QW5nbGU7XHJcbiAgICAgICAgdGhpcy5lbmRBbmdsZSA9IGVuZEFuZ2xlO1xyXG4gICAgICAgIHRoaXMuY291bnRlckNsb2Nrd2lzZSA9IGNvdW50ZXJDbG9ja3dpc2U7XHJcbiAgICAgICAgdGhpcy5pc0NvbGxpZGFibGUgPSBpc0NvbGxpZGFibGU7XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgZHJhdyhjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGNvbG9yOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBjb250ZXh0LmxpbmVDYXAgPSBcInJvdW5kXCI7XHJcbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGNvbG9yO1xyXG4gICAgICAgIGlmICh0aGlzLmlzQ29sbGlkYWJsZSA9PSB0cnVlKXtcclxuICAgICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgY29udGV4dC5hcmModGhpcy5jZW50ZXIueCwgdGhpcy5jZW50ZXIueSwgdGhpcy5yYWRpdXMsIHRoaXMuc3RhcnRBbmdsZSwgdGhpcy5lbmRBbmdsZSwgdGhpcy5jb3VudGVyQ2xvY2t3aXNlKTtcclxuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcclxuICAgICAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0RlYnVnKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgY29sb3I6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIC8vIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSAnI2ZmMDBmZmZmJ1xyXG4gICAgICAgIGxldCB0YW5nZW50X2FuZ2xlID0gdGhpcy5jb3VudGVyQ2xvY2t3aXNlID8tIE1hdGguUEkgIDogTWF0aC5QSTtcclxuXHJcbiAgICAgICAgdGFuZ2VudF9hbmdsZSArPSB0aGlzLmVuZEFuZ2xlO1xyXG4gICAgICAgIGNvbnRleHQubGluZUNhcCA9IFwicm91bmRcIjtcclxuICAgICAgICBkcmF3RG90KHRoaXMuY2VudGVyLngsIHRoaXMuY2VudGVyLnksIDUsICcjMDAwMDAwJyk7XHJcbiAgICAgICAgZHJhd0Fycm93KGNvbnRleHQsbmV3IFZlYzJELlZlY3Rvcih0aGlzLmVuZFBvaW50LngsdGhpcy5lbmRQb2ludC55KSwgbmV3IFZlYzJELlZlY3Rvcih0aGlzLmVuZFBvaW50LnggKyB0aGlzLnJhZGl1cyAqIE1hdGguY29zKHRhbmdlbnRfYW5nbGUpLHRoaXMuZW5kUG9pbnQueSArIHRoaXMucmFkaXVzICogTWF0aC5zaW4odGFuZ2VudF9hbmdsZSkpKTtcclxuICAgICAgICBkcmF3QXJjKHRoaXMuY2VudGVyLngsIHRoaXMuY2VudGVyLnksIHRoaXMucmFkaXVzLCAwLCAwLCBmYWxzZSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldCBlbmRQb2ludCgpOiBWZWMyRC5WZWN0b3Ige1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMkQuVmVjdG9yKFxyXG4gICAgICAgIHRoaXMuY2VudGVyLnggKyB0aGlzLnJhZGl1cyAqIE1hdGguY29zKHRoaXMuZW5kQW5nbGUpLFxyXG4gICAgICAgIHRoaXMuY2VudGVyLnkgKyB0aGlzLnJhZGl1cyAqIE1hdGguc2luKHRoaXMuZW5kQW5nbGUpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcGVucGVuZGljdWxhckVuZEFuZ2xlKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNDb3VudGVyQ2xvY2t3aXNlPyB0aGlzLmVuZEFuZ2xlIC0gTWF0aC5QSSAvMiA6IHRoaXMuZW5kQW5nbGUgKyBNYXRoLlBJIC8gMjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcGVucGVuZGljdWxhclN0YXJ0QW5nbGUoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0NvdW50ZXJDbG9ja3dpc2U/IHRoaXMuc3RhcnRBbmdsZS0gTWF0aC5QSSAvMiA6IHRoaXMuc3RhcnRBbmdsZSArIE1hdGguUEkgLyAyO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQ291bnRlckNsb2Nrd2lzZSgpOiBib29sZWFue1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvdW50ZXJDbG9ja3dpc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29udGludWluZ1NlZ21lbnQodHJhbnNmb3JtOiBWZWMyRC5WZWN0b3IpOiBTZWdtZW50IHtcclxuICAgICAgICByZXR1cm4gbmV3IEFyY1NlZ21lbnQodGhpcy5jZW50ZXIuY2xvbmUoKS5hZGQodHJhbnNmb3JtKSBhcyBWZWMyRC5WZWN0b3IsIHRoaXMucmFkaXVzLCB0aGlzLmVuZEFuZ2xlLCB0aGlzLmVuZEFuZ2xlLCB0aGlzLmNvdW50ZXJDbG9ja3dpc2UsIHRoaXMuaXNDb2xsaWRhYmxlKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCJ2ZWN0b3IyZFwiO1xuaW1wb3J0IHsgYmFja2dyb3VuZENhbnZhcywgYmFja2dyb3VuZENhbnZhc0N0eCwgZ3JpZFNpemUgfSBmcm9tIFwiLi9pbmRleFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gZHJhd0dyaWQoKSB7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5jbGVhclJlY3QoMCwgMCwgYmFja2dyb3VuZENhbnZhcy53aWR0aCwgYmFja2dyb3VuZENhbnZhcy5oZWlnaHQpO1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgwLCAwLCAwLCAwLjMpJztcbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmxpbmVXaWR0aCA9IDI7XG4gICAgZm9yICh2YXIgeCA9IGdyaWRTaXplOyB4IDwgYmFja2dyb3VuZENhbnZhcy53aWR0aDsgeCArPSBncmlkU2l6ZSkge1xuICAgICAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4Lm1vdmVUbyh4LCAwKTtcbiAgICAgICAgYmFja2dyb3VuZENhbnZhc0N0eC5saW5lVG8oeCwgYmFja2dyb3VuZENhbnZhcy5oZWlnaHQpO1xuICAgICAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LnN0cm9rZSgpO1xuICAgIH1cbiAgICBmb3IgKHZhciB5ID0gZ3JpZFNpemU7IHkgPCBiYWNrZ3JvdW5kQ2FudmFzLmhlaWdodDsgeSArPSBncmlkU2l6ZSkge1xuICAgICAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4Lm1vdmVUbygwLCB5KTtcbiAgICAgICAgYmFja2dyb3VuZENhbnZhc0N0eC5saW5lVG8oYmFja2dyb3VuZENhbnZhcy53aWR0aCwgeSk7XG4gICAgICAgIGJhY2tncm91bmRDYW52YXNDdHguc3Ryb2tlKCk7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZHJhd0RvdChkb3RYOiBudW1iZXIsIGRvdFk6IG51bWJlciwgZG90U2l6ZTogbnVtYmVyLCBjb2xvcjogc3RyaW5nKSB7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5iZWdpblBhdGgoKTtcbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmFyYyhcbiAgICAgICAgZG90WCxcbiAgICAgICAgZG90WSxcbiAgICAgICAgZG90U2l6ZSxcbiAgICAgICAgMCxcbiAgICAgICAgMiAqIE1hdGguUEksXG4gICAgICAgIGZhbHNlXG4gICAgKTtcblxuICAgIGJhY2tncm91bmRDYW52YXNDdHguZmlsbFN0eWxlID0gY29sb3I7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5maWxsKCk7XG5cbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmNsb3NlUGF0aCgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZHJhd0FyYyhkb3RYOiBudW1iZXIsIGRvdFk6IG51bWJlciwgcmFkaXVzOiBudW1iZXIsIHN0YXJ0QW5nbGU6IG51bWJlciwgZW5kQW5nbGU6IG51bWJlciwgY291bnRlckNsb2Nrd2lzZTogYm9vbGVhbikge1xuICAgIGJhY2tncm91bmRDYW52YXNDdHgubGluZUNhcCA9IFwicm91bmRcIjtcbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LnN0cm9rZVN0eWxlID0gXCIjMzQ2NmFhXCI7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5iZWdpblBhdGgoKTtcbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmFyYyhkb3RYLCBkb3RZLCByYWRpdXMsIDAsIDIgKiBNYXRoLlBJLCBjb3VudGVyQ2xvY2t3aXNlKTtcblxuICAgIGJhY2tncm91bmRDYW52YXNDdHgubGluZVdpZHRoID0gNTtcbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LnN0cm9rZSgpO1xuXG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5jbG9zZVBhdGgoKTtcbn1cblxuXG5cblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdBcnJvdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgZnJvbTogVmVjdG9yLCB0bzogVmVjdG9yKSB7XG4gICAgaWYgKGZyb20ueCAhPSB0by54ICYmIGZyb20ueSAhPSB0by55KSB7XG4gICAgICAgIHZhciBhbmdsZSA9IE1hdGguYXRhbjIodG8ueSAtIGZyb20ueSwgdG8ueCAtIGZyb20ueCk7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gMTA7XG4gICAgICAgIHZhciBoZWFkTGVuZ3RoID0gMTA7XG4gICAgICAgIHZhciBuZXdfdG8gPSBuZXcgVmVjdG9yKHRvLngsIHRvLnkpO1xuICAgICAgICAvLyBUaGlzIG1ha2VzIGl0IHNvIHRoZSBlbmQgb2YgdGhlIGFycm93IGhlYWQgaXMgbG9jYXRlZCBhdCB0b3gsIHRveSwgZG9uJ3QgYXNrIHdoZXJlIDEuMTUgY29tZXMgZnJvbVxuICAgICAgICBuZXdfdG8ueCAtPSBNYXRoLmNvcyhhbmdsZSkgKiAoKHdpZHRoICogMS4xNSkpO1xuICAgICAgICBuZXdfdG8ueSAtPSBNYXRoLnNpbihhbmdsZSkgKiAoKHdpZHRoICogMS4xNSkpO1xuXG5cblxuICAgICAgICAvL3N0YXJ0aW5nIHBhdGggb2YgdGhlIGFycm93IGZyb20gdGhlIHN0YXJ0IHNxdWFyZSB0byB0aGUgZW5kIHNxdWFyZSBhbmQgZHJhd2luZyB0aGUgc3Ryb2tlXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4Lm1vdmVUbyhmcm9tLngsIGZyb20ueSk7XG4gICAgICAgIGN0eC5saW5lVG8obmV3X3RvLngsIG5ld190by55KTtcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gXCIjYmJiYmJiXCI7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSB3aWR0aDtcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuXG4gICAgICAgIC8vc3RhcnRpbmcgYSBuZXcgcGF0aCBmcm9tIHRoZSBoZWFkIG9mIHRoZSBhcnJvdyB0byBvbmUgb2YgdGhlIHNpZGVzIG9mIHRoZSBwb2ludFxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5tb3ZlVG8obmV3X3RvLngsIG5ld190by55KTtcbiAgICAgICAgY3R4LmxpbmVUbyhuZXdfdG8ueCAtIGhlYWRMZW5ndGggKiBNYXRoLmNvcyhhbmdsZSAtIE1hdGguUEkgLyA3KSwgbmV3X3RvLnkgLSBoZWFkTGVuZ3RoICogTWF0aC5zaW4oYW5nbGUgLSBNYXRoLlBJIC8gNykpO1xuXG4gICAgICAgIC8vcGF0aCBmcm9tIHRoZSBzaWRlIHBvaW50IG9mIHRoZSBhcnJvdywgdG8gdGhlIG90aGVyIHNpZGUgcG9pbnRcbiAgICAgICAgY3R4LmxpbmVUbyhuZXdfdG8ueCAtIGhlYWRMZW5ndGggKiBNYXRoLmNvcyhhbmdsZSArIE1hdGguUEkgLyA3KSwgbmV3X3RvLnkgLSBoZWFkTGVuZ3RoICogTWF0aC5zaW4oYW5nbGUgKyBNYXRoLlBJIC8gNykpO1xuXG4gICAgICAgIC8vcGF0aCBmcm9tIHRoZSBzaWRlIHBvaW50IGJhY2sgdG8gdGhlIHRpcCBvZiB0aGUgYXJyb3csIGFuZCB0aGVuIGFnYWluIHRvIHRoZSBvcHBvc2l0ZSBzaWRlIHBvaW50XG4gICAgICAgIGN0eC5saW5lVG8obmV3X3RvLngsIG5ld190by55KTtcbiAgICAgICAgY3R4LmxpbmVUbyhuZXdfdG8ueCAtIGhlYWRMZW5ndGggKiBNYXRoLmNvcyhhbmdsZSAtIE1hdGguUEkgLyA3KSwgbmV3X3RvLnkgLSBoZWFkTGVuZ3RoICogTWF0aC5zaW4oYW5nbGUgLSBNYXRoLlBJIC8gNykpO1xuXG4gICAgICAgIC8vZHJhd3MgdGhlIHBhdGhzIGNyZWF0ZWQgYWJvdmVcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gXCIjYmJiYmJiXCI7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSB3aWR0aDtcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gXCIjYmJiYmJiXCI7XG4gICAgICAgIGN0eC5maWxsKCk7XG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICB9XG59IiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcInZlY3RvcjJkXCI7XHJcbmltcG9ydCBBcmNTZWdtZW50IGZyb20gXCIuL0FyY1NlZ21lbnRcIjtcclxuaW1wb3J0IExpbmVTZWdtZW50IGZyb20gXCIuL0xpbmVTZWdtZW50XCI7XHJcbmltcG9ydCBTbmFrZSBmcm9tIFwiLi9TbmFrZVwiO1xyXG5pbXBvcnQgeyBzZW5kS2V5RXZlbnRUb1NlcnZlciB9IGZyb20gXCIuL1dlYlNvY2tldENsaWVudC93ZWJzb2NrZXRcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIElucHV0TWFuYWdlciB7XHJcbiAgcHJpdmF0ZSBrZXlNYXA6IHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9ID0ge307XHJcbiAgcHJpdmF0ZSBzbmFrZTogU25ha2U7XHJcbiAgcHJpdmF0ZSBsZWZ0S2V5OiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSByaWdodEtleTogc3RyaW5nO1xyXG5cclxuICBjb25zdHJ1Y3RvcihzbmFrZTogU25ha2UsIGxlZnRLZXk6IHN0cmluZywgcmlnaHRLZXk6IHN0cmluZykge1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLm9uS2V5RG93bi5iaW5kKHRoaXMpKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMub25LZXlVcC5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuc25ha2UgPSBzbmFrZTtcclxuICAgIHRoaXMubGVmdEtleSA9IGxlZnRLZXk7XHJcbiAgICB0aGlzLnJpZ2h0S2V5ID0gcmlnaHRLZXk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uS2V5RG93bihldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG4gICAgLy9pZiBzbmFrZSBpcyBkZWFkLCBpZ25vcmUgdGhlIGtleSBwcmVzc2VzXHJcbiAgICBpZighdGhpcy5zbmFrZS5pc0FsaXZlKSByZXR1cm47XHJcblxyXG4gICAgY29uc3Qga2V5ID0gZXZlbnQua2V5LnRvVXBwZXJDYXNlKCk7XHJcbiAgICBcclxuXHJcbiAgICAvL2lnbm9yZSBrZXlzIG5vdCBhc3NpZ25lZCB0byBzZWxmLCB0aGlzIHdvdWxkIHJlc3VsdCBpbiB0aGUga2V5bWFwIGhhdmluZyB1bm5lY2Vzc2FyeSBrZXlzIGFuZCB0cmlnZ2VyaW5nIHRoZSBvbmtleVVwIGV2ZW50c1xyXG4gICAgaWYoa2V5ICE9IHRoaXMubGVmdEtleSAmJiBrZXkgIT0gdGhpcy5yaWdodEtleSl7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvL3N3aXRjaCBvZmYgdGhlIGN1cnJlbnQgZG93biBrZXkgaWYgdGhlIG90aGVyIGRpcmVjdGlvbiBpcyBwcmVzc2VkXHJcbiAgICBpZiAodGhpcy5rZXlNYXBbdGhpcy5yaWdodEtleV0gJiYga2V5ID09IHRoaXMubGVmdEtleSkge1xyXG4gICAgICB0aGlzLmtleU1hcFt0aGlzLnJpZ2h0S2V5XSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodGhpcy5rZXlNYXBbdGhpcy5sZWZ0S2V5XSAmJiBrZXkgPT0gdGhpcy5yaWdodEtleSkge1xyXG4gICAgICB0aGlzLmtleU1hcFt0aGlzLmxlZnRLZXldID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvL3JldHVybiBpZiB0aGUga2V5IGlzIGFscmFlZHkgaW4gdGhlIG1hcCwgcHJldmVudHMgYXV0b2NsaWNraW5nXHJcbiAgICBlbHNlIGlmICh0aGlzLmtleU1hcFtrZXldKSB7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgdGhpcy5rZXlNYXBba2V5XSA9IHRydWU7XHJcblxyXG5cclxuICAgIGxldCBoZWFkID0gdGhpcy5zbmFrZS5oZWFkO1xyXG4gICAgbGV0IGVuZFBvaW50ID0gaGVhZC5lbmRQb2ludDtcclxuICAgIGxldCB0YW5nZW50QW5nbGUgPSAwO1xyXG5cclxuXHJcbiAgICBzZW5kS2V5RXZlbnRUb1NlcnZlcihrZXkgPT0gdGhpcy5yaWdodEtleSA/ICdyaWdodCcgOiAnbGVmdCcsIHRydWUpO1xyXG5cclxuXHJcbiAgICAvLyBpZiAoaGVhZCBpbnN0YW5jZW9mIExpbmVTZWdtZW50KSB7XHJcbiAgICAvLyAgIHRhbmdlbnRBbmdsZSArPSBNYXRoLlBJIC8gMjtcclxuXHJcbiAgICAvLyAgIGlmIChrZXkgPT0gdGhpcy5yaWdodEtleSkge1xyXG5cclxuICAgIC8vICAgICB0aGlzLnNuYWtlLmFkZFNlZ21lbnQobmV3IEFyY1NlZ21lbnQobmV3IFZlY3RvcihcclxuICAgIC8vICAgICAgIGVuZFBvaW50LnggKyB0aGlzLnNuYWtlLnR1cm5SYWRpdXMgKiBNYXRoLmNvcyh0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgKyB0YW5nZW50QW5nbGUpLFxyXG4gICAgLy8gICAgICAgZW5kUG9pbnQueSArIHRoaXMuc25ha2UudHVyblJhZGl1cyAqIE1hdGguc2luKHRoaXMuc25ha2UuaGVhZC5lbmRBbmdsZSArIHRhbmdlbnRBbmdsZSkpLFxyXG4gICAgLy8gICAgICAgdGhpcy5zbmFrZS50dXJuUmFkaXVzLCB0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgLSB0YW5nZW50QW5nbGUsIHRoaXMuc25ha2UuaGVhZC5lbmRBbmdsZSAtIHRhbmdlbnRBbmdsZSwgZmFsc2UsIGhlYWQuaXNDb2xsaWRhYmxlKSlcclxuICAgIC8vICAgfVxyXG4gICAgLy8gICBpZiAoa2V5ID09IHRoaXMubGVmdEtleSkge1xyXG4gICAgLy8gICAgIHRoaXMuc25ha2UuYWRkU2VnbWVudChuZXcgQXJjU2VnbWVudChuZXcgVmVjdG9yKFxyXG4gICAgLy8gICAgICAgZW5kUG9pbnQueCArIHRoaXMuc25ha2UudHVyblJhZGl1cyAqIE1hdGguY29zKHRoaXMuc25ha2UuaGVhZC5lbmRBbmdsZSAtIHRhbmdlbnRBbmdsZSksXHJcbiAgICAvLyAgICAgICBlbmRQb2ludC55ICsgdGhpcy5zbmFrZS50dXJuUmFkaXVzICogTWF0aC5zaW4odGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlIC0gdGFuZ2VudEFuZ2xlKSksXHJcbiAgICAvLyAgICAgICB0aGlzLnNuYWtlLnR1cm5SYWRpdXMsIHRoaXMuc25ha2UuaGVhZC5lbmRBbmdsZSArIHRhbmdlbnRBbmdsZSwgdGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlICsgdGFuZ2VudEFuZ2xlLCB0cnVlLCBoZWFkLmlzQ29sbGlkYWJsZSkpXHJcbiAgICAvLyAgIH1cclxuXHJcbiAgICAvLyB9IFxyXG5cclxuICAgIC8vIGVsc2UgaWYgKGhlYWQgaW5zdGFuY2VvZiBBcmNTZWdtZW50KSB7XHJcblxyXG4gICAgLy8gICB0YW5nZW50QW5nbGUgPSBoZWFkLmlzQ291bnRlckNsb2Nrd2lzZSA/IC1NYXRoLlBJIDogTWF0aC5QSTtcclxuICAgIC8vICAgaWYgKGtleSA9PSB0aGlzLnJpZ2h0S2V5KSB7XHJcbiAgICAvLyAgICAgdGhpcy5zbmFrZS5hZGRTZWdtZW50KG5ldyBBcmNTZWdtZW50KG5ldyBWZWN0b3IoXHJcbiAgICAvLyAgICAgICBlbmRQb2ludC54IC0gdGhpcy5zbmFrZS50dXJuUmFkaXVzICogTWF0aC5jb3ModGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlICsgdGFuZ2VudEFuZ2xlKSxcclxuICAgIC8vICAgICAgIGVuZFBvaW50LnkgLSB0aGlzLnNuYWtlLnR1cm5SYWRpdXMgKiBNYXRoLnNpbih0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgKyB0YW5nZW50QW5nbGUpKSxcclxuICAgIC8vICAgICAgIHRoaXMuc25ha2UudHVyblJhZGl1cywgdGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlIC0gdGFuZ2VudEFuZ2xlLCB0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgLSB0YW5nZW50QW5nbGUsIGZhbHNlLCBoZWFkLmlzQ29sbGlkYWJsZSkpXHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgaWYgKGtleSA9PSB0aGlzLmxlZnRLZXkpIHtcclxuICAgIC8vICAgICB0aGlzLnNuYWtlLmFkZFNlZ21lbnQobmV3IEFyY1NlZ21lbnQobmV3IFZlY3RvcihcclxuICAgIC8vICAgICAgIGVuZFBvaW50LnggLSB0aGlzLnNuYWtlLnR1cm5SYWRpdXMgKiBNYXRoLmNvcyh0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgLSB0YW5nZW50QW5nbGUpLFxyXG4gICAgLy8gICAgICAgZW5kUG9pbnQueSAtIHRoaXMuc25ha2UudHVyblJhZGl1cyAqIE1hdGguc2luKHRoaXMuc25ha2UuaGVhZC5lbmRBbmdsZSAtIHRhbmdlbnRBbmdsZSkpLFxyXG4gICAgLy8gICAgICAgdGhpcy5zbmFrZS50dXJuUmFkaXVzLCB0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgKyB0YW5nZW50QW5nbGUsIHRoaXMuc25ha2UuaGVhZC5lbmRBbmdsZSArIHRhbmdlbnRBbmdsZSwgdHJ1ZSwgaGVhZC5pc0NvbGxpZGFibGUpKVxyXG4gICAgLy8gICB9XHJcblxyXG4gICAgLy8gfVxyXG5cclxuICB9XHJcbiAgcHJpdmF0ZSBvbktleVVwKGV2ZW50OiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XHJcbiAgICAvL2lmIHNuYWtlIGlzIGRlYWQsIGlnbm9yZSB0aGUga2V5IHByZXNzZXNcclxuICAgIGlmKCF0aGlzLnNuYWtlLmlzQWxpdmUpIHJldHVybjtcclxuICAgIFxyXG4gICAgY29uc3Qga2V5ID0gZXZlbnQua2V5LnRvVXBwZXJDYXNlKCk7XHJcblxyXG4gICAgLy9jaGVjayBpZiB0aGUga2V5IGlzIGluIHRoZSBrZXltYXAsIGlmIG5vdCBqdXN0IGlnbm9yZSBpdFxyXG4gICAgaWYgKCF0aGlzLmtleU1hcFtrZXldKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMua2V5TWFwW2tleV0gPSBmYWxzZTtcclxuXHJcbiAgICBzZW5kS2V5RXZlbnRUb1NlcnZlcihrZXkgPT0gdGhpcy5yaWdodEtleSA/ICdyaWdodCcgOiAnbGVmdCcsIGZhbHNlKTtcclxuXHJcblxyXG5cclxuICAgIC8vIGxldCBoZWFkID0gdGhpcy5zbmFrZS5oZWFkO1xyXG4gICAgLy8gbGV0IGVuZFBvaW50ID0gaGVhZC5lbmRQb2ludDtcclxuICAgIC8vIGxldCBhbmdsZSA9IGhlYWQuZW5kQW5nbGU7XHJcblxyXG4gICAgLy8gaWYgKGtleSA9PSB0aGlzLmxlZnRLZXkgJiYgaGVhZCBpbnN0YW5jZW9mIEFyY1NlZ21lbnQgJiYgaGVhZC5pc0NvdW50ZXJDbG9ja3dpc2UoKSkge1xyXG5cclxuICAgIC8vICAgYW5nbGUgLT0gTWF0aC5QSSAvIDI7XHJcbiAgICAvLyB9IGVsc2UgaWYgKGtleSA9PSB0aGlzLnJpZ2h0S2V5ICYmIGhlYWQgaW5zdGFuY2VvZiBBcmNTZWdtZW50ICYmICFoZWFkLmlzQ291bnRlckNsb2Nrd2lzZSgpKSB7XHJcblxyXG4gICAgLy8gICBhbmdsZSArPSBNYXRoLlBJIC8gMjtcclxuICAgIC8vIH1cclxuXHJcblxyXG5cclxuICAgIC8vIHRoaXMuc25ha2UuYWRkU2VnbWVudChuZXcgTGluZVNlZ21lbnQoZW5kUG9pbnQsXHJcbiAgICAvLyAgIG5ldyBWZWN0b3IoZW5kUG9pbnQueCArIDUgKiBNYXRoLmNvcyhhbmdsZSksIGVuZFBvaW50LnkgKyA1ICogTWF0aC5zaW4oYW5nbGUpKSwgaGVhZC5pc0NvbGxpZGFibGUgLGFuZ2xlKSk7XHJcblxyXG5cclxuXHJcbiAgICAvL2NvbnNvbGUubG9nKHRoaXMuc25ha2UuaGVhZCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25LZXlEb3duLmJpbmQodGhpcykpO1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5vbktleVVwLmJpbmQodGhpcykpO1xyXG4gIH1cclxuXHJcblxyXG5cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcInZlY3RvcjJkXCI7XHJcbmltcG9ydCBTZWdtZW50IGZyb20gXCIuL1NlZ21lbnRcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpbmVTZWdtZW50IGV4dGVuZHMgU2VnbWVudCB7XHJcblxyXG5cclxuICAgIHB1YmxpYyBzdGFydFBvaW50OiBWZWN0b3I7XHJcbiAgICBwdWJsaWMgZW5kUG9pbnQ6IFZlY3RvcjtcclxuICAgIHB1YmxpYyBlbmRBbmdsZTogbnVtYmVyO1xyXG4gICAgcHVibGljIGlzQ29sbGlkYWJsZTogYm9vbGVhbiA9IHRydWU7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3RhcnQ6IFZlY3RvciwgZW5kOiBWZWN0b3IsIGlzQ29sbGlkYWJsZTogYm9vbGVhbiwgYW5nbGU/OiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuc3RhcnRQb2ludCA9IHN0YXJ0O1xyXG4gICAgICAgIHRoaXMuZW5kUG9pbnQgPSBlbmQ7XHJcbiAgICAgICAgdGhpcy5pc0NvbGxpZGFibGUgPSBpc0NvbGxpZGFibGU7XHJcbiAgICAgICAgdGhpcy5lbmRBbmdsZSA9IGFuZ2xlO1xyXG4gICAgICAgIFxyXG4gICAgICB9XHJcblxyXG4gICAgICBkcmF3KGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgY29sb3I6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIC8vIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSAnI2ZmMDBmZmZmJ1xyXG4gICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBjb2xvcjtcclxuICAgICAgICBjb250ZXh0LmxpbmVDYXAgPSBcInJvdW5kXCI7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNDb2xsaWRhYmxlID09IHRydWUpe1xyXG4gICAgICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyh0aGlzLnN0YXJ0UG9pbnQueCwgdGhpcy5zdGFydFBvaW50LnkpO1xyXG4gICAgICAgICAgICBjb250ZXh0LmxpbmVUbyh0aGlzLmVuZFBvaW50LngsIHRoaXMuZW5kUG9pbnQueSk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBjYWxjRW5kQW5nbGUoKTogbnVtYmVye1xyXG4gICAgICAgIHJldHVybiBNYXRoLmF0YW4oKHRoaXMuZW5kUG9pbnQueSAtIHRoaXMuc3RhcnRQb2ludC55KSAvICh0aGlzLmVuZFBvaW50LnggLSB0aGlzLnN0YXJ0UG9pbnQueCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBsZW5ndGgoKTogbnVtYmVye1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoKHRoaXMuc3RhcnRQb2ludC54IC0gdGhpcy5lbmRQb2ludC54KSoqMiArICh0aGlzLnN0YXJ0UG9pbnQueSAtIHRoaXMuZW5kUG9pbnQueSkqKjIpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENvbnRpbnVpbmdTZWdtZW50KHRyYW5zZm9ybTogVmVjdG9yKTogU2VnbWVudCB7XHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtZWRFbmRwb2ludCA9IHRoaXMuZW5kUG9pbnQuY2xvbmUoKS5hZGQodHJhbnNmb3JtKSBhcyBWZWN0b3I7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBMaW5lU2VnbWVudChcclxuICAgICAgICAgICAgdHJhbnNmb3JtZWRFbmRwb2ludCwgXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkRW5kcG9pbnQsIFxyXG4gICAgICAgICAgICB0aGlzLmlzQ29sbGlkYWJsZSwgXHJcbiAgICAgICAgICAgIHRoaXMuZW5kQW5nbGVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuLi9WaWV3TW9kZWxzL1BsYXllclwiO1xyXG5pbXBvcnQgeyBHYW1lU3RhdGUsIFJvb20gfSBmcm9tIFwiLi4vVmlld01vZGVscy9Sb29tXCI7XHJcbmltcG9ydCB7IEdhbWVTdGF0ZURhdGEgfSBmcm9tIFwiLi4vV2ViU29ja2V0Q2xpZW50L21lc3NhZ2VUeXBlc1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVSb29tLCBqb2luUm9vbSwgc2VuZFN0YXJ0Q29tbWFuZCwgc2V0UGxheWVyRGF0YSB9IGZyb20gXCIuLi9XZWJTb2NrZXRDbGllbnQvd2Vic29ja2V0XCI7XHJcblxyXG5cclxuZXhwb3J0IGxldCBjdXJyZW50Um9vbTogUm9vbSB8IG51bGwgPSBudWxsO1xyXG5leHBvcnQgbGV0IGN1cnJlbnRQbGF5ZXI6IFBsYXllciB8IG51bGwgPSBudWxsO1xyXG5cclxuY29uc3Qgcm9vbUNvZGVJbnB1dCA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vbUNvZGVJbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQpO1xyXG5jb25zdCB1c2VybmFtZUlucHV0ID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VybmFtZUlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudCk7XHJcbmNvbnN0IHJvb21CdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnam9pbkJ1dHRvbicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5jb25zdCByZWFkeUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWFkeUJ1dHRvbicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5jb25zdCBsb2dpbkRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbi1kaXYnKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuY29uc3Qgcm9vbURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb29tLWRpdicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5jb25zdCBnYW1lRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtY2FudmFzLWNvbnRhaW5lcicpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG5jb25zdCBjb2xvclBpY2tlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xvci1waWNrZXInKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5jb25zdCByb29tVXNlcnNMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb20tdXNlcnMtbGlzdCcpIGFzIEhUTUxVTGlzdEVsZW1lbnQ7XHJcbmNvbnN0IHJvb21Db2RlU3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb29tLWNvZGUnKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcclxuY29uc3QgcGxheWVyQ291bnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyLWNvdW50JykgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcbmNvbnN0IGNvbG9yUGlja2VyRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbG9yLXBpY2tlci1jb250YWluZXInKTtcclxuY29uc3Qgc3RhcnRQcm9ncmVzc0JhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydC1wcm9ncmVzcy1iYXInKTtcclxuLy8gc3JjL2xvZ2luLnRzXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVCdXR0b24oKSB7XHJcblxyXG5cclxuICAgIGlmICh1c2VybmFtZUlucHV0LnZhbHVlLnRyaW0oKSA9PSAnJykge1xyXG4gICAgICAgIHJvb21CdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByb29tQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJvb21Db2RlSW5wdXQudmFsdWUudHJpbSgpLmxlbmd0aCA9PSA1KSB7XHJcbiAgICAgICAgcm9vbUJ1dHRvbi50ZXh0Q29udGVudCA9ICdKT0lOIFJPT00nO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByb29tQnV0dG9uLnRleHRDb250ZW50ID0gJ0NSRUFURSBST09NJztcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVJvb21BY3Rpb24oKSB7XHJcbiAgICBjb25zdCB1c2VybmFtZSA9IHVzZXJuYW1lSW5wdXQudmFsdWU7XHJcbiAgICBpZiAoIXVzZXJuYW1lKSByZXR1cm47XHJcblxyXG4gICAgY3VycmVudFBsYXllciA9IG5ldyBQbGF5ZXIodXNlcm5hbWUpO1xyXG5cclxuICAgIGlmIChyb29tQnV0dG9uLmlubmVyVGV4dCA9PT0gJ0NSRUFURSBST09NJykge1xyXG4gICAgICAgIGNyZWF0ZVJvb20odXNlcm5hbWVJbnB1dC52YWx1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICBqb2luUm9vbShyb29tQ29kZUlucHV0LnZhbHVlLnRvVXBwZXJDYXNlKCksIHVzZXJuYW1lSW5wdXQudmFsdWUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlUmVhZHlTdGF0ZSgpIHtcclxuXHJcbiAgICBjdXJyZW50UGxheWVyLmlzUmVhZHkgPSAhY3VycmVudFBsYXllci5pc1JlYWR5O1xyXG4gICAgc2V0UGxheWVyRGF0YShjdXJyZW50UGxheWVyLCBjdXJyZW50Um9vbS5nZXRDb2RlKCkpO1xyXG4gICAgdXBkYXRlUmVhZHlCdXR0b24oY3VycmVudFBsYXllci5pc1JlYWR5KTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVJlYWR5QnV0dG9uKGlzUmVhZHk6IGJvb2xlYW4pIHtcclxuICAgIGlmIChpc1JlYWR5KSB7XHJcbiAgICAgICAgcmVhZHlCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgncmVkLWJ1dHRvbicpO1xyXG4gICAgICAgIHJlYWR5QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2dyZWVuLWJ1dHRvbicpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmVhZHlCdXR0b24uY2xhc3NMaXN0LmFkZCgncmVkLWJ1dHRvbicpO1xyXG4gICAgICAgIHJlYWR5QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2dyZWVuLWJ1dHRvbicpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2hvd1Jvb21WaWV3KGRhdGE6IEpTT04pIHtcclxuICAgIC8vc2V0IHRoZSBjbGllbnQgVmlld01vZGVsIG9mIHRoZSByb29tIHRvIHRoZSBzZXJ2ZXJzIHJlc3BvbnNlXHJcbiAgICBsZXQgcm9vbUluZm8gPSBKU09OLnBhcnNlKGRhdGEudG9TdHJpbmcoKSk7XHJcbiAgICBjdXJyZW50Um9vbSA9IG5ldyBSb29tKHJvb21JbmZvWydyb29tJ11bJ2NvZGUnXSwgcm9vbUluZm9bJ3Jvb20nXVsnaG9zdCddLCByb29tSW5mb1sncm9vbSddWydwbGF5ZXJzJ10sIHJvb21JbmZvWydyb29tJ11bJ21heFNpemUnXSlcclxuXHJcbiAgICAvL3Nob3cgc3RhcnRHYW1lQnV0dG9uIFxyXG4gICAgaWYgKGN1cnJlbnRQbGF5ZXIudXNlcm5hbWUgPT0gY3VycmVudFJvb20uZ2V0SG9zdCgpLnVzZXJuYW1lKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0QnV0dG9uJykuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ub25lJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9zZXQgYSByYW5kb20gY29sb3IgZm9yIGEgcGxheWVyXHJcbiAgICBjb2xvclBpY2tlckRpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjdXJyZW50UGxheWVyLmNvbG9yO1xyXG4gICAgY29sb3JQaWNrZXIudmFsdWUgPSBjdXJyZW50UGxheWVyLmNvbG9yO1xyXG4gICAgbGV0IGNvbG9yUGlja2VyTGFiZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3ItbGFiZWwnKTtcclxuICAgIGNvbG9yUGlja2VyTGFiZWwuc3R5bGUuY29sb3IgPSBwaWNrVGV4dENvbG9yQmFzZWRPbkJnQ29sb3JBZHZhbmNlZChjb2xvclBpY2tlci52YWx1ZSwgJyNGRkZGRkYnLCAnIzAwMDAwMCcpO1xyXG5cclxuICAgIC8vc2hvdyB0aGUgbmV3IGVsZW1lbnRcclxuICAgIGxvZ2luRGl2LmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgcm9vbURpdi5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LWZsZXgnKTtcclxuXHJcblxyXG5cclxuICAgIHJvb21Db2RlSW5wdXQudmFsdWUgPSBjdXJyZW50Um9vbS5nZXRDb2RlKCk7XHJcbiAgICByb29tQ29kZVNwYW4uaW5uZXJIVE1MID0gY3VycmVudFJvb20uZ2V0Q29kZSgpO1xyXG4gICAgc2V0UGxheWVyRGF0YShjdXJyZW50UGxheWVyLCBjdXJyZW50Um9vbS5nZXRDb2RlKCkpO1xyXG4gICAgdXBkYXRlUm9vbUxpc3QoZGF0YSk7XHJcblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUm9vbUxpc3QoZGF0YTogSlNPTikge1xyXG4gICAgbGV0IHJvb21JbmZvID0gSlNPTi5wYXJzZShkYXRhLnRvU3RyaW5nKCkpO1xyXG5cclxuICAgIC8vIHVwZGF0aW5nIHRoZSBjdXJyZW50IHJvb20gcGxheWVycyBhbmQgaG9zdFxyXG4gICAgY3VycmVudFJvb20uc2V0UGxheWVycyhyb29tSW5mb1sncm9vbSddWydwbGF5ZXJzJ10pO1xyXG4gICAgY3VycmVudFJvb20uc2V0SG9zdChyb29tSW5mb1sncm9vbSddWydob3N0J10pO1xyXG4gICAgY3VycmVudFJvb20uc2V0TWF4U2l6ZShyb29tSW5mb1sncm9vbSddWydtYXhTaXplJ10pXHJcblxyXG5cclxuICAgIHBsYXllckNvdW50LmlubmVySFRNTCA9IGAke09iamVjdC5rZXlzKGN1cnJlbnRSb29tLmdldFBsYXllcnMoKSkubGVuZ3RofS8ke2N1cnJlbnRSb29tLmdldE1heFNpemUoKX1gO1xyXG4gICAgcm9vbVVzZXJzTGlzdC5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICBPYmplY3QudmFsdWVzKGN1cnJlbnRSb29tLmdldFBsYXllcnMoKSkuZm9yRWFjaCgocGxheWVyOiB7IHVzZXJuYW1lOiBzdHJpbmcgfCBudW1iZXI7IGlzUmVhZHk6IGJvb2xlYW47IGNvbG9yOiBzdHJpbmc7IH0pID0+IHtcclxuICAgICAgICBjb25zdCBwbGF5ZXJJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuXHJcbiAgICAgICAgcGxheWVySXRlbS50ZXh0Q29udGVudCA9IHBsYXllci51c2VybmFtZSArICcnO1xyXG5cclxuICAgICAgICBpZiAocGxheWVyLnVzZXJuYW1lID09IGN1cnJlbnRSb29tLmdldEhvc3QoKS51c2VybmFtZSkge1xyXG4gICAgICAgICAgICBwbGF5ZXJJdGVtLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIGA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLWNyb3duXCIgc3R5bGU9XCJjb2xvcjogJHtwbGF5ZXIuY29sb3J9O1wiPjwvaT5gKVxyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwbGF5ZXJJdGVtLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIGA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLWNpcmNsZVwiIHN0eWxlPVwiY29sb3I6ICR7cGxheWVyLmNvbG9yfTsgbWFyZ2luLWxlZnQ6IDRweFwiPjwvaT5gKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHBsYXllci5pc1JlYWR5KSB7XHJcbiAgICAgICAgICAgIHBsYXllckl0ZW0uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCAnIDxpIGNsYXNzPVwiZmEtc29saWQgZmEtY2lyY2xlXCIgc3R5bGU9XCJjb2xvcjogIzM3Y2I0ODtcIj48L2k+Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGxheWVySXRlbS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsICcgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1jaXJjbGVcIiBzdHlsZT1cImNvbG9yOiAjY2IzNzM3O1wiPjwvaT4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJvb21Vc2Vyc0xpc3QuYXBwZW5kQ2hpbGQocGxheWVySXRlbSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL3Nob3cgc3RhcnRHYW1lQnV0dG9uIFxyXG4gICAgaWYgKGN1cnJlbnRQbGF5ZXIudXNlcm5hbWUgPT0gY3VycmVudFJvb20uZ2V0SG9zdCgpLnVzZXJuYW1lKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0QnV0dG9uJykuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ub25lJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlU3RhcnRCdXR0b25Qcm9ncmVzcyhPYmplY3QudmFsdWVzKGN1cnJlbnRSb29tLmdldFBsYXllcnMoKSkuZmlsdGVyKHAgPT4gcC5pc1JlYWR5KS5sZW5ndGgsIGN1cnJlbnRSb29tLmdldE1heFNpemUoKSk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiB1cGRhdGVTdGFydEJ1dHRvblByb2dyZXNzKHJlYWR5UGxheWVyQ291bnQ6IG51bWJlciwgbWF4UGxheWVyQ291bnQ6IG51bWJlcikge1xyXG4gICAgaWYgKG1heFBsYXllckNvdW50ID09IDApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBzdGFydFByb2dyZXNzQmFyLnN0eWxlLndpZHRoID0gTWF0aC5mbG9vcihyZWFkeVBsYXllckNvdW50IC8gbWF4UGxheWVyQ291bnQgKiAxMDApICsgJyUnO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBzaG93RXJyb3JBbmltYXRpb24oKSB7XHJcbiAgICByb29tQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3JlZC1idXR0b24nKTtcclxuICAgIHJvb21CdXR0b24uY2xhc3NMaXN0LmFkZCgnd2lnZ2xlJyk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICByb29tQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3JlZC1idXR0b24nKTtcclxuICAgICAgICByb29tQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3dpZ2dsZScpO1xyXG4gICAgfSwgNjAwKVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUNvbG9yUGlja2VyKCkge1xyXG4gICAgY29sb3JQaWNrZXJEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3JQaWNrZXIudmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVQbGF5ZXJDb2xvcigpIHtcclxuICAgIGN1cnJlbnRQbGF5ZXIuY29sb3IgPSBjb2xvclBpY2tlci52YWx1ZTtcclxuICAgIGxldCBjb2xvclBpY2tlckxhYmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbG9yLWxhYmVsJyk7XHJcbiAgICBjb2xvclBpY2tlckxhYmVsLnN0eWxlLmNvbG9yID0gcGlja1RleHRDb2xvckJhc2VkT25CZ0NvbG9yQWR2YW5jZWQoY29sb3JQaWNrZXIudmFsdWUsICcjRkZGRkZGJywgJyMwMDAwMDAnKTtcclxuICAgIHNldFBsYXllckRhdGEoY3VycmVudFBsYXllciwgY3VycmVudFJvb20uZ2V0Q29kZSgpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGlja1RleHRDb2xvckJhc2VkT25CZ0NvbG9yQWR2YW5jZWQoYmdDb2xvcjogc3RyaW5nLCBsaWdodENvbG9yOiBzdHJpbmcsIGRhcmtDb2xvcjogc3RyaW5nKSB7XHJcbiAgICB2YXIgY29sb3IgPSAoYmdDb2xvci5jaGFyQXQoMCkgPT09ICcjJykgPyBiZ0NvbG9yLnN1YnN0cmluZygxLCA3KSA6IGJnQ29sb3I7XHJcbiAgICB2YXIgciA9IHBhcnNlSW50KGNvbG9yLnN1YnN0cmluZygwLCAyKSwgMTYpOyAvLyBoZXhUb1JcclxuICAgIHZhciBnID0gcGFyc2VJbnQoY29sb3Iuc3Vic3RyaW5nKDIsIDQpLCAxNik7IC8vIGhleFRvR1xyXG4gICAgdmFyIGIgPSBwYXJzZUludChjb2xvci5zdWJzdHJpbmcoNCwgNiksIDE2KTsgLy8gaGV4VG9CXHJcbiAgICB2YXIgdWljb2xvcnMgPSBbciAvIDI1NSwgZyAvIDI1NSwgYiAvIDI1NV07XHJcbiAgICB2YXIgYyA9IHVpY29sb3JzLm1hcCgoY29sKSA9PiB7XHJcbiAgICAgICAgaWYgKGNvbCA8PSAwLjAzOTI4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb2wgLyAxMi45MjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KChjb2wgKyAwLjA1NSkgLyAxLjA1NSwgMi40KTtcclxuICAgIH0pO1xyXG4gICAgdmFyIEwgPSAoMC4yMTI2ICogY1swXSkgKyAoMC43MTUyICogY1sxXSkgKyAoMC4wNzIyICogY1syXSk7XHJcbiAgICByZXR1cm4gKEwgPiAwLjQpID8gZGFya0NvbG9yIDogbGlnaHRDb2xvcjtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RhcnRHYW1lKCkge1xyXG5cclxuICAgIC8vdmVyaWZ5IHRoYXQgdGhlIHBsYXllciBzZW5kaW5nIHRoZSBzdGFydCByZXF1ZXN0IGlzIHRoZSBob3N0XHJcbiAgICBpZiAoY3VycmVudFBsYXllci51c2VybmFtZSAhPSBjdXJyZW50Um9vbS5nZXRIb3N0KCkudXNlcm5hbWUpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgc2VuZFN0YXJ0Q29tbWFuZChjdXJyZW50Um9vbS5nZXRDb2RlKCkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc3dpdGNoR2FtZVZpZXcoZGF0YTogR2FtZVN0YXRlRGF0YSkge1xyXG4gICAgc3dpdGNoIChkYXRhLnN0YXRlKSB7XHJcbiAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgIGN1cnJlbnRSb29tLnNldEdhbWVTdGF0ZShHYW1lU3RhdGUuUlVOTklORyk7XHJcbiAgICAgICAgbG9naW5EaXYuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ub25lJyk7XHJcbiAgICAgICAgcm9vbURpdi5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LW5vbmUnKTtcclxuICAgICAgICByb29tRGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXktZmxleCcpO1xyXG4gICAgICAgIGdhbWVEaXYuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ub25lJyk7XHJcbiAgICAgICAgZ2FtZURpdi5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LWZsZXgnKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgIGN1cnJlbnRSb29tLnNldEdhbWVTdGF0ZShHYW1lU3RhdGUuSU5fTE9CQlkpO1xyXG4gICAgICAgIGxvZ2luRGl2LmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgICAgIHJvb21EaXYuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1mbGV4Jyk7XHJcbiAgICAgICAgZ2FtZURpdi5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LW5vbmUnKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICB1cGRhdGVCdXR0b24oKTtcclxufTtcclxuXHJcbih3aW5kb3cgYXMgYW55KS51cGRhdGVCdXR0b24gPSB1cGRhdGVCdXR0b247XHJcbih3aW5kb3cgYXMgYW55KS5oYW5kbGVSb29tQWN0aW9uID0gaGFuZGxlUm9vbUFjdGlvbjtcclxuKHdpbmRvdyBhcyBhbnkpLmhhbmRsZVJlYWR5U3RhdGUgPSBoYW5kbGVSZWFkeVN0YXRlO1xyXG4od2luZG93IGFzIGFueSkudXBkYXRlQ29sb3JQaWNrZXIgPSB1cGRhdGVDb2xvclBpY2tlcjtcclxuKHdpbmRvdyBhcyBhbnkpLnVwZGF0ZVBsYXllckNvbG9yID0gdXBkYXRlUGxheWVyQ29sb3I7XHJcbih3aW5kb3cgYXMgYW55KS5zdGFydEdhbWUgPSBzdGFydEdhbWU7IiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcInZlY3RvcjJkXCI7XHJcbmltcG9ydCBQYXJ0aWNsZSwgeyBzaGFwZSB9IGZyb20gXCIuL1BhcnRpY2xlXCI7XHJcbmltcG9ydCB7IGdldFJhbmRvbURpcmVjdGlvbiB9IGZyb20gXCIuL1BhcnRpY2xlU3lzdGVtVXRpbHNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVtaXR0ZXJ7XHJcbiAgICBwcml2YXRlIGFsaXZlUGFydGljbGVzOiBQYXJ0aWNsZVtdID0gW107XHJcbiAgICBwdWJsaWMgcG9zaXRpb246IFZlY3RvcjtcclxuICAgIHB1YmxpYyBlbWl0VGltZTogbnVtYmVyO1xyXG4gICAgcHVibGljIHNoYXBlOiBzaGFwZTtcclxuICAgIHB1YmxpYyBzaXplOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgc3BlZWQ6IG51bWJlcjtcclxuICAgIHB1YmxpYyBjb2xvcjoge3I6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIsIGE6IG51bWJlcn07XHJcbiAgICBwdWJsaWMgZmFkZUNvbG9yOiBib29sZWFuO1xyXG4gICAgcHVibGljIGZhZGVTaXplOiBib29sZWFuO1xyXG4gICAgcHVibGljIHBhcnRpY2xlTWF4QWdlOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgY2FudmFzQ3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICBwdWJsaWMgZW1pdFRpbWVNaWxsaXM6IG51bWJlcjtcclxuICAgIHByaXZhdGUgdGlja3M6IG51bWJlciA9IDA7XHJcbiAgICBcclxuXHJcbiAgICBcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwb3NpdGlvbjogVmVjdG9yLCBlbWl0SW50ZXJ2YWw6IG51bWJlciwgc2l6ZTogbnVtYmVyLCBzcGVlZDogbnVtYmVyLCBzaGFwZTogc2hhcGUgPSAnY2lyY2xlJywgY29sb3I6IHtyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBhOiBudW1iZXJ9LCBjYW52YXNDdHg6Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCAgZmFkZUNvbG9yOiBib29sZWFuID0gdHJ1ZSwgZmFkZVNpemU6IGJvb2xlYW4gPSB0cnVlLCBhZ2U6IG51bWJlciwgZW1pdFRpbWVNaWxsaXM6IG51bWJlciA9IDApe1xyXG4gICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgdGhpcy5lbWl0VGltZSA9IGVtaXRJbnRlcnZhbDtcclxuICAgIHRoaXMuc2l6ZSA9IHNpemU7XHJcbiAgICB0aGlzLnNwZWVkID0gc3BlZWQ7XHJcbiAgICB0aGlzLnNoYXBlID0gc2hhcGU7XHJcbiAgICB0aGlzLmNvbG9yID0gY29sb3I7XHJcbiAgICB0aGlzLmNhbnZhc0N0eCA9IGNhbnZhc0N0eDtcclxuICAgIHRoaXMuZmFkZUNvbG9yID0gZmFkZUNvbG9yO1xyXG4gICAgdGhpcy5mYWRlU2l6ZSA9IGZhZGVTaXplOyBcclxuICAgIHRoaXMucGFydGljbGVNYXhBZ2UgPSBhZ2U7XHJcbiAgICB0aGlzLmVtaXRUaW1lTWlsbGlzID0gZW1pdFRpbWVNaWxsaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRpY2soZHQ6IG51bWJlcil7XHJcbiAgICAgICAgaWYgKCh0aGlzLmVtaXRUaW1lTWlsbGlzICsgdGhpcy5wYXJ0aWNsZU1heEFnZSkgPCAwKSByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMuZW1pdFRpbWVNaWxsaXMgLT0gZHQ7XHJcblxyXG5cclxuICAgICAgICBpZiAodGhpcy50aWNrcyAlIHRoaXMuZW1pdFRpbWUgPT0gMCAmJiB0aGlzLmVtaXRUaW1lTWlsbGlzID4gMCl7XHJcbiAgICAgICAgICAgIHRoaXMuYWxpdmVQYXJ0aWNsZXMucHVzaChuZXcgUGFydGljbGUodGhpcy5wb3NpdGlvbi5jbG9uZSgpIGFzIFZlY3RvciwgZ2V0UmFuZG9tRGlyZWN0aW9uKCksIHRoaXMuc2l6ZSwgdGhpcy5zcGVlZCwgdGhpcy5zaGFwZSx7Li4udGhpcy5jb2xvcn0sdGhpcy5jYW52YXNDdHgsIHRoaXMucGFydGljbGVNYXhBZ2UsIHRoaXMuZmFkZUNvbG9yLCB0aGlzLmZhZGVTaXplKSk7XHJcbiAgICAgICAgICAgIHRoaXMuYWxpdmVQYXJ0aWNsZXMucHVzaChuZXcgUGFydGljbGUodGhpcy5wb3NpdGlvbi5jbG9uZSgpIGFzIFZlY3RvciwgZ2V0UmFuZG9tRGlyZWN0aW9uKCksIHRoaXMuc2l6ZSwgdGhpcy5zcGVlZCwgdGhpcy5zaGFwZSx7Li4udGhpcy5jb2xvcn0sdGhpcy5jYW52YXNDdHgsIHRoaXMucGFydGljbGVNYXhBZ2UsIHRoaXMuZmFkZUNvbG9yLCB0aGlzLmZhZGVTaXplKSk7XHJcbiAgICAgICAgICAgIHRoaXMuYWxpdmVQYXJ0aWNsZXMucHVzaChuZXcgUGFydGljbGUodGhpcy5wb3NpdGlvbi5jbG9uZSgpIGFzIFZlY3RvciwgZ2V0UmFuZG9tRGlyZWN0aW9uKCksIHRoaXMuc2l6ZSwgdGhpcy5zcGVlZCwgdGhpcy5zaGFwZSx7Li4udGhpcy5jb2xvcn0sdGhpcy5jYW52YXNDdHgsIHRoaXMucGFydGljbGVNYXhBZ2UsIHRoaXMuZmFkZUNvbG9yLCB0aGlzLmZhZGVTaXplKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYWxpdmVQYXJ0aWNsZXMuZm9yRWFjaChwYXJ0aWNsZSA9PiB7XHJcbiAgICAgICAgICAgIHBhcnRpY2xlLnRpY2soZHQpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWxpdmVQYXJ0aWNsZXMgPSB0aGlzLmFsaXZlUGFydGljbGVzLmZpbHRlcihwYXJ0aWNsZSA9PiBwYXJ0aWNsZS5hZ2UgPiAwKTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMudGlja3MrKztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdygpe1xyXG4gICAgICAgIHRoaXMuYWxpdmVQYXJ0aWNsZXMuZm9yRWFjaChwYXJ0aWNsZSA9PiB7XHJcbiAgICAgICAgICAgIHBhcnRpY2xlLmRyYXcoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCJ2ZWN0b3IyZFwiO1xyXG5leHBvcnQgdHlwZSBzaGFwZSA9ICdjaXJjbGUnIHwgJ3NxdWFyZSc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhcnRpY2xlIHtcclxuICAgIHBvc2l0aW9uOiBWZWN0b3I7XHJcbiAgICB2ZWxvY2l0eTogVmVjdG9yO1xyXG4gICAgc2hhcGU6IHNoYXBlO1xyXG4gICAgc2l6ZTogbnVtYmVyO1xyXG4gICAgc3BlZWQ6IG51bWJlcjtcclxuICAgIGNvbG9yOiB7cjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciwgYTogbnVtYmVyfTtcclxuICAgIGZhZGVDb2xvcjogYm9vbGVhbjtcclxuICAgIGZhZGVTaXplOiBib29sZWFuO1xyXG4gICAgYWdlOiBudW1iZXI7XHJcbiAgICBjYW52YXNDdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIHByaXZhdGUgc2l6ZUZhZGVBbW91bnQ6IG51bWJlcjtcclxuICAgIHByaXZhdGUgY29sb3JGYWRlQW1vdW50OiBudW1iZXI7XHJcblxyXG4gXHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHBvc2l0aW9uOiBWZWN0b3IsIHZlbG9jaXR5OiBWZWN0b3IsIHNpemU6IG51bWJlciwgc3BlZWQ6IG51bWJlciwgIHNoYXBlOiBzaGFwZSA9ICdjaXJjbGUnLCBjb2xvcjoge3I6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIsIGE6IG51bWJlcn0sIGNhbnZhc0N0eDpDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGFnZTogbnVtYmVyLCAgZmFkZUNvbG9yPzogYm9vbGVhbiwgZmFkZVNpemU/OiBib29sZWFuKXtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICAgICAgdGhpcy52ZWxvY2l0eSA9IHZlbG9jaXR5O1xyXG4gICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XHJcbiAgICAgICAgdGhpcy5zcGVlZCA9IHNwZWVkO1xyXG4gICAgICAgIHRoaXMuc2hhcGUgPSBzaGFwZTtcclxuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XHJcbiAgICAgICAgdGhpcy5jYW52YXNDdHggPSBjYW52YXNDdHg7XHJcbiAgICAgICAgdGhpcy5mYWRlQ29sb3IgPSBmYWRlQ29sb3I7XHJcbiAgICAgICAgdGhpcy5mYWRlU2l6ZSA9IGZhZGVTaXplOyBcclxuICAgICAgICB0aGlzLmFnZSA9IGFnZTtcclxuICAgICAgICB0aGlzLmNvbG9yRmFkZUFtb3VudCA9IHRoaXMuY29sb3IuYS90aGlzLmFnZTtcclxuICAgICAgICB0aGlzLnNpemVGYWRlQW1vdW50ID0gdGhpcy5zaXplL3RoaXMuYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB0aWNrKGR0OiBudW1iZXIpe1xyXG5cclxuICAgICAgICB0aGlzLnBvc2l0aW9uLmFkZCh0aGlzLnZlbG9jaXR5LmNsb25lKCkubXVsdGlwbHlCeVNjYWxhcihkdCAqIHRoaXMuc3BlZWQpKTtcclxuICAgICAgICBpZih0aGlzLmZhZGVDb2xvcil7XHJcbiAgICAgICAgICAgIHRoaXMuY29sb3IuYSAtPSB0aGlzLmNvbG9yRmFkZUFtb3VudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5mYWRlU2l6ZSl7XHJcbiAgICAgICAgICAgIHRoaXMuc2l6ZSAtPSAgdGhpcy5zaXplRmFkZUFtb3VudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hZ2UtLTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdygpe1xyXG4gICAgICAgIHRoaXMuY2FudmFzQ3R4Lm1vdmVUbyh0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSk7XHJcbiAgICAgICAgdGhpcy5jYW52YXNDdHguZmlsbFN0eWxlID0gYHJnYmEoJHt0aGlzLmNvbG9yLnJ9LCR7dGhpcy5jb2xvci5nfSwgJHt0aGlzLmNvbG9yLmJ9LCAke3RoaXMuY29sb3IuYX0pYDtcclxuICAgICAgICB0aGlzLmNhbnZhc0N0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc2hhcGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnY2lyY2xlJzpcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmFyYyh0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSwgdGhpcy5zaXplLCAwLCAyKk1hdGguUEkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguZmlsbCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3NxdWFyZSc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5maWxsUmVjdCh0aGlzLnBvc2l0aW9uLngtdGhpcy5zaXplLCB0aGlzLnBvc2l0aW9uLnktdGhpcy5zaXplLCB0aGlzLnNpemUqMiwgdGhpcy5zaXplKjIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2FudmFzQ3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCJ2ZWN0b3IyZFwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJhbmRvbURpcmVjdGlvbigpOiBWZWN0b3J7XHJcblxyXG4gICAgcmV0dXJuKG5ldyBWZWN0b3IoTWF0aC5yYW5kb20oKSoyLTEsIE1hdGgucmFuZG9tKCkqMi0xKSlcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhleFRvUmdiKGhleDogc3RyaW5nKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gL14jPyhbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KSQvaS5leGVjKGhleCk7XHJcbiAgICByZXR1cm4gcmVzdWx0ID8ge1xyXG4gICAgICByOiBwYXJzZUludChyZXN1bHRbMV0sIDE2KSxcclxuICAgICAgZzogcGFyc2VJbnQocmVzdWx0WzJdLCAxNiksXHJcbiAgICAgIGI6IHBhcnNlSW50KHJlc3VsdFszXSwgMTYpXHJcbiAgICB9IDogbnVsbDtcclxuICB9IiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcInZlY3RvcjJkXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFNlZ21lbnQge1xuICAgIGFic3RyYWN0IGlzQ29sbGlkYWJsZTogYm9vbGVhbjtcbiAgICBhYnN0cmFjdCBkcmF3KGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgY29sb3I6IHN0cmluZyk6IHZvaWQ7XG4gICAgYWJzdHJhY3QgZ2V0IGVuZEFuZ2xlKCk6IG51bWJlcjtcbiAgICBhYnN0cmFjdCBnZXQgZW5kUG9pbnQoKTogVmVjdG9yO1xuICAgIGFic3RyYWN0IGdldENvbnRpbnVpbmdTZWdtZW50KHRyYW5zZm9ybTogVmVjdG9yKTogU2VnbWVudDtcbn0iLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwidmVjdG9yMmRcIjtcbmltcG9ydCBBcmNTZWdtZW50IGZyb20gXCIuL0FyY1NlZ21lbnRcIjtcbmltcG9ydCBMaW5lU2VnbWVudCBmcm9tIFwiLi9MaW5lU2VnbWVudFwiO1xuaW1wb3J0IFNlZ21lbnQgZnJvbSBcIi4vU2VnbWVudFwiO1xuaW1wb3J0IEVtaXR0ZXIgZnJvbSBcIi4vUGFydGljbGVTeXN0ZW0vRW1pdHRlclwiO1xuaW1wb3J0IHsgaGV4VG9SZ2IgfSBmcm9tIFwiLi9QYXJ0aWNsZVN5c3RlbS9QYXJ0aWNsZVN5c3RlbVV0aWxzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNuYWtlIHtcbiAgICBwdWJsaWMgc2VnbWVudHM6IFNlZ21lbnRbXSA9IFtdO1xuICAgIHByaXZhdGUgY29sb3I6IHN0cmluZztcbiAgICBwdWJsaWMgaXNBbGl2ZTogYm9vbGVhbiA9IHRydWU7XG4gICAgcHVibGljIHR1cm5SYWRpdXM6IG51bWJlciA9IDYwO1xuICAgIHByaXZhdGUgZW1pdHRlcjogRW1pdHRlciB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgY2FudmFzQ3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gICAgcHJpdmF0ZSBkaXN0YW5jZVRvQ2hhbmdlT2ZTdGF0ZTogbnVtYmVyID0gMTA7XG5cblxuICAgIGNvbnN0cnVjdG9yKHN0YXJ0UG9zOiBMaW5lU2VnbWVudCwgY29sb3I6IHN0cmluZywgY2FudmFzQ3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcbiAgICAgICAgdGhpcy5hZGRTZWdtZW50KHN0YXJ0UG9zKTtcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgICAgICB0aGlzLmNhbnZhc0N0eCA9IGNhbnZhc0N0eFxuICAgIH1cbiAgICBhZGRTZWdtZW50KHNlZ21lbnQ6IFNlZ21lbnQpIHtcbiAgICAgICAgdGhpcy5zZWdtZW50cy5wdXNoKHNlZ21lbnQpO1xuICAgIH1cblxuICAgIGdldCBoZWFkKCk6IFNlZ21lbnQge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50cy5zbGljZSgtMSkucG9wKCk7XG4gICAgfVxuXG4gICAgZHJhdygpIHtcbiAgICAgICAgdGhpcy5jYW52YXNDdHgubGluZVdpZHRoID0gMTI7XG4gICAgICAgIC8vVE9ETyBmaXggdGhpcyB0byBiZSBhIHNpbmdsZSBwYXRoXG4gICAgICAgIC8vIGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cbiAgICAgICAgdGhpcy5zZWdtZW50cy5mb3JFYWNoKChzZWdtZW50LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgc2VnbWVudC5kcmF3KHRoaXMuY2FudmFzQ3R4LCB0aGlzLmNvbG9yKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmhlYWQgIT0gc2VnbWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZWdtZW50IGluc3RhbmNlb2YgQXJjU2VnbWVudCkge1xuICAgICAgICAgICAgICAgIC8vIHNlZ21lbnQuZHJhd0RlYnVnKHRoaXMuY2FudmFzQ3R4LCAnIzY2NjY2NicpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmFyYyhzZWdtZW50LmNlbnRlci54LCBzZWdtZW50LmNlbnRlci55LCBzZWdtZW50LnJhZGl1cywgc2VnbWVudC5lbmRBbmdsZSwgc2VnbWVudC5lbmRBbmdsZSwgc2VnbWVudC5pc0NvdW50ZXJDbG9ja3dpc2UoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguc3Ryb2tlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzZWdtZW50IGluc3RhbmNlb2YgTGluZVNlZ21lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5tb3ZlVG8oc2VnbWVudC5lbmRQb2ludC54LCBzZWdtZW50LmVuZFBvaW50LnkpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmxpbmVUbyhzZWdtZW50LmVuZFBvaW50LngsIHNlZ21lbnQuZW5kUG9pbnQueSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguc3Ryb2tlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBjb250ZXh0LnN0cm9rZSgpO1xuICAgIH1cblxuICAgIC8vIG1vdmUoZGlzdGFuY2U6IG51bWJlcikge1xuICAgIC8vICAgICAvL2RvIG5vdCBtb3ZlIGlzIGRlYWQsIHNpbXBsZVxuICAgIC8vICAgICBpZiAoIXRoaXMuaXNBbGl2ZSkgcmV0dXJuO1xuXG4gICAgLy8gICAgIHRoaXMuY2hlY2tXYWxscygpO1xuXG4gICAgLy8gICAgIC8vIGRvIG5vdCBtb3ZlIGlmIHNuYWtlIGhhcyBubyBzZWdtZW50c1xuICAgIC8vICAgICBjb25zdCBsYXN0U2VnbWVudCA9IHRoaXMuaGVhZDtcbiAgICAvLyAgICAgaWYgKCFsYXN0U2VnbWVudCkgcmV0dXJuO1xuXG5cbiAgICAgICAgXG5cblxuICAgIC8vICAgICAvL21vdmUgdGhlIHNuYWtlIHRoZSBjb3JyZWN0IGFtb3VudCwgZGVwZW5kaW5nIG9uIHRoZSBoZWFkIHNlZ21lbnRcbiAgICAvLyAgICAgaWYgKGxhc3RTZWdtZW50IGluc3RhbmNlb2YgTGluZVNlZ21lbnQpIHtcbiAgICAvLyAgICAgICAgIGNvbnN0IGR4ID0gZGlzdGFuY2UgKiBNYXRoLmNvcyhsYXN0U2VnbWVudC5lbmRBbmdsZSk7XG4gICAgLy8gICAgICAgICBjb25zdCBkeSA9IGRpc3RhbmNlICogTWF0aC5zaW4obGFzdFNlZ21lbnQuZW5kQW5nbGUpO1xuXG4gICAgLy8gICAgICAgICBjb25zdCBuZXdFbmQgPSBuZXcgVmVjdG9yKGxhc3RTZWdtZW50LmVuZFBvaW50LnggKyBkeCwgbGFzdFNlZ21lbnQuZW5kUG9pbnQueSArIGR5KTtcbiAgICAvLyAgICAgICAgIGxhc3RTZWdtZW50LmVuZFBvaW50ID0gbmV3RW5kO1xuXG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgZWxzZSBpZiAobGFzdFNlZ21lbnQgaW5zdGFuY2VvZiBBcmNTZWdtZW50KSB7XG4gICAgLy8gICAgICAgICBjb25zdCBhbmdsZUV4dGVuc2lvbiA9IGRpc3RhbmNlIC8gbGFzdFNlZ21lbnQucmFkaXVzO1xuXG4gICAgLy8gICAgICAgICBsYXN0U2VnbWVudC5lbmRBbmdsZSA9IGxhc3RTZWdtZW50LmlzQ291bnRlckNsb2Nrd2lzZSgpID8gbGFzdFNlZ21lbnQuZW5kQW5nbGUgLSBhbmdsZUV4dGVuc2lvbiA6IGxhc3RTZWdtZW50LmVuZEFuZ2xlICsgYW5nbGVFeHRlbnNpb247XG5cbiAgICAvLyAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gLy8gYWRkIG5ldyBzZWdtZW50IGxhc3RzZWdtZW50LmNyZWF0ZWZsaXBwZWRzdGF0ZVxuICAgIC8vICAgICBpZiAobGFzdFNlZ21lbnQuaXNDb2xsaWRhYmxlICYmIHRoaXMuZGlzdGFuY2VUb0NoYW5nZU9mU3RhdGUgPCAwKSB7XG5cbiAgICAvLyAgICAgICAgIHRoaXMuZGlzdGFuY2VUb0NoYW5nZU9mU3RhdGUgPSBNYXRoLnJhbmRvbSgpICogODAgKyAzMCAvLyA0MC05MFxuXG4gICAgLy8gICAgICAgICBpZiAobGFzdFNlZ21lbnQgaW5zdGFuY2VvZiBMaW5lU2VnbWVudCkge1xuICAgIC8vICAgICAgICAgICAgIHRoaXMuYWRkU2VnbWVudChuZXcgTGluZVNlZ21lbnQobGFzdFNlZ21lbnQuZW5kUG9pbnQsIG5ldyBWZWN0b3IobGFzdFNlZ21lbnQuZW5kUG9pbnQueCwgbGFzdFNlZ21lbnQuZW5kUG9pbnQueSksIGZhbHNlLCBsYXN0U2VnbWVudC5lbmRBbmdsZSkpO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICAgICAgZWxzZSBpZiAobGFzdFNlZ21lbnQgaW5zdGFuY2VvZiBBcmNTZWdtZW50KSB7XG4gICAgLy8gICAgICAgICAgICAgdGhpcy5hZGRTZWdtZW50KG5ldyBBcmNTZWdtZW50KGxhc3RTZWdtZW50LmNlbnRlciwgbGFzdFNlZ21lbnQucmFkaXVzLCBsYXN0U2VnbWVudC5lbmRBbmdsZSwgbGFzdFNlZ21lbnQuZW5kQW5nbGUsIGxhc3RTZWdtZW50LmlzQ291bnRlckNsb2Nrd2lzZSgpLCBmYWxzZSkpXG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgIH1cblxuICAgIC8vICAgICBpZiAoIWxhc3RTZWdtZW50LmlzQ29sbGlkYWJsZSAmJiB0aGlzLmRpc3RhbmNlVG9DaGFuZ2VPZlN0YXRlIDwgMCkge1xuXG4gICAgLy8gICAgICAgICB0aGlzLmRpc3RhbmNlVG9DaGFuZ2VPZlN0YXRlID0gTWF0aC5yYW5kb20oKSAqIDUwMCArIDgwIC8vIDgwLTMyMFxuXG4gICAgLy8gICAgICAgICBpZiAobGFzdFNlZ21lbnQgaW5zdGFuY2VvZiBMaW5lU2VnbWVudCkge1xuICAgIC8vICAgICAgICAgICAgIHRoaXMuYWRkU2VnbWVudChuZXcgTGluZVNlZ21lbnQobGFzdFNlZ21lbnQuZW5kUG9pbnQsIG5ldyBWZWN0b3IobGFzdFNlZ21lbnQuZW5kUG9pbnQueCwgbGFzdFNlZ21lbnQuZW5kUG9pbnQueSksIHRydWUsIGxhc3RTZWdtZW50LmVuZEFuZ2xlKSlcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgICAgIGVsc2UgaWYgKGxhc3RTZWdtZW50IGluc3RhbmNlb2YgQXJjU2VnbWVudCkge1xuICAgIC8vICAgICAgICAgICAgIHRoaXMuYWRkU2VnbWVudChuZXcgQXJjU2VnbWVudChsYXN0U2VnbWVudC5jZW50ZXIsIGxhc3RTZWdtZW50LnJhZGl1cywgbGFzdFNlZ21lbnQuZW5kQW5nbGUsIGxhc3RTZWdtZW50LmVuZEFuZ2xlLCBsYXN0U2VnbWVudC5pc0NvdW50ZXJDbG9ja3dpc2UoKSwgdHJ1ZSkpXG4gICAgLy8gICAgICAgICB9XG5cbiAgICAvLyAgICAgfVxuXG4gICAgLy8gICAgIC8vdXBkYXRlIHRoZSBkaXN0YW5jZSB0cmF2ZWxsZWRcbiAgICAvLyAgICAgdGhpcy5kaXN0YW5jZVRvQ2hhbmdlT2ZTdGF0ZSAtPSBkaXN0YW5jZTtcbiAgICAvLyB9XG5cbmtpbGwoKSB7XG4gICAgY29uc29sZS5sb2coXCJTTkFLRSBERUFEXCIpXG4gICAgdGhpcy5pc0FsaXZlID0gZmFsc2U7XG4gICAgdGhpcy5lbWl0dGVyID0gbmV3IEVtaXR0ZXIodGhpcy5oZWFkLmVuZFBvaW50LCAxLCA3LCA0LCAnY2lyY2xlJywgeyAuLi5oZXhUb1JnYih0aGlzLmNvbG9yKSwgYTogMSB9LCB0aGlzLmNhbnZhc0N0eCwgdHJ1ZSwgdHJ1ZSwgNzAsIDQpO1xufVxuXG51cGRhdGVFbWl0dGVyKGR0OiBudW1iZXIpIHtcbiAgICBpZiAodGhpcy5lbWl0dGVyKSB7XG4gICAgICAgIHRoaXMuZW1pdHRlci50aWNrKGR0KTtcbiAgICAgICAgdGhpcy5lbWl0dGVyLmRyYXcoKTtcbiAgICB9XG59XG5cbmNoZWNrV2FsbHMoKSB7XG4gICAgY29uc3QgbGFzdFNlZ21lbnQgPSB0aGlzLmhlYWQ7XG4gICAgaWYgKGxhc3RTZWdtZW50LmVuZFBvaW50LnggPCAwKSB7XG4gICAgICAgIHRoaXMuYWRkU2VnbWVudChsYXN0U2VnbWVudC5nZXRDb250aW51aW5nU2VnbWVudChuZXcgVmVjdG9yKHRoaXMuY2FudmFzQ3R4LmNhbnZhcy53aWR0aCwgMCkpKTtcbiAgICB9IFxuICAgIGVsc2UgaWYgKGxhc3RTZWdtZW50LmVuZFBvaW50LnggPiB0aGlzLmNhbnZhc0N0eC5jYW52YXMud2lkdGgpIHtcbiAgICAgICAgdGhpcy5hZGRTZWdtZW50KGxhc3RTZWdtZW50LmdldENvbnRpbnVpbmdTZWdtZW50KG5ldyBWZWN0b3IoLXRoaXMuY2FudmFzQ3R4LmNhbnZhcy53aWR0aCwgMCkpKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGxhc3RTZWdtZW50LmVuZFBvaW50LnkgPCAwKSB7XG4gICAgICAgIHRoaXMuYWRkU2VnbWVudChsYXN0U2VnbWVudC5nZXRDb250aW51aW5nU2VnbWVudChuZXcgVmVjdG9yKDAsIHRoaXMuY2FudmFzQ3R4LmNhbnZhcy5oZWlnaHQpKSk7XG4gICAgfSBcbiAgICBlbHNlIGlmIChsYXN0U2VnbWVudC5lbmRQb2ludC55ID4gdGhpcy5jYW52YXNDdHguY2FudmFzLmhlaWdodCkge1xuICAgICAgICB0aGlzLmFkZFNlZ21lbnQobGFzdFNlZ21lbnQuZ2V0Q29udGludWluZ1NlZ21lbnQobmV3IFZlY3RvcigwLCAtdGhpcy5jYW52YXNDdHguY2FudmFzLmhlaWdodCkpKTtcbiAgICB9XG4gICAgXG59XG5cbiAgICBcbn0iLCJpbXBvcnQgU25ha2UgZnJvbSBcIi4uL1NuYWtlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUGxheWVyIHtcclxuICAgIHB1YmxpYyB1c2VybmFtZTogc3RyaW5nO1xyXG4gICAgcHVibGljIGlzUmVhZHk6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgY29sb3I6IHN0cmluZztcclxuICAgIHB1YmxpYyBzbmFrZTogU25ha2U7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKHVzZXJuYW1lOiBzdHJpbmcsIGlzUmVhZHk6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTtcclxuICAgICAgICB0aGlzLmlzUmVhZHkgPSBpc1JlYWR5O1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBcIiMwMDAwMDBcIi5yZXBsYWNlKC8wL2csZnVuY3Rpb24oKXtyZXR1cm4gKH5+KE1hdGgucmFuZG9tKCkqMTYpKS50b1N0cmluZygxNik7fSk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICB1c2VybmFtZTogdGhpcy51c2VybmFtZSxcclxuICAgICAgICAgIGlzUmVhZHk6IHRoaXMuaXNSZWFkeSxcclxuICAgICAgICAgIGNvbG9yOiB0aGlzLmNvbG9yXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxufSIsImltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuL1BsYXllclwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVudW0gR2FtZVN0YXRlIHtcclxuICAgIFJVTk5JTkcsXHJcbiAgICBJTl9MT0JCWSxcclxuICAgIEZJTklTSEVEXHJcbn1cclxuZXhwb3J0IGNsYXNzIFJvb20ge1xyXG4gICAgcHJpdmF0ZSBwbGF5ZXJzOiB7IFtrZXk6IHN0cmluZ106IFBsYXllcjsgfSA9IHt9O1xyXG4gICAgcHJpdmF0ZSBtYXhTaXplOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGdhbWVTdGF0ZTogR2FtZVN0YXRlO1xyXG4gICAgcHJpdmF0ZSBob3N0OiBQbGF5ZXI7XHJcbiAgICBwcml2YXRlIGNvZGU6IHN0cmluZztcclxuXHJcblxyXG4gICAgY29uc3RydWN0b3IoY29kZTogc3RyaW5nLCBob3N0OiBQbGF5ZXIsIHBsYXllcnM/OiB7IFtrZXk6IHN0cmluZ106IFBsYXllcjsgfSwgbWF4U2l6ZTogbnVtYmVyID0gNSkge1xyXG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XHJcbiAgICAgICAgdGhpcy5ob3N0ID0gaG9zdDtcclxuICAgICAgICB0aGlzLm1heFNpemUgPSBtYXhTaXplO1xyXG5cclxuICAgICAgICBpZiAocGxheWVycyAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJzID0gcGxheWVycztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5hZGRQbGF5ZXIoaG9zdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkUGxheWVyKHBsYXllcjogUGxheWVyKTogYm9vbGVhbiB7XHJcblxyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnBsYXllcnMpLmxlbmd0aCA+PSB0aGlzLm1heFNpemUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wbGF5ZXJzW3BsYXllci51c2VybmFtZV0gPSBwbGF5ZXI7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldENvZGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29kZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UGxheWVycygpOiB7IFtrZXk6IHN0cmluZ106IFBsYXllcjsgfSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGxheWVycztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SG9zdCgpOiBQbGF5ZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhvc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldEhvc3QocGxheWVyOiBQbGF5ZXIpIHtcclxuICAgICAgICB0aGlzLmhvc3QgPSBwbGF5ZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFBsYXllcnMocGxheWVyczogeyBba2V5OiBzdHJpbmddOiBQbGF5ZXI7IH0pe1xyXG4gICAgICAgIHRoaXMucGxheWVycyA9IHBsYXllcnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldE1heFNpemUobmV3U2l6ZTogbnVtYmVyKXtcclxuICAgICAgICB0aGlzLm1heFNpemUgPSBuZXdTaXplO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNYXhTaXplKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWF4U2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0R2FtZVN0YXRlKG5ld0dhbWVTdGF0ZTogR2FtZVN0YXRlKXtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZSA9IG5ld0dhbWVTdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0R2FtZVN0YXRlKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2FtZVN0YXRlO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgdXBkYXRlR2FtZVN0YXRlIH0gZnJvbSBcIi4uXCI7XHJcbmltcG9ydCB7IGN1cnJlbnRQbGF5ZXIsIHNob3dFcnJvckFuaW1hdGlvbiwgc2hvd1Jvb21WaWV3LCBzd2l0Y2hHYW1lVmlldywgdXBkYXRlUm9vbUxpc3QgfSBmcm9tIFwiLi4vTWVudU1hbmFnZXIvbG9naW5cIjtcclxuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4uL1ZpZXdNb2RlbHMvUGxheWVyXCI7XHJcblxyXG5sZXQgc29ja2V0OiBXZWJTb2NrZXQ7XHJcblxyXG5mdW5jdGlvbiBpbml0V2ViU29ja2V0KCkge1xyXG4gICAgc29ja2V0ID0gbmV3IFdlYlNvY2tldChgd3M6Ly8ke3dpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZX06ODA4MGApO1xyXG4gICAgXHJcbiAgICBzb2NrZXQub25vcGVuID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgY29ubmVjdGlvbiBlc3RhYmxpc2hlZCcpO1xyXG4gICAgfTtcclxuXHJcbiAgICBzb2NrZXQub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ01lc3NhZ2UgZnJvbSBzZXJ2ZXI6JywgZGF0YSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnSk9JTkVEX1JPT00nOlxyXG4gICAgICAgICAgICAgICAgc2hvd1Jvb21WaWV3KGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ1JPT01fRE9FU19OT1RfRVhJU1QnOlxyXG4gICAgICAgICAgICAgICAgc2hvd0Vycm9yQW5pbWF0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnUk9PTV9EQVRBJzpcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVJvb21MaXN0KGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ0dBTUVfU1RBVEUnOlxyXG4gICAgICAgICAgICAgICAgc3dpdGNoR2FtZVZpZXcoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnR0FNRVBMQVlfREFUQSc6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVHYW1lU3RhdGUoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnRVJST1InOlxyXG4gICAgICAgICAgICAgICAgYWxlcnQoYEVycm9yOiAke2RhdGEubWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIHNvY2tldC5vbmNsb3NlID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgY29ubmVjdGlvbiBjbG9zZWQnKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHNvY2tldC5vbmVycm9yID0gKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignV2ViU29ja2V0IGVycm9yOicsIGVycm9yKTtcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSb29tKHVzZXJuYW1lOiBzdHJpbmcpIHtcclxuICAgIGlmIChzb2NrZXQgJiYgc29ja2V0LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XHJcbiAgICAgICAgc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiAnQ1JFQVRFX1JPT00nLCB1c2VybmFtZTogdXNlcm5hbWUgfSkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdXZWJTb2NrZXQgY29ubmVjdGlvbiBpcyBub3Qgb3BlbicpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gam9pblJvb20ocm9vbUNvZGU6IHN0cmluZywgdXNlcm5hbWU6IHN0cmluZykge1xyXG4gICAgaWYgKHNvY2tldCAmJiBzb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcclxuICAgICAgICBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGU6ICdKT0lOX1JPT00nLCByb29tQ29kZTogcm9vbUNvZGUsIHVzZXJuYW1lOiB1c2VybmFtZSB9KSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1dlYlNvY2tldCBjb25uZWN0aW9uIGlzIG5vdCBvcGVuJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRQbGF5ZXJEYXRhKHBsYXllcjogUGxheWVyLCByb29tQ29kZTogc3RyaW5nKSB7XHJcbiAgICBpZiAoc29ja2V0ICYmIHNvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xyXG4gICAgICAgIHNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogJ1BMQVlFUl9EQVRBJywgcGxheWVyOiBwbGF5ZXIsIHJvb21Db2RlOiByb29tQ29kZX0pKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignV2ViU29ja2V0IGNvbm5lY3Rpb24gaXMgbm90IG9wZW4nKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNlbmRLZXlFdmVudFRvU2VydmVyKGtleTogc3RyaW5nLCBwcmVzc2VkOiBib29sZWFuKXtcclxuICAgIGlmIChzb2NrZXQgJiYgc29ja2V0LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XHJcbiAgICAgICAgc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiAnS0VZX0VWRU5UJywgcGxheWVyOiBjdXJyZW50UGxheWVyLCBrZXk6IGtleSwgcHJlc3NlZDogcHJlc3NlZCB9KSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1dlYlNvY2tldCBjb25uZWN0aW9uIGlzIG5vdCBvcGVuJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZW5kU3RhcnRDb21tYW5kKHJvb21Db2RlOiBzdHJpbmcpIHtcclxuICAgIGlmIChzb2NrZXQgJiYgc29ja2V0LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XHJcbiAgICAgICAgc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiAnQkVHSU5fR0FNRScsIHJvb21Db2RlOiByb29tQ29kZX0pKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignV2ViU29ja2V0IGNvbm5lY3Rpb24gaXMgbm90IG9wZW4nKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5pbml0V2ViU29ja2V0KCk7XHJcbiIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCJ2ZWN0b3IyZFwiO1xuaW1wb3J0IEFyY1NlZ21lbnQgZnJvbSBcIi4vQXJjU2VnbWVudFwiO1xuaW1wb3J0IHsgZHJhd0dyaWQgfSBmcm9tIFwiLi9EcmF3ZXJcIjtcbmltcG9ydCBJbnB1dE1hbmFnZXIgZnJvbSBcIi4vSW5wdXRNYW5hZ2VyXCI7XG5pbXBvcnQgTGluZVNlZ21lbnQgZnJvbSBcIi4vTGluZVNlZ21lbnRcIjtcbmltcG9ydCBTbmFrZSBmcm9tIFwiLi9TbmFrZVwiO1xuaW1wb3J0IEVtaXR0ZXIgZnJvbSBcIi4vUGFydGljbGVTeXN0ZW0vRW1pdHRlclwiO1xuaW1wb3J0IENvbGxpc2lvbkhhbmRsZXIgZnJvbSBcIi4vQ29sbGlzaW9uSGFuZGxlclwiO1xuaW1wb3J0IHsgTWVzc2FnZUdhbWVwbGF5LCBtZXNzYWdlTGluZVNlZ21lbnQgfSBmcm9tIFwiLi9XZWJTb2NrZXRDbGllbnQvbWVzc2FnZVR5cGVzXCI7XG5pbXBvcnQgU2VnbWVudCBmcm9tIFwiLi9TZWdtZW50XCI7XG5pbXBvcnQgeyBjdXJyZW50UGxheWVyLCBjdXJyZW50Um9vbSB9IGZyb20gXCIuL01lbnVNYW5hZ2VyL2xvZ2luXCI7XG5cbnZhciBmcHNDb3VudGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5mcHNDb3VudGVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbmZwc0NvdW50ZXIuc3R5bGUudG9wID0gJzEwcHgnO1xuZnBzQ291bnRlci5zdHlsZS5sZWZ0ID0gJzEwcHgnO1xuZnBzQ291bnRlci5zdHlsZS5jb2xvciA9ICdibGFjayc7XG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZwc0NvdW50ZXIpO1xuZXhwb3J0IHZhciBmcHMgPSA2MDtcblxuZXhwb3J0IHZhciBnYW1lQ2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtY2FudmFzJykgIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuZXhwb3J0IHZhciBnYW1lQ2FudmFzQ3R4ID0gZ2FtZUNhbnZhcy5nZXRDb250ZXh0KCcyZCcpITtcblxuZXhwb3J0IHZhciBiYWNrZ3JvdW5kQ2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhY2tncm91bmQtY2FudmFzJykgIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuZXhwb3J0IHZhciBiYWNrZ3JvdW5kQ2FudmFzQ3R4ID0gYmFja2dyb3VuZENhbnZhcy5nZXRDb250ZXh0KCcyZCcpITtcblxuYmFja2dyb3VuZENhbnZhcyEud2lkdGggPSBiYWNrZ3JvdW5kQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuYmFja2dyb3VuZENhbnZhcyEuaGVpZ2h0ID0gYmFja2dyb3VuZENhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG5nYW1lQ2FudmFzIS53aWR0aCA9IGdhbWVDYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG5nYW1lQ2FudmFzIS5oZWlnaHQgPSBnYW1lQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbmV4cG9ydCB2YXIgZ3JpZFNpemUgPSA2MDtcbmxldCBpbnB1dE1hbmFnZXI7XG5mdW5jdGlvbiB1cGRhdGVDYW52YXNTaXplKCkge1xuICAgIGdhbWVDYW52YXMud2lkdGggPSBnYW1lQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgIGdhbWVDYW52YXMuaGVpZ2h0ID0gZ2FtZUNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgYmFja2dyb3VuZENhbnZhcy53aWR0aCA9IGJhY2tncm91bmRDYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgYmFja2dyb3VuZENhbnZhcy5oZWlnaHQgPSBiYWNrZ3JvdW5kQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgICBkcmF3R3JpZCgpO1xuICB9XG5cbmZ1bmN0aW9uIGFuaW1hdGUoKSB7XG4gICAgdmFyIG11bHQgPSBmcHMgLyA2MDtcbiAgICBmcmFtZUNvdW50Kys7XG4gICAgaWYgKGZyYW1lQ291bnQgJSAxMCA9PT0gMCkge1xuICAgICAgICBmcHMgPSBjYWxjdWxhdGVGUFMoKTtcbiAgICAgICAgZnBzQ291bnRlci5pbm5lclRleHQgPSBgRlBTOiAke2Zwc31gO1xuICAgIH1cbiAgICBnYW1lQ2FudmFzQ3R4LmNsZWFyUmVjdCgwLCAwLCBnYW1lQ2FudmFzLndpZHRoLCBnYW1lQ2FudmFzLmhlaWdodCk7XG5cbiAgICBPYmplY3QudmFsdWVzKGN1cnJlbnRSb29tLmdldFBsYXllcnMoKSkuZm9yRWFjaChwbGF5ZXIgPT4ge1xuICAgICAgICBwbGF5ZXIuc25ha2UuZHJhdygpO1xuICAgICAgICAvLyBzbmFrZS51cGRhdGVFbWl0dGVyKChwZXJmb3JtYW5jZS5ub3coKS8xMCAtIGxhc3RUaW1lKS8xMCk7XG4gICAgfSlcbiAgICBcbiAgICAvLyBjb2xsaXNpb25IYW5kbGVyLmNoZWNrQ29sbGlzaW9ucygpO1xuICAgIC8vIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcbiAgICBcbiAgICAvLyBlbWl0dGVyLnRpY2soMC4zKTtcbiAgICAvLyBlbWl0dGVyLmRyYXcoKTtcbn1cbnZhciBmcmFtZUNvdW50ID0gMDtcbnZhciBsYXN0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC8gMTA7XG5mdW5jdGlvbiBjYWxjdWxhdGVGUFMoKSB7XG4gICAgdmFyIGN1cnJlbnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLyAxMDtcbiAgICB2YXIgdGltZURpZmYgPSBjdXJyZW50VGltZSAtIGxhc3RUaW1lO1xuICAgIHZhciBmcHMgPSBNYXRoLnJvdW5kKDEwMDAgLyB0aW1lRGlmZik7XG4gICAgbGFzdFRpbWUgPSBjdXJyZW50VGltZTtcbiAgICByZXR1cm4gZnBzO1xufVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB1cGRhdGVDYW52YXNTaXplKTtcbmRyYXdHcmlkKCk7XG5sZXQgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuLy8gY29uc3QgaW5wdXRNYW5hZ2VyczogSW5wdXRNYW5hZ2VyW10gPSBbXVxuLy8gY29uc3QgY29sb3JzOiBzdHJpbmdbXSA9IFtcIiNlZjg4ODhcIiwgXCIjZmYwMDAwXCIsIFwiIzAwYWFiYlwiLCBcIiMwMDAwZWVcIl1cbi8vIGNvbnN0IGtleW1hcHM6IHN0cmluZ1tdW10gPVtbJ0EnLCdEJ10sWydGJywnSCddLFsnSicsJ0wnXSwgWyc4JywnMCddXSBcbi8vIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgaSsrKXtcbi8vICAgICBsZXQgc3RhcnRQb3MgPSBuZXcgVmVjdG9yKE1hdGgucmFuZG9tKCkqIDE4MDAsIE1hdGgucmFuZG9tKCkqOTAwKTtcbi8vICAgICBzbmFrZXMucHVzaChuZXcgU25ha2UobmV3IExpbmVTZWdtZW50KHN0YXJ0UG9zLCBzdGFydFBvcy5hZGQobmV3IFZlY3RvcigxMCwxMCkpLCB0cnVlICxNYXRoLnJhbmRvbSgpKiAyKiBNYXRoLlBJKSwgY29sb3JzW2ldLCBnYW1lQ2FudmFzQ3R4KSk7XG4vLyAgICAgaW5wdXRNYW5hZ2Vycy5wdXNoKG5ldyBJbnB1dE1hbmFnZXIoc25ha2VzW2ldLCBrZXltYXBzW2ldWzBdLCBrZXltYXBzW2ldWzFdKSlcbi8vIH1cblxuLy8gY29uc3QgY29sbGlzaW9uSGFuZGxlciA9IG5ldyBDb2xsaXNpb25IYW5kbGVyKHNuYWtlcylcbi8vIGNvbnN0IGVtaXR0ZXIgPSBuZXcgRW1pdHRlcihuZXcgVmVjdG9yKGdhbWVDYW52YXMud2lkdGgvMiwgZ2FtZUNhbnZhcy5oZWlnaHQvMiksIDIsIDEwLCA1LCAnY2lyY2xlJywge3I6MjU1LCBnOjAsIGI6MjU1LCBhOjAuNX0sIGdhbWVDYW52YXNDdHgsIHRydWUsIHRydWUsIDIwMClcblxuLy8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xuXG5cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUdhbWVTdGF0ZShnYW1lU3RhdGU6IE1lc3NhZ2VHYW1lcGxheSkge1xuXG4gICAgaWYgKCFpbml0aWFsaXplZCkge1xuXG4gICAgICAgIC8vIEluaXRpYWxpemUgc25ha2VzIHRoZSBmaXJzdCB0aW1lIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkXG4gICAgICAgIGdhbWVTdGF0ZS5zbmFrZUhlYWRzLmZvckVhY2goaGVhZERhdGEgPT4ge1xuICAgICAgICAgICAgbGV0IGhlYWQgPSBoZWFkRGF0YS5sYXN0U2VnbWVudDtcbiAgICAgICAgICAgIGxldCB1c2VybmFtZSA9IGhlYWREYXRhLnVzZXJuYW1lO1xuICAgICAgICAgICAgbGV0IHBvcyA9IGhlYWQuZW5kUG9pbnRcbiAgICAgICAgICAgIGN1cnJlbnRSb29tLmdldFBsYXllcnMoKVt1c2VybmFtZV0uc25ha2UgPSBuZXcgU25ha2UobmV3IExpbmVTZWdtZW50KG5ldyBWZWN0b3IocG9zLngsIHBvcy55KSAsIG5ldyBWZWN0b3IocG9zLngsIHBvcy55KSAsIGhlYWQuaXNDb2xsaWRhYmxlLCBoZWFkLmVuZEFuZ2xlKSxjdXJyZW50Um9vbS5nZXRQbGF5ZXJzKClbdXNlcm5hbWVdLmNvbG9yLCBnYW1lQ2FudmFzQ3R4KVxuICAgICAgICB9KTtcblxuICAgICAgICBpbnB1dE1hbmFnZXIgPSBuZXcgSW5wdXRNYW5hZ2VyKGN1cnJlbnRSb29tLmdldFBsYXllcnMoKVtjdXJyZW50UGxheWVyLnVzZXJuYW1lXS5zbmFrZSwnQScsJ0QnKTtcblxuICAgICAgICBpbml0aWFsaXplZCA9IHRydWU7XG4gICAgIH0gXG4gICAgIGVsc2Uge1xuICAgICAgICAvLyBVcGRhdGUgZXhpc3Rpbmcgc25ha2VzIGJhc2VkIG9uIHRoZSBuZXcgZ2FtZSBzdGF0ZVxuICAgICAgICBnYW1lU3RhdGUuc25ha2VIZWFkcy5mb3JFYWNoKG5ld0hlYWREYXRhID0+IHtcbiAgICAgICAgICAgIGxldCBoZWFkID0gbmV3SGVhZERhdGEubGFzdFNlZ21lbnQ7XG4gICAgICAgICAgICBsZXQgdXNlcm5hbWUgPSBuZXdIZWFkRGF0YS51c2VybmFtZTtcbiAgICAgICAgICAgIGxldCBlbmRQb3MgPSBoZWFkLmVuZFBvaW50XG4gICAgICAgICAgICBsZXQgc25ha2VUb1VwZGF0ZSA9IGN1cnJlbnRSb29tLmdldFBsYXllcnMoKVt1c2VybmFtZV0uc25ha2U7XG5cbiAgICAgICAgICBpZihoZWFkLmlzTmV3VGhpc1RpY2spe1xuICAgICAgICAgICAgaWYobmV3SGVhZERhdGEuc2VnbWVudFR5cGUgPT0gJ0xpbmVTZWdtZW50Jyl7XG4gICAgICAgICAgICAgICAgaGVhZCA9IGhlYWQgYXMgbWVzc2FnZUxpbmVTZWdtZW50XG4gICAgICAgICAgICAgICAgbGV0IHN0YXJ0UG9zID0gaGVhZC5zdGFydFBvaW50O1xuICAgICAgICAgICAgICAgIHNuYWtlVG9VcGRhdGUuYWRkU2VnbWVudChuZXcgTGluZVNlZ21lbnQobmV3IFZlY3RvcihzdGFydFBvcy54LCBzdGFydFBvcy55KSwgbmV3IFZlY3RvcihlbmRQb3MueCwgZW5kUG9zLnkpLCBoZWFkLmlzQ29sbGlkYWJsZSwgaGVhZC5lbmRBbmdsZSkpO1xuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIGVsc2UgaWYgKG5ld0hlYWREYXRhLnNlZ21lbnRUeXBlID09ICdBcmNTZWdtZW50Jyl7XG4gICAgICAgICAgICAgICAgLy8gc25ha2VzW2luZGV4XS5hZGRTZWdtZW50KG5ldyBBcmNTZWdtZW50KGhlYWQuKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGhlYWQgPSBoZWFkIGFzIG1lc3NhZ2VMaW5lU2VnbWVudFxuICAgICAgICAgICAgbGV0IHN0YXJ0UG9zID0gaGVhZC5zdGFydFBvaW50O1xuICAgICAgICAgICAgc25ha2VUb1VwZGF0ZS5zZWdtZW50c1tzbmFrZVRvVXBkYXRlLnNlZ21lbnRzLmxlbmd0aC0xXSA9IChuZXcgTGluZVNlZ21lbnQobmV3IFZlY3RvcihzdGFydFBvcy54LCBzdGFydFBvcy55KSwgbmV3IFZlY3RvcihlbmRQb3MueCwgZW5kUG9zLnkpLCBoZWFkLmlzQ29sbGlkYWJsZSwgaGVhZC5lbmRBbmdsZSkpO1xuICAgICAgICAgIH1cblxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGFuaW1hdGUoKTtcblxuXG4gIH0iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qKlxuICogVGhlc2UgdmFsdWVzIGFyZSB1c2VkIGJ5IHRoZSBgQWJzdHJhY3RWZWN0b3Iucm91bmRgIG1ldGhvZCB0byBpbmNyZWFzZVxuICogcGVyZm9ybWFuY2UgdnMuIHVzaW5nICBOdW1iZXIudG9GaXhlZC5cbiAqL1xudmFyIHByZWNpc2lvbiA9IFtcbiAgICAxLFxuICAgIDEwLFxuICAgIDEwMCxcbiAgICAxMDAwLFxuICAgIDEwMDAwLFxuICAgIDEwMDAwMCxcbiAgICAxMDAwMDAwLFxuICAgIDEwMDAwMDAwLFxuICAgIDEwMDAwMDAwMCxcbiAgICAxMDAwMDAwMDAwLFxuICAgIDEwMDAwMDAwMDAwXG5dO1xuLyoqXG4gKiBUaGUgY2xhc3MgdGhhdCBhbGwgb3RoZXIgdmVjdG9yIHJlcHJlc2VudGF0aW9ucyBhcmUgZGVyaXZlZCBmcm9tLlxuICpcbiAqIENvbnRhaW5zIHRoZSBjb3JlIGltcGxlbWVudGF0aW9uIGZvciBhbGwgbWV0aG9kcyB0aGF0IHdpbGwgYmUgZXhwb3NlZCBieVxuICogdmVjdG9yIGluc3RhbmNlcy5cbiAqXG4gKiBFeGFtcGxlIG9mIGNyZWF0aW5nIGEgY3VzdG9tIGltcGxlbWVudGF0aW9uOlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBBYnN0cmFjdFZlY3RvciB9IGZyb20gXCIuL0Fic3RyYWN0VmVjdG9yXCJcbiAqXG4gKiBleHBvcnQgY2xhc3MgTXlDdXN0b21WZWN0b3IgZXh0ZW5kcyBBYnN0cmFjdFZlY3RvciB7XG4gKiAgY29uc3RydWN0b3IgKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gKiAgICBzdXBlcihDdXN0b21WZWN0b3JUeXBlKVxuICogIH1cbiAqIH1cbiAqIGBgYFxuICovXG52YXIgQWJzdHJhY3RWZWN0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQWJzdHJhY3RWZWN0b3IoY3Rvcikge1xuICAgICAgICB0aGlzLmN0b3IgPSBjdG9yO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgYm90aCB4IGFuZCB5IGF4aXMgdmFsdWVcbiAgICAgKiBAcGFyYW0geCAgIE5ldyB4IHZhbFxuICAgICAqIEBwYXJhbSB5ICAgTmV3IHkgdmFsXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnNldEF4ZXMgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHRlciBmb3IgeCB0aGUgYXhpcyB2YWx1ZVxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5nZXRYID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy54O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0dGVyIGZvciB4IGF4aXMgdmFsdWVcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuc2V0WCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0dGVyIGZvciB5IGF4aXMgdmFsdWVcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuZ2V0WSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHRlciBmb3IgeSBheGlzLlxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5zZXRZID0gZnVuY3Rpb24gKHkpIHtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHZlY3RvciBhcyBhIGZvcm1hdHRlZCBzdHJpbmcsIGUuZyBcIigwLCA0KVwiXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKHJvdW5kKSB7XG4gICAgICAgIGlmIChyb3VuZCA9PT0gdm9pZCAwKSB7IHJvdW5kID0gZmFsc2U7IH1cbiAgICAgICAgaWYgKHJvdW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gXCIoXCIgKyBNYXRoLnJvdW5kKHRoaXMueCkgKyBcIiwgXCIgKyBNYXRoLnJvdW5kKHRoaXMueSkgKyBcIilcIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCIoXCIgKyB0aGlzLnggKyBcIiwgXCIgKyB0aGlzLnkgKyBcIilcIjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiBhbiBBcnJheSBjb250YWluaW5nIHRoZSB2ZWN0b3IgYXhlcywgZS5nIFswLCA0XVxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55XTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiBhbiBPYmplY3QgY29udGFpbmluZyB0aGUgdmVjdG9yIGF4ZXMsIGUuZyB7IHg6IDAsIHk6IDQgfVxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS50b09iamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IHRoaXMueCxcbiAgICAgICAgICAgIHk6IHRoaXMueVxuICAgICAgICB9O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkIHRoZSBwcm92aWRlZCB2ZWN0b3IgdG8gdGhpcyBvbmVcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHZlYykge1xuICAgICAgICB0aGlzLnggKz0gdmVjLng7XG4gICAgICAgIHRoaXMueSArPSB2ZWMueTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTdWJ0cmFjdCB0aGUgcHJvdmlkZWQgdmVjdG9yIGZyb20gdGhpcyBvbmVcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuc3VidHJhY3QgPSBmdW5jdGlvbiAodmVjKSB7XG4gICAgICAgIHRoaXMueCAtPSB2ZWMueDtcbiAgICAgICAgdGhpcy55IC09IHZlYy55O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHRoZSBwcm92aWRlZCB2ZWN0b3IgZXF1YWwgdG8gdGhpcyBvbmVcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKHZlYykge1xuICAgICAgICByZXR1cm4gdmVjLnggPT09IHRoaXMueCAmJiB2ZWMueSA9PT0gdGhpcy55O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIHZlY3RvclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5tdWx0aXBseUJ5VmVjdG9yID0gZnVuY3Rpb24gKHZlYykge1xuICAgICAgICB0aGlzLnggKj0gdmVjLng7XG4gICAgICAgIHRoaXMueSAqPSB2ZWMueTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNdWx0aXBseSB0aGlzIHZlY3RvciBieSB0aGUgcHJvdmlkZWQgdmVjdG9yXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLm11bFYgPSBmdW5jdGlvbiAodmVjKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11bHRpcGx5QnlWZWN0b3IodmVjKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpdmlkZSB0aGlzIHZlY3RvciBieSB0aGUgcHJvdmlkZWQgdmVjdG9yXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmRpdmlkZUJ5VmVjdG9yID0gZnVuY3Rpb24gKHZlYykge1xuICAgICAgICB0aGlzLnggLz0gdmVjLng7XG4gICAgICAgIHRoaXMueSAvPSB2ZWMueTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXZpZGUgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIHZlY3RvclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5kaXZWID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGl2aWRlQnlWZWN0b3Iodik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNdWx0aXBseSB0aGlzIHZlY3RvciBieSB0aGUgcHJvdmlkZWQgbnVtYmVyXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLm11bHRpcGx5QnlTY2FsYXIgPSBmdW5jdGlvbiAobikge1xuICAgICAgICB0aGlzLnggKj0gbjtcbiAgICAgICAgdGhpcy55ICo9IG47XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIG51bWJlclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5tdWxTID0gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXVsdGlwbHlCeVNjYWxhcihuKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpdml2ZSB0aGlzIHZlY3RvciBieSB0aGUgcHJvdmlkZWQgbnVtYmVyXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmRpdmlkZUJ5U2NhbGFyID0gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdGhpcy54IC89IG47XG4gICAgICAgIHRoaXMueSAvPSBuO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpdml2ZSB0aGlzIHZlY3RvciBieSB0aGUgcHJvdmlkZWQgbnVtYmVyXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmRpdlMgPSBmdW5jdGlvbiAobikge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXZpZGVCeVNjYWxhcihuKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE5vcm1hbGlzZSB0aGlzIHZlY3RvclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5ub3JtYWxpc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpdmlkZUJ5U2NhbGFyKHRoaXMubWFnbml0dWRlKCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRm9yIEFtZXJpY2FuIHNwZWxsaW5nLiBTYW1lIGFzIHVuaXQvbm9ybWFsaXNlIGZ1bmN0aW9uXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXNlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGUgc2FtZSBhcyBub3JtYWxpc2UgYW5kIG5vcm1hbGl6ZVxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS51bml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWxpc2UoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG1hZ25pdHVkZSAobGVuZ3RoKSBvZiB0aGlzIHZlY3RvclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5tYWduaXR1ZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB4ID0gdGhpcy54O1xuICAgICAgICB2YXIgeSA9IHRoaXMueTtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCh4ICogeCArIHkgKiB5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG1hZ25pdHVkZSAobGVuZ3RoKSBvZiB0aGlzIHZlY3RvclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hZ25pdHVkZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc3F1cmVkIGxlbmd0aCBvZiB0aGlzIHZlY3RvclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5sZW5ndGhTcSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHggPSB0aGlzLng7XG4gICAgICAgIHZhciB5ID0gdGhpcy55O1xuICAgICAgICByZXR1cm4geCAqIHggKyB5ICogeTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGRvdCBwcm9kdWN0IG9mIHRoaXMgdmVjdG9yIGJ5IGFub3RoZXJcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuZG90ID0gZnVuY3Rpb24gKHZlYykge1xuICAgICAgICByZXR1cm4gdmVjLnggKiB0aGlzLnggKyB2ZWMueSAqIHRoaXMueTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdGhpcyB2ZWN0b3IgYnkgYW5vdGhlci5cbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuY3Jvc3MgPSBmdW5jdGlvbiAodmVjKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnggKiB2ZWMueSAtIHRoaXMueSAqIHZlYy54O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV2ZXJzZXMgdGhpcyB2ZWN0b3IgaS5lIG11bHRpcGxpZXMgaXQgYnkgLTFcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUucmV2ZXJzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy54ID0gLXRoaXMueDtcbiAgICAgICAgdGhpcy55ID0gLXRoaXMueTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHZlY3RvciBheGVzIHZhbHVlcyB0byBhYnNvbHV0ZSB2YWx1ZXNcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuYWJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnggPSBNYXRoLmFicyh0aGlzLngpO1xuICAgICAgICB0aGlzLnkgPSBNYXRoLmFicyh0aGlzLnkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFplcm9lcyB0aGUgdmVjdG9yIGkuZSBzZXRzIGFsbCBheGVzIHRvIDBcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuemVybyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy54ID0gdGhpcy55ID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoaXMgdmVjdG9yIGFuZCBhbm90aGVyXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmRpc3RhbmNlID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgdmFyIHggPSB0aGlzLnggLSB2Lng7XG4gICAgICAgIHZhciB5ID0gdGhpcy55IC0gdi55O1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUm90YXRlcyB0aGUgdmV0b3IgYnkgcHJvdmlkZWQgcmFkaWFuc1xuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5yb3RhdGUgPSBmdW5jdGlvbiAocmFkcykge1xuICAgICAgICB2YXIgY29zID0gTWF0aC5jb3MocmFkcyk7XG4gICAgICAgIHZhciBzaW4gPSBNYXRoLnNpbihyYWRzKTtcbiAgICAgICAgdmFyIG94ID0gdGhpcy54O1xuICAgICAgICB2YXIgb3kgPSB0aGlzLnk7XG4gICAgICAgIHRoaXMueCA9IG94ICogY29zIC0gb3kgKiBzaW47XG4gICAgICAgIHRoaXMueSA9IG94ICogc2luICsgb3kgKiBjb3M7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUm91bmRzIHRoaXMgdmVjdG9yIHRvIG4gZGVjaW1hbCBwbGFjZXNcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUucm91bmQgPSBmdW5jdGlvbiAobikge1xuICAgICAgICBpZiAobiA9PT0gdm9pZCAwKSB7IG4gPSAyOyB9XG4gICAgICAgIHZhciBwID0gcHJlY2lzaW9uW25dO1xuICAgICAgICAvLyBUaGlzIHBlcmZvcm1zIHdhYWF5IGJldHRlciB0aGFuIHRvRml4ZWQgYW5kIGdpdmUgRmxvYXQzMiB0aGUgZWRnZSBhZ2Fpbi5cbiAgICAgICAgLy8gaHR0cDovL3d3dy5keW5hbWljZ3VydS5jb20vamF2YXNjcmlwdC9yb3VuZC1udW1iZXJzLXdpdGgtcHJlY2lzaW9uL1xuICAgICAgICB0aGlzLnggPSAoKDAuNSArIHRoaXMueCAqIHApIDw8IDApIC8gcDtcbiAgICAgICAgdGhpcy55ID0gKCgwLjUgKyB0aGlzLnkgKiBwKSA8PCAwKSAvIHA7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGNvcHkgb2YgdGhpcyB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgdGhpcy5jdG9yKHRoaXMueCwgdGhpcy55KTtcbiAgICB9O1xuICAgIHJldHVybiBBYnN0cmFjdFZlY3Rvcjtcbn0oKSk7XG5leHBvcnRzLkFic3RyYWN0VmVjdG9yID0gQWJzdHJhY3RWZWN0b3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1BYnN0cmFjdFZlY3Rvci5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEFic3RyYWN0VmVjdG9yXzEgPSByZXF1aXJlKFwiLi9BYnN0cmFjdFZlY3RvclwiKTtcbi8qKlxuICogQSB2ZWN0b3IgcmVwcmVzZW50YXRpb24gdGhhdCBzdG9yZXMgdGhlIGF4ZXMgaW4gYW4gQXJyYXlcbiAqXG4gKiBgYGBcbiAqIGNvbnN0IHYgPSBuZXcgVmVjMkQuQXJyYXlWZWN0b3IoMiwgNSlcbiAqIGBgYFxuICovXG52YXIgQXJyYXlWZWN0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFycmF5VmVjdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFycmF5VmVjdG9yKHgsIHkpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgQXJyYXlWZWN0b3IpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmF4ZXMgPSBbeCwgeV07XG4gICAgICAgIF90aGlzLmN0b3IgPSBBcnJheVZlY3RvcjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlWZWN0b3IucHJvdG90eXBlLCBcInhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmF4ZXNbMF07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHRoaXMuYXhlc1swXSA9IHg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheVZlY3Rvci5wcm90b3R5cGUsIFwieVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXhlc1sxXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoeSkge1xuICAgICAgICAgICAgdGhpcy5heGVzWzFdID0geTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIEFycmF5VmVjdG9yO1xufShBYnN0cmFjdFZlY3Rvcl8xLkFic3RyYWN0VmVjdG9yKSk7XG5leHBvcnRzLkFycmF5VmVjdG9yID0gQXJyYXlWZWN0b3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1BcnJheVZlY3Rvci5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEFic3RyYWN0VmVjdG9yXzEgPSByZXF1aXJlKFwiLi9BYnN0cmFjdFZlY3RvclwiKTtcbi8qKlxuICogQSB2ZWN0b3IgcmVwcmVzZW50YXRpb24gdGhhdCBzdG9yZXMgdGhlIGF4ZXMgaW4gYSBGbG9hdDMyQXJyYXlcbiAqXG4gKiBgYGBcbiAqIGNvbnN0IHYgPSBuZXcgVmVjMkQuRmxvYXQzMlZlY3RvcigyLCA1KVxuICogYGBgXG4gKi9cbnZhciBGbG9hdDMyVmVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGbG9hdDMyVmVjdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEZsb2F0MzJWZWN0b3IoeCwgeSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBGbG9hdDMyVmVjdG9yKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5heGVzID0gbmV3IEZsb2F0MzJBcnJheSgyKTtcbiAgICAgICAgX3RoaXMuYXhlc1swXSA9IHg7XG4gICAgICAgIF90aGlzLmF4ZXNbMV0gPSB5O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdDMyVmVjdG9yLnByb3RvdHlwZSwgXCJ4XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5heGVzWzBdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICB0aGlzLmF4ZXNbMF0gPSB4O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmxvYXQzMlZlY3Rvci5wcm90b3R5cGUsIFwieVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXhlc1sxXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoeSkge1xuICAgICAgICAgICAgdGhpcy5heGVzWzFdID0geTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIEZsb2F0MzJWZWN0b3I7XG59KEFic3RyYWN0VmVjdG9yXzEuQWJzdHJhY3RWZWN0b3IpKTtcbmV4cG9ydHMuRmxvYXQzMlZlY3RvciA9IEZsb2F0MzJWZWN0b3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1GbG9hdDMyVmVjdG9yLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbn1cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL0Fic3RyYWN0VmVjdG9yXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL0FycmF5VmVjdG9yXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL0Zsb2F0MzJWZWN0b3JcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vVmVjdG9yXCIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZlYzJELmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgQWJzdHJhY3RWZWN0b3JfMSA9IHJlcXVpcmUoXCIuL0Fic3RyYWN0VmVjdG9yXCIpO1xuLyoqXG4gKiBBIHZlY3RvciByZXByZXNlbnRhdGlvbiB0aGF0IHN0b3JlcyB0aGUgYXhlcyBhcyBwYXJ0IG9mIHRoZSBpbnN0YW5jZSBpdHNlbGZcbiAqXG4gKiBgYGB0c1xuICogY29uc3QgdiA9IG5ldyBWZWMyRC5WZWN0b3IoMiwgNSlcbiAqIGBgYFxuICovXG52YXIgVmVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhWZWN0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVmVjdG9yKHgsIHkpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgVmVjdG9yKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5feCA9IHg7XG4gICAgICAgIF90aGlzLl95ID0geTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVmVjdG9yLnByb3RvdHlwZSwgXCJ4XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5feDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgdGhpcy5feCA9IHg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWZWN0b3IucHJvdG90eXBlLCBcInlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl95O1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh5KSB7XG4gICAgICAgICAgICB0aGlzLl95ID0geTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIFZlY3Rvcjtcbn0oQWJzdHJhY3RWZWN0b3JfMS5BYnN0cmFjdFZlY3RvcikpO1xuZXhwb3J0cy5WZWN0b3IgPSBWZWN0b3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1WZWN0b3IuanMubWFwIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL01lbnVNYW5hZ2VyL2xvZ2luLnRzXCIpO1xuIl0sIm5hbWVzIjpbImNlbnRlciIsInJhZGl1cyIsInN0YXJ0QW5nbGUiLCJlbmRBbmdsZSIsImNvdW50ZXJDbG9ja3dpc2UiLCJpc0NvbGxpZGFibGUiLCJkcmF3IiwiY29udGV4dCIsImNvbG9yIiwibGluZUNhcCIsInN0cm9rZVN0eWxlIiwidGhpcyIsImJlZ2luUGF0aCIsImFyYyIsIngiLCJ5Iiwic3Ryb2tlIiwiY2xvc2VQYXRoIiwiZHJhd0RlYnVnIiwidGFuZ2VudF9hbmdsZSIsIk1hdGgiLCJQSSIsImRyYXdEb3QiLCJkcmF3QXJyb3ciLCJlbmRQb2ludCIsImNvcyIsInNpbiIsImRyYXdBcmMiLCJpc0NvdW50ZXJDbG9ja3dpc2UiLCJnZXRDb250aW51aW5nU2VnbWVudCIsInRyYW5zZm9ybSIsIkFyY1NlZ21lbnQiLCJjbG9uZSIsImFkZCIsImRyYXdHcmlkIiwiYmFja2dyb3VuZENhbnZhc0N0eCIsImNsZWFyUmVjdCIsImJhY2tncm91bmRDYW52YXMiLCJ3aWR0aCIsImhlaWdodCIsImxpbmVXaWR0aCIsImdyaWRTaXplIiwibW92ZVRvIiwibGluZVRvIiwiZG90WCIsImRvdFkiLCJkb3RTaXplIiwiZmlsbFN0eWxlIiwiZmlsbCIsImN0eCIsImZyb20iLCJ0byIsImFuZ2xlIiwiYXRhbjIiLCJoZWFkTGVuZ3RoIiwibmV3X3RvIiwiVmVjdG9yIiwic25ha2UiLCJsZWZ0S2V5IiwicmlnaHRLZXkiLCJrZXlNYXAiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwib25LZXlEb3duIiwiYmluZCIsIm9uS2V5VXAiLCJldmVudCIsImlzQWxpdmUiLCJrZXkiLCJ0b1VwcGVyQ2FzZSIsImhlYWQiLCJzZW5kS2V5RXZlbnRUb1NlcnZlciIsImRpc3Bvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic3RhcnQiLCJlbmQiLCJzdGFydFBvaW50IiwiY2FsY0VuZEFuZ2xlIiwiYXRhbiIsInNxcnQiLCJ0cmFuc2Zvcm1lZEVuZHBvaW50IiwiTGluZVNlZ21lbnQiLCJjdXJyZW50Um9vbSIsImN1cnJlbnRQbGF5ZXIiLCJyb29tQ29kZUlucHV0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInVzZXJuYW1lSW5wdXQiLCJyb29tQnV0dG9uIiwicmVhZHlCdXR0b24iLCJsb2dpbkRpdiIsInJvb21EaXYiLCJnYW1lRGl2IiwiY29sb3JQaWNrZXIiLCJyb29tVXNlcnNMaXN0Iiwicm9vbUNvZGVTcGFuIiwicGxheWVyQ291bnQiLCJjb2xvclBpY2tlckRpdiIsInN0YXJ0UHJvZ3Jlc3NCYXIiLCJ1cGRhdGVCdXR0b24iLCJ2YWx1ZSIsInRyaW0iLCJkaXNhYmxlZCIsImxlbmd0aCIsInRleHRDb250ZW50IiwiaGFuZGxlUm9vbUFjdGlvbiIsInVzZXJuYW1lIiwiUGxheWVyIiwiaW5uZXJUZXh0IiwiY3JlYXRlUm9vbSIsImpvaW5Sb29tIiwiaGFuZGxlUmVhZHlTdGF0ZSIsImlzUmVhZHkiLCJzZXRQbGF5ZXJEYXRhIiwiZ2V0Q29kZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsInNob3dSb29tVmlldyIsImRhdGEiLCJyb29tSW5mbyIsIkpTT04iLCJwYXJzZSIsInRvU3RyaW5nIiwiUm9vbSIsImdldEhvc3QiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsInBpY2tUZXh0Q29sb3JCYXNlZE9uQmdDb2xvckFkdmFuY2VkIiwiaW5uZXJIVE1MIiwidXBkYXRlUm9vbUxpc3QiLCJyZWFkeVBsYXllckNvdW50IiwibWF4UGxheWVyQ291bnQiLCJzZXRQbGF5ZXJzIiwic2V0SG9zdCIsInNldE1heFNpemUiLCJPYmplY3QiLCJrZXlzIiwiZ2V0UGxheWVycyIsImdldE1heFNpemUiLCJ2YWx1ZXMiLCJmb3JFYWNoIiwicGxheWVyIiwicGxheWVySXRlbSIsImNyZWF0ZUVsZW1lbnQiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJhcHBlbmRDaGlsZCIsImZpbHRlciIsInAiLCJmbG9vciIsInNob3dFcnJvckFuaW1hdGlvbiIsInNldFRpbWVvdXQiLCJ1cGRhdGVDb2xvclBpY2tlciIsInVwZGF0ZVBsYXllckNvbG9yIiwiYmdDb2xvciIsImxpZ2h0Q29sb3IiLCJkYXJrQ29sb3IiLCJjaGFyQXQiLCJzdWJzdHJpbmciLCJjIiwicGFyc2VJbnQiLCJtYXAiLCJjb2wiLCJwb3ciLCJzd2l0Y2hHYW1lVmlldyIsInN0YXRlIiwic2V0R2FtZVN0YXRlIiwib25sb2FkIiwic3RhcnRHYW1lIiwic2VuZFN0YXJ0Q29tbWFuZCIsInBvc2l0aW9uIiwiZW1pdEludGVydmFsIiwic2l6ZSIsInNwZWVkIiwic2hhcGUiLCJjYW52YXNDdHgiLCJmYWRlQ29sb3IiLCJmYWRlU2l6ZSIsImFnZSIsImVtaXRUaW1lTWlsbGlzIiwiYWxpdmVQYXJ0aWNsZXMiLCJ0aWNrcyIsImVtaXRUaW1lIiwicGFydGljbGVNYXhBZ2UiLCJ0aWNrIiwiZHQiLCJwdXNoIiwiZ2V0UmFuZG9tRGlyZWN0aW9uIiwicGFydGljbGUiLCJ2ZWxvY2l0eSIsImNvbG9yRmFkZUFtb3VudCIsImEiLCJzaXplRmFkZUFtb3VudCIsIm11bHRpcGx5QnlTY2FsYXIiLCJyIiwiZyIsImIiLCJmaWxsUmVjdCIsInJhbmRvbSIsImhleFRvUmdiIiwiaGV4IiwicmVzdWx0IiwiZXhlYyIsInN0YXJ0UG9zIiwic2VnbWVudHMiLCJ0dXJuUmFkaXVzIiwiZW1pdHRlciIsImRpc3RhbmNlVG9DaGFuZ2VPZlN0YXRlIiwiYWRkU2VnbWVudCIsInNlZ21lbnQiLCJzbGljZSIsInBvcCIsImluZGV4Iiwia2lsbCIsImNvbnNvbGUiLCJsb2ciLCJ1cGRhdGVFbWl0dGVyIiwiY2hlY2tXYWxscyIsImxhc3RTZWdtZW50IiwiY2FudmFzIiwicmVwbGFjZSIsInRvSlNPTiIsImNvZGUiLCJob3N0IiwicGxheWVycyIsIm1heFNpemUiLCJ1bmRlZmluZWQiLCJhZGRQbGF5ZXIiLCJuZXdTaXplIiwibmV3R2FtZVN0YXRlIiwiZ2FtZVN0YXRlIiwiZ2V0R2FtZVN0YXRlIiwic29ja2V0IiwicmVhZHlTdGF0ZSIsIldlYlNvY2tldCIsIk9QRU4iLCJzZW5kIiwic3RyaW5naWZ5IiwidHlwZSIsImVycm9yIiwicm9vbUNvZGUiLCJwcmVzc2VkIiwibG9jYXRpb24iLCJob3N0bmFtZSIsIm9ub3BlbiIsIm9ubWVzc2FnZSIsInVwZGF0ZUdhbWVTdGF0ZSIsImFsZXJ0IiwibWVzc2FnZSIsIm9uY2xvc2UiLCJvbmVycm9yIiwiZnBzQ291bnRlciIsInRvcCIsImxlZnQiLCJib2R5IiwiZnBzIiwiZ2FtZUNhbnZhcyIsImdhbWVDYW52YXNDdHgiLCJnZXRDb250ZXh0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZnJhbWVDb3VudCIsImxhc3RUaW1lIiwicGVyZm9ybWFuY2UiLCJub3ciLCJpbml0aWFsaXplZCIsInNuYWtlSGVhZHMiLCJuZXdIZWFkRGF0YSIsImVuZFBvcyIsInNuYWtlVG9VcGRhdGUiLCJpc05ld1RoaXNUaWNrIiwic2VnbWVudFR5cGUiLCJoZWFkRGF0YSIsInBvcyIsImN1cnJlbnRUaW1lIiwidGltZURpZmYiLCJyb3VuZCIsImNhbGN1bGF0ZUZQUyIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInByZWNpc2lvbiIsIkFic3RyYWN0VmVjdG9yIiwiY3RvciIsInByb3RvdHlwZSIsInNldEF4ZXMiLCJnZXRYIiwic2V0WCIsImdldFkiLCJzZXRZIiwidG9BcnJheSIsInRvT2JqZWN0IiwidmVjIiwic3VidHJhY3QiLCJlcXVhbHMiLCJtdWx0aXBseUJ5VmVjdG9yIiwibXVsViIsImRpdmlkZUJ5VmVjdG9yIiwiZGl2ViIsInYiLCJuIiwibXVsUyIsImRpdmlkZUJ5U2NhbGFyIiwiZGl2UyIsIm5vcm1hbGlzZSIsIm1hZ25pdHVkZSIsIm5vcm1hbGl6ZSIsInVuaXQiLCJsZW5ndGhTcSIsImRvdCIsImNyb3NzIiwicmV2ZXJzZSIsImFicyIsInplcm8iLCJkaXN0YW5jZSIsInJvdGF0ZSIsInJhZHMiLCJveCIsIm95IiwiZXh0ZW5kU3RhdGljcyIsIl9fZXh0ZW5kcyIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJkIiwiaGFzT3duUHJvcGVydHkiLCJfXyIsImNvbnN0cnVjdG9yIiwiY3JlYXRlIiwiQXJyYXlWZWN0b3IiLCJfc3VwZXIiLCJfdGhpcyIsImNhbGwiLCJheGVzIiwiZ2V0Iiwic2V0IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIkZsb2F0MzJWZWN0b3IiLCJGbG9hdDMyQXJyYXkiLCJfX2V4cG9ydCIsIm0iLCJfeCIsIl95IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkZWZpbml0aW9uIiwibyIsIm9iaiIsInByb3AiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyJdLCJzb3VyY2VSb290IjoiIn0=
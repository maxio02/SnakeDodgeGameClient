/*! For license information please see script.js.LICENSE.txt */
(()=>{"use strict";var t={"./src/ArcSegment.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>c});var i,s=n("./src/Drawer.ts"),o=n("./node_modules/vector2d/src/Vec2D.js"),r=n("./src/Segment.ts"),a=(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const c=function(t){function e(e,n,i,s,o,r){var a=t.call(this)||this;return a.center=e,a.radius=n,a.startAngle=i,a.endAngle=s,a.counterClockwise=o,a.isCollidable=r,a}return a(e,t),e.prototype.draw=function(t,e){t.lineCap="round",t.strokeStyle=e,1==this.isCollidable&&(t.beginPath(),t.arc(this.center.x,this.center.y,this.radius,this.startAngle,this.endAngle,this.counterClockwise),t.stroke(),t.closePath())},e.prototype.drawDebug=function(t,e){var n=this.counterClockwise?-Math.PI:Math.PI;n+=this.endAngle,t.lineCap="round",(0,s.drawDot)(this.center.x,this.center.y,5,"#000000"),(0,s.drawArrow)(t,new o.Vector(this.endPoint.x,this.endPoint.y),new o.Vector(this.endPoint.x+this.radius*Math.cos(n),this.endPoint.y+this.radius*Math.sin(n))),(0,s.drawArc)(this.center.x,this.center.y,this.radius,0,0,!1)},Object.defineProperty(e.prototype,"endPoint",{get:function(){return new o.Vector(this.center.x+this.radius*Math.cos(this.endAngle),this.center.y+this.radius*Math.sin(this.endAngle))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"penpendicularEndAngle",{get:function(){return this.isCounterClockwise?this.endAngle-Math.PI/2:this.endAngle+Math.PI/2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"penpendicularStartAngle",{get:function(){return this.isCounterClockwise?this.startAngle-Math.PI/2:this.startAngle+Math.PI/2},enumerable:!1,configurable:!0}),e.prototype.isCounterClockwise=function(){return this.counterClockwise},e.prototype.getContinuingSegment=function(t){return new e(this.center.clone().add(t),this.radius,this.endAngle,this.endAngle,this.counterClockwise,this.isCollidable)},e}(r.default)},"./src/CollisionHandler.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>o});var i=n("./src/ArcSegment.ts"),s=n("./src/LineSegment.ts");const o=function(){function t(t){this.snakes=t}return t.prototype.checkCollisions=function(){var t=this;return this.snakes.forEach((function(e){e.isAlive&&e.head.isCollidable&&(e.head instanceof i.default&&Math.abs(e.head.endAngle-e.head.startAngle)>2*Math.PI&&(e.kill(),console.log("snake ".concat(e," commited circlicide"))),t.snakes.forEach((function(n){n.segments.forEach((function(o){if(o.isCollidable&&o!==e.head&&(n!==e||o!==e.segments.slice(-2,-1).pop()))if(o instanceof s.default){if(t.isPointOnLine(o,e.head.endPoint,.5))return console.log("killed by straight (not gay)"),console.log(o),void e.kill()}else if(o instanceof i.default&&t.isPointOnArc(o,e.head.endPoint,2))return console.log("killed by gay (not straight)"),console.log(o),void e.kill()}))})))})),null},t.prototype.isPointOnLine=function(t,e,n){var i=t.length,s=e.distance(t.startPoint),o=e.distance(t.endPoint);return Math.abs(s+o-i)<n},t.prototype.isPointOnArc=function(t,e,n){var i=e.distance(t.center);if(Math.abs(i-t.radius)>n)return!1;var s=Math.atan2(e.y-t.center.y,e.x-t.center.x),o=t.startAngle,r=t.endAngle,a=function(t){var e=t%(2*Math.PI);return e<0&&(e+=2*Math.PI),e},c=a(s),h=a(o),d=a(r);return h<=d?c>=h&&c<=d:c>=d&&c<=h},t}()},"./src/Drawer.ts":(t,e,n)=>{n.r(e),n.d(e,{drawArc:()=>a,drawArrow:()=>c,drawDot:()=>r,drawGrid:()=>o});var i=n("./node_modules/vector2d/src/Vec2D.js"),s=n("./src/index.ts");function o(){s.backgroundCanvasCtx.clearRect(0,0,s.backgroundCanvas.width,s.backgroundCanvas.height),s.backgroundCanvasCtx.strokeStyle="rgba(0, 0, 0, 0.3)",s.backgroundCanvasCtx.lineWidth=2;for(var t=s.gridSize;t<s.backgroundCanvas.width;t+=s.gridSize)s.backgroundCanvasCtx.beginPath(),s.backgroundCanvasCtx.moveTo(t,0),s.backgroundCanvasCtx.lineTo(t,s.backgroundCanvas.height),s.backgroundCanvasCtx.stroke();for(var e=s.gridSize;e<s.backgroundCanvas.height;e+=s.gridSize)s.backgroundCanvasCtx.beginPath(),s.backgroundCanvasCtx.moveTo(0,e),s.backgroundCanvasCtx.lineTo(s.backgroundCanvas.width,e),s.backgroundCanvasCtx.stroke()}function r(t,e,n,i){s.backgroundCanvasCtx.beginPath(),s.backgroundCanvasCtx.arc(t,e,n,0,2*Math.PI,!1),s.backgroundCanvasCtx.fillStyle=i,s.backgroundCanvasCtx.fill(),s.backgroundCanvasCtx.closePath()}function a(t,e,n,i,o,r){s.backgroundCanvasCtx.lineCap="round",s.backgroundCanvasCtx.strokeStyle="#3466aa",s.backgroundCanvasCtx.beginPath(),s.backgroundCanvasCtx.arc(t,e,n,0,2*Math.PI,r),s.backgroundCanvasCtx.lineWidth=5,s.backgroundCanvasCtx.stroke(),s.backgroundCanvasCtx.closePath()}function c(t,e,n){if(e.x!=n.x&&e.y!=n.y){var s=Math.atan2(n.y-e.y,n.x-e.x),o=10,r=new i.Vector(n.x,n.y);r.x-=11.5*Math.cos(s),r.y-=11.5*Math.sin(s),t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(r.x,r.y),t.strokeStyle="#bbbbbb",t.lineWidth=10,t.stroke(),t.beginPath(),t.moveTo(r.x,r.y),t.lineTo(r.x-o*Math.cos(s-Math.PI/7),r.y-o*Math.sin(s-Math.PI/7)),t.lineTo(r.x-o*Math.cos(s+Math.PI/7),r.y-o*Math.sin(s+Math.PI/7)),t.lineTo(r.x,r.y),t.lineTo(r.x-o*Math.cos(s-Math.PI/7),r.y-o*Math.sin(s-Math.PI/7)),t.strokeStyle="#bbbbbb",t.lineWidth=10,t.stroke(),t.fillStyle="#bbbbbb",t.fill(),t.closePath()}}},"./src/InputManager.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});var i=n("./node_modules/vector2d/src/Vec2D.js"),s=n("./src/ArcSegment.ts"),o=n("./src/LineSegment.ts");const r=function(){function t(t,e,n){this.keyMap={},window.addEventListener("keydown",this.onKeyDown.bind(this)),window.addEventListener("keyup",this.onKeyUp.bind(this)),this.snake=t,this.leftKey=e,this.rightKey=n}return t.prototype.onKeyDown=function(t){if(this.snake.isAlive){var e=t.key.toUpperCase();if(e==this.leftKey||e==this.rightKey){if(this.keyMap[this.rightKey]&&e==this.leftKey)this.keyMap[this.rightKey]=!1;else if(this.keyMap[this.leftKey]&&e==this.rightKey)this.keyMap[this.leftKey]=!1;else if(this.keyMap[e])return;this.keyMap[e]=!0;var n=this.snake.head,r=n.endPoint,a=0;n instanceof o.default?(a+=Math.PI/2,e==this.rightKey&&this.snake.addSegment(new s.default(new i.Vector(r.x+this.snake.turnRadius*Math.cos(this.snake.head.endAngle+a),r.y+this.snake.turnRadius*Math.sin(this.snake.head.endAngle+a)),this.snake.turnRadius,this.snake.head.endAngle-a,this.snake.head.endAngle-a,!1,n.isCollidable)),e==this.leftKey&&this.snake.addSegment(new s.default(new i.Vector(r.x+this.snake.turnRadius*Math.cos(this.snake.head.endAngle-a),r.y+this.snake.turnRadius*Math.sin(this.snake.head.endAngle-a)),this.snake.turnRadius,this.snake.head.endAngle+a,this.snake.head.endAngle+a,!0,n.isCollidable))):n instanceof s.default&&(a=n.isCounterClockwise?-Math.PI:Math.PI,e==this.rightKey&&this.snake.addSegment(new s.default(new i.Vector(r.x-this.snake.turnRadius*Math.cos(this.snake.head.endAngle+a),r.y-this.snake.turnRadius*Math.sin(this.snake.head.endAngle+a)),this.snake.turnRadius,this.snake.head.endAngle-a,this.snake.head.endAngle-a,!1,n.isCollidable)),e==this.leftKey&&this.snake.addSegment(new s.default(new i.Vector(r.x-this.snake.turnRadius*Math.cos(this.snake.head.endAngle-a),r.y-this.snake.turnRadius*Math.sin(this.snake.head.endAngle-a)),this.snake.turnRadius,this.snake.head.endAngle+a,this.snake.head.endAngle+a,!0,n.isCollidable)))}}},t.prototype.onKeyUp=function(t){if(this.snake.isAlive){var e=t.key.toUpperCase();if(this.keyMap[e]){this.keyMap[e]=!1;var n=this.snake.head,r=n.endPoint,a=n.endAngle;e==this.leftKey&&n instanceof s.default&&n.isCounterClockwise()?a-=Math.PI/2:e==this.rightKey&&n instanceof s.default&&!n.isCounterClockwise()&&(a+=Math.PI/2),this.snake.addSegment(new o.default(r,new i.Vector(r.x+5*Math.cos(a),r.y+5*Math.sin(a)),n.isCollidable,a))}}},t.prototype.dispose=function(){window.removeEventListener("keydown",this.onKeyDown.bind(this)),window.removeEventListener("keyup",this.onKeyUp.bind(this))},t}()},"./src/LineSegment.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});var i,s=n("./src/Segment.ts"),o=(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const r=function(t){function e(e,n,i,s){var o=t.call(this)||this;return o.isCollidable=!0,o.startPoint=e,o.endPoint=n,o.isCollidable=i,o.endAngle=s,o}return o(e,t),e.prototype.draw=function(t,e){t.strokeStyle=e,t.lineCap="round",1==this.isCollidable&&(t.beginPath(),t.moveTo(this.startPoint.x,this.startPoint.y),t.lineTo(this.endPoint.x,this.endPoint.y),t.stroke(),t.closePath())},e.prototype.calcEndAngle=function(){return Math.atan((this.endPoint.y-this.startPoint.y)/(this.endPoint.x-this.startPoint.x))},Object.defineProperty(e.prototype,"length",{get:function(){return Math.sqrt(Math.pow(this.startPoint.x-this.endPoint.x,2)+Math.pow(this.startPoint.y-this.endPoint.y,2))},enumerable:!1,configurable:!0}),e.prototype.getContinuingSegment=function(t){var n=this.endPoint.clone().add(t);return new e(n,n,this.isCollidable,this.endAngle)},e}(s.default)},"./src/ParticleSystem/Emitter.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});var i=n("./src/ParticleSystem/Particle.ts"),s=n("./src/ParticleSystem/ParticleSystemUtils.ts"),o=function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},o.apply(this,arguments)};const r=function(){function t(t,e,n,i,s,o,r,a,c,h,d){void 0===s&&(s="circle"),void 0===a&&(a=!0),void 0===c&&(c=!0),void 0===d&&(d=0),this.aliveParticles=[],this.ticks=0,this.position=t,this.emitTime=e,this.size=n,this.speed=i,this.shape=s,this.color=o,this.canvasCtx=r,this.fadeColor=a,this.fadeSize=c,this.particleMaxAge=h,this.emitTimeMillis=d}return t.prototype.tick=function(t){this.emitTimeMillis+this.particleMaxAge<0||(this.emitTimeMillis-=t,this.ticks%this.emitTime==0&&this.emitTimeMillis>0&&(this.aliveParticles.push(new i.default(this.position.clone(),(0,s.getRandomDirection)(),this.size,this.speed,this.shape,o({},this.color),this.canvasCtx,this.particleMaxAge,this.fadeColor,this.fadeSize)),this.aliveParticles.push(new i.default(this.position.clone(),(0,s.getRandomDirection)(),this.size,this.speed,this.shape,o({},this.color),this.canvasCtx,this.particleMaxAge,this.fadeColor,this.fadeSize)),this.aliveParticles.push(new i.default(this.position.clone(),(0,s.getRandomDirection)(),this.size,this.speed,this.shape,o({},this.color),this.canvasCtx,this.particleMaxAge,this.fadeColor,this.fadeSize))),this.aliveParticles.forEach((function(e){e.tick(t)})),this.aliveParticles=this.aliveParticles.filter((function(t){return t.age>0})),this.ticks++)},t.prototype.draw=function(){this.aliveParticles.forEach((function(t){t.draw()}))},t}()},"./src/ParticleSystem/Particle.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>i});const i=function(){function t(t,e,n,i,s,o,r,a,c,h){void 0===s&&(s="circle"),this.position=t,this.velocity=e,this.size=n,this.speed=i,this.shape=s,this.color=o,this.canvasCtx=r,this.fadeColor=c,this.fadeSize=h,this.age=a,this.colorFadeAmount=this.color.a/this.age,this.sizeFadeAmount=this.size/this.age}return t.prototype.tick=function(t){this.position.add(this.velocity.clone().multiplyByScalar(t*this.speed)),this.fadeColor&&(this.color.a-=this.colorFadeAmount),this.fadeSize&&(this.size-=this.sizeFadeAmount),this.age--},t.prototype.draw=function(){switch(this.canvasCtx.moveTo(this.position.x,this.position.y),this.canvasCtx.fillStyle="rgba(".concat(this.color.r,",").concat(this.color.g,", ").concat(this.color.b,", ").concat(this.color.a,")"),this.canvasCtx.beginPath(),this.shape){case"circle":this.canvasCtx.arc(this.position.x,this.position.y,this.size,0,2*Math.PI),this.canvasCtx.fill();break;case"square":this.canvasCtx.fillRect(this.position.x-this.size,this.position.y-this.size,2*this.size,2*this.size)}this.canvasCtx.closePath()},t}()},"./src/ParticleSystem/ParticleSystemUtils.ts":(t,e,n)=>{n.r(e),n.d(e,{getRandomDirection:()=>s,hexToRgb:()=>o});var i=n("./node_modules/vector2d/src/Vec2D.js");function s(){return new i.Vector(2*Math.random()-1,2*Math.random()-1)}function o(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}},"./src/Segment.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>i});const i=function(){}},"./src/Snake.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>h});var i=n("./node_modules/vector2d/src/Vec2D.js"),s=n("./src/ArcSegment.ts"),o=n("./src/LineSegment.ts"),r=n("./src/ParticleSystem/Emitter.ts"),a=n("./src/ParticleSystem/ParticleSystemUtils.ts"),c=function(){return c=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},c.apply(this,arguments)};const h=function(){function t(t,e,n){this.segments=[],this.isAlive=!0,this.turnRadius=60,this.emitter=null,this.distanceToChangeOfState=10,this.addSegment(t),this.color=e,this.canvasCtx=n}return t.prototype.addSegment=function(t){this.segments.push(t)},Object.defineProperty(t.prototype,"head",{get:function(){return this.segments.slice(-1).pop()},enumerable:!1,configurable:!0}),t.prototype.draw=function(){var t=this;this.canvasCtx.lineWidth=12,this.segments.forEach((function(e,n){e.draw(t.canvasCtx,t.color),t.head==e&&(e instanceof s.default?(t.canvasCtx.beginPath(),t.canvasCtx.arc(e.center.x,e.center.y,e.radius,e.endAngle,e.endAngle,e.isCounterClockwise()),t.canvasCtx.stroke(),t.canvasCtx.closePath()):e instanceof o.default&&(t.canvasCtx.beginPath(),t.canvasCtx.moveTo(e.endPoint.x,e.endPoint.y),t.canvasCtx.lineTo(e.endPoint.x,e.endPoint.y),t.canvasCtx.stroke(),t.canvasCtx.closePath()))}))},t.prototype.move=function(t){if(this.isAlive){this.checkWalls();var e=this.head;if(e){if(e instanceof o.default){var n=t*Math.cos(e.endAngle),r=t*Math.sin(e.endAngle),a=new i.Vector(e.endPoint.x+n,e.endPoint.y+r);e.endPoint=a}else if(e instanceof s.default){var c=t/e.radius;e.endAngle=e.isCounterClockwise()?e.endAngle-c:e.endAngle+c}e.isCollidable&&this.distanceToChangeOfState<0&&(this.distanceToChangeOfState=80*Math.random()+30,e instanceof o.default?this.addSegment(new o.default(e.endPoint,new i.Vector(e.endPoint.x,e.endPoint.y),!1,e.endAngle)):e instanceof s.default&&this.addSegment(new s.default(e.center,e.radius,e.endAngle,e.endAngle,e.isCounterClockwise(),!1))),!e.isCollidable&&this.distanceToChangeOfState<0&&(this.distanceToChangeOfState=500*Math.random()+80,e instanceof o.default?this.addSegment(new o.default(e.endPoint,new i.Vector(e.endPoint.x,e.endPoint.y),!0,e.endAngle)):e instanceof s.default&&this.addSegment(new s.default(e.center,e.radius,e.endAngle,e.endAngle,e.isCounterClockwise(),!0))),this.distanceToChangeOfState-=t}}},t.prototype.kill=function(){console.log("SNAKE DEAD"),this.isAlive=!1,this.emitter=new r.default(this.head.endPoint,1,7,4,"circle",c(c({},(0,a.hexToRgb)(this.color)),{a:1}),this.canvasCtx,!0,!0,70,4)},t.prototype.updateEmitter=function(t){this.emitter&&(this.emitter.tick(t),this.emitter.draw())},t.prototype.checkWalls=function(){var t=this.head;t.endPoint.x<0?this.addSegment(t.getContinuingSegment(new i.Vector(this.canvasCtx.canvas.width,0))):t.endPoint.x>this.canvasCtx.canvas.width&&this.addSegment(t.getContinuingSegment(new i.Vector(-this.canvasCtx.canvas.width,0))),t.endPoint.y<0?this.addSegment(t.getContinuingSegment(new i.Vector(0,this.canvasCtx.canvas.height))):t.endPoint.y>this.canvasCtx.canvas.height&&this.addSegment(t.getContinuingSegment(new i.Vector(0,-this.canvasCtx.canvas.height)))},t}()},"./src/index.ts":(t,e,n)=>{n.r(e),n.d(e,{backgroundCanvas:()=>f,backgroundCanvasCtx:()=>p,fps:()=>d,gameCanvas:()=>l,gameCanvasCtx:()=>u,gridSize:()=>y});var i=n("./node_modules/vector2d/src/Vec2D.js"),s=n("./src/Drawer.ts"),o=n("./src/InputManager.ts"),r=n("./src/LineSegment.ts"),a=n("./src/Snake.ts"),c=n("./src/CollisionHandler.ts"),h=document.createElement("div");h.style.position="absolute",h.style.top="10px",h.style.left="10px",h.style.color="black",document.body.appendChild(h);var d=60,l=document.getElementById("game-canvas"),u=l.getContext("2d"),f=document.getElementById("background-canvas"),p=f.getContext("2d");f.width=f.getBoundingClientRect().width,f.height=f.getBoundingClientRect().height,l.width=l.getBoundingClientRect().width,l.height=l.getBoundingClientRect().height;var y=60,g=0,v=performance.now()/10;window.addEventListener("resize",(function(){l.width=l.getBoundingClientRect().width,l.height=l.getBoundingClientRect().height,f.width=f.getBoundingClientRect().width,f.height=f.getBoundingClientRect().height,(0,s.drawGrid)()})),(0,s.drawGrid)();for(var x=[],b=[],C=["#ef8888","#ff0000","#00aabb","#0000ee"],m=[["A","D"],["F","H"],["J","L"],["8","0"]],P=0;P<3;P++){var k=new i.Vector(1800*Math.random(),900*Math.random());x.push(new a.default(new r.default(k,k.add(new i.Vector(10,10)),!0,2*Math.random()*Math.PI),C[P],u)),b.push(new o.default(x[P],m[P][0],m[P][1]))}var w=new c.default(x);requestAnimationFrame((function t(){++g%10==0&&(d=function(){var t=performance.now()/10,e=t-v,n=Math.round(1e3/e);return v=t,n}(),h.innerText="FPS: ".concat(d)),u.clearRect(0,0,l.width,l.height),x.forEach((function(t){t.draw(),performance.now()>2e3&&t.move((performance.now()/10-v)/2),t.updateEmitter(.3)})),w.checkCollisions(),requestAnimationFrame(t)}))},"./node_modules/vector2d/src/AbstractVector.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10],i=function(){function t(t){this.ctor=t}return t.prototype.setAxes=function(t,e){return this.x=t,this.y=e,this},t.prototype.getX=function(){return this.x},t.prototype.setX=function(t){return this.x=t,this},t.prototype.getY=function(){return this.y},t.prototype.setY=function(t){return this.y=t,this},t.prototype.toString=function(t){return void 0===t&&(t=!1),t?"("+Math.round(this.x)+", "+Math.round(this.y)+")":"("+this.x+", "+this.y+")"},t.prototype.toArray=function(){return[this.x,this.y]},t.prototype.toObject=function(){return{x:this.x,y:this.y}},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.multiplyByVector=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.mulV=function(t){return this.multiplyByVector(t)},t.prototype.divideByVector=function(t){return this.x/=t.x,this.y/=t.y,this},t.prototype.divV=function(t){return this.divideByVector(t)},t.prototype.multiplyByScalar=function(t){return this.x*=t,this.y*=t,this},t.prototype.mulS=function(t){return this.multiplyByScalar(t)},t.prototype.divideByScalar=function(t){return this.x/=t,this.y/=t,this},t.prototype.divS=function(t){return this.divideByScalar(t)},t.prototype.normalise=function(){return this.divideByScalar(this.magnitude())},t.prototype.normalize=function(){return this.normalise()},t.prototype.unit=function(){return this.normalise()},t.prototype.magnitude=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.length=function(){return this.magnitude()},t.prototype.lengthSq=function(){var t=this.x,e=this.y;return t*t+e*e},t.prototype.dot=function(t){return t.x*this.x+t.y*this.y},t.prototype.cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this},t.prototype.zero=function(){return this.x=this.y=0,this},t.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),i=this.x,s=this.y;return this.x=i*e-s*n,this.y=i*n+s*e,this},t.prototype.round=function(t){void 0===t&&(t=2);var e=n[t];return this.x=(.5+this.x*e<<0)/e,this.y=(.5+this.y*e<<0)/e,this},t.prototype.clone=function(){return new this.ctor(this.x,this.y)},t}();e.AbstractVector=i},"./node_modules/vector2d/src/ArrayVector.js":function(t,e,n){var i,s=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(n,i){var s=t.call(this,e)||this;return s.axes=[n,i],s.ctor=e,s}return s(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.axes[0]},set:function(t){this.axes[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.axes[1]},set:function(t){this.axes[1]=t},enumerable:!0,configurable:!0}),e}(n("./node_modules/vector2d/src/AbstractVector.js").AbstractVector);e.ArrayVector=o},"./node_modules/vector2d/src/Float32Vector.js":function(t,e,n){var i,s=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(n,i){var s=t.call(this,e)||this;return s.axes=new Float32Array(2),s.axes[0]=n,s.axes[1]=i,s}return s(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.axes[0]},set:function(t){this.axes[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.axes[1]},set:function(t){this.axes[1]=t},enumerable:!0,configurable:!0}),e}(n("./node_modules/vector2d/src/AbstractVector.js").AbstractVector);e.Float32Vector=o},"./node_modules/vector2d/src/Vec2D.js":(t,e,n)=>{function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n("./node_modules/vector2d/src/AbstractVector.js")),i(n("./node_modules/vector2d/src/ArrayVector.js")),i(n("./node_modules/vector2d/src/Float32Vector.js")),i(n("./node_modules/vector2d/src/Vector.js"))},"./node_modules/vector2d/src/Vector.js":function(t,e,n){var i,s=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(n,i){var s=t.call(this,e)||this;return s._x=n,s._y=i,s}return s(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!0,configurable:!0}),e}(n("./node_modules/vector2d/src/AbstractVector.js").AbstractVector);e.Vector=o}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n("./src/index.ts")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QW9CSixHQUFVZCxLQUFLaUIsRUFBT3RFLFFBQVNzRSxFQUFRQSxFQUFPdEUsUUFBU2tFLEdBR3BFSSxFQUFPdEUsT0FDZixDQ3JCQWtFLEVBQW9CNUMsRUFBS2dELElBQ3hCLElBQUlFLEVBQVNGLEdBQVVBLEVBQU9HLFdBQzdCLElBQU9ILEVBQWlCLFFBQ3hCLElBQU0sRUFFUCxPQURBSixFQUFvQnJCLEVBQUUyQixFQUFRLENBQUVsSSxFQUFHa0ksSUFDNUJBLENBQU0sRUNMZE4sRUFBb0JyQixFQUFJLENBQUM3QyxFQUFTMEUsS0FDakMsSUFBSSxJQUFJeEssS0FBT3dLLEVBQ1hSLEVBQW9CUyxFQUFFRCxFQUFZeEssS0FBU2dLLEVBQW9CUyxFQUFFM0UsRUFBUzlGLElBQzVFNEYsT0FBT0MsZUFBZUMsRUFBUzlGLEVBQUssQ0FBRXVKLFlBQVksRUFBTUYsSUFBS21CLEVBQVd4SyxJQUUxRSxFQ05EZ0ssRUFBb0JTLEVBQUksQ0FBQ0MsRUFBS0MsSUFBVS9FLE9BQU9PLFVBQVV5QyxlQUFlTyxLQUFLdUIsRUFBS0MsR0NDbEZYLEVBQW9CekgsRUFBS3VELElBQ0gsb0JBQVg4RSxRQUEwQkEsT0FBT0MsYUFDMUNqRixPQUFPQyxlQUFlQyxFQUFTOEUsT0FBT0MsWUFBYSxDQUFFOUUsTUFBTyxXQUU3REgsT0FBT0MsZUFBZUMsRUFBUyxhQUFjLENBQUVDLE9BQU8sR0FBTyxFQ0ZwQ2lFLEVBQW9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9BcmNTZWdtZW50LnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvQ29sbGlzaW9uSGFuZGxlci50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL0RyYXdlci50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL0lucHV0TWFuYWdlci50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL0xpbmVTZWdtZW50LnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvUGFydGljbGVTeXN0ZW0vRW1pdHRlci50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL1BhcnRpY2xlU3lzdGVtL1BhcnRpY2xlLnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9zcmMvUGFydGljbGVTeXN0ZW0vUGFydGljbGVTeXN0ZW1VdGlscy50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL1NlZ21lbnQudHMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL3NyYy9TbmFrZS50cyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9ub2RlX21vZHVsZXMvdmVjdG9yMmQvc3JjL0Fic3RyYWN0VmVjdG9yLmpzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9ub2RlX21vZHVsZXMvdmVjdG9yMmQvc3JjL0FycmF5VmVjdG9yLmpzIiwid2VicGFjazovL3NuYWtlX2dhbWUvLi9ub2RlX21vZHVsZXMvdmVjdG9yMmQvc3JjL0Zsb2F0MzJWZWN0b3IuanMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL25vZGVfbW9kdWxlcy92ZWN0b3IyZC9zcmMvVmVjMkQuanMiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS8uL25vZGVfbW9kdWxlcy92ZWN0b3IyZC9zcmMvVmVjdG9yLmpzIiwid2VicGFjazovL3NuYWtlX2dhbWUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9zbmFrZV9nYW1lL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vc25ha2VfZ2FtZS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3NuYWtlX2dhbWUvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRyYXdBcmMsIGRyYXdBcnJvdywgZHJhd0RvdCB9IGZyb20gXCIuL0RyYXdlclwiO1xyXG5pbXBvcnQgKiBhcyBWZWMyRCBmcm9tICd2ZWN0b3IyZCc7XHJcbmltcG9ydCBTZWdtZW50IGZyb20gXCIuL1NlZ21lbnRcIjtcclxuaW1wb3J0IHsgZ2FtZUNhbnZhc0N0eCB9IGZyb20gXCIuL2luZGV4XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcmNTZWdtZW50IGV4dGVuZHMgU2VnbWVudCB7XHJcblxyXG5cclxuICAgIHB1YmxpYyBjZW50ZXI6IFZlYzJELlZlY3RvcjtcclxuICAgIHB1YmxpYyByYWRpdXM6IG51bWJlcjtcclxuICAgIHB1YmxpYyBzdGFydEFuZ2xlOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgZW5kQW5nbGU6IG51bWJlcjtcclxuICAgIHByaXZhdGUgY291bnRlckNsb2Nrd2lzZTogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBpc0NvbGxpZGFibGU6IGJvb2xlYW47XHJcblxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNlbnRlcjogVmVjMkQuVmVjdG9yLCByYWRpdXM6IG51bWJlciwgc3RhcnRBbmdsZTogbnVtYmVyLCBlbmRBbmdsZTogbnVtYmVyLCBjb3VudGVyQ2xvY2t3aXNlOiBib29sZWFuLCBpc0NvbGxpZGFibGU6IGJvb2xlYW4pIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuY2VudGVyID0gY2VudGVyO1xyXG4gICAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzO1xyXG4gICAgICAgIHRoaXMuc3RhcnRBbmdsZSA9IHN0YXJ0QW5nbGU7XHJcbiAgICAgICAgdGhpcy5lbmRBbmdsZSA9IGVuZEFuZ2xlO1xyXG4gICAgICAgIHRoaXMuY291bnRlckNsb2Nrd2lzZSA9IGNvdW50ZXJDbG9ja3dpc2U7XHJcbiAgICAgICAgdGhpcy5pc0NvbGxpZGFibGUgPSBpc0NvbGxpZGFibGU7XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgZHJhdyhjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGNvbG9yOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBjb250ZXh0LmxpbmVDYXAgPSBcInJvdW5kXCI7XHJcbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGNvbG9yO1xyXG4gICAgICAgIGlmICh0aGlzLmlzQ29sbGlkYWJsZSA9PSB0cnVlKXtcclxuICAgICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgY29udGV4dC5hcmModGhpcy5jZW50ZXIueCwgdGhpcy5jZW50ZXIueSwgdGhpcy5yYWRpdXMsIHRoaXMuc3RhcnRBbmdsZSwgdGhpcy5lbmRBbmdsZSwgdGhpcy5jb3VudGVyQ2xvY2t3aXNlKTtcclxuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcclxuICAgICAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0RlYnVnKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgY29sb3I6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIC8vIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSAnI2ZmMDBmZmZmJ1xyXG4gICAgICAgIGxldCB0YW5nZW50X2FuZ2xlID0gdGhpcy5jb3VudGVyQ2xvY2t3aXNlID8tIE1hdGguUEkgIDogTWF0aC5QSTtcclxuXHJcbiAgICAgICAgdGFuZ2VudF9hbmdsZSArPSB0aGlzLmVuZEFuZ2xlO1xyXG4gICAgICAgIGNvbnRleHQubGluZUNhcCA9IFwicm91bmRcIjtcclxuICAgICAgICBkcmF3RG90KHRoaXMuY2VudGVyLngsIHRoaXMuY2VudGVyLnksIDUsICcjMDAwMDAwJyk7XHJcbiAgICAgICAgZHJhd0Fycm93KGNvbnRleHQsbmV3IFZlYzJELlZlY3Rvcih0aGlzLmVuZFBvaW50LngsdGhpcy5lbmRQb2ludC55KSwgbmV3IFZlYzJELlZlY3Rvcih0aGlzLmVuZFBvaW50LnggKyB0aGlzLnJhZGl1cyAqIE1hdGguY29zKHRhbmdlbnRfYW5nbGUpLHRoaXMuZW5kUG9pbnQueSArIHRoaXMucmFkaXVzICogTWF0aC5zaW4odGFuZ2VudF9hbmdsZSkpKTtcclxuICAgICAgICBkcmF3QXJjKHRoaXMuY2VudGVyLngsIHRoaXMuY2VudGVyLnksIHRoaXMucmFkaXVzLCAwLCAwLCBmYWxzZSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldCBlbmRQb2ludCgpOiBWZWMyRC5WZWN0b3Ige1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMkQuVmVjdG9yKFxyXG4gICAgICAgIHRoaXMuY2VudGVyLnggKyB0aGlzLnJhZGl1cyAqIE1hdGguY29zKHRoaXMuZW5kQW5nbGUpLFxyXG4gICAgICAgIHRoaXMuY2VudGVyLnkgKyB0aGlzLnJhZGl1cyAqIE1hdGguc2luKHRoaXMuZW5kQW5nbGUpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcGVucGVuZGljdWxhckVuZEFuZ2xlKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNDb3VudGVyQ2xvY2t3aXNlPyB0aGlzLmVuZEFuZ2xlIC0gTWF0aC5QSSAvMiA6IHRoaXMuZW5kQW5nbGUgKyBNYXRoLlBJIC8gMjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcGVucGVuZGljdWxhclN0YXJ0QW5nbGUoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0NvdW50ZXJDbG9ja3dpc2U/IHRoaXMuc3RhcnRBbmdsZS0gTWF0aC5QSSAvMiA6IHRoaXMuc3RhcnRBbmdsZSArIE1hdGguUEkgLyAyO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQ291bnRlckNsb2Nrd2lzZSgpOiBib29sZWFue1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvdW50ZXJDbG9ja3dpc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29udGludWluZ1NlZ21lbnQodHJhbnNmb3JtOiBWZWMyRC5WZWN0b3IpOiBTZWdtZW50IHtcclxuICAgICAgICByZXR1cm4gbmV3IEFyY1NlZ21lbnQodGhpcy5jZW50ZXIuY2xvbmUoKS5hZGQodHJhbnNmb3JtKSBhcyBWZWMyRC5WZWN0b3IsIHRoaXMucmFkaXVzLCB0aGlzLmVuZEFuZ2xlLCB0aGlzLmVuZEFuZ2xlLCB0aGlzLmNvdW50ZXJDbG9ja3dpc2UsIHRoaXMuaXNDb2xsaWRhYmxlKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCJ2ZWN0b3IyZFwiO1xyXG5pbXBvcnQgQXJjU2VnbWVudCBmcm9tIFwiLi9BcmNTZWdtZW50XCI7XHJcbmltcG9ydCB7IGRyYXdBcmMsIGRyYXdEb3QgfSBmcm9tIFwiLi9EcmF3ZXJcIjtcclxuaW1wb3J0IExpbmVTZWdtZW50IGZyb20gXCIuL0xpbmVTZWdtZW50XCI7XHJcbmltcG9ydCBTbmFrZSBmcm9tIFwiLi9TbmFrZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29sbGlzaW9uSGFuZGxlciB7XHJcbiAgICBwcml2YXRlIHNuYWtlczogU25ha2VbXTtcclxuXHJcblxyXG4gICAgY29uc3RydWN0b3Ioc25ha2VzOiBTbmFrZVtdKSB7XHJcbiAgICAgICAgdGhpcy5zbmFrZXMgPSBzbmFrZXM7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBjaGVja0NvbGxpc2lvbnMoKTogU25ha2Uge1xyXG5cclxuICAgICAgICAvL3dlIHdpbGwgb25seSBjaGVjayB0aGUgaGVhZCBvZiBzbmFrZTEgYWdhaW5zdCBhbGwgb3RoZXIgc2VnbWVudHMgb24gdGhlIGJvYXJkIChzbG93KVxyXG4gICAgICAgIHRoaXMuc25ha2VzLmZvckVhY2goc25ha2UxID0+IHtcclxuICAgICAgICAgICAgLy9pZiB0aGUgc25ha2UgaXMgZGVhZCBpZ25vcmUgaXRcclxuICAgICAgICAgICAgaWYgKCFzbmFrZTEuaXNBbGl2ZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgLy9pZiB0aGUgaGVhZCBvZiB0aGUgc25ha2UgaXMgbm90IGNvbGxpZGFibGUgd2UgY2FuIHNraXAgYWxsIGZ1cnRoZXIgY2hlY2tzXHJcbiAgICAgICAgICAgIGlmICghc25ha2UxLmhlYWQuaXNDb2xsaWRhYmxlKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAvL2lmIHRoZSBhbmdsZSBvZiB0aGUgYXJjIHNlZ21lbnQgYXQgdGhlIGhlYWQgZXhlZWRzIDM2MCBkZWcga2lsbCB0aGUgc25ha2VcclxuICAgICAgICAgICAgaWYgKHNuYWtlMS5oZWFkIGluc3RhbmNlb2YgQXJjU2VnbWVudCAmJiBNYXRoLmFicyhzbmFrZTEuaGVhZC5lbmRBbmdsZSAtIHNuYWtlMS5oZWFkLnN0YXJ0QW5nbGUpID4gMiAqIE1hdGguUEkpIHtcclxuICAgICAgICAgICAgICAgIHNuYWtlMS5raWxsKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgc25ha2UgJHtzbmFrZTF9IGNvbW1pdGVkIGNpcmNsaWNpZGVgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zbmFrZXMuZm9yRWFjaChzbmFrZTIgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIHNuYWtlMi5zZWdtZW50cy5mb3JFYWNoKHNlZ21lbnQgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL3NraXAgdGhlIGNoZWNrcyBpZiB0aGUgc2VnbWVudCBpcyBub24gY29sbGlkYWJsZSBvciBpZiB0aGUgc2VnbWVudCBpcyBpdHNlbGZcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlZ21lbnQuaXNDb2xsaWRhYmxlIHx8IHNlZ21lbnQgPT09IHNuYWtlMS5oZWFkKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vd2hlbiB0dXJuaW5nIGlnbm9yZSB0aGUgbGluZSByaWdodCBiZWZvcmUsIHNob3VsZCBub3QgYmUgcG9zc2libGUgdG8gaGl0IGl0XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNuYWtlMiA9PT0gc25ha2UxICYmIHNlZ21lbnQgPT09IHNuYWtlMS5zZWdtZW50cy5zbGljZSgtMiwgLTEpLnBvcCgpKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWdtZW50IGluc3RhbmNlb2YgTGluZVNlZ21lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNQb2ludE9uTGluZShzZWdtZW50LCBzbmFrZTEuaGVhZC5lbmRQb2ludCwgMC41KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJraWxsZWQgYnkgc3RyYWlnaHQgKG5vdCBnYXkpXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coc2VnbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbmFrZTEua2lsbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzZWdtZW50IGluc3RhbmNlb2YgQXJjU2VnbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1BvaW50T25BcmMoc2VnbWVudCwgc25ha2UxLmhlYWQuZW5kUG9pbnQsIDIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImtpbGxlZCBieSBnYXkgKG5vdCBzdHJhaWdodClcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzZWdtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNuYWtlMS5raWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgaXNQb2ludE9uTGluZShsaW5lOiBMaW5lU2VnbWVudCwgcG9pbnQ6IFZlY3RvciwgZXBzaWxvbjogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IGxpbmVMZW5ndGggPSBsaW5lLmxlbmd0aFxyXG4gICAgICAgIGxldCBkMSA9IHBvaW50LmRpc3RhbmNlKGxpbmUuc3RhcnRQb2ludClcclxuICAgICAgICBsZXQgZDIgPSBwb2ludC5kaXN0YW5jZShsaW5lLmVuZFBvaW50KVxyXG5cclxuICAgICAgICBpZiAoTWF0aC5hYnMoZDEgKyBkMiAtIGxpbmVMZW5ndGgpIDwgZXBzaWxvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNQb2ludE9uQXJjKGFyYzogQXJjU2VnbWVudCwgcG9pbnQ6IFZlY3RvciwgZXBzaWxvbjogbnVtYmVyKSB7XHJcbiAgICAgICAgLy9pZiAoTWF0aC5hdGFuKChhcmMuY2VudGVyLnkgLSBwb2ludC55KSAvIChhcmMuY2VudGVyLnggLSBwb2ludC54KSkpXHJcbiAgICAgICAgbGV0IGRpc3RhbmNlID0gcG9pbnQuZGlzdGFuY2UoYXJjLmNlbnRlcik7XHJcblxyXG4gICAgICAgIGlmIChNYXRoLmFicyhkaXN0YW5jZSAtIGFyYy5yYWRpdXMpID4gZXBzaWxvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBhbmdsZSBvZiB0aGUgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGFyYydzIGNlbnRlclxyXG4gICAgICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5hdGFuMihwb2ludC55IC0gYXJjLmNlbnRlci55LCBwb2ludC54IC0gYXJjLmNlbnRlci54KTtcclxuICAgICAgICBjb25zdCBzdGFydEFuZ2xlID0gYXJjLnN0YXJ0QW5nbGU7XHJcbiAgICAgICAgY29uc3QgZW5kQW5nbGUgPSBhcmMuZW5kQW5nbGU7XHJcblxyXG4gICAgICAgIC8vIE5vcm1hbGl6ZSBhbmdsZXMgdG8gYmUgYmV0d2VlbiAwIGFuZCAyKlBJXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplQW5nbGUgPSAoYW5nbGU6IG51bWJlcik6IG51bWJlciA9PiB7XHJcbiAgICAgICAgICAgIGxldCBub3JtYWxpemVkID0gYW5nbGUgJSAoMiAqIE1hdGguUEkpO1xyXG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZCA8IDApIHtcclxuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWQgKz0gMiAqIE1hdGguUEk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZEFuZ2xlID0gbm9ybWFsaXplQW5nbGUoYW5nbGUpO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRTdGFydEFuZ2xlID0gbm9ybWFsaXplQW5nbGUoc3RhcnRBbmdsZSk7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZEVuZEFuZ2xlID0gbm9ybWFsaXplQW5nbGUoZW5kQW5nbGUpO1xyXG5cclxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgYW5nbGUgbGllcyB3aXRoaW4gdGhlIHN0YXJ0IGFuZCBlbmQgYW5nbGVzXHJcbiAgICAgICAgaWYgKG5vcm1hbGl6ZWRTdGFydEFuZ2xlIDw9IG5vcm1hbGl6ZWRFbmRBbmdsZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbm9ybWFsaXplZEFuZ2xlID49IG5vcm1hbGl6ZWRTdGFydEFuZ2xlICYmIG5vcm1hbGl6ZWRBbmdsZSA8PSBub3JtYWxpemVkRW5kQW5nbGU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWRBbmdsZSA+PSBub3JtYWxpemVkRW5kQW5nbGUgJiYgbm9ybWFsaXplZEFuZ2xlIDw9IG5vcm1hbGl6ZWRTdGFydEFuZ2xlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwidmVjdG9yMmRcIjtcbmltcG9ydCB7IGJhY2tncm91bmRDYW52YXMsIGJhY2tncm91bmRDYW52YXNDdHgsIGdyaWRTaXplIH0gZnJvbSBcIi4vaW5kZXhcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdHcmlkKCkge1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguY2xlYXJSZWN0KDAsIDAsIGJhY2tncm91bmRDYW52YXMud2lkdGgsIGJhY2tncm91bmRDYW52YXMuaGVpZ2h0KTtcbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LnN0cm9rZVN0eWxlID0gJ3JnYmEoMCwgMCwgMCwgMC4zKSc7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5saW5lV2lkdGggPSAyO1xuICAgIGZvciAodmFyIHggPSBncmlkU2l6ZTsgeCA8IGJhY2tncm91bmRDYW52YXMud2lkdGg7IHggKz0gZ3JpZFNpemUpIHtcbiAgICAgICAgYmFja2dyb3VuZENhbnZhc0N0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgYmFja2dyb3VuZENhbnZhc0N0eC5tb3ZlVG8oeCwgMCk7XG4gICAgICAgIGJhY2tncm91bmRDYW52YXNDdHgubGluZVRvKHgsIGJhY2tncm91bmRDYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgYmFja2dyb3VuZENhbnZhc0N0eC5zdHJva2UoKTtcbiAgICB9XG4gICAgZm9yICh2YXIgeSA9IGdyaWRTaXplOyB5IDwgYmFja2dyb3VuZENhbnZhcy5oZWlnaHQ7IHkgKz0gZ3JpZFNpemUpIHtcbiAgICAgICAgYmFja2dyb3VuZENhbnZhc0N0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgYmFja2dyb3VuZENhbnZhc0N0eC5tb3ZlVG8oMCwgeSk7XG4gICAgICAgIGJhY2tncm91bmRDYW52YXNDdHgubGluZVRvKGJhY2tncm91bmRDYW52YXMud2lkdGgsIHkpO1xuICAgICAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LnN0cm9rZSgpO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdEb3QoZG90WDogbnVtYmVyLCBkb3RZOiBudW1iZXIsIGRvdFNpemU6IG51bWJlciwgY29sb3I6IHN0cmluZykge1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguYmVnaW5QYXRoKCk7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5hcmMoXG4gICAgICAgIGRvdFgsXG4gICAgICAgIGRvdFksXG4gICAgICAgIGRvdFNpemUsXG4gICAgICAgIDAsXG4gICAgICAgIDIgKiBNYXRoLlBJLFxuICAgICAgICBmYWxzZVxuICAgICk7XG5cbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguZmlsbCgpO1xuXG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5jbG9zZVBhdGgoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdBcmMoZG90WDogbnVtYmVyLCBkb3RZOiBudW1iZXIsIHJhZGl1czogbnVtYmVyLCBzdGFydEFuZ2xlOiBudW1iZXIsIGVuZEFuZ2xlOiBudW1iZXIsIGNvdW50ZXJDbG9ja3dpc2U6IGJvb2xlYW4pIHtcbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmxpbmVDYXAgPSBcInJvdW5kXCI7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5zdHJva2VTdHlsZSA9IFwiIzM0NjZhYVwiO1xuICAgIGJhY2tncm91bmRDYW52YXNDdHguYmVnaW5QYXRoKCk7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5hcmMoZG90WCwgZG90WSwgcmFkaXVzLCAwLCAyICogTWF0aC5QSSwgY291bnRlckNsb2Nrd2lzZSk7XG5cbiAgICBiYWNrZ3JvdW5kQ2FudmFzQ3R4LmxpbmVXaWR0aCA9IDU7XG4gICAgYmFja2dyb3VuZENhbnZhc0N0eC5zdHJva2UoKTtcblxuICAgIGJhY2tncm91bmRDYW52YXNDdHguY2xvc2VQYXRoKCk7XG59XG5cblxuXG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3QXJyb3coY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGZyb206IFZlY3RvciwgdG86IFZlY3Rvcikge1xuICAgIGlmIChmcm9tLnggIT0gdG8ueCAmJiBmcm9tLnkgIT0gdG8ueSkge1xuICAgICAgICB2YXIgYW5nbGUgPSBNYXRoLmF0YW4yKHRvLnkgLSBmcm9tLnksIHRvLnggLSBmcm9tLngpO1xuICAgICAgICBjb25zdCB3aWR0aCA9IDEwO1xuICAgICAgICB2YXIgaGVhZExlbmd0aCA9IDEwO1xuICAgICAgICB2YXIgbmV3X3RvID0gbmV3IFZlY3Rvcih0by54LCB0by55KTtcbiAgICAgICAgLy8gVGhpcyBtYWtlcyBpdCBzbyB0aGUgZW5kIG9mIHRoZSBhcnJvdyBoZWFkIGlzIGxvY2F0ZWQgYXQgdG94LCB0b3ksIGRvbid0IGFzayB3aGVyZSAxLjE1IGNvbWVzIGZyb21cbiAgICAgICAgbmV3X3RvLnggLT0gTWF0aC5jb3MoYW5nbGUpICogKCh3aWR0aCAqIDEuMTUpKTtcbiAgICAgICAgbmV3X3RvLnkgLT0gTWF0aC5zaW4oYW5nbGUpICogKCh3aWR0aCAqIDEuMTUpKTtcblxuXG5cbiAgICAgICAgLy9zdGFydGluZyBwYXRoIG9mIHRoZSBhcnJvdyBmcm9tIHRoZSBzdGFydCBzcXVhcmUgdG8gdGhlIGVuZCBzcXVhcmUgYW5kIGRyYXdpbmcgdGhlIHN0cm9rZVxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5tb3ZlVG8oZnJvbS54LCBmcm9tLnkpO1xuICAgICAgICBjdHgubGluZVRvKG5ld190by54LCBuZXdfdG8ueSk7XG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IFwiI2JiYmJiYlwiO1xuICAgICAgICBjdHgubGluZVdpZHRoID0gd2lkdGg7XG4gICAgICAgIGN0eC5zdHJva2UoKTtcblxuICAgICAgICAvL3N0YXJ0aW5nIGEgbmV3IHBhdGggZnJvbSB0aGUgaGVhZCBvZiB0aGUgYXJyb3cgdG8gb25lIG9mIHRoZSBzaWRlcyBvZiB0aGUgcG9pbnRcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBjdHgubW92ZVRvKG5ld190by54LCBuZXdfdG8ueSk7XG4gICAgICAgIGN0eC5saW5lVG8obmV3X3RvLnggLSBoZWFkTGVuZ3RoICogTWF0aC5jb3MoYW5nbGUgLSBNYXRoLlBJIC8gNyksIG5ld190by55IC0gaGVhZExlbmd0aCAqIE1hdGguc2luKGFuZ2xlIC0gTWF0aC5QSSAvIDcpKTtcblxuICAgICAgICAvL3BhdGggZnJvbSB0aGUgc2lkZSBwb2ludCBvZiB0aGUgYXJyb3csIHRvIHRoZSBvdGhlciBzaWRlIHBvaW50XG4gICAgICAgIGN0eC5saW5lVG8obmV3X3RvLnggLSBoZWFkTGVuZ3RoICogTWF0aC5jb3MoYW5nbGUgKyBNYXRoLlBJIC8gNyksIG5ld190by55IC0gaGVhZExlbmd0aCAqIE1hdGguc2luKGFuZ2xlICsgTWF0aC5QSSAvIDcpKTtcblxuICAgICAgICAvL3BhdGggZnJvbSB0aGUgc2lkZSBwb2ludCBiYWNrIHRvIHRoZSB0aXAgb2YgdGhlIGFycm93LCBhbmQgdGhlbiBhZ2FpbiB0byB0aGUgb3Bwb3NpdGUgc2lkZSBwb2ludFxuICAgICAgICBjdHgubGluZVRvKG5ld190by54LCBuZXdfdG8ueSk7XG4gICAgICAgIGN0eC5saW5lVG8obmV3X3RvLnggLSBoZWFkTGVuZ3RoICogTWF0aC5jb3MoYW5nbGUgLSBNYXRoLlBJIC8gNyksIG5ld190by55IC0gaGVhZExlbmd0aCAqIE1hdGguc2luKGFuZ2xlIC0gTWF0aC5QSSAvIDcpKTtcblxuICAgICAgICAvL2RyYXdzIHRoZSBwYXRocyBjcmVhdGVkIGFib3ZlXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IFwiI2JiYmJiYlwiO1xuICAgICAgICBjdHgubGluZVdpZHRoID0gd2lkdGg7XG4gICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwiI2JiYmJiYlwiO1xuICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgfVxufSIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCJ2ZWN0b3IyZFwiO1xyXG5pbXBvcnQgQXJjU2VnbWVudCBmcm9tIFwiLi9BcmNTZWdtZW50XCI7XHJcbmltcG9ydCBMaW5lU2VnbWVudCBmcm9tIFwiLi9MaW5lU2VnbWVudFwiO1xyXG5pbXBvcnQgU25ha2UgZnJvbSBcIi4vU25ha2VcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIElucHV0TWFuYWdlciB7XHJcbiAgcHJpdmF0ZSBrZXlNYXA6IHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9ID0ge307XHJcbiAgcHJpdmF0ZSBzbmFrZTogU25ha2U7XHJcbiAgcHJpdmF0ZSBsZWZ0S2V5OiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSByaWdodEtleTogc3RyaW5nO1xyXG5cclxuICBjb25zdHJ1Y3RvcihzbmFrZTogU25ha2UsIGxlZnRLZXk6IHN0cmluZywgcmlnaHRLZXk6IHN0cmluZykge1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLm9uS2V5RG93bi5iaW5kKHRoaXMpKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMub25LZXlVcC5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuc25ha2UgPSBzbmFrZTtcclxuICAgIHRoaXMubGVmdEtleSA9IGxlZnRLZXk7XHJcbiAgICB0aGlzLnJpZ2h0S2V5ID0gcmlnaHRLZXk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uS2V5RG93bihldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG4gICAgLy9pZiBzbmFrZSBpcyBkZWFkLCBpZ25vcmUgdGhlIGtleSBwcmVzc2VzXHJcbiAgICBpZighdGhpcy5zbmFrZS5pc0FsaXZlKSByZXR1cm47XHJcblxyXG4gICAgY29uc3Qga2V5ID0gZXZlbnQua2V5LnRvVXBwZXJDYXNlKCk7XHJcbiAgICBcclxuXHJcbiAgICAvL2lnbm9yZSBrZXlzIG5vdCBhc3NpZ25lZCB0byBzZWxmLCB0aGlzIHdvdWxkIHJlc3VsdCBpbiB0aGUga2V5bWFwIGhhdmluZyB1bm5lY2Vzc2FyeSBrZXlzIGFuZCB0cmlnZ2VyaW5nIHRoZSBvbmtleVVwIGV2ZW50c1xyXG4gICAgaWYoa2V5ICE9IHRoaXMubGVmdEtleSAmJiBrZXkgIT0gdGhpcy5yaWdodEtleSl7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvL3N3aXRjaCBvZmYgdGhlIGN1cnJlbnQgZG93biBrZXkgaWYgdGhlIG90aGVyIGRpcmVjdGlvbiBpcyBwcmVzc2VkXHJcbiAgICBpZiAodGhpcy5rZXlNYXBbdGhpcy5yaWdodEtleV0gJiYga2V5ID09IHRoaXMubGVmdEtleSkge1xyXG4gICAgICB0aGlzLmtleU1hcFt0aGlzLnJpZ2h0S2V5XSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodGhpcy5rZXlNYXBbdGhpcy5sZWZ0S2V5XSAmJiBrZXkgPT0gdGhpcy5yaWdodEtleSkge1xyXG4gICAgICB0aGlzLmtleU1hcFt0aGlzLmxlZnRLZXldID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvL3JldHVybiBpZiB0aGUga2V5IGlzIGFscmFlZHkgaW4gdGhlIG1hcCwgcHJldmVudHMgYXV0b2NsaWNraW5nXHJcbiAgICBlbHNlIGlmICh0aGlzLmtleU1hcFtrZXldKSB7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgdGhpcy5rZXlNYXBba2V5XSA9IHRydWU7XHJcblxyXG5cclxuICAgIGxldCBoZWFkID0gdGhpcy5zbmFrZS5oZWFkO1xyXG4gICAgbGV0IGVuZFBvaW50ID0gaGVhZC5lbmRQb2ludDtcclxuICAgIGxldCB0YW5nZW50QW5nbGUgPSAwO1xyXG5cclxuICAgIC8vY2FsY3VsYXRlIHRoZSBzdGFydGluZyB0YW5nZW50IGFuZ2xlIG9mIHRoZSBsaW5lXHJcbiAgICBpZiAoaGVhZCBpbnN0YW5jZW9mIExpbmVTZWdtZW50KSB7XHJcbiAgICAgIHRhbmdlbnRBbmdsZSArPSBNYXRoLlBJIC8gMjtcclxuXHJcbiAgICAgIGlmIChrZXkgPT0gdGhpcy5yaWdodEtleSkge1xyXG4gICAgICAgIHRoaXMuc25ha2UuYWRkU2VnbWVudChuZXcgQXJjU2VnbWVudChuZXcgVmVjdG9yKFxyXG4gICAgICAgICAgZW5kUG9pbnQueCArIHRoaXMuc25ha2UudHVyblJhZGl1cyAqIE1hdGguY29zKHRoaXMuc25ha2UuaGVhZC5lbmRBbmdsZSArIHRhbmdlbnRBbmdsZSksXHJcbiAgICAgICAgICBlbmRQb2ludC55ICsgdGhpcy5zbmFrZS50dXJuUmFkaXVzICogTWF0aC5zaW4odGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlICsgdGFuZ2VudEFuZ2xlKSksXHJcbiAgICAgICAgICB0aGlzLnNuYWtlLnR1cm5SYWRpdXMsIHRoaXMuc25ha2UuaGVhZC5lbmRBbmdsZSAtIHRhbmdlbnRBbmdsZSwgdGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlIC0gdGFuZ2VudEFuZ2xlLCBmYWxzZSwgaGVhZC5pc0NvbGxpZGFibGUpKVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChrZXkgPT0gdGhpcy5sZWZ0S2V5KSB7XHJcbiAgICAgICAgdGhpcy5zbmFrZS5hZGRTZWdtZW50KG5ldyBBcmNTZWdtZW50KG5ldyBWZWN0b3IoXHJcbiAgICAgICAgICBlbmRQb2ludC54ICsgdGhpcy5zbmFrZS50dXJuUmFkaXVzICogTWF0aC5jb3ModGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlIC0gdGFuZ2VudEFuZ2xlKSxcclxuICAgICAgICAgIGVuZFBvaW50LnkgKyB0aGlzLnNuYWtlLnR1cm5SYWRpdXMgKiBNYXRoLnNpbih0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgLSB0YW5nZW50QW5nbGUpKSxcclxuICAgICAgICAgIHRoaXMuc25ha2UudHVyblJhZGl1cywgdGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlICsgdGFuZ2VudEFuZ2xlLCB0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgKyB0YW5nZW50QW5nbGUsIHRydWUsIGhlYWQuaXNDb2xsaWRhYmxlKSlcclxuICAgICAgfVxyXG5cclxuICAgIH0gXHJcbiAgICAvLyBcclxuICAgIGVsc2UgaWYgKGhlYWQgaW5zdGFuY2VvZiBBcmNTZWdtZW50KSB7XHJcblxyXG4gICAgICB0YW5nZW50QW5nbGUgPSBoZWFkLmlzQ291bnRlckNsb2Nrd2lzZSA/IC1NYXRoLlBJIDogTWF0aC5QSTtcclxuICAgICAgaWYgKGtleSA9PSB0aGlzLnJpZ2h0S2V5KSB7XHJcbiAgICAgICAgdGhpcy5zbmFrZS5hZGRTZWdtZW50KG5ldyBBcmNTZWdtZW50KG5ldyBWZWN0b3IoXHJcbiAgICAgICAgICBlbmRQb2ludC54IC0gdGhpcy5zbmFrZS50dXJuUmFkaXVzICogTWF0aC5jb3ModGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlICsgdGFuZ2VudEFuZ2xlKSxcclxuICAgICAgICAgIGVuZFBvaW50LnkgLSB0aGlzLnNuYWtlLnR1cm5SYWRpdXMgKiBNYXRoLnNpbih0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgKyB0YW5nZW50QW5nbGUpKSxcclxuICAgICAgICAgIHRoaXMuc25ha2UudHVyblJhZGl1cywgdGhpcy5zbmFrZS5oZWFkLmVuZEFuZ2xlIC0gdGFuZ2VudEFuZ2xlLCB0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgLSB0YW5nZW50QW5nbGUsIGZhbHNlLCBoZWFkLmlzQ29sbGlkYWJsZSkpXHJcbiAgICAgIH1cclxuICAgICAgaWYgKGtleSA9PSB0aGlzLmxlZnRLZXkpIHtcclxuICAgICAgICB0aGlzLnNuYWtlLmFkZFNlZ21lbnQobmV3IEFyY1NlZ21lbnQobmV3IFZlY3RvcihcclxuICAgICAgICAgIGVuZFBvaW50LnggLSB0aGlzLnNuYWtlLnR1cm5SYWRpdXMgKiBNYXRoLmNvcyh0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgLSB0YW5nZW50QW5nbGUpLFxyXG4gICAgICAgICAgZW5kUG9pbnQueSAtIHRoaXMuc25ha2UudHVyblJhZGl1cyAqIE1hdGguc2luKHRoaXMuc25ha2UuaGVhZC5lbmRBbmdsZSAtIHRhbmdlbnRBbmdsZSkpLFxyXG4gICAgICAgICAgdGhpcy5zbmFrZS50dXJuUmFkaXVzLCB0aGlzLnNuYWtlLmhlYWQuZW5kQW5nbGUgKyB0YW5nZW50QW5nbGUsIHRoaXMuc25ha2UuaGVhZC5lbmRBbmdsZSArIHRhbmdlbnRBbmdsZSwgdHJ1ZSwgaGVhZC5pc0NvbGxpZGFibGUpKVxyXG4gICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gIH1cclxuICBwcml2YXRlIG9uS2V5VXAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuICAgIC8vaWYgc25ha2UgaXMgZGVhZCwgaWdub3JlIHRoZSBrZXkgcHJlc3Nlc1xyXG4gICAgaWYoIXRoaXMuc25ha2UuaXNBbGl2ZSkgcmV0dXJuO1xyXG4gICAgXHJcbiAgICBjb25zdCBrZXkgPSBldmVudC5rZXkudG9VcHBlckNhc2UoKTtcclxuXHJcbiAgICAvL2NoZWNrIGlmIHRoZSBrZXkgaXMgaW4gdGhlIGtleW1hcCwgaWYgbm90IGp1c3QgaWdub3JlIGl0XHJcbiAgICBpZiAoIXRoaXMua2V5TWFwW2tleV0pIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5rZXlNYXBba2V5XSA9IGZhbHNlO1xyXG5cclxuICAgIC8vY29uc29sZS5sb2codGhpcy5zbmFrZS5oZWFkKTtcclxuXHJcbiAgICBsZXQgaGVhZCA9IHRoaXMuc25ha2UuaGVhZDtcclxuICAgIGxldCBlbmRQb2ludCA9IGhlYWQuZW5kUG9pbnQ7XHJcbiAgICBsZXQgYW5nbGUgPSBoZWFkLmVuZEFuZ2xlO1xyXG5cclxuICAgIGlmIChrZXkgPT0gdGhpcy5sZWZ0S2V5ICYmIGhlYWQgaW5zdGFuY2VvZiBBcmNTZWdtZW50ICYmIGhlYWQuaXNDb3VudGVyQ2xvY2t3aXNlKCkpIHtcclxuXHJcbiAgICAgIGFuZ2xlIC09IE1hdGguUEkgLyAyO1xyXG4gICAgfSBlbHNlIGlmIChrZXkgPT0gdGhpcy5yaWdodEtleSAmJiBoZWFkIGluc3RhbmNlb2YgQXJjU2VnbWVudCAmJiAhaGVhZC5pc0NvdW50ZXJDbG9ja3dpc2UoKSkge1xyXG5cclxuICAgICAgYW5nbGUgKz0gTWF0aC5QSSAvIDI7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICB0aGlzLnNuYWtlLmFkZFNlZ21lbnQobmV3IExpbmVTZWdtZW50KGVuZFBvaW50LFxyXG4gICAgICBuZXcgVmVjdG9yKGVuZFBvaW50LnggKyA1ICogTWF0aC5jb3MoYW5nbGUpLCBlbmRQb2ludC55ICsgNSAqIE1hdGguc2luKGFuZ2xlKSksIGhlYWQuaXNDb2xsaWRhYmxlICxhbmdsZSkpO1xyXG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLnNuYWtlLmhlYWQpO1xyXG4gIH1cclxuXHJcblxyXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLm9uS2V5RG93bi5iaW5kKHRoaXMpKTtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMub25LZXlVcC5iaW5kKHRoaXMpKTtcclxuICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCJ2ZWN0b3IyZFwiO1xyXG5pbXBvcnQgU2VnbWVudCBmcm9tIFwiLi9TZWdtZW50XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaW5lU2VnbWVudCBleHRlbmRzIFNlZ21lbnQge1xyXG5cclxuXHJcbiAgICBwdWJsaWMgc3RhcnRQb2ludDogVmVjdG9yO1xyXG4gICAgcHVibGljIGVuZFBvaW50OiBWZWN0b3I7XHJcbiAgICBwdWJsaWMgZW5kQW5nbGU6IG51bWJlcjtcclxuICAgIHB1YmxpYyBpc0NvbGxpZGFibGU6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHN0YXJ0OiBWZWN0b3IsIGVuZDogVmVjdG9yLCBpc0NvbGxpZGFibGU6IGJvb2xlYW4sIGFuZ2xlPzogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnN0YXJ0UG9pbnQgPSBzdGFydDtcclxuICAgICAgICB0aGlzLmVuZFBvaW50ID0gZW5kO1xyXG4gICAgICAgIHRoaXMuaXNDb2xsaWRhYmxlID0gaXNDb2xsaWRhYmxlO1xyXG4gICAgICAgIHRoaXMuZW5kQW5nbGUgPSBhbmdsZTtcclxuICAgICAgICBcclxuICAgICAgfVxyXG5cclxuICAgICAgZHJhdyhjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGNvbG9yOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAvLyBjb250ZXh0LnN0cm9rZVN0eWxlID0gJyNmZjAwZmZmZidcclxuICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gY29sb3I7XHJcbiAgICAgICAgY29udGV4dC5saW5lQ2FwID0gXCJyb3VuZFwiO1xyXG4gICAgICAgIGlmICh0aGlzLmlzQ29sbGlkYWJsZSA9PSB0cnVlKXtcclxuICAgICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgY29udGV4dC5tb3ZlVG8odGhpcy5zdGFydFBvaW50LngsIHRoaXMuc3RhcnRQb2ludC55KTtcclxuICAgICAgICAgICAgY29udGV4dC5saW5lVG8odGhpcy5lbmRQb2ludC54LCB0aGlzLmVuZFBvaW50LnkpO1xyXG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgY2FsY0VuZEFuZ2xlKCk6IG51bWJlcntcclxuICAgICAgICByZXR1cm4gTWF0aC5hdGFuKCh0aGlzLmVuZFBvaW50LnkgLSB0aGlzLnN0YXJ0UG9pbnQueSkgLyAodGhpcy5lbmRQb2ludC54IC0gdGhpcy5zdGFydFBvaW50LngpKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbGVuZ3RoKCk6IG51bWJlcntcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KCh0aGlzLnN0YXJ0UG9pbnQueCAtIHRoaXMuZW5kUG9pbnQueCkqKjIgKyAodGhpcy5zdGFydFBvaW50LnkgLSB0aGlzLmVuZFBvaW50LnkpKioyKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb250aW51aW5nU2VnbWVudCh0cmFuc2Zvcm06IFZlY3Rvcik6IFNlZ21lbnQge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybWVkRW5kcG9pbnQgPSB0aGlzLmVuZFBvaW50LmNsb25lKCkuYWRkKHRyYW5zZm9ybSkgYXMgVmVjdG9yO1xyXG4gICAgICAgIHJldHVybiBuZXcgTGluZVNlZ21lbnQoXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkRW5kcG9pbnQsIFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1lZEVuZHBvaW50LCBcclxuICAgICAgICAgICAgdGhpcy5pc0NvbGxpZGFibGUsIFxyXG4gICAgICAgICAgICB0aGlzLmVuZEFuZ2xlXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwidmVjdG9yMmRcIjtcclxuaW1wb3J0IFBhcnRpY2xlLCB7IHNoYXBlIH0gZnJvbSBcIi4vUGFydGljbGVcIjtcclxuaW1wb3J0IHsgZ2V0UmFuZG9tRGlyZWN0aW9uIH0gZnJvbSBcIi4vUGFydGljbGVTeXN0ZW1VdGlsc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW1pdHRlcntcclxuICAgIHByaXZhdGUgYWxpdmVQYXJ0aWNsZXM6IFBhcnRpY2xlW10gPSBbXTtcclxuICAgIHB1YmxpYyBwb3NpdGlvbjogVmVjdG9yO1xyXG4gICAgcHVibGljIGVtaXRUaW1lOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgc2hhcGU6IHNoYXBlO1xyXG4gICAgcHVibGljIHNpemU6IG51bWJlcjtcclxuICAgIHB1YmxpYyBzcGVlZDogbnVtYmVyO1xyXG4gICAgcHVibGljIGNvbG9yOiB7cjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciwgYTogbnVtYmVyfTtcclxuICAgIHB1YmxpYyBmYWRlQ29sb3I6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgZmFkZVNpemU6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgcGFydGljbGVNYXhBZ2U6IG51bWJlcjtcclxuICAgIHB1YmxpYyBjYW52YXNDdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIHB1YmxpYyBlbWl0VGltZU1pbGxpczogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB0aWNrczogbnVtYmVyID0gMDtcclxuICAgIFxyXG5cclxuICAgIFxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHBvc2l0aW9uOiBWZWN0b3IsIGVtaXRJbnRlcnZhbDogbnVtYmVyLCBzaXplOiBudW1iZXIsIHNwZWVkOiBudW1iZXIsIHNoYXBlOiBzaGFwZSA9ICdjaXJjbGUnLCBjb2xvcjoge3I6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIsIGE6IG51bWJlcn0sIGNhbnZhc0N0eDpDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsICBmYWRlQ29sb3I6IGJvb2xlYW4gPSB0cnVlLCBmYWRlU2l6ZTogYm9vbGVhbiA9IHRydWUsIGFnZTogbnVtYmVyLCBlbWl0VGltZU1pbGxpczogbnVtYmVyID0gMCl7XHJcbiAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICB0aGlzLmVtaXRUaW1lID0gZW1pdEludGVydmFsO1xyXG4gICAgdGhpcy5zaXplID0gc2l6ZTtcclxuICAgIHRoaXMuc3BlZWQgPSBzcGVlZDtcclxuICAgIHRoaXMuc2hhcGUgPSBzaGFwZTtcclxuICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcclxuICAgIHRoaXMuY2FudmFzQ3R4ID0gY2FudmFzQ3R4O1xyXG4gICAgdGhpcy5mYWRlQ29sb3IgPSBmYWRlQ29sb3I7XHJcbiAgICB0aGlzLmZhZGVTaXplID0gZmFkZVNpemU7IFxyXG4gICAgdGhpcy5wYXJ0aWNsZU1heEFnZSA9IGFnZTtcclxuICAgIHRoaXMuZW1pdFRpbWVNaWxsaXMgPSBlbWl0VGltZU1pbGxpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdGljayhkdDogbnVtYmVyKXtcclxuICAgICAgICBpZiAoKHRoaXMuZW1pdFRpbWVNaWxsaXMgKyB0aGlzLnBhcnRpY2xlTWF4QWdlKSA8IDApIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5lbWl0VGltZU1pbGxpcyAtPSBkdDtcclxuXHJcblxyXG4gICAgICAgIGlmICh0aGlzLnRpY2tzICUgdGhpcy5lbWl0VGltZSA9PSAwICYmIHRoaXMuZW1pdFRpbWVNaWxsaXMgPiAwKXtcclxuICAgICAgICAgICAgdGhpcy5hbGl2ZVBhcnRpY2xlcy5wdXNoKG5ldyBQYXJ0aWNsZSh0aGlzLnBvc2l0aW9uLmNsb25lKCkgYXMgVmVjdG9yLCBnZXRSYW5kb21EaXJlY3Rpb24oKSwgdGhpcy5zaXplLCB0aGlzLnNwZWVkLCB0aGlzLnNoYXBlLHsuLi50aGlzLmNvbG9yfSx0aGlzLmNhbnZhc0N0eCwgdGhpcy5wYXJ0aWNsZU1heEFnZSwgdGhpcy5mYWRlQ29sb3IsIHRoaXMuZmFkZVNpemUpKTtcclxuICAgICAgICAgICAgdGhpcy5hbGl2ZVBhcnRpY2xlcy5wdXNoKG5ldyBQYXJ0aWNsZSh0aGlzLnBvc2l0aW9uLmNsb25lKCkgYXMgVmVjdG9yLCBnZXRSYW5kb21EaXJlY3Rpb24oKSwgdGhpcy5zaXplLCB0aGlzLnNwZWVkLCB0aGlzLnNoYXBlLHsuLi50aGlzLmNvbG9yfSx0aGlzLmNhbnZhc0N0eCwgdGhpcy5wYXJ0aWNsZU1heEFnZSwgdGhpcy5mYWRlQ29sb3IsIHRoaXMuZmFkZVNpemUpKTtcclxuICAgICAgICAgICAgdGhpcy5hbGl2ZVBhcnRpY2xlcy5wdXNoKG5ldyBQYXJ0aWNsZSh0aGlzLnBvc2l0aW9uLmNsb25lKCkgYXMgVmVjdG9yLCBnZXRSYW5kb21EaXJlY3Rpb24oKSwgdGhpcy5zaXplLCB0aGlzLnNwZWVkLCB0aGlzLnNoYXBlLHsuLi50aGlzLmNvbG9yfSx0aGlzLmNhbnZhc0N0eCwgdGhpcy5wYXJ0aWNsZU1heEFnZSwgdGhpcy5mYWRlQ29sb3IsIHRoaXMuZmFkZVNpemUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hbGl2ZVBhcnRpY2xlcy5mb3JFYWNoKHBhcnRpY2xlID0+IHtcclxuICAgICAgICAgICAgcGFydGljbGUudGljayhkdClcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hbGl2ZVBhcnRpY2xlcyA9IHRoaXMuYWxpdmVQYXJ0aWNsZXMuZmlsdGVyKHBhcnRpY2xlID0+IHBhcnRpY2xlLmFnZSA+IDApO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy50aWNrcysrO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KCl7XHJcbiAgICAgICAgdGhpcy5hbGl2ZVBhcnRpY2xlcy5mb3JFYWNoKHBhcnRpY2xlID0+IHtcclxuICAgICAgICAgICAgcGFydGljbGUuZHJhdygpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcInZlY3RvcjJkXCI7XHJcbmV4cG9ydCB0eXBlIHNoYXBlID0gJ2NpcmNsZScgfCAnc3F1YXJlJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFydGljbGUge1xyXG4gICAgcG9zaXRpb246IFZlY3RvcjtcclxuICAgIHZlbG9jaXR5OiBWZWN0b3I7XHJcbiAgICBzaGFwZTogc2hhcGU7XHJcbiAgICBzaXplOiBudW1iZXI7XHJcbiAgICBzcGVlZDogbnVtYmVyO1xyXG4gICAgY29sb3I6IHtyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBhOiBudW1iZXJ9O1xyXG4gICAgZmFkZUNvbG9yOiBib29sZWFuO1xyXG4gICAgZmFkZVNpemU6IGJvb2xlYW47XHJcbiAgICBhZ2U6IG51bWJlcjtcclxuICAgIGNhbnZhc0N0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG4gICAgcHJpdmF0ZSBzaXplRmFkZUFtb3VudDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBjb2xvckZhZGVBbW91bnQ6IG51bWJlcjtcclxuXHJcbiBcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocG9zaXRpb246IFZlY3RvciwgdmVsb2NpdHk6IFZlY3Rvciwgc2l6ZTogbnVtYmVyLCBzcGVlZDogbnVtYmVyLCAgc2hhcGU6IHNoYXBlID0gJ2NpcmNsZScsIGNvbG9yOiB7cjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciwgYTogbnVtYmVyfSwgY2FudmFzQ3R4OkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgYWdlOiBudW1iZXIsICBmYWRlQ29sb3I/OiBib29sZWFuLCBmYWRlU2l6ZT86IGJvb2xlYW4pe1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgICAgICB0aGlzLnZlbG9jaXR5ID0gdmVsb2NpdHk7XHJcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcclxuICAgICAgICB0aGlzLnNwZWVkID0gc3BlZWQ7XHJcbiAgICAgICAgdGhpcy5zaGFwZSA9IHNoYXBlO1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcclxuICAgICAgICB0aGlzLmNhbnZhc0N0eCA9IGNhbnZhc0N0eDtcclxuICAgICAgICB0aGlzLmZhZGVDb2xvciA9IGZhZGVDb2xvcjtcclxuICAgICAgICB0aGlzLmZhZGVTaXplID0gZmFkZVNpemU7IFxyXG4gICAgICAgIHRoaXMuYWdlID0gYWdlO1xyXG4gICAgICAgIHRoaXMuY29sb3JGYWRlQW1vdW50ID0gdGhpcy5jb2xvci5hL3RoaXMuYWdlO1xyXG4gICAgICAgIHRoaXMuc2l6ZUZhZGVBbW91bnQgPSB0aGlzLnNpemUvdGhpcy5hZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRpY2soZHQ6IG51bWJlcil7XHJcblxyXG4gICAgICAgIHRoaXMucG9zaXRpb24uYWRkKHRoaXMudmVsb2NpdHkuY2xvbmUoKS5tdWx0aXBseUJ5U2NhbGFyKGR0ICogdGhpcy5zcGVlZCkpO1xyXG4gICAgICAgIGlmKHRoaXMuZmFkZUNvbG9yKXtcclxuICAgICAgICAgICAgdGhpcy5jb2xvci5hIC09IHRoaXMuY29sb3JGYWRlQW1vdW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLmZhZGVTaXplKXtcclxuICAgICAgICAgICAgdGhpcy5zaXplIC09ICB0aGlzLnNpemVGYWRlQW1vdW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFnZS0tO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KCl7XHJcbiAgICAgICAgdGhpcy5jYW52YXNDdHgubW92ZVRvKHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55KTtcclxuICAgICAgICB0aGlzLmNhbnZhc0N0eC5maWxsU3R5bGUgPSBgcmdiYSgke3RoaXMuY29sb3Iucn0sJHt0aGlzLmNvbG9yLmd9LCAke3RoaXMuY29sb3IuYn0sICR7dGhpcy5jb2xvci5hfSlgO1xyXG4gICAgICAgIHRoaXMuY2FudmFzQ3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5zaGFwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdjaXJjbGUnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguYXJjKHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55LCB0aGlzLnNpemUsIDAsIDIqTWF0aC5QSSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5maWxsKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnc3F1YXJlJzpcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmZpbGxSZWN0KHRoaXMucG9zaXRpb24ueC10aGlzLnNpemUsIHRoaXMucG9zaXRpb24ueS10aGlzLnNpemUsIHRoaXMuc2l6ZSoyLCB0aGlzLnNpemUqMik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jYW52YXNDdHguY2xvc2VQYXRoKCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcInZlY3RvcjJkXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tRGlyZWN0aW9uKCk6IFZlY3RvcntcclxuXHJcbiAgICByZXR1cm4obmV3IFZlY3RvcihNYXRoLnJhbmRvbSgpKjItMSwgTWF0aC5yYW5kb20oKSoyLTEpKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGV4VG9SZ2IoaGV4OiBzdHJpbmcpIHtcclxuICAgIHZhciByZXN1bHQgPSAvXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pLmV4ZWMoaGV4KTtcclxuICAgIHJldHVybiByZXN1bHQgPyB7XHJcbiAgICAgIHI6IHBhcnNlSW50KHJlc3VsdFsxXSwgMTYpLFxyXG4gICAgICBnOiBwYXJzZUludChyZXN1bHRbMl0sIDE2KSxcclxuICAgICAgYjogcGFyc2VJbnQocmVzdWx0WzNdLCAxNilcclxuICAgIH0gOiBudWxsO1xyXG4gIH0iLCJpbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwidmVjdG9yMmRcIjtcblxuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgU2VnbWVudCB7XG4gICAgYWJzdHJhY3QgaXNDb2xsaWRhYmxlOiBib29sZWFuO1xuICAgIGFic3RyYWN0IGRyYXcoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBjb2xvcjogc3RyaW5nKTogdm9pZDtcbiAgICBhYnN0cmFjdCBnZXQgZW5kQW5nbGUoKTogbnVtYmVyO1xuICAgIGFic3RyYWN0IGdldCBlbmRQb2ludCgpOiBWZWN0b3I7XG4gICAgYWJzdHJhY3QgZ2V0Q29udGludWluZ1NlZ21lbnQodHJhbnNmb3JtOiBWZWN0b3IpOiBTZWdtZW50O1xufSIsImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCJ2ZWN0b3IyZFwiO1xuaW1wb3J0IEFyY1NlZ21lbnQgZnJvbSBcIi4vQXJjU2VnbWVudFwiO1xuaW1wb3J0IExpbmVTZWdtZW50IGZyb20gXCIuL0xpbmVTZWdtZW50XCI7XG5pbXBvcnQgU2VnbWVudCBmcm9tIFwiLi9TZWdtZW50XCI7XG5pbXBvcnQgRW1pdHRlciBmcm9tIFwiLi9QYXJ0aWNsZVN5c3RlbS9FbWl0dGVyXCI7XG5pbXBvcnQgeyBoZXhUb1JnYiB9IGZyb20gXCIuL1BhcnRpY2xlU3lzdGVtL1BhcnRpY2xlU3lzdGVtVXRpbHNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU25ha2Uge1xuICAgIHB1YmxpYyBzZWdtZW50czogU2VnbWVudFtdID0gW107XG4gICAgcHJpdmF0ZSBjb2xvcjogc3RyaW5nO1xuICAgIHB1YmxpYyBpc0FsaXZlOiBib29sZWFuID0gdHJ1ZTtcbiAgICBwdWJsaWMgdHVyblJhZGl1czogbnVtYmVyID0gNjA7XG4gICAgcHJpdmF0ZSBlbWl0dGVyOiBFbWl0dGVyIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBjYW52YXNDdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcbiAgICBwcml2YXRlIGRpc3RhbmNlVG9DaGFuZ2VPZlN0YXRlOiBudW1iZXIgPSAxMDtcblxuXG4gICAgY29uc3RydWN0b3Ioc3RhcnRQb3M6IExpbmVTZWdtZW50LCBjb2xvcjogc3RyaW5nLCBjYW52YXNDdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xuICAgICAgICB0aGlzLmFkZFNlZ21lbnQoc3RhcnRQb3MpO1xuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgICAgIHRoaXMuY2FudmFzQ3R4ID0gY2FudmFzQ3R4XG4gICAgfVxuICAgIGFkZFNlZ21lbnQoc2VnbWVudDogU2VnbWVudCkge1xuICAgICAgICB0aGlzLnNlZ21lbnRzLnB1c2goc2VnbWVudCk7XG4gICAgfVxuXG4gICAgZ2V0IGhlYWQoKTogU2VnbWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzLnNsaWNlKC0xKS5wb3AoKTtcbiAgICB9XG5cbiAgICBkcmF3KCkge1xuICAgICAgICB0aGlzLmNhbnZhc0N0eC5saW5lV2lkdGggPSAxMjtcbiAgICAgICAgLy9UT0RPIGZpeCB0aGlzIHRvIGJlIGEgc2luZ2xlIHBhdGhcbiAgICAgICAgLy8gY29udGV4dC5iZWdpblBhdGgoKTtcblxuICAgICAgICB0aGlzLnNlZ21lbnRzLmZvckVhY2goKHNlZ21lbnQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBzZWdtZW50LmRyYXcodGhpcy5jYW52YXNDdHgsIHRoaXMuY29sb3IpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaGVhZCAhPSBzZWdtZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBBcmNTZWdtZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gc2VnbWVudC5kcmF3RGVidWcodGhpcy5jYW52YXNDdHgsICcjNjY2NjY2Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguYXJjKHNlZ21lbnQuY2VudGVyLngsIHNlZ21lbnQuY2VudGVyLnksIHNlZ21lbnQucmFkaXVzLCBzZWdtZW50LmVuZEFuZ2xlLCBzZWdtZW50LmVuZEFuZ2xlLCBzZWdtZW50LmlzQ291bnRlckNsb2Nrd2lzZSgpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5zdHJva2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBMaW5lU2VnbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4Lm1vdmVUbyhzZWdtZW50LmVuZFBvaW50LngsIHNlZ21lbnQuZW5kUG9pbnQueSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHgubGluZVRvKHNlZ21lbnQuZW5kUG9pbnQueCwgc2VnbWVudC5lbmRQb2ludC55KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5zdHJva2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgfVxuXG4gICAgbW92ZShkaXN0YW5jZTogbnVtYmVyKSB7XG4gICAgICAgIC8vZG8gbm90IG1vdmUgaXMgZGVhZCwgc2ltcGxlXG4gICAgICAgIGlmICghdGhpcy5pc0FsaXZlKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5jaGVja1dhbGxzKCk7XG5cbiAgICAgICAgLy8gZG8gbm90IG1vdmUgaWYgc25ha2UgaGFzIG5vIHNlZ21lbnRzXG4gICAgICAgIGNvbnN0IGxhc3RTZWdtZW50ID0gdGhpcy5oZWFkO1xuICAgICAgICBpZiAoIWxhc3RTZWdtZW50KSByZXR1cm47XG5cblxuICAgICAgICBcblxuXG4gICAgICAgIC8vbW92ZSB0aGUgc25ha2UgdGhlIGNvcnJlY3QgYW1vdW50LCBkZXBlbmRpbmcgb24gdGhlIGhlYWQgc2VnbWVudFxuICAgICAgICBpZiAobGFzdFNlZ21lbnQgaW5zdGFuY2VvZiBMaW5lU2VnbWVudCkge1xuICAgICAgICAgICAgY29uc3QgZHggPSBkaXN0YW5jZSAqIE1hdGguY29zKGxhc3RTZWdtZW50LmVuZEFuZ2xlKTtcbiAgICAgICAgICAgIGNvbnN0IGR5ID0gZGlzdGFuY2UgKiBNYXRoLnNpbihsYXN0U2VnbWVudC5lbmRBbmdsZSk7XG5cbiAgICAgICAgICAgIGNvbnN0IG5ld0VuZCA9IG5ldyBWZWN0b3IobGFzdFNlZ21lbnQuZW5kUG9pbnQueCArIGR4LCBsYXN0U2VnbWVudC5lbmRQb2ludC55ICsgZHkpO1xuICAgICAgICAgICAgbGFzdFNlZ21lbnQuZW5kUG9pbnQgPSBuZXdFbmQ7XG5cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsYXN0U2VnbWVudCBpbnN0YW5jZW9mIEFyY1NlZ21lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlRXh0ZW5zaW9uID0gZGlzdGFuY2UgLyBsYXN0U2VnbWVudC5yYWRpdXM7XG5cbiAgICAgICAgICAgIGxhc3RTZWdtZW50LmVuZEFuZ2xlID0gbGFzdFNlZ21lbnQuaXNDb3VudGVyQ2xvY2t3aXNlKCkgPyBsYXN0U2VnbWVudC5lbmRBbmdsZSAtIGFuZ2xlRXh0ZW5zaW9uIDogbGFzdFNlZ21lbnQuZW5kQW5nbGUgKyBhbmdsZUV4dGVuc2lvbjtcblxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvL2FkZCBuZXcgc2VnbWVudCBsYXN0c2VnbWVudC5jcmVhdGVmbGlwcGVkc3RhdGVcbiAgICAgICAgaWYgKGxhc3RTZWdtZW50LmlzQ29sbGlkYWJsZSAmJiB0aGlzLmRpc3RhbmNlVG9DaGFuZ2VPZlN0YXRlIDwgMCkge1xuXG4gICAgICAgICAgICB0aGlzLmRpc3RhbmNlVG9DaGFuZ2VPZlN0YXRlID0gTWF0aC5yYW5kb20oKSAqIDgwICsgMzAgLy8gNDAtOTBcblxuICAgICAgICAgICAgaWYgKGxhc3RTZWdtZW50IGluc3RhbmNlb2YgTGluZVNlZ21lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFNlZ21lbnQobmV3IExpbmVTZWdtZW50KGxhc3RTZWdtZW50LmVuZFBvaW50LCBuZXcgVmVjdG9yKGxhc3RTZWdtZW50LmVuZFBvaW50LngsIGxhc3RTZWdtZW50LmVuZFBvaW50LnkpLCBmYWxzZSwgbGFzdFNlZ21lbnQuZW5kQW5nbGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGxhc3RTZWdtZW50IGluc3RhbmNlb2YgQXJjU2VnbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkU2VnbWVudChuZXcgQXJjU2VnbWVudChsYXN0U2VnbWVudC5jZW50ZXIsIGxhc3RTZWdtZW50LnJhZGl1cywgbGFzdFNlZ21lbnQuZW5kQW5nbGUsIGxhc3RTZWdtZW50LmVuZEFuZ2xlLCBsYXN0U2VnbWVudC5pc0NvdW50ZXJDbG9ja3dpc2UoKSwgZmFsc2UpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFsYXN0U2VnbWVudC5pc0NvbGxpZGFibGUgJiYgdGhpcy5kaXN0YW5jZVRvQ2hhbmdlT2ZTdGF0ZSA8IDApIHtcblxuICAgICAgICAgICAgdGhpcy5kaXN0YW5jZVRvQ2hhbmdlT2ZTdGF0ZSA9IE1hdGgucmFuZG9tKCkgKiA1MDAgKyA4MCAvLyA4MC0zMjBcblxuICAgICAgICAgICAgaWYgKGxhc3RTZWdtZW50IGluc3RhbmNlb2YgTGluZVNlZ21lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFNlZ21lbnQobmV3IExpbmVTZWdtZW50KGxhc3RTZWdtZW50LmVuZFBvaW50LCBuZXcgVmVjdG9yKGxhc3RTZWdtZW50LmVuZFBvaW50LngsIGxhc3RTZWdtZW50LmVuZFBvaW50LnkpLCB0cnVlLCBsYXN0U2VnbWVudC5lbmRBbmdsZSkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChsYXN0U2VnbWVudCBpbnN0YW5jZW9mIEFyY1NlZ21lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFNlZ21lbnQobmV3IEFyY1NlZ21lbnQobGFzdFNlZ21lbnQuY2VudGVyLCBsYXN0U2VnbWVudC5yYWRpdXMsIGxhc3RTZWdtZW50LmVuZEFuZ2xlLCBsYXN0U2VnbWVudC5lbmRBbmdsZSwgbGFzdFNlZ21lbnQuaXNDb3VudGVyQ2xvY2t3aXNlKCksIHRydWUpKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgICAgICAvL3VwZGF0ZSB0aGUgZGlzdGFuY2UgdHJhdmVsbGVkXG4gICAgICAgIHRoaXMuZGlzdGFuY2VUb0NoYW5nZU9mU3RhdGUgLT0gZGlzdGFuY2U7XG4gICAgfVxuXG5raWxsKCkge1xuICAgIGNvbnNvbGUubG9nKFwiU05BS0UgREVBRFwiKVxuICAgIHRoaXMuaXNBbGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuZW1pdHRlciA9IG5ldyBFbWl0dGVyKHRoaXMuaGVhZC5lbmRQb2ludCwgMSwgNywgNCwgJ2NpcmNsZScsIHsgLi4uaGV4VG9SZ2IodGhpcy5jb2xvciksIGE6IDEgfSwgdGhpcy5jYW52YXNDdHgsIHRydWUsIHRydWUsIDcwLCA0KTtcbn1cblxudXBkYXRlRW1pdHRlcihkdDogbnVtYmVyKSB7XG4gICAgaWYgKHRoaXMuZW1pdHRlcikge1xuICAgICAgICB0aGlzLmVtaXR0ZXIudGljayhkdCk7XG4gICAgICAgIHRoaXMuZW1pdHRlci5kcmF3KCk7XG4gICAgfVxufVxuXG5jaGVja1dhbGxzKCkge1xuICAgIGNvbnN0IGxhc3RTZWdtZW50ID0gdGhpcy5oZWFkO1xuICAgIGlmIChsYXN0U2VnbWVudC5lbmRQb2ludC54IDwgMCkge1xuICAgICAgICB0aGlzLmFkZFNlZ21lbnQobGFzdFNlZ21lbnQuZ2V0Q29udGludWluZ1NlZ21lbnQobmV3IFZlY3Rvcih0aGlzLmNhbnZhc0N0eC5jYW52YXMud2lkdGgsIDApKSk7XG4gICAgfSBcbiAgICBlbHNlIGlmIChsYXN0U2VnbWVudC5lbmRQb2ludC54ID4gdGhpcy5jYW52YXNDdHguY2FudmFzLndpZHRoKSB7XG4gICAgICAgIHRoaXMuYWRkU2VnbWVudChsYXN0U2VnbWVudC5nZXRDb250aW51aW5nU2VnbWVudChuZXcgVmVjdG9yKC10aGlzLmNhbnZhc0N0eC5jYW52YXMud2lkdGgsIDApKSk7XG4gICAgfVxuICAgIFxuICAgIGlmIChsYXN0U2VnbWVudC5lbmRQb2ludC55IDwgMCkge1xuICAgICAgICB0aGlzLmFkZFNlZ21lbnQobGFzdFNlZ21lbnQuZ2V0Q29udGludWluZ1NlZ21lbnQobmV3IFZlY3RvcigwLCB0aGlzLmNhbnZhc0N0eC5jYW52YXMuaGVpZ2h0KSkpO1xuICAgIH0gXG4gICAgZWxzZSBpZiAobGFzdFNlZ21lbnQuZW5kUG9pbnQueSA+IHRoaXMuY2FudmFzQ3R4LmNhbnZhcy5oZWlnaHQpIHtcbiAgICAgICAgdGhpcy5hZGRTZWdtZW50KGxhc3RTZWdtZW50LmdldENvbnRpbnVpbmdTZWdtZW50KG5ldyBWZWN0b3IoMCwgLXRoaXMuY2FudmFzQ3R4LmNhbnZhcy5oZWlnaHQpKSk7XG4gICAgfVxuICAgIFxufVxuXG4gICAgXG59IiwiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcInZlY3RvcjJkXCI7XG5pbXBvcnQgQXJjU2VnbWVudCBmcm9tIFwiLi9BcmNTZWdtZW50XCI7XG5pbXBvcnQgeyBkcmF3R3JpZCB9IGZyb20gXCIuL0RyYXdlclwiO1xuaW1wb3J0IElucHV0TWFuYWdlciBmcm9tIFwiLi9JbnB1dE1hbmFnZXJcIjtcbmltcG9ydCBMaW5lU2VnbWVudCBmcm9tIFwiLi9MaW5lU2VnbWVudFwiO1xuaW1wb3J0IFNuYWtlIGZyb20gXCIuL1NuYWtlXCI7XG5pbXBvcnQgRW1pdHRlciBmcm9tIFwiLi9QYXJ0aWNsZVN5c3RlbS9FbWl0dGVyXCI7XG5pbXBvcnQgQ29sbGlzaW9uSGFuZGxlciBmcm9tIFwiLi9Db2xsaXNpb25IYW5kbGVyXCI7XG5cbnZhciBmcHNDb3VudGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5mcHNDb3VudGVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbmZwc0NvdW50ZXIuc3R5bGUudG9wID0gJzEwcHgnO1xuZnBzQ291bnRlci5zdHlsZS5sZWZ0ID0gJzEwcHgnO1xuZnBzQ291bnRlci5zdHlsZS5jb2xvciA9ICdibGFjayc7XG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZwc0NvdW50ZXIpO1xuZXhwb3J0IHZhciBmcHMgPSA2MDtcblxuZXhwb3J0IHZhciBnYW1lQ2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtY2FudmFzJykgIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuZXhwb3J0IHZhciBnYW1lQ2FudmFzQ3R4ID0gZ2FtZUNhbnZhcy5nZXRDb250ZXh0KCcyZCcpITtcblxuZXhwb3J0IHZhciBiYWNrZ3JvdW5kQ2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhY2tncm91bmQtY2FudmFzJykgIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuZXhwb3J0IHZhciBiYWNrZ3JvdW5kQ2FudmFzQ3R4ID0gYmFja2dyb3VuZENhbnZhcy5nZXRDb250ZXh0KCcyZCcpITtcblxuYmFja2dyb3VuZENhbnZhcyEud2lkdGggPSBiYWNrZ3JvdW5kQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuYmFja2dyb3VuZENhbnZhcyEuaGVpZ2h0ID0gYmFja2dyb3VuZENhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG5nYW1lQ2FudmFzIS53aWR0aCA9IGdhbWVDYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG5nYW1lQ2FudmFzIS5oZWlnaHQgPSBnYW1lQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbmV4cG9ydCB2YXIgZ3JpZFNpemUgPSA2MDtcblxuZnVuY3Rpb24gdXBkYXRlQ2FudmFzU2l6ZSgpIHtcbiAgICBnYW1lQ2FudmFzLndpZHRoID0gZ2FtZUNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICBnYW1lQ2FudmFzLmhlaWdodCA9IGdhbWVDYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuICAgIGJhY2tncm91bmRDYW52YXMud2lkdGggPSBiYWNrZ3JvdW5kQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgIGJhY2tncm91bmRDYW52YXMuaGVpZ2h0ID0gYmFja2dyb3VuZENhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgZHJhd0dyaWQoKTtcbiAgfVxuXG5mdW5jdGlvbiBhbmltYXRlKCkge1xuICAgIHZhciBtdWx0ID0gZnBzIC8gNjA7XG4gICAgZnJhbWVDb3VudCsrO1xuICAgIGlmIChmcmFtZUNvdW50ICUgMTAgPT09IDApIHtcbiAgICAgICAgZnBzID0gY2FsY3VsYXRlRlBTKCk7XG4gICAgICAgIGZwc0NvdW50ZXIuaW5uZXJUZXh0ID0gYEZQUzogJHtmcHN9YDtcbiAgICB9XG4gICAgZ2FtZUNhbnZhc0N0eC5jbGVhclJlY3QoMCwgMCwgZ2FtZUNhbnZhcy53aWR0aCwgZ2FtZUNhbnZhcy5oZWlnaHQpO1xuXG4gICAgc25ha2VzLmZvckVhY2goc25ha2UgPT4ge1xuICAgICAgICBzbmFrZS5kcmF3KCk7XG4gICAgICAgIGlmKHBlcmZvcm1hbmNlLm5vdygpID4gMjAwMCl7XG4gICAgICAgICAgICBzbmFrZS5tb3ZlKChwZXJmb3JtYW5jZS5ub3coKS8xMCAtIGxhc3RUaW1lKS8yKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgc25ha2UudXBkYXRlRW1pdHRlcigwLjMpO1xuICAgIH0pO1xuICAgIGNvbGxpc2lvbkhhbmRsZXIuY2hlY2tDb2xsaXNpb25zKCk7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xuICAgIFxuICAgIC8vIGVtaXR0ZXIudGljaygwLjMpO1xuICAgIC8vIGVtaXR0ZXIuZHJhdygpO1xufVxudmFyIGZyYW1lQ291bnQgPSAwO1xudmFyIGxhc3RUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLyAxMDtcbmZ1bmN0aW9uIGNhbGN1bGF0ZUZQUygpIHtcbiAgICB2YXIgY3VycmVudFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAvIDEwO1xuICAgIHZhciB0aW1lRGlmZiA9IGN1cnJlbnRUaW1lIC0gbGFzdFRpbWU7XG4gICAgdmFyIGZwcyA9IE1hdGgucm91bmQoMTAwMCAvIHRpbWVEaWZmKTtcbiAgICBsYXN0VGltZSA9IGN1cnJlbnRUaW1lO1xuICAgIHJldHVybiBmcHM7XG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHVwZGF0ZUNhbnZhc1NpemUpO1xuZHJhd0dyaWQoKTtcbmNvbnN0IHNuYWtlczogU25ha2VbXSA9IFtdXG5jb25zdCBpbnB1dE1hbmFnZXJzOiBJbnB1dE1hbmFnZXJbXSA9IFtdXG5jb25zdCBjb2xvcnM6IHN0cmluZ1tdID0gW1wiI2VmODg4OFwiLCBcIiNmZjAwMDBcIiwgXCIjMDBhYWJiXCIsIFwiIzAwMDBlZVwiXVxuY29uc3Qga2V5bWFwczogc3RyaW5nW11bXSA9W1snQScsJ0QnXSxbJ0YnLCdIJ10sWydKJywnTCddLCBbJzgnLCcwJ11dIFxuZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspe1xuICAgIGxldCBzdGFydFBvcyA9IG5ldyBWZWN0b3IoTWF0aC5yYW5kb20oKSogMTgwMCwgTWF0aC5yYW5kb20oKSo5MDApO1xuICAgIHNuYWtlcy5wdXNoKG5ldyBTbmFrZShuZXcgTGluZVNlZ21lbnQoc3RhcnRQb3MsIHN0YXJ0UG9zLmFkZChuZXcgVmVjdG9yKDEwLDEwKSksIHRydWUgLE1hdGgucmFuZG9tKCkqIDIqIE1hdGguUEkpLCBjb2xvcnNbaV0sIGdhbWVDYW52YXNDdHgpKTtcbiAgICBpbnB1dE1hbmFnZXJzLnB1c2gobmV3IElucHV0TWFuYWdlcihzbmFrZXNbaV0sIGtleW1hcHNbaV1bMF0sIGtleW1hcHNbaV1bMV0pKVxufVxuXG5jb25zdCBjb2xsaXNpb25IYW5kbGVyID0gbmV3IENvbGxpc2lvbkhhbmRsZXIoc25ha2VzKVxuLy8gY29uc3QgZW1pdHRlciA9IG5ldyBFbWl0dGVyKG5ldyBWZWN0b3IoZ2FtZUNhbnZhcy53aWR0aC8yLCBnYW1lQ2FudmFzLmhlaWdodC8yKSwgMiwgMTAsIDUsICdjaXJjbGUnLCB7cjoyNTUsIGc6MCwgYjoyNTUsIGE6MC41fSwgZ2FtZUNhbnZhc0N0eCwgdHJ1ZSwgdHJ1ZSwgMjAwKVxuXG4vLyBzbmFrZS5hZGRTZWdtZW50KG5ldyBMaW5lU2VnbWVudChuZXcgVmVjdG9yKDEwMCwgMTAwKSwgbmV3IFZlY3RvcigyMDAsIDIwMCkpKTtcbi8vIHNuYWtlLmFkZFNlZ21lbnQobmV3IExpbmVTZWdtZW50KG5ldyBWZWN0b3IoMTAwLCAxMDApLCBuZXcgVmVjdG9yKDIwMCwgMjAwKSkpO1xuLy8gc25ha2UuYWRkU2VnbWVudChuZXcgQXJjU2VnbWVudChuZXcgVmVjdG9yKDEwMCwgMTAwKSwgNTAsIDAuNSwgMSkpO1xuLy8gcGxheWVyT25lU25ha2UuZHJhdygpO1xuLy8gcGxheWVyVHdvU25ha2UuZHJhdygpO1xuXG5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vKipcbiAqIFRoZXNlIHZhbHVlcyBhcmUgdXNlZCBieSB0aGUgYEFic3RyYWN0VmVjdG9yLnJvdW5kYCBtZXRob2QgdG8gaW5jcmVhc2VcbiAqIHBlcmZvcm1hbmNlIHZzLiB1c2luZyAgTnVtYmVyLnRvRml4ZWQuXG4gKi9cbnZhciBwcmVjaXNpb24gPSBbXG4gICAgMSxcbiAgICAxMCxcbiAgICAxMDAsXG4gICAgMTAwMCxcbiAgICAxMDAwMCxcbiAgICAxMDAwMDAsXG4gICAgMTAwMDAwMCxcbiAgICAxMDAwMDAwMCxcbiAgICAxMDAwMDAwMDAsXG4gICAgMTAwMDAwMDAwMCxcbiAgICAxMDAwMDAwMDAwMFxuXTtcbi8qKlxuICogVGhlIGNsYXNzIHRoYXQgYWxsIG90aGVyIHZlY3RvciByZXByZXNlbnRhdGlvbnMgYXJlIGRlcml2ZWQgZnJvbS5cbiAqXG4gKiBDb250YWlucyB0aGUgY29yZSBpbXBsZW1lbnRhdGlvbiBmb3IgYWxsIG1ldGhvZHMgdGhhdCB3aWxsIGJlIGV4cG9zZWQgYnlcbiAqIHZlY3RvciBpbnN0YW5jZXMuXG4gKlxuICogRXhhbXBsZSBvZiBjcmVhdGluZyBhIGN1c3RvbSBpbXBsZW1lbnRhdGlvbjpcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgQWJzdHJhY3RWZWN0b3IgfSBmcm9tIFwiLi9BYnN0cmFjdFZlY3RvclwiXG4gKlxuICogZXhwb3J0IGNsYXNzIE15Q3VzdG9tVmVjdG9yIGV4dGVuZHMgQWJzdHJhY3RWZWN0b3Ige1xuICogIGNvbnN0cnVjdG9yICh4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICogICAgc3VwZXIoQ3VzdG9tVmVjdG9yVHlwZSlcbiAqICB9XG4gKiB9XG4gKiBgYGBcbiAqL1xudmFyIEFic3RyYWN0VmVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFic3RyYWN0VmVjdG9yKGN0b3IpIHtcbiAgICAgICAgdGhpcy5jdG9yID0gY3RvcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGJvdGggeCBhbmQgeSBheGlzIHZhbHVlXG4gICAgICogQHBhcmFtIHggICBOZXcgeCB2YWxcbiAgICAgKiBAcGFyYW0geSAgIE5ldyB5IHZhbFxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5zZXRBeGVzID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgZm9yIHggdGhlIGF4aXMgdmFsdWVcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHRlciBmb3IgeCBheGlzIHZhbHVlXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnNldFggPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHRlciBmb3IgeSBheGlzIHZhbHVlXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmdldFkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgZm9yIHkgYXhpcy5cbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuc2V0WSA9IGZ1bmN0aW9uICh5KSB7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSB2ZWN0b3IgYXMgYSBmb3JtYXR0ZWQgc3RyaW5nLCBlLmcgXCIoMCwgNClcIlxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChyb3VuZCkge1xuICAgICAgICBpZiAocm91bmQgPT09IHZvaWQgMCkgeyByb3VuZCA9IGZhbHNlOyB9XG4gICAgICAgIGlmIChyb3VuZCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiKFwiICsgTWF0aC5yb3VuZCh0aGlzLngpICsgXCIsIFwiICsgTWF0aC5yb3VuZCh0aGlzLnkpICsgXCIpXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiKFwiICsgdGhpcy54ICsgXCIsIFwiICsgdGhpcy55ICsgXCIpXCI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYW4gQXJyYXkgY29udGFpbmluZyB0aGUgdmVjdG9yIGF4ZXMsIGUuZyBbMCwgNF1cbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueV07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYW4gT2JqZWN0IGNvbnRhaW5pbmcgdGhlIHZlY3RvciBheGVzLCBlLmcgeyB4OiAwLCB5OiA0IH1cbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUudG9PYmplY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiB0aGlzLngsXG4gICAgICAgICAgICB5OiB0aGlzLnlcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZCB0aGUgcHJvdmlkZWQgdmVjdG9yIHRvIHRoaXMgb25lXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh2ZWMpIHtcbiAgICAgICAgdGhpcy54ICs9IHZlYy54O1xuICAgICAgICB0aGlzLnkgKz0gdmVjLnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU3VidHJhY3QgdGhlIHByb3ZpZGVkIHZlY3RvciBmcm9tIHRoaXMgb25lXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnN1YnRyYWN0ID0gZnVuY3Rpb24gKHZlYykge1xuICAgICAgICB0aGlzLnggLT0gdmVjLng7XG4gICAgICAgIHRoaXMueSAtPSB2ZWMueTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiB0aGUgcHJvdmlkZWQgdmVjdG9yIGVxdWFsIHRvIHRoaXMgb25lXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uICh2ZWMpIHtcbiAgICAgICAgcmV0dXJuIHZlYy54ID09PSB0aGlzLnggJiYgdmVjLnkgPT09IHRoaXMueTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE11bHRpcGx5IHRoaXMgdmVjdG9yIGJ5IHRoZSBwcm92aWRlZCB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubXVsdGlwbHlCeVZlY3RvciA9IGZ1bmN0aW9uICh2ZWMpIHtcbiAgICAgICAgdGhpcy54ICo9IHZlYy54O1xuICAgICAgICB0aGlzLnkgKj0gdmVjLnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIHZlY3RvclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5tdWxWID0gZnVuY3Rpb24gKHZlYykge1xuICAgICAgICByZXR1cm4gdGhpcy5tdWx0aXBseUJ5VmVjdG9yKHZlYyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXZpZGUgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIHZlY3RvclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5kaXZpZGVCeVZlY3RvciA9IGZ1bmN0aW9uICh2ZWMpIHtcbiAgICAgICAgdGhpcy54IC89IHZlYy54O1xuICAgICAgICB0aGlzLnkgLz0gdmVjLnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGl2aWRlIHRoaXMgdmVjdG9yIGJ5IHRoZSBwcm92aWRlZCB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUuZGl2ViA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpdmlkZUJ5VmVjdG9yKHYpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIG51bWJlclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5tdWx0aXBseUJ5U2NhbGFyID0gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdGhpcy54ICo9IG47XG4gICAgICAgIHRoaXMueSAqPSBuO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE11bHRpcGx5IHRoaXMgdmVjdG9yIGJ5IHRoZSBwcm92aWRlZCBudW1iZXJcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubXVsUyA9IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11bHRpcGx5QnlTY2FsYXIobik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXZpdmUgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIG51bWJlclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5kaXZpZGVCeVNjYWxhciA9IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIHRoaXMueCAvPSBuO1xuICAgICAgICB0aGlzLnkgLz0gbjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXZpdmUgdGhpcyB2ZWN0b3IgYnkgdGhlIHByb3ZpZGVkIG51bWJlclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5kaXZTID0gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGl2aWRlQnlTY2FsYXIobik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBOb3JtYWxpc2UgdGhpcyB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubm9ybWFsaXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXZpZGVCeVNjYWxhcih0aGlzLm1hZ25pdHVkZSgpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZvciBBbWVyaWNhbiBzcGVsbGluZy4gU2FtZSBhcyB1bml0L25vcm1hbGlzZSBmdW5jdGlvblxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGlzZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhlIHNhbWUgYXMgbm9ybWFsaXNlIGFuZCBub3JtYWxpemVcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUudW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXNlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtYWduaXR1ZGUgKGxlbmd0aCkgb2YgdGhpcyB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubWFnbml0dWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgeCA9IHRoaXMueDtcbiAgICAgICAgdmFyIHkgPSB0aGlzLnk7XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtYWduaXR1ZGUgKGxlbmd0aCkgb2YgdGhpcyB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYWduaXR1ZGUoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHNxdXJlZCBsZW5ndGggb2YgdGhpcyB2ZWN0b3JcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUubGVuZ3RoU3EgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB4ID0gdGhpcy54O1xuICAgICAgICB2YXIgeSA9IHRoaXMueTtcbiAgICAgICAgcmV0dXJuIHggKiB4ICsgeSAqIHk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBkb3QgcHJvZHVjdCBvZiB0aGlzIHZlY3RvciBieSBhbm90aGVyXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmRvdCA9IGZ1bmN0aW9uICh2ZWMpIHtcbiAgICAgICAgcmV0dXJuIHZlYy54ICogdGhpcy54ICsgdmVjLnkgKiB0aGlzLnk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHRoaXMgdmVjdG9yIGJ5IGFub3RoZXIuXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmNyb3NzID0gZnVuY3Rpb24gKHZlYykge1xuICAgICAgICByZXR1cm4gdGhpcy54ICogdmVjLnkgLSB0aGlzLnkgKiB2ZWMueDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldmVyc2VzIHRoaXMgdmVjdG9yIGkuZSBtdWx0aXBsaWVzIGl0IGJ5IC0xXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnJldmVyc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMueCA9IC10aGlzLng7XG4gICAgICAgIHRoaXMueSA9IC10aGlzLnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2ZWN0b3IgYXhlcyB2YWx1ZXMgdG8gYWJzb2x1dGUgdmFsdWVzXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmFicyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy54ID0gTWF0aC5hYnModGhpcy54KTtcbiAgICAgICAgdGhpcy55ID0gTWF0aC5hYnModGhpcy55KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBaZXJvZXMgdGhlIHZlY3RvciBpLmUgc2V0cyBhbGwgYXhlcyB0byAwXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnplcm8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMueCA9IHRoaXMueSA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlclxuICAgICAqL1xuICAgIEFic3RyYWN0VmVjdG9yLnByb3RvdHlwZS5kaXN0YW5jZSA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHZhciB4ID0gdGhpcy54IC0gdi54O1xuICAgICAgICB2YXIgeSA9IHRoaXMueSAtIHYueTtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCh4ICogeCArIHkgKiB5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJvdGF0ZXMgdGhlIHZldG9yIGJ5IHByb3ZpZGVkIHJhZGlhbnNcbiAgICAgKi9cbiAgICBBYnN0cmFjdFZlY3Rvci5wcm90b3R5cGUucm90YXRlID0gZnVuY3Rpb24gKHJhZHMpIHtcbiAgICAgICAgdmFyIGNvcyA9IE1hdGguY29zKHJhZHMpO1xuICAgICAgICB2YXIgc2luID0gTWF0aC5zaW4ocmFkcyk7XG4gICAgICAgIHZhciBveCA9IHRoaXMueDtcbiAgICAgICAgdmFyIG95ID0gdGhpcy55O1xuICAgICAgICB0aGlzLnggPSBveCAqIGNvcyAtIG95ICogc2luO1xuICAgICAgICB0aGlzLnkgPSBveCAqIHNpbiArIG95ICogY29zO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJvdW5kcyB0aGlzIHZlY3RvciB0byBuIGRlY2ltYWwgcGxhY2VzXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLnJvdW5kID0gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgaWYgKG4gPT09IHZvaWQgMCkgeyBuID0gMjsgfVxuICAgICAgICB2YXIgcCA9IHByZWNpc2lvbltuXTtcbiAgICAgICAgLy8gVGhpcyBwZXJmb3JtcyB3YWFheSBiZXR0ZXIgdGhhbiB0b0ZpeGVkIGFuZCBnaXZlIEZsb2F0MzIgdGhlIGVkZ2UgYWdhaW4uXG4gICAgICAgIC8vIGh0dHA6Ly93d3cuZHluYW1pY2d1cnUuY29tL2phdmFzY3JpcHQvcm91bmQtbnVtYmVycy13aXRoLXByZWNpc2lvbi9cbiAgICAgICAgdGhpcy54ID0gKCgwLjUgKyB0aGlzLnggKiBwKSA8PCAwKSAvIHA7XG4gICAgICAgIHRoaXMueSA9ICgoMC41ICsgdGhpcy55ICogcCkgPDwgMCkgLyBwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBjb3B5IG9mIHRoaXMgdmVjdG9yXG4gICAgICovXG4gICAgQWJzdHJhY3RWZWN0b3IucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMuY3Rvcih0aGlzLngsIHRoaXMueSk7XG4gICAgfTtcbiAgICByZXR1cm4gQWJzdHJhY3RWZWN0b3I7XG59KCkpO1xuZXhwb3J0cy5BYnN0cmFjdFZlY3RvciA9IEFic3RyYWN0VmVjdG9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QWJzdHJhY3RWZWN0b3IuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBBYnN0cmFjdFZlY3Rvcl8xID0gcmVxdWlyZShcIi4vQWJzdHJhY3RWZWN0b3JcIik7XG4vKipcbiAqIEEgdmVjdG9yIHJlcHJlc2VudGF0aW9uIHRoYXQgc3RvcmVzIHRoZSBheGVzIGluIGFuIEFycmF5XG4gKlxuICogYGBgXG4gKiBjb25zdCB2ID0gbmV3IFZlYzJELkFycmF5VmVjdG9yKDIsIDUpXG4gKiBgYGBcbiAqL1xudmFyIEFycmF5VmVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBcnJheVZlY3RvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBcnJheVZlY3Rvcih4LCB5KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIEFycmF5VmVjdG9yKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5heGVzID0gW3gsIHldO1xuICAgICAgICBfdGhpcy5jdG9yID0gQXJyYXlWZWN0b3I7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5VmVjdG9yLnByb3RvdHlwZSwgXCJ4XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5heGVzWzBdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICB0aGlzLmF4ZXNbMF0gPSB4O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlWZWN0b3IucHJvdG90eXBlLCBcInlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmF4ZXNbMV07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHkpIHtcbiAgICAgICAgICAgIHRoaXMuYXhlc1sxXSA9IHk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBBcnJheVZlY3Rvcjtcbn0oQWJzdHJhY3RWZWN0b3JfMS5BYnN0cmFjdFZlY3RvcikpO1xuZXhwb3J0cy5BcnJheVZlY3RvciA9IEFycmF5VmVjdG9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXJyYXlWZWN0b3IuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBBYnN0cmFjdFZlY3Rvcl8xID0gcmVxdWlyZShcIi4vQWJzdHJhY3RWZWN0b3JcIik7XG4vKipcbiAqIEEgdmVjdG9yIHJlcHJlc2VudGF0aW9uIHRoYXQgc3RvcmVzIHRoZSBheGVzIGluIGEgRmxvYXQzMkFycmF5XG4gKlxuICogYGBgXG4gKiBjb25zdCB2ID0gbmV3IFZlYzJELkZsb2F0MzJWZWN0b3IoMiwgNSlcbiAqIGBgYFxuICovXG52YXIgRmxvYXQzMlZlY3RvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRmxvYXQzMlZlY3RvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBGbG9hdDMyVmVjdG9yKHgsIHkpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgRmxvYXQzMlZlY3RvcikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuYXhlcyA9IG5ldyBGbG9hdDMyQXJyYXkoMik7XG4gICAgICAgIF90aGlzLmF4ZXNbMF0gPSB4O1xuICAgICAgICBfdGhpcy5heGVzWzFdID0geTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmxvYXQzMlZlY3Rvci5wcm90b3R5cGUsIFwieFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXhlc1swXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgdGhpcy5heGVzWzBdID0geDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZsb2F0MzJWZWN0b3IucHJvdG90eXBlLCBcInlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmF4ZXNbMV07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHkpIHtcbiAgICAgICAgICAgIHRoaXMuYXhlc1sxXSA9IHk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBGbG9hdDMyVmVjdG9yO1xufShBYnN0cmFjdFZlY3Rvcl8xLkFic3RyYWN0VmVjdG9yKSk7XG5leHBvcnRzLkZsb2F0MzJWZWN0b3IgPSBGbG9hdDMyVmVjdG9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RmxvYXQzMlZlY3Rvci5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG59XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9BYnN0cmFjdFZlY3RvclwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9BcnJheVZlY3RvclwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9GbG9hdDMyVmVjdG9yXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL1ZlY3RvclwiKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1WZWMyRC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEFic3RyYWN0VmVjdG9yXzEgPSByZXF1aXJlKFwiLi9BYnN0cmFjdFZlY3RvclwiKTtcbi8qKlxuICogQSB2ZWN0b3IgcmVwcmVzZW50YXRpb24gdGhhdCBzdG9yZXMgdGhlIGF4ZXMgYXMgcGFydCBvZiB0aGUgaW5zdGFuY2UgaXRzZWxmXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IHYgPSBuZXcgVmVjMkQuVmVjdG9yKDIsIDUpXG4gKiBgYGBcbiAqL1xudmFyIFZlY3RvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVmVjdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFZlY3Rvcih4LCB5KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFZlY3RvcikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuX3ggPSB4O1xuICAgICAgICBfdGhpcy5feSA9IHk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlY3Rvci5wcm90b3R5cGUsIFwieFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3g7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHRoaXMuX3ggPSB4O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVmVjdG9yLnByb3RvdHlwZSwgXCJ5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5feTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoeSkge1xuICAgICAgICAgICAgdGhpcy5feSA9IHk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBWZWN0b3I7XG59KEFic3RyYWN0VmVjdG9yXzEuQWJzdHJhY3RWZWN0b3IpKTtcbmV4cG9ydHMuVmVjdG9yID0gVmVjdG9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VmVjdG9yLmpzLm1hcCIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9pbmRleC50c1wiKTtcbiJdLCJuYW1lcyI6WyJjZW50ZXIiLCJyYWRpdXMiLCJzdGFydEFuZ2xlIiwiZW5kQW5nbGUiLCJjb3VudGVyQ2xvY2t3aXNlIiwiaXNDb2xsaWRhYmxlIiwiZHJhdyIsImNvbnRleHQiLCJjb2xvciIsImxpbmVDYXAiLCJzdHJva2VTdHlsZSIsInRoaXMiLCJiZWdpblBhdGgiLCJhcmMiLCJ4IiwieSIsInN0cm9rZSIsImNsb3NlUGF0aCIsImRyYXdEZWJ1ZyIsInRhbmdlbnRfYW5nbGUiLCJNYXRoIiwiUEkiLCJkcmF3RG90IiwiZHJhd0Fycm93IiwiZW5kUG9pbnQiLCJjb3MiLCJzaW4iLCJkcmF3QXJjIiwiaXNDb3VudGVyQ2xvY2t3aXNlIiwiZ2V0Q29udGludWluZ1NlZ21lbnQiLCJ0cmFuc2Zvcm0iLCJBcmNTZWdtZW50IiwiY2xvbmUiLCJhZGQiLCJzbmFrZXMiLCJjaGVja0NvbGxpc2lvbnMiLCJmb3JFYWNoIiwic25ha2UxIiwiaXNBbGl2ZSIsImhlYWQiLCJhYnMiLCJraWxsIiwiY29uc29sZSIsImxvZyIsInNuYWtlMiIsInNlZ21lbnRzIiwic2VnbWVudCIsInNsaWNlIiwicG9wIiwiaXNQb2ludE9uTGluZSIsImlzUG9pbnRPbkFyYyIsImxpbmUiLCJwb2ludCIsImVwc2lsb24iLCJsaW5lTGVuZ3RoIiwibGVuZ3RoIiwiZDEiLCJkaXN0YW5jZSIsInN0YXJ0UG9pbnQiLCJkMiIsImFuZ2xlIiwiYXRhbjIiLCJub3JtYWxpemVBbmdsZSIsIm5vcm1hbGl6ZWQiLCJub3JtYWxpemVkQW5nbGUiLCJub3JtYWxpemVkU3RhcnRBbmdsZSIsIm5vcm1hbGl6ZWRFbmRBbmdsZSIsImRyYXdHcmlkIiwiYmFja2dyb3VuZENhbnZhc0N0eCIsImNsZWFyUmVjdCIsImJhY2tncm91bmRDYW52YXMiLCJ3aWR0aCIsImhlaWdodCIsImxpbmVXaWR0aCIsImdyaWRTaXplIiwibW92ZVRvIiwibGluZVRvIiwiZG90WCIsImRvdFkiLCJkb3RTaXplIiwiZmlsbFN0eWxlIiwiZmlsbCIsImN0eCIsImZyb20iLCJ0byIsImhlYWRMZW5ndGgiLCJuZXdfdG8iLCJWZWN0b3IiLCJzbmFrZSIsImxlZnRLZXkiLCJyaWdodEtleSIsImtleU1hcCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbktleURvd24iLCJiaW5kIiwib25LZXlVcCIsImV2ZW50Iiwia2V5IiwidG9VcHBlckNhc2UiLCJ0YW5nZW50QW5nbGUiLCJhZGRTZWdtZW50IiwidHVyblJhZGl1cyIsImRpc3Bvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic3RhcnQiLCJlbmQiLCJjYWxjRW5kQW5nbGUiLCJhdGFuIiwic3FydCIsInRyYW5zZm9ybWVkRW5kcG9pbnQiLCJMaW5lU2VnbWVudCIsInBvc2l0aW9uIiwiZW1pdEludGVydmFsIiwic2l6ZSIsInNwZWVkIiwic2hhcGUiLCJjYW52YXNDdHgiLCJmYWRlQ29sb3IiLCJmYWRlU2l6ZSIsImFnZSIsImVtaXRUaW1lTWlsbGlzIiwiYWxpdmVQYXJ0aWNsZXMiLCJ0aWNrcyIsImVtaXRUaW1lIiwicGFydGljbGVNYXhBZ2UiLCJ0aWNrIiwiZHQiLCJwdXNoIiwiZ2V0UmFuZG9tRGlyZWN0aW9uIiwicGFydGljbGUiLCJmaWx0ZXIiLCJ2ZWxvY2l0eSIsImNvbG9yRmFkZUFtb3VudCIsImEiLCJzaXplRmFkZUFtb3VudCIsIm11bHRpcGx5QnlTY2FsYXIiLCJyIiwiZyIsImIiLCJmaWxsUmVjdCIsInJhbmRvbSIsImhleFRvUmdiIiwiaGV4IiwicmVzdWx0IiwiZXhlYyIsInBhcnNlSW50Iiwic3RhcnRQb3MiLCJlbWl0dGVyIiwiZGlzdGFuY2VUb0NoYW5nZU9mU3RhdGUiLCJpbmRleCIsIm1vdmUiLCJjaGVja1dhbGxzIiwibGFzdFNlZ21lbnQiLCJkeCIsImR5IiwibmV3RW5kIiwiYW5nbGVFeHRlbnNpb24iLCJ1cGRhdGVFbWl0dGVyIiwiY2FudmFzIiwiZnBzQ291bnRlciIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwidG9wIiwibGVmdCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImZwcyIsImdhbWVDYW52YXMiLCJnZXRFbGVtZW50QnlJZCIsImdhbWVDYW52YXNDdHgiLCJnZXRDb250ZXh0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZnJhbWVDb3VudCIsImxhc3RUaW1lIiwicGVyZm9ybWFuY2UiLCJub3ciLCJpbnB1dE1hbmFnZXJzIiwiY29sb3JzIiwia2V5bWFwcyIsImkiLCJjb2xsaXNpb25IYW5kbGVyIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYW5pbWF0ZSIsImN1cnJlbnRUaW1lIiwidGltZURpZmYiLCJyb3VuZCIsImNhbGN1bGF0ZUZQUyIsImlubmVyVGV4dCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwicHJlY2lzaW9uIiwiQWJzdHJhY3RWZWN0b3IiLCJjdG9yIiwicHJvdG90eXBlIiwic2V0QXhlcyIsImdldFgiLCJzZXRYIiwiZ2V0WSIsInNldFkiLCJ0b1N0cmluZyIsInRvQXJyYXkiLCJ0b09iamVjdCIsInZlYyIsInN1YnRyYWN0IiwiZXF1YWxzIiwibXVsdGlwbHlCeVZlY3RvciIsIm11bFYiLCJkaXZpZGVCeVZlY3RvciIsImRpdlYiLCJ2IiwibiIsIm11bFMiLCJkaXZpZGVCeVNjYWxhciIsImRpdlMiLCJub3JtYWxpc2UiLCJtYWduaXR1ZGUiLCJub3JtYWxpemUiLCJ1bml0IiwibGVuZ3RoU3EiLCJkb3QiLCJjcm9zcyIsInJldmVyc2UiLCJ6ZXJvIiwicm90YXRlIiwicmFkcyIsIm94Iiwib3kiLCJwIiwiZXh0ZW5kU3RhdGljcyIsIl9fZXh0ZW5kcyIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJkIiwiaGFzT3duUHJvcGVydHkiLCJfXyIsImNvbnN0cnVjdG9yIiwiY3JlYXRlIiwiQXJyYXlWZWN0b3IiLCJfc3VwZXIiLCJfdGhpcyIsImNhbGwiLCJheGVzIiwiZ2V0Iiwic2V0IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIkZsb2F0MzJWZWN0b3IiLCJGbG9hdDMyQXJyYXkiLCJfX2V4cG9ydCIsIm0iLCJfeCIsIl95IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkZWZpbml0aW9uIiwibyIsIm9iaiIsInByb3AiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyJdLCJzb3VyY2VSb290IjoiIn0=